(()=>{"use strict";var t,e,i,n={133764:(t,e,i)=>{i.d(e,{Stickers:()=>o});i(59357);var n=i(229804),a={},r=(t,e,i,n)=>{delete a[e],1===n?Emoji.favorite.addFavoriteSticker(t,e,i):-1===n&&Emoji.favorite.deleteFavoriteSticker(t,e,i)};var o={toggleFavorite:function(t,e,i){if(e&&e.stopPropagation(),!hasClass(t,"on")&&Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers.length>=Emoji.favoriteLimit&&!Emoji.favoriteLimitNoticed){var n=langStr(getLang("purchases_stickers_favorite_limit_notice"),"%s",Emoji.favoriteLimit);return setTimeout(window.showFastBox(getLang("global_error"),n).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0,!1}var o=attr(t,"data-sticker-id"),s=attr(t,"data-hash");return!(!o||!s)&&(!a[o]&&(a[o]=1,toggleClass(t,"on"),void ajax.post("/stickers.php",{act:"toggle_favorite",sticker_id:o,hash:s},{onDone:r.pbind(i,o,t)})))},getStickerUrl:function(t,e){var i={id:t,size:e};if(window.isMVK){var a=String(e);return n.colorScheme.isDarkScheme()&&(a=a.replace(/b$/,"")+"b"),window.store.stickers&&rs(window.store.stickers.url_template,{id:t,size:a})}return getTemplate("stickers_sticker_url",i)}}},457865:(t,e,i)=>{i.d(e,{StickersAnimation:()=>n});i(66108),i(296253);var n=function(){var t,e,i,a=!1,r=!1,o={},s={},c={},l={};function d(t){var e=v(t),i=1;if(e){hasClass(t,"animation_play")||(hide(geByClass1("sticker_img",t)),addClass(t,"animation_play")),e.play();var n=attr(t,"data-loop-count");n=parseInt(n),isNaN(n)&&(n=3),-1!==n&&(!e._cbs.loopComplete||e._cbs.loopComplete&&0===e._cbs.loopComplete.length)&&e.addEventListener("loopComplete",(function a(r){i++;var o=!0;n>=i&&(o=!1),o&&(f(t,!1),""!==e._cbs.loopComplete&&e.removeEventListener("loopComplete",a),e.stop())}))}}function u(t){var e=attr(t,"data-uid");return e||(e=attr(t,"data-uid",Math.random().toString(32).substr(2))),e}function f(t,e){l[u(t)]=e}function v(t){var e=attr(t,"data-uniq-id");if(!geByClass1("svg_sticker_animation",t))return!1;var i=s[e];return i||!1}function p(t,e){var n=v(t);if(n)"function"==typeof e&&e(n);else{var a=attr(t,"data-uniq-id");if(!l[u(t)]){f(t,!0);var r=attr(t,"data-animation-path"),c=attr(t,"data-sticker-id"),d=!1;if(c&&(d=(o[c]||r)&&g(t)),d){var p=attr(t,"data-animation-class")||"",m={container:t,renderer:"svg",loop:!0,autoplay:!1,name:a,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:`svg_sticker_animation ${p}`}};o[c]?m.animationData=o[c]:m.path=r;var k=geByClass1("svg_sticker_animation",t);if(k&&re(k),n=i.loadAnimation(m),!o[c])return void n.addEventListener("data_ready",(function(){o[c]=n.animationData,s[a]=n,"function"==typeof e&&e(n)}))}"function"==typeof e&&(s[a]=n,"function"==typeof e&&e(n))}}}function m(){return e().then((t=>(i=t,t)))}return{init(t){e=t.animatorLoader},checkSettingsAndLoadInWeb:function(t){if(StickersSettings.getAutoplay()){var e=ge("fc_msg"+t),i=geByClass1("sticker_animation",e);n.loadAndPlaySticker(i)}},checkSettingsAndLoad:function(t){if(StickersSettings.getAutoplay()){var e=$(`.msg_id_${t} .sticker_animation`);n.loadAndPlaySticker(e)}},loadStickerInMvkIMAndPlay:function(t,e){var i="_msg"+t;e&&(i="msg_id_"+t);var a=geByClass1("sticker_animation",geByClass1(i));n.loadAndPlayStickerWithTimer(a,500)},loadAutoplayAnimationStickers:function(t){if(i){if(t){if(r)return;r=!0}if(!a){a=!0;var e=geByClass("sticker_animation_autoplay");e&&each(e,(function(t,e){p(e,(function(){d(e)}))})),a=!1}}else m().then((()=>{n.loadAutoplayAnimationStickers(t)}))},loadAndPlaySticker:function(t){t&&(i?requestAnimationFrame((()=>{p(t,(function(){d(t)}))})):m().then((()=>{n.loadAndPlaySticker(t)})))},loadAndPlayStickerWithTimer:function(t,e){if(t&&!c[t]){e||(e=1e3);var i=ge(t);hasClass(i,"sticker_animation_disabled_timer")||(c[t]=setTimeout((function(){!i&&(i=ge(t),hasClass(i,"sticker_animation_disabled_timer"))||(n.loadAndPlaySticker(i),clearTimeout(c[t]),c[t]=!1)}),e))}},reloadStickers:function(){s={}},touchStartSticker:function(e){e.addEventListener("contextmenu",n.preventContextMenu,!1),t=setTimeout((function(){n.loadAndPlaySticker(e)}),500)},touchEndSticker:function(){t&&clearTimeout(t)},preventContextMenu:function(t){t.preventDefault(),t.stopPropagation()}};function g(t){var e=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom;return e<window.innerHeight&&i>=0&&isVisible(t)}}()},457551:(t,e,i)=>{i.d(e,{StickersSettings:()=>n});var n={autoplay:0,setAutoplay:function(t){this.autoplay=t},getAutoplay:function(){return n.autoplay&&!n.isPreventAutoplayByCalls()},isPreventAutoplayByCalls:function(){return window.Calls&&window.Calls.isInActiveCall}}},609320:(t,e,i)=>{var n=i(651525),a=i(457551),r=i(133764);window.StickersAnimation=n.StickersAnimation,window.StickersSettings=a.StickersSettings,window.Stickers=r.Stickers;try{stManager.done(jsc("web/stickers.js"))}catch(t){}},651525:(t,e,i)=>{i.d(e,{StickersAnimation:()=>n.StickersAnimation});i(940851),i(296253);var n=i(457865),a=i(401346);n.StickersAnimation.init({animatorLoader:()=>Promise.resolve(a.default)})}},a={};function r(t){var e=a[t];if(void 0!==e)return e.exports;var i=a[t]={exports:{}};return n[t].call(i.exports,i,i.exports,r),i.exports}r.m=n,t=[],r.O=(e,i,n,a)=>{if(!i){var o=1/0;for(d=0;d<t.length;d++){for(var[i,n,a]=t[d],s=!0,c=0;c<i.length;c++)(!1&a||o>=a)&&Object.keys(r.O).every((t=>r.O[t](i[c])))?i.splice(c--,1):(s=!1,a<o&&(o=a));if(s){t.splice(d--,1);var l=n();void 0!==l&&(e=l)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[i,n,a]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},i=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var a=Object.create(null);r.r(a);var o={};e=e||[null,i({}),i([]),i(i)];for(var s=2&n&&t;"object"==typeof s&&!~e.indexOf(s);s=i(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>t[e]));return o.default=()=>t,r.d(a,o),a},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.e=()=>Promise.resolve(),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={4346:0};r.O.j=e=>0===t[e];var e=(e,i)=>{var n,a,[o,s,c]=i,l=0;for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(c)var d=c(r);for(e&&e(i);l<o.length;l++)a=o[l],r.o(t,a)&&t[a]&&t[a][0](),t[o[l]]=0;return r.O(d)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var o=r.O(void 0,[8288,8592],(()=>r(609320)));o=r.O(o)})();