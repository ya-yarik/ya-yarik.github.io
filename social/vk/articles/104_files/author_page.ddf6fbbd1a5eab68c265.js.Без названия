!function(e){function t(t){for(var a,i,l=t[0],s=t[1],n=t[2],u=0,h=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(c&&c(t);h.length;)h.shift()();return r.push.apply(r,n||[]),_()}function _(){for(var e,t=0;t<r.length;t++){for(var _=r[t],a=!0,l=1;l<_.length;l++){var s=_[l];0!==o[s]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=_[0]))}return e}var a={},o={"web/author_page":0},r=[];function i(t){if(a[t])return a[t].exports;var _=a[t]={i:t,l:!1,exports:{}};return e[t].call(_.exports,_,_.exports,i),_.l=!0,_.exports}i.e=function(){return Promise.resolve()},i.m=e,i.c=a,i.d=function(e,t,_){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:_})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var _=Object.create(null);if(i.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(_,a,function(t){return e[t]}.bind(null,a));return _},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/js/cmodules/";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var n=0;n<l.length;n++)t(l[n]);var c=s;r.push([141,"evbus","common","71af34534be10395f7f6bb3e2039fd2e"]),_()}({141:function(e,t,_){e.exports=_("C0Cs")},"62JU":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AuthorPage",(function(){return AuthorPage}));var _web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zxIV"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("EasH"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4+be"),_components_ui_tooltip_menu__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("cUqL"),LoadingState={Idle:1,InProgress:2,Done:3},MAX_ARTICLES_PER_TAB=30;class AuthorPage{static init(e,t,_,a,o,r,i){cur.authorPage={ownerId:e,ownerHref:a,tab:"published",sortType:"date",pageEl:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("author_page"),tabsEl:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("author_page_info_wrap"),tabsContentWrapperEl:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_author_page_articles"),blocksEl:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_author_page_blocks"),draftsEl:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_author_page_drafts"),nextDraftsOffset:_,nextArticlesOffset:t,isLayer:o,openTime:Date.now()},cur.authorPage.tabsElsMap={published:cur.authorPage.blocksEl,drafts:cur.authorPage.draftsEl};var l=cur.authorPage.blocksEl.querySelectorAll("._author_page_published_item").length,s=cur.authorPage.draftsEl?cur.authorPage.draftsEl.querySelectorAll("._AuthorPageDraftRow").length:0;cur.authorPage.loadingStates={published:l<MAX_ARTICLES_PER_TAB?LoadingState.Done:LoadingState.Idle,drafts:s<MAX_ARTICLES_PER_TAB?LoadingState.Done:LoadingState.Idle};var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("author_page_up"),c=n.offsetWidth;r&&AuthorPage._initScrollLoading(),cur.authorPage.pageEl.addEventListener("mousemove",e=>{cur.authorPage&&cur.authorPage.pageEl&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(cur.authorPage.pageEl,"author_page_up_hover",e.pageX<c)}),AuthorPage.getScrollNode().addEventListener("scroll",()=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(n,"author_page_up_shown",AuthorPage.getScrollTop()>0)}),cur.authorPage.pageEl.addEventListener("click",e=>{e.pageX<c&&(hasClass(n,"author_page_up_shown")?AuthorPage.setScrollTop(0):AuthorPage.close())}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("author_page_close").addEventListener("click",()=>{AuthorPage.close()}),window.TooltipMenu=_components_ui_tooltip_menu__WEBPACK_IMPORTED_MODULE_3__.default,AuthorPage.isStandalone()||document.body.classList.add("AuthorPage--showing"),AuthorPage._onScroll(),window.ArticleLayer&&window.ArticleLayer.clearAllPrepared(),cur.prevModule=cur.module,cur.module="author_page",AuthorPage.isStandalone()||(cur.prevTitle=document.title,setDocumentTitle(i),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lockDocumentTitle)(!0))}static close(e){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lockDocumentTitle)(!1),cur.prevTitle&&setDocumentTitle(cur.prevTitle),AuthorPage.isOpen())return cur.module=cur.prevModule,document.body.classList.remove("AuthorPage--showing"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(document.body,"overflow","auto"),AuthorPage.isStandalone()?e?(cur._hardNav=!0,!0):(window.location.href=cur.authorPage.ownerHref||"/feed",!0):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)(cur.authorPage.pageEl),delete cur.authorPage,cur.needAuthorPageHardBack&&cur.prevAuthorPageUrl?(nav.setLoc(cur.prevAuthorPageUrl),delete cur.prevAuthorPageUrl,void delete cur.needAuthorPageHardBack):void(e||(cur.backFromAuthorPage=!0,history.go(-1))))}static isStandalone(){return cur.authorPage&&!cur.authorPage.isLayer}static getScrollNode(){return AuthorPage.isStandalone()?window:cur.authorPage.pageEl}static getScrollTop(){return AuthorPage.setScrollTop()}static setScrollTop(e){var t;return t=AuthorPage.isStandalone()?document.scrollingElement||document.firstElementChild:cur.authorPage.pageEl,void 0!==e&&(t.scrollTop=e),t.scrollTop}static isOpen(){return!!cur.authorPage}static showLayer(url){AuthorPage.isOpen()||ajax.post("al_articles.php",{act:"view",url,layer:1},{onDone:(html,js)=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(boxLoader),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(boxLayerWrap);var layerEl=se(html);addClass(layerEl,"author_page_layer"),document.body.appendChild(layerEl),eval(js)}})}static sortBy(e,t){void 0!==t&&(cur.authorPage.sortType=t),e||(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_tooltipMenu__link",ge("author_page_sort"))),AuthorPage._toggleLoadingOverlay(!0);var _=cur.authorPage.tabsElsMap[cur.authorPage.tab];cur.authorPage.loadingStates[cur.authorPage.tab]=LoadingState.Idle,"drafts"===cur.authorPage.tab?cur.authorPage.nextDraftsOffset="":cur.authorPage.nextArticlesOffset="",AuthorPage._showMore(()=>{AuthorPage._toggleLoadingOverlay(!1),_.innerHTML=""}),e&&"drafts"!==cur.authorPage.tab&&cur.author_page_sort.goToLink(e,!1,!0),window.ArticleLayer&&window.ArticleLayer.clearAllPrepared()}static _removeProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("author_more_articles")}static _hideProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("author_more_articles")}static _showProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("author_more_articles")}static _showMore(e){var t=cur.authorPage.tab,_="drafts"===t,a=cur.authorPage.loadingStates;if(a[t]!==LoadingState.InProgress&&a[t]!==LoadingState.Done){var o=_?cur.authorPage.nextDraftsOffset:cur.authorPage.nextArticlesOffset;a[t]=LoadingState.InProgress,AuthorPage._showProgress(),ajax.post("al_articles.php",{act:"author_page_more",articles_offset:o,owner_id:cur.authorPage.ownerId,need_drafts:intval(_),sort_by:cur.authorPage.sortType},{onDone:(o,r)=>{if(cur.authorPage){if(e&&e(),!o.length)return AuthorPage._hideProgress(),void(a[t]=LoadingState.Done);var i=0,l=cur.authorPage.tabsElsMap[t];_?cur.authorPage.nextDraftsOffset=r:cur.authorPage.nextArticlesOffset=r;for(var s=0;s<o.length;s++){var n=trim(o[s]);n&&(l.appendChild(se(n)),i++)}if(!i)return AuthorPage._removeProgress(),void(a[t]=LoadingState.Done);a[t]=LoadingState.Idle,AuthorPage._onScroll()}else AuthorPage._removeProgress()}})}}static _onScroll(){var e=window.innerHeight;AuthorPage.getScrollTop()+window.innerHeight+e>Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("author_page_content").offsetHeight&&AuthorPage._showMore()}static _initScrollLoading(){AuthorPage.getScrollNode().addEventListener("scroll",AuthorPage._onScroll)}static bookmark(e,t,_,a,o){var r=+domData(t,"is-bookmarked");domData(t,"is-bookmarked",r?0:1),t.innerHTML=r?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("global_add_to_bookmarks"):Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("global_remove_from_bookmarks"),window.bookmarkArticle(e,null,_,a,"article",o,r)}static pinTop(e,t,_,a){var o=+domData(e,"is-pinned");domData(e,"is-pinned",o?0:1),e.innerHTML=o?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("pages_author_page_unpin_article"):Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("pages_author_page_pin_article"),AuthorPage._toggleLoadingOverlay(!0),ajax.post("al_articles.php",{act:"pin_article",article_owner_id:t,article_id:_,do_pin:o?0:1,hash:a},{onDone:()=>{AuthorPage.sortBy(!1,"date")}})}static hide(e,t,_,a){AuthorPage._toggleLoadingOverlay(!0),ajax.post("al_articles.php",{act:"hide_from_author_page",article_owner_id:t,article_id:_,hash:a},{onDone:()=>{AuthorPage.sortBy()}})}static deleteDraft(e,t,_,a){cancelEvent(e),Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_1__.showFastBox)({title:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("pages_delete_draft_box_title")},Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("pages_delete_draft_box_content"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("box_yes"),()=>{AuthorPage._toggleLoadingOverlay(!0),ajax.post("al_articles.php",{act:"delete_draft",article_owner_id:t,article_id:_,hash:a},{onDone(){AuthorPage.sortBy()},onFail(){Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_1__.showFastBox)({title:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("global_error")},Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("global_unknown_error"))}}),curBox().hide()},Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_2__.getLang)("global_cancel"),()=>{curBox().hide()})}static edit(e,t,_){cancelEvent(e),AuthorPage.openArticleEditor(t,_,{custom_ref:"edit_draft_from_owner_page"})}static onTabSwitch(e){var t=cur.authorPage.tabsElsMap[cur.authorPage.tab],_=cur.authorPage.tabsElsMap[e];Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(_),cur.authorPage.loadingStates[e]===LoadingState.Done?this._hideProgress():this._showProgress(),"drafts"===cur.authorPage.tab?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(ge("author_page_sort")):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(ge("author_page_sort")),AuthorPage._sendAnalytics({type:"click_to_draft",owner_id:cur.authorPage.ownerId,time_spent:AuthorPage._getTimeSpent()})),cur.authorPage.tab=e}static _toggleLoadingOverlay(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(cur.authorPage.tabsContentWrapperEl,"AuthorPage--loading",e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(cur.authorPage.tabsEl,"AuthorPage--loading",e)}static _getTimeSpent(){return Math.round((Date.now()-cur.authorPage.openTime)/1e3)}static _sendAnalytics(e){statlogsValueEvent("author_page_analytics_event",e)}static createArticle(e){AuthorPage.openArticleEditor(e,0,{custom_ref:"create_from_owner_page"})}static openArticleEditor(e,t){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};window.openArticleEditor(e,t,null,_)}}},C0Cs:function(e,t,_){"use strict";_.r(t);var a=_("62JU");window.AuthorPage=a.AuthorPage;try{window.stManager.done(window.jsc("web/author_page.js"))}catch(e){}},cUqL:function(e,t,_){"use strict";_.r(t),_.d(t,"default",(function(){return u}));_("pIFo"),_("OG14"),_("a1Th"),_("Btvt");var a=_("k487"),o=_("t7n3"),r=_("MSYF"),i=_("zxIV"),l=_("4+be"),s=_("nAFc"),n=_("59zB"),c="ui_tooltipMenu";class u{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options=t,this.menuId=e,this.curItem=this.options.curItem,this.defaultTooltipOptions={appendToParent:!0,cls:`eltt_fancy ${c}__tooltip`,centerShift:0,offset:[0,-10],align:"center",notFoundText:Object(l.getLang)("global_search_not_found"),forceSide:"bottom",onFirstTimeShow:()=>{this.firstTimeShow()}},this.tooltip=null,this.opened=!1,this.openedCls="opened",this.rootEl=document.querySelector("#"+e),this.currentEl=this.rootEl.querySelector(`.${c}__current`),this.listEl=this.rootEl.querySelector(`.${c}__list`),this.itemsEl=this.rootEl.querySelector(`.${c}__items`),this._createTooltip()}_hMenuToggledItem(e){var t=clone(e),_=[],a=[],o=[];t.onclick&&o.push(`onclick="${t.onclick}"`),t.href&&(o.push(`href="${t.href}"`),t.onclick||o.push(`onclick="return cur.${this.menuId}.goToLink(this, event);"`)),t.attr&&a.push(t.attr),t.link_attr&&o.push(t.link_attr);var r=this.curItem||this.options.curItem;return r&&r.toString()===t.id.toString()&&_.push("selected"),t.class&&_.push(t.class),o.push(`data-item="${t.id}"`),t.cls=_.join(" "),t.link_attr=o.join(" "),t.attr=a.join(" "),t.title?t.label=this._sMenuTitleItem(Object(s.escape)(Object(s.decodeHTMLEntities)(t.label)),Object(s.escape)(Object(s.decodeHTMLEntities)(t.title))):t.label=Object(s.escape)(Object(s.decodeHTMLEntities)(t.label)),t.photo&&(t.cls+=` ${c}_item_photo`,t.label=this._sMenuLabelPhoto(t.label,t.photo)),this._sMenuItem(t)}_sMenuLabelPhoto(e,t){return`<div class="clear_fix">\n  <img src="${t}" alt="" class="${c}_photo"/>\n  <div class="${c}_label_wrap">\n    ${e}\n  </div>\n</div>`}_sMenuTitleItem(e,t){return`<div class="${c}_title_item">\n        <div class="${c}_label">${e}</div>\n      <div class="${c}_title">${t}</div>\n    </div>`}_sMenuItem(e){return`<li class="${c}__item ${e.cls}" ${e.attr}>\n    <a tabindex="0" class="${c}__link" ${e.link_attr}>${e.label}</a>\n  </li>`}_sNotFound(e){return`<li class="${c}__item_not_found">${e}</li>`}_initSearch(){var e=geByClass1("ui_search",this.listEl),t=Object(i.domData)(this.currentEl,"search_items"),_=Object(i.domData)(this.currentEl,"default_items");if(uiSearch.init(e),t&&!this.indexer){var a=JSON.parse(t);window.stManager.add(jsc("web/indexer.js"),()=>{this.indexer=new window.vkIndexer(a,e=>e.label)})}if(_){var o=JSON.parse(_);o&&(this.defaultItems=o)}addClass(this.itemsEl,c+"__items_search"),this.uiScroll=new n.default(this.itemsEl,{autoresize:!1})}firstTimeShow(){this.listEl.classList.remove(c+"__list_unshown"),this.options.initSearch&&this._initSearch()}onChangeSearch(e){var t=e.trim(),_="",a=[];if((a=t?this.indexer.search(t):this.defaultItems).length)Object(o.each)(a,(e,t)=>{_+=this._hMenuToggledItem(t)});else{var r=this.defaultTooltipOptions.notFoundText;this.options.notFoundText&&(r=this.options.notFoundText),_=this._sNotFound(r.replace("{search}",e))}Object(i.val)(this.uiScroll.content,_),this.uiScroll.update()}toggle(){this.opened?this.hide():this.show()}show(){this.tooltip||this._createTooltip(),this.tooltip.show(),this.opened=!0,this.currentEl.classList.add(this.openedCls)}hide(){this.currentEl.classList.remove(this.openedCls),this.opened=!1,this.tooltip&&this.tooltip.hide()}goToLink(e,t,_){var a=this.rootEl.querySelectorAll(`.${c}__item`),l=e.parentNode,s=geByClass1(c+"_label",e);return this.currentEl.textContent=s?s.textContent:e.textContent,this.curItem=Object(i.domData)(e,"item"),Object(o.each)(a,(e,t)=>{t.classList.remove("selected")}),l.classList.add("selected"),this.hide(),!_&&r.default.go(e,t)}_createTooltip(){var e=Object(o.extend)(this.defaultTooltipOptions,this.options.tooltip);return e.content=this.listEl,this.tooltip=new a.default(this.currentEl,e),this.tooltip}}}});