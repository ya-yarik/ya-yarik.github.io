(()=>{"use strict";var t,i,e,s={304418:(t,i,e)=>{e.d(i,{uiGetGallery:()=>l,UIGallery:()=>o});var s=e(257451),r=(0,s.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})));function l(t){var i=domData(ge(t),"gallery-id");return i&&r().galleries[i]}class o{constructor(t,i){if(!t)throw new Error("No element was provided for UIGallery");if(t=ge(t),!hasClass(t,"ui_gallery"))throw new Error("Provided incorrect element for UIGallery");var e=l(t);if(e)return e;this._opts=extend({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1},i),this._id=r().incIndex,r().incIndex+=1,this._el=t,this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._itemWidth=getSize(this._items[0])[0],this._itemOffset=intval(getStyle(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=intval(getStyle(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=geByClass1("ui_gallery__inner_cont",this._el),this._inner=geByClass1("ui_gallery__inner",this._el),this._scroll=function(){var t={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return t;if(!cur._scrollInfo){var i=se('<div style="position: fixed; left: -1000; width: 0; overflow: scroll">x</div>');ge("content").appendChild(i);var e=i.scrollLeft;t.rtl=vk.rtl,t.backward=e>0,i.scrollLeft=1e3,t.delta=i.scrollLeft===e?-1:1,t.negative=!t.backward&&t.delta<0,t.rtlSame=t.rtl&&!t.backward&&!t.negative,re(i),cur._scrollInfo=t}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[]},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),domData(this._el,"gallery-id",this._id),r().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&addEvent(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this))}_initArrows(){this._opts.noArrows?addClass(this._el,"ui_gallery_no_arrows"):(this._leftArrow=geByClass1("ui_gallery__arrow_left",this._el),this._rightArrow=geByClass1("ui_gallery__arrow_right",this._el),this._arrowWidth=getSize(this._leftArrow)[0],addEvent(this._leftArrow,"click",this._onArrowScroll.bind(this,-1)),addEvent(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),addEvent(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),addEvent(this._rightArrow,"click",this._onArrowScroll.bind(this,1)),addEvent(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),addEvent(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(t){if(this._opts.scrollX||this._opts.scrollY){var i;if("wheel"==t.type)if(Math.abs(t.deltaY)>Math.abs(t.deltaX)){if(!this._opts.scrollY)return;i=-t.deltaY}else{if(!this._opts.scrollX)return;i=-t.deltaX}else if(void 0!==t.wheelDeltaY){if(!this._opts.scrollY)return;i=t.wheelDeltaY}else if(void 0!==t.wheelDelta)i=t.wheelDelta;else{if(!t.detail||1!==t.axis)return;i=-t.detail}i=this._scroll.rtlSame?-i:i,Math.abs(i)>=120&&(i=74*Math.max(-1,Math.min(1,i))),this._innerCont.scrollLeft-=i,this._checkItemsAfterScroll(this._innerCont.scrollLeft),cancelEvent(t)}}_onArrowScroll(t,i){if(!this._opts.noArrows){var e=this._innerCont.scrollLeft+(this._scroll.rtlSame?-t:t)*(this._width-2*this._arrowWidth),s=this._innerCont.scrollWidth-this._width;this._scroll.negative?(e=Math.min(e,0),e=Math.abs(e)):e=Math.max(0,e),e=Math.min(s,e);var r=this._scroll.negative||this._scroll.rtlSame?-t:t;if(r>0&&e<s)e=Math.floor(e/this._itemFullWidth)*this._itemFullWidth;else if(r<0&&e>0){e=Math.floor(e/this._itemFullWidth)*this._itemFullWidth}if(0===e||e===s){var l=this._innerCont.scrollWidth;addClass(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),e&&(e+=t*(this._innerCont.scrollWidth-l))}this._scroll.negative&&(e=-e),animate(this._innerCont,{scrollLeft:e},{duration:Math.abs(this._innerCont.scrollLeft-e)+50,transition:Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(e),setTimeout((()=>removeClass(this._inner,"ui_gallery__inner_shift_instant")),0),cancelEvent(i)}}_checkItemsAfterScroll(t,i){if(this._scroll.negative&&(t=Math.abs(t)),this._opts.markOutside||this._opts.onViewItem){var e,s=this._itemWidth/3,r=(this._scroll.backward?this._inner.scrollWidth-this._width-t:t)-this._scrollOffset,l=t&&Math.floor(r/this._itemFullWidth),o=l*this._itemFullWidth+2*s;e=this._scroll.backward?t+this._width<this._inner.scrollWidth-o:t>o;var h,_=Math.min(this._items.length-1,Math.floor((r+this._width)/this._itemFullWidth)),n=_*this._itemFullWidth+2*s;if(h=this._scroll.backward?t>this._inner.scrollWidth-n:t+this._width<n,this._opts.onViewItem){var a=e?Math.min(this._items.length-1,l+1):l,d=h?Math.max(0,_-1):_;if(i||a!==this._visible.left||d!==this._visible.right){for(var c=a;c<=d;c++)(this._visible.left<0||i&&!inArray(this._items[c],this._visible.items)||c<this._visible.left||c>this._visible.right)&&this._opts.onViewItem(this._items[c],c);this._visible.left=a,this._visible.right=d,this._visible.items=this._items.slice(a,d+1)}}this._opts.markOutside&&(i?(geByClass("ui_gallery_item_outside",this._inner).forEach((t=>{removeClass(t,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((l!==this._outside.left||!e)&&this._outside.left>=0&&(removeClass(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(_!==this._outside.right||!h)&&this._outside.right>=0&&(removeClass(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),e&&l!==this._outside.left&&(addClass(this._items[l],"ui_gallery_item_outside"),this._outside.left=l),h&&_!==this._outside.right&&(addClass(this._items[_],"ui_gallery_item_outside"),this._outside.right=_))}if(!this._opts.noArrows){var f=t>0,u=t+this._width<this._inner.scrollWidth;toggleClass(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?u:f),toggleClass(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?f:u)}(!this._scroll.backward&&this._inner.scrollWidth-t-this._width<1e3||this._scroll.backward&&t<1e3)&&this._onLoadMore()}_onArrowMouseOver(t){this._opts.noArrows||addClass(this._inner,"ui_gallery__inner_shift_"+t)}_onArrowMouseOut(){this._opts.noArrows||(removeClass(this._inner,"ui_gallery__inner_shift_left"),removeClass(this._inner,"ui_gallery__inner_shift_right"))}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(t,i){t=t||[],this.addItems(t),this._finised=!!i||!t.length,this._loadingMore=!1}addItems(t,i){if((t=t||[]).length){var e=i>=0&&i<this._items.length?this._items[i]:null;t.forEach((t=>{e?domInsertBefore(t,e):this._inner.appendChild(t)})),this.refresh()}}destroy(){removeEvent(this._innerCont),removeEvent(this._leftArrow),removeEvent(this._rightArrow),domData(this._el,"gallery-id",null),delete r().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),re(this._el)}removeItem(t){return isNumeric(t)&&(t=this._items[t]),!(!t||!inArray(t,this._items))&&(re(t),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((t,i)=>[t,this._visible.left+i]))}}},102586:(t,i,e)=>{var s=e(304418);window.UIGallery=s.UIGallery,window.uiGetGallery=s.uiGetGallery,stManager.done(jsc("web/ui_components.js"))}},r={};function l(t){var i=r[t];if(void 0!==i)return i.exports;var e=r[t]={exports:{}};return s[t].call(e.exports,e,e.exports,l),e.exports}l.m=s,t=[],l.O=(i,e,s,r)=>{if(!e){var o=1/0;for(a=0;a<t.length;a++){for(var[e,s,r]=t[a],h=!0,_=0;_<e.length;_++)(!1&r||o>=r)&&Object.keys(l.O).every((t=>l.O[t](e[_])))?e.splice(_--,1):(h=!1,r<o&&(o=r));if(h){t.splice(a--,1);var n=s();void 0!==n&&(i=n)}}return i}r=r||0;for(var a=t.length;a>0&&t[a-1][2]>r;a--)t[a]=t[a-1];t[a]=[e,s,r]},l.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return l.d(i,{a:i}),i},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,l.t=function(t,s){if(1&s&&(t=this(t)),8&s)return t;if("object"==typeof t&&t){if(4&s&&t.__esModule)return t;if(16&s&&"function"==typeof t.then)return t}var r=Object.create(null);l.r(r);var o={};i=i||[null,e({}),e([]),e(e)];for(var h=2&s&&t;"object"==typeof h&&!~i.indexOf(h);h=e(h))Object.getOwnPropertyNames(h).forEach((i=>o[i]=()=>t[i]));return o.default=()=>t,l.d(r,o),r},l.d=(t,i)=>{for(var e in i)l.o(i,e)&&!l.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},l.e=()=>Promise.resolve(),l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),l.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),l.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={445:0};l.O.j=i=>0===t[i];var i=(i,e)=>{var s,r,[o,h,_]=e,n=0;for(s in h)l.o(h,s)&&(l.m[s]=h[s]);if(_)var a=_(l);for(i&&i(e);n<o.length;n++)r=o[n],l.o(t,r)&&t[r]&&t[r][0](),t[o[n]]=0;return l.O(a)},e=self.webpackChunkvk=self.webpackChunkvk||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var o=l.O(void 0,[8592],(()=>l(102586)));o=l.O(o)})();