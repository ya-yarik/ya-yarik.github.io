(window.webpackJsonp=window.webpackJsonp||[]).push([["3d69874b9b2a413d4c2d4df376b293a6"],{aG8I:function(e,t,r){"use strict";r.r(t);r("KKXr"),r("Oyvg"),r("pIFo"),r("SRfc");var i=r("zxIV"),n=r("t7n3"),a=r("Egk5"),o=r("/PiP"),s=r("7jxN"),d=r("lXE5"),l={init:function(e,t){if(!(e=ge(e)))return null;var r=Object(i.data)(e,"composer");if(r)return r;r={input:e,inited:!1,options:t},Object(i.data)(e,"composer",r),r.wddWrap=Object(i.ce)("div",{className:"composer_wdd clear_fix "+(t.wddClass||""),id:e.id+"_composer_wdd",innerHTML:'<input type="hidden" id="'+e.id+'_composer_wdd_term"/>'},{width:t.width||Object(i.getSize)(e)[0]}),t.appendTo&&Object(n.isFunction)(t.appendTo)?t.appendTo(r.wddWrap):Object(i.domInsertBefore)(r.wddWrap,e.nextSibling),r.wddInput=r.wddWrap.firstChild,r.wdd=WideDropdown.initSelect(r.wddWrap,extend({text:r.wddInput,input:e,noResult:t.lang.noResult||"",introText:t.lang.introText||"",toup:t.toup,wddOpts:t.wddOpts,searchKeys:t.searchKeys,width:"auto",onItemSelect:l.onItemSelect.bind(l).pbind(r)},t.wddOpts||{url:"hints.php",params:{act:"a_json_friends",from:"composer"}})),e.dd=r.wddWrap.id,l.initEvents(r),t.media&&(r.addMedia=new MediaSelector(t.media.lnk,t.media.preview,t.media.types,t.media.options,t.media.gearEl,t.media.actionsEl)),Object(i.setStyle)(r.wddWrap,"width",""),r.inited=!0,l.updateAutoComplete(r),r.edit=t.edit,r.isReply=t.isReply,l.updateArticleConvertSuggest(r);var a=cur.onMediaChanged;return cur.onMediaChanged=function(){l.updateArticleConvertSuggest(r),a&&a()},r},initEvents:function(e){addEvent(e.input,"keyup keydown keypress",l.onKeyEvent.pbind(e)),addEvent(e.input,"click mousedown mouseup focus blur paste",l.onMouseEvent.pbind(e))},destroy:function(e){WideDropdown.deinit(e.wddWrap),Object(i.cleanElems)(e.input,e.wddWrap),Object(i.re)(e.wddWrap),e.inited=!1,e.addMedia&&e.addMedia.destroy(),Object(i.data)(e.input,"composer",null),Object(i.re)(e.articleConvertEl),e.articleConvertEl=!1},onKeyEvent:function(e,t){var r=!t.shiftKey&&inArray(t.keyCode,[KEY.UP,KEY.DOWN,KEY.RETURN]),o=e.wdd&&r;if("keypress"==t.type||"keydown"==t.type){if(t.keyCode==KEY.RETURN||10==t.keyCode){if(e.select&&e.select.isVisible())return Object(a.triggerEvent)(document,t.type,t),Object(a.cancelEvent)(t);if(t.ctrlKey&&Object(n.isFunction)(e.options.onSubmit))return!0}if(t.keyCode==KEY.TAB){var s=e.input,d=window.Emoji?Emoji.editableVal(s):"",c=l.getCursorPosition(s),u=(d.substr(0,c)+String.fromCodePoint(1)+d.substr(c)).match(/^[\s\S]*(@|\*)[\S]+\s*\([\s\S]*?\001[\s\S]*?\)\s*/);if(u){var p=u[0].length-1;return Object(i.elfocus)(e.input,p,p),Object(a.cancelEvent)(t)}}var m=0;for(var g in e.wdd.shown)m+=1;if(o&&Object(i.isVisible)(e.wdd.listWrap)&&m)return t.type==(browser.opera&&!browser.chrome?"keypress":"keydown")&&WideDropdown._textEvent(t),Object(a.cancelEvent)(t)}if("keyup"==t.type&&!o){if(65==t.keyCode&&t.ctrlKey)return;e.wdd&&inArray(t.keyCode,[KEY.SPACE,KEY.HOME,190,191,78,55,49])&&l.hideSelectList(e)}"keyup"!=t.type||o&&t.keyCode!=KEY.RETURN||l.updateAutoComplete(e,t),l.updateArticleConvertSuggest(e)},isArticleConvertSuggestAvailable:function(e){if(e.edit||e.isReply)return!1;var t=!!cur.wallAddMedia&&cur.wallAddMedia.types,r=!1;if(t)for(var i=0;i<t.length;i++)if("article"==t[i][0]){r=!0;break}if(!r||!Object(o.isArticleEditorAvailable)())return!1;var n=!0;return each(cur.wallAddMedia.getMedias()||[],(function(e,t){if(!inArray(t[0],["photo","video","postpone","mark_as_ads"]))return n=!1,!1})),!!n&&!!(cur.options.articleConvertThreshold>0&&e.curValue.length>=cur.options.articleConvertThreshold)},updateArticleConvertSuggest:function(e){if(l.isArticleConvertSuggestAvailable(e)){if(!e.articleConvertEl){var t=gpeByClass("post_field_wrap",e.input),r=geByClass1("post_actions_btns",t);e.articleConvertEl=Object(i.se)('<button class="article_post_convert round_button">'+getLang("profile_convert_to_article_short")+"</button>"),r?(t!==domPN(r)&&Wall.sendInsertBeforeError(),t.insertBefore(e.articleConvertEl,r)):t.appendChild(e.articleConvertEl),removeEvent(e.articleConvertEl),addEvent(e.articleConvertEl,"click",(function(){cur.postComposer=e;var t=[];each(cur.wallAddMedia.getMedias()||[],(function(e,r){inArray(r[0],["photo","video"])&&t.push(r[0]+"_"+r[1])})),Object(o.openArticleEditor)(cur.oid,0,{text:e.curValue,medias:t})}))}Object(i.show)(e.articleConvertEl)}else Object(i.re)(e.articleConvertEl),delete e.articleConvertEl},onMouseEvent:function(e,t){"blur"!=t.type?("focus"!=t.type&&"click"!=t.type||l.updateAutoComplete(e,t),"paste"==t.type&&setTimeout(l.updateAutoComplete.pbind(e,t),0)):l.hideSelectList(e)},updateAutoComplete:function(e,t){var r=e.input,i=(e.options&&e.options.getValue||window.Emoji&&Emoji.editableVal||val)(r),n=Math.max(i.lastIndexOf("@"),i.lastIndexOf("*")),a=!1;if(n>-1){var o=l.getCursorPosition(r),s=i.substr(0,o),d=s.match(/(^|[\s.,:\'\"«»;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);n=Math.max(s.lastIndexOf("@"),s.lastIndexOf("*")),d&&"."!==d[2].substr(-1)&&(a=d[2])}!1===a&&delete e.ignoredTerm,void 0!==e.ignoredTerm&&a==e.ignoredTerm&&(a=!1),e.curValue=i,e.curTerm=a,e.curPos=n,val(e.wddInput,a),l.toggleSelectList(e),!t||"keyup"!=t.type&&"paste"!=t.type||(e.options.onValueChange&&e.options.onValueChange(i,"keyup"!=t.type),e.addMedia&&e.addMedia.checkMessageURLs(i,"keyup"!=t.type),e.options.checkLen&&e.options.checkLen(i))},toggleSelectList:function(e){var t=e.curTerm;!1===t?l.hideSelectList(e):l.showSelectList(e,t)},hideSelectList:function(e){e.wddInput.focused=!1,WideDropdown._hideList(e.wdd);var t=e.options||{};t.onHide&&t.onHide()},showSelectList:function(e,t){function r(r){e.wddInput.focused=!0,WideDropdown.items(e.wdd.id,r||[]),WideDropdown._updateList(e.wdd,!1,t);var i=e.options||{};i.onShow&&i.onShow()}"function"==typeof cur.wallMentions&&(cur.wallMentions=cur.wallMentions()),cur.wallMentions&&"function"==typeof cur.wallMentions.then?cur.wallMentions.then((function(e){r(e)})):r(cur.wallMentions)},onItemSelect:function(e,t){if(!t)return!1;var r=t[2].replace("@",""),a=t[8]||t[1],o=e.curValue.substr(0,e.curPos),s=e.curValue.substr(e.curPos),d=!!o.match(/\#[\w_\.\u0400-\u04FF]+$/i);document.activeElement.classList.contains("_im_text")&&(/^(?:id|club)\d{1,}$/.test(r)||(d=!0));var c=e.options.poster,u=window.Emoji&&void 0!==e.input.emojiId||c;u||c?s=Object(n.clean)(s):a=Object(n.replaceEntities)(a),cur.selNum=(cur.selNum||0)+1;var p=new RegExp("^(@|\\*)"+Object(n.escapeRE)(e.curTerm)+"(?:\\s+\\((?:(.*?)\\))?\\s*)?","");return s=s.replace(p,(function(e,t,i){var n=t+r+" ";return d?n+=u||c?'<span id="tmp_sel_'+cur.selNum+'"></span>':"":(n+=(u||c?'<span id="tmp_sel_'+cur.selNum+'">':"")+"(",n+=a.replace(/[\(\)\]\[]/g,""),n+=")"+(u||c?"</span>":"")+" "),n})),d||!o||o.match(/[\.\(\)\?\!\s\n\r\'\"«» \u00A0]$/)||(s=" "+s),l.hideSelectList(e),u||c?(Emoji.val(e.input,Object(n.clean)(o)+s),Emoji.focus(e.input),Emoji.editableFocus(e.input,ge("tmp_sel_"+cur.selNum),!0),c&&c.checkText()):(val(e.input,o+s),Object(i.elfocus)(e.input)),Object(n.isFunction)(e.options.onItemSelect)&&e.options.onItemSelect(t),!1},getCursorPosition:function(e){if(void 0!==e.selectionStart)return e.selectionStart;if(void 0!==window.getSelection){var t=window.getSelection();if(!t||!t.rangeCount)return 0;var r=t.getRangeAt(0),n=r.cloneRange(),a=Object(i.ce)("div");return n.selectNodeContents(e),n.setEnd(r.startContainer,r.startOffset),a.appendChild(n.cloneContents()),(window.Emoji?Emoji.editableVal:val)(a).replace(/\n$/,"").length}return 0},getSendParams:function(e,t,r){var a=e.addMedia||{},o=a.chosenMedia||{},l=a&&a.getMedias?a.getMedias():[],c=a.shareData||{},u=e&&e.options.media&&e.options.media.options.limit||0,p=e.input,m=cur.posterWpe&&cur.posterWpeSendParams?cur.posterWpeSendParams.text:Object(n.trim)(window.Emoji?Emoji.editableVal(p):val(p)),g={message:m},h=0,b=hasClass(gpeByClass("post",p),"suggest");isArray(o)&&o.length&&l.push(clone(o)),Object(i.setStyle)(bodyNode,{cursor:"default"});var v=ge("wpe_cont"),_=geByClass1("wpe_error",v);function f(e){_||(_=Object(i.se)('<div class="wpe_error error"><div>'),v.insertBefore(_,Object(i.domFC)(v))),_.innerHTML=e.length>60?'<div class="msg_text">'+e+"</div>":e,Object(i.isVisible)(_)||(Object(s.slideDown)(_,100),Object(d.scrollToY)(Object(i.getXY)(_)[1]-15),Object(s.animate)(ge("box_layer_wrap"),{scrollTop:0}))}if(_&&hide(_),l.length&&each(l,(function(e,i){if(isArray(i)&&i.length){var o=this[0],s=this[1];if(h>=u&&"postpone"!=o)return!1;switch(o){case"poll":var d=a.pollData(r);if(!d)return g.delayed=!0,!1;Object(n.intval)(s)&&(g.poll_id=Object(n.intval)(s)),s=d.question,delete d.question,g=extend(g,d);break;case"copyright":var p=a.copyrightData();if(p)return void(g=extend(g,p));break;case"share":if(c.failed||!c.title&&(!c.images||!c.images.length)&&!c.photo_url&&!c.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(g.delayed=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&c.button_text&&c.button_action){var v;l.length>1&&(v=getLang("global_share_too_many_attachments")),g.message.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(v=getLang("global_share_too_many_newlines")),g.message.length>(cur.options.share||{}).button_exclusive_max_message_len&&(v=getLang("global_share_too_long_message"));var _=Object(n.extractUrls)(" "+g.message+" "),w=Object(n.extractUrls)(" "+c.url+" ")[0];if(w&&_.length){"/"===w.query&&(w.query=""),"www."===w.domain.substr(0,4)&&(w.domain=w.domain.substr(4));for(var y=0;y<_.length;++y){var E=_[y];if("/"===E.query&&(E.query=""),"www."===E.domain.substr(0,4)&&(E.domain=E.domain.substr(4)),w.domain!=E.domain||w.query!=E.query){v=getLang("global_share_too_many_links");break}}}if(v)return f(v),g.delayed=!0,!1}if(!c.title)return f(getLang("global_share_title_required")),g.delayed=!0,!1;if(!c.url)return f(getLang("global_share_url_required")),g.delayed=!0,!1;if(c.url=new URL(c.url).href,c.video?(s=c.video_owner_id+"_"+c.video_id,g.snippet_video=1):s=c.prometheus?c.media:c.user_id&&c.photo_id&&!c.noPhoto?c.user_id+"_"+c.photo_id:"",c.share_upload_failed&&!s)return c.share_upload_failed=0,g.delayed=!0,!1;if(c.images&&c.images.length&&!isArray(c.images[cur.shareShowImg])&&!r&&!s&&!c.noPhoto&&!c.video)return a.uploadShare(t),g.delayed=!0,!1;if((cur.options.share||{}).require_image&&!s)return f(getLang("global_share_image_required")),g.delayed=!0,!1;c.initialPattern&&Object(n.trim)(m)==c.initialPattern&&(g.message=""),extend(g,{url:c.url,mode:c.mode,title:Object(n.replaceEntities)(c.title),description:Object(n.replaceEntities)(c.description),button_text:Object(n.replaceEntities)(c.button_text),button_action:c.button_action,extra:c.extra,extra_data:c.extraData,photo_url:c.video?"":Object(n.replaceEntities)(c.photo_url),placeholder_inserted:c.placeholder_inserted,open_graph_data:(c.openGraph||{}).data,open_graph_hash:(c.openGraph||{}).hash});break;case"page":c.initialPattern&&Object(n.trim)(m)==c.initialPattern&&(g.message="");break;case"postpone":return g.postpone=val("postpone_date"+a.lnkId),void(cur.postponedLastDate=g.postpone);case"donut_duration":return;case"mark_as_ads":return void(g.mark_as_ads=1);case"pretty_cards":if(!a.prettyCardGallery)return;if(a.prettyCardGallery.needSendData())return a.prettyCardGallery.saveCards(t,(function(e){f(e)})),g.delayed=!0,!1;s=a.prettyCardGallery.getSendData().attachVal}this[3]&&Object(n.trim)(m)==this[3]&&(g.message=""),b&&this[4]&&(s+="_"+this[4]),g["attach"+(h+1)+"_type"]=o,g["attach"+(h+1)]=s,h++}})),!a.multi&&(g.postpone||(a.postponeDate&&a.postponeIsTooltip||a.postponePreview)&&(g.postpone=val("postpone_date"+a.lnkId),cur.postponedLastDate=g.postpone),!g.copyright&&a.copyrightData)){var w=a.copyrightData();w&&(g=extend(g,w))}return a.multi||g.mark_as_ads||!a.markAsAds||(g.mark_as_ads=1),g},reset:function(e){var t=e.input,r=val(t),n=e.addMedia,a={value:r};return window.Emoji?Emoji.val(t,""):t.innerHTML="",n&&(a.urlsCancelled=clone(n.urlsCancelled),n.unchooseMedia(),n.urlsCancelled=[]),Object(i.re)(e.articleConvertEl),a},restore:function(e,t){var r=e.input,i=l.reset(e);return val(r,t.value||""),i}};t.default=l}}]);try{stManager.done("cmodules/bundles/3d69874b9b2a413d4c2d4df376b293a6.72e9ed78df3966fadec0.js")}catch(e){}