(window.webpackJsonp=window.webpackJsonp||[]).push([["e1eb3733f1f626a37fd0d2e038b98573"],{oBWH:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("KKXr"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("SRfc"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("pIFo"),_lib_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("zxIV"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("cGUQ"),_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("/PiP"),_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Egk5"),_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("FWc3"),_lib_message_box__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("EasH"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("v+DW"),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("Xrg9"),_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("t7n3"),_lib_debug_tools__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("98sY"),_lib_box_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("kcIO"),_lib_stats__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("XzvV"),_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("BJj/"),_lib_scroll__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("lXE5"),_lib_video__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("Ia1d"),_lib_fx__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("7jxN"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("4+be"),Page={_adBlockSeenStorage:{},_postsClearTimeoutsCalls:0,initUploadForImagePaste:function initUploadForImagePaste(txtEl,addMedia,blob){stManager.add([jsc("web/upload.js")],(function(){addMedia.menu&&addMedia.menu.activate();var uploadEl=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="page_field_upload" class="post_upload"></div>'});Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domInsertBefore)(uploadEl,txtEl);var uploadData=window.wkcur?wkcur.wallUploadOpts:cur.wallUploadOpts;if(void 0!==addMedia.clipboardImageUploadIndex)Upload.onFileApiSend(addMedia.clipboardImageUploadIndex,[blob]);else{var composer=txtEl&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.data)(txtEl,"composer"),composerOpts=composer&&composer.options&&composer.options.media&&composer.options.media.options||{},limit=composerOpts&&composerOpts.limit||2;addMedia.clipboardImageUploadIndex=Upload.init(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(uploadEl),uploadData.url,uploadData.params,{file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_input:null,accept:"image/jpeg,image/png",file_match:uploadData.opts.ext_re,lang:uploadData.opts.lang,wiki_editor:0,onUploadStart:function(_,e){var o=void 0!==_.ind?_.ind:_,t=Upload.options[o];"form"==Upload.types[o]&&(geByClass1("file",ge("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[o]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),t.multi_progress&&this.onUploadProgress(_,0,0))},onUploadComplete:function onUploadComplete(info,res){var params,i=void 0!==info.ind?info.ind:info,fileName=(info.fileName?info.fileName:info).replace(/[&<>"']/g,"");try{params=eval("("+res+")")}catch(_){params=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_4__.fromQueryString)(res)}params.photos?ajax.post("al_photos.php",extend({act:"choose_uploaded"},params),{onDone:function(_,e){e.uploadNum=i,addMedia.chooseMedia("photo",_,extend(e,{upload_ind:i+"_"+fileName}))},onFail:function(){}}):Upload.onUploadError(info)},onUploadProgress:function(_,e,o){var t=void 0!==_.ind?_.ind:_;if("fileApi"==Upload.types[t]){var i=(cur.attachMediaIndexes||{})[t];if(void 0===i||i&&cur.addMedia[i].chosenMedia||cur.imMedia){var a={loaded:e,total:o};_.fileName&&(a.fileName=_.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("photo",t,a)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(_){"form"==Upload.types[_]&&Upload.embed(_)},onCheckComplete:function(_){Upload.types[_]="fileApi",Upload.onFileApiSend(_,[blob])},customShowProgress:function(){},noFlash:1,multiple:1,multi_progress:1,max_files:limit,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:uploadData.opts.server,error:uploadData.opts.default_error,error_hash:uploadData.opts.error_hash})}}))},buildMediaLinkEl:function(_,e){return'<div class="page_media_link_url '+(e?"page_market_owner_link":"")+'">'+(e?"":'<div class="page_media_link_icon"></div>')+'<div class="page_media_link_text">'+_+"</div></div>"},showManyPhoto:function(_,e,o,t){var i=[];return each(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_).childNodes,(function(_,e){var o=(e&&e.getAttribute&&e.getAttribute("onclick")).match(/'(-?\d+_\d+)'\s*,\s*'([a-f0-9]{18})'/i);o&&i.push(o[1]+"/"+o[2])})),t.additional={draft_photos:i.join(";")},Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__.showPhoto)(e,o,extend(t,{queue:1}))},inviteToGroup:function(_,e,o,t,i){var a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_)),n=function(_){var t=_?1:0,s=_?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("friends_cancel_event_invite"):Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("friends_send_event_invite");a.innerHTML='<a onclick="return page.inviteToGroup(this, '+e+", "+o+", "+t+", '"+i+"')\">"+s+"</a>"};return t?(ajax.post("/al_page.php",{act:"a_cancel_invite",mid:o,gid:e,hash:i}),n(0)):(ajax.post("/al_page.php",{act:"a_invite",mid:o,gid:e,hash:i},{onDone:function(_,e){if(!_){n(0),hide(a);var o=geByClass1("error",s),t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.se)('<div class="page_members_box_error msg"><div class="msg_text">'+e+"</div></div>");o?s.replaceChild(t,o):s.insertBefore(t,s.firstChild)}}}),n(1)),!1},moneyTransferBox:function(_,e){var o={act:"money_transfer_box",to_id:cur.oid,from:e};"own_profile"!==e&&"own_profile_tt"!==e||(o.to_id=0,o.tab="link"),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_payments.php",o,{onFail:function(_){return setTimeout(Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showFastBox)(Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_error"),_).hide,2e3),!0}}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(_)},showMoreActions:function(_){var e=geByClass1("page_actions_more",_.parentElement);e&&(hide(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)(e))},onSubscriptionItemOnClick:function(_,e,o,t,i){var a=hasClass(_,"on");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"act",a?0:1),o&&Page.toggleSubscription(_,o,e,0,"page",(function(){var e=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)(a?"groups_notifications_on":"groups_notifications_set_up");val(_,e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(_,"on")})),t&&Page.toggleLiveSubscription(_,t,a?0:1,e,(function(){}),!0),i&&Page.togglePodcastsSubscription(this,i,a?0:1,e,(function(){}),!0)},toggleSubscription:function(_,e,o,t,i,a,s){var n=parseInt(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"act"))?1:0,r={onDone:function(e){a?a(e,n?0:1,_):(val(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.geByTag1)("span",_),e),_.setAttribute("data-act",n?0:1))}};s||(r.showProgress=Page.actionsDropdownLock.pbind(_),r.hideProgress=Page.actionsDropdownUnlock.pbind(_)),ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:n?1:0,oid:t||cur.oid,hash:e,source:i},r),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(o)},toggleLiveSubscription:function(_,e,o,t,i,a){null!=cur.toggleLiveSubscriptionAct&&(o=cur.toggleLiveSubscriptionAct),ajax.post("al_video.php?act=a_subscribe_live",{subscribe:o?1:0,owner_id:cur.oid,hash:e},{onDone:function(e){cur.toggleLiveSubscriptionAct=!o,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(_,"PageActionItem--live-unsubscribe",o),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(_,"PageActionItem--live-subscribe",!o),i?i(e):val(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.geByTag1)("span",_),e)},showProgress:Page.actionsDropdownLock.pbind(_),hideProgress:Page.actionsDropdownUnlock.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(t)},togglePodcastsSubscription:function(_,e,o,t,i,a){null!=cur.togglePodcastsSubscriptionAct&&(o=cur.togglePodcastsSubscriptionAct),ajax.post("al_wall.php",{act:"a_toggle_podcasts_subscription",subscribe:o?1:0,owner_id:cur.oid,hash:e},{onDone:function(e){cur.togglePodcastsSubscriptionAct=!o,i?i(e):val(_,e)},showProgress:!a&&Page.actionsDropdownLock.pbind(_),hideProgress:!a&&Page.actionsDropdownUnlock.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(t)},showMessagesFromCommunityTooltip:function(_,e,o,t){null==cur.toggleMessagesFromCommunityAct&&0==e&&(t?Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_7__.showTooltip)(_,{text:o,dir:"auto",shift:[4,-3]}):Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_7__.showTooltip)(_,{text:o,dir:"auto"}))},toggleMessagesFromCommunity:function(_,e,o,t){null!=cur.toggleMessagesFromCommunityAct&&(o=cur.toggleMessagesFromCommunityAct),ajax.post("al_groups.php",{act:"a_toggle_messages_from_community",allow:o?1:0,oid:cur.oid,hash:e},{onDone:function(e){val(_,e),cur.toggleMessagesFromCommunityAct=!o},showProgress:Page.actionsDropdownLock.pbind(_),hideProgress:Page.actionsDropdownUnlock.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(t)},showPageMembers:function(_,e,o){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(_)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showTabbedBox)("al_page.php",{act:"box",oid:e,tab:o},{cache:1},_)},showHiddenMembersBoxInfo:()=>Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showFastBox)(Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("groups_hidden_members_message_box_title"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("groups_hidden_members_message_box_content")),showPageVideos:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(_)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_video.php?act=a_choose_video_box",{review:1,to_id:e},{cache:1,grey:1})},showPageAudios:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(_)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("/al_audio.php?act=audios_box",{oid:e},{cache:1,params:{width:638}},_)},ownerPhotoFast:function(){var _=ge("owner_photo_bubble_input");_||(_=ge("owner_photo_wrap").appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("input",{type:"file",id:"owner_photo_bubble_input",onchange:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.data)(this,"changed",!0),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_page.php",{act:"owner_photo_box",oid:cur.oid}).inp=this}}))),_.click()},ownerPhoto:function(_,e){e||(e={}),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,gid:e.gid},{stat:["owner_photo.css",jsc("web/owner_photo.js")]})},ownerCrop:function(_,e){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_page.php",{hash:e,act:"owner_photo_crop",oid:_||cur.oid},{stat:["owner_photo.css",jsc("web/owner_photo.js")]})},ownerPhotoEffects:function(_,e){var o="album"+e+"_0/rev";!cur.pvData||cur.pvShown&&cur.pvListId==o||delete cur.pvData[o],Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__.showPhoto)(_,o,{additional:{open_pe:1,pe_no_copy:1},loader:1,onHide:function(){cur.pvEditorSaved&&nav.reload()}})},uploadOwnerCover:function(_){return!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,cover:1},{stat:["owner_photo.css",jsc("web/owner_photo.js")]})},editOwnerCover:function(_){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_page.php",{act:"owner_cover_crop",oid:_||cur.oid},{stat:["owner_photo.css",jsc("web/owner_photo.js")]})},deleteOwnerCover:function(_,e,o){o||(o=cur.shareSetOwnPhoto),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showFastBox)({title:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("groups_delete_cover_title")},Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("groups_delete_cover_confirm"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_delete"),(function(t){ajax.post("al_page.php",{act:"owner_cover_remove",oid:_,hash:e,from:cur.module},{showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.lockButton.pbind(t),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.unlockButton.pbind(t),onDone:o})}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_cancel"))},editPhoto:function(_){cur.hideOther(),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_page.php",extend(_||{},{act:"a_edit_photo"}),{params:{bodyStyle:"padding: 16px 7px"},stat:[jsc("web/tagger.js"),"tagger.css"]})},deletePhoto:function(_,e){cur.hideOther();var o=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showFastBox)({title:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_warning")},Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("sure_delete_photo"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_delete"),(function(){ajax.post("al_page.php",{act:"a_delete_photo",hash:e,oid:_},{showProgress:o.showProgress,hideProgress:o.hideProgress})}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_cancel"))},shareCurrent:function(){var _=geByClass1("current_audio",ge("page_current_info"));return _||nav.reload(),(_=_.getAttribute("data-audio"))||nav.reload(),((_=_.split("_")).length<3||"s"!=_[2].substr(0,1))&&nav.reload(),!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("like.php",{act:"publish_box",object:"audio"+_[0]+"_"+_[1],list:_[2]+(_[3]&&"h"==_[3].charAt(0)?"_"+_[3]:"")},{stat:["page.js","page.css","wide_dd.js","wide_dd.css",jsc("web/sharebox.js")]})},playCurrent:function(_,e){var o=_.parentNode;return Page.playLive(e,{showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.showProgress)(o)},hideProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.hideProgress)(o)}})},playLive:function(_,e){Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__.getAudioPlayer)().playLive(_,e)},audioStatusUpdate:function(_){var e=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.isChecked)("currinfo_audio"),o=Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__.getAudioPlayer)(),t=AudioUtils.asObject(o.getCurrentAudioLs());ajax.post("al_audio.php",{act:"toggle_status",hash:_,exp:e,id:t?t.fullId:"",oid:vk.id},{onDone:function(_,e){vk.id==cur.oid&&_&&(val("current_info",_),o.setStatusExportInfo(e,!0))},onFail:()=>!0})},audioListenersOver:function(_,e){Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_7__.showTooltip)(_,{url:"al_audio.php",params:{act:"listeners_tt",oid:e},slide:15,shift:[24,10,10],ajaxdt:100,showdt:400,hidedt:200,asrtl:1,dir:"auto",typeClass:"audio_tt",appendParentCls:"scroll_fix_wrap"})},showAudioListeners:function(_,e){function o(){var _=ge("listeners_more_link"),e=ge("listeners_more_link_trigger");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.isVisible)(e)&&boxLayerWrap.scrollHeight-500<boxLayerWrap.scrollTop+boxLayerWrap.offsetHeight&&(hide(e),_.click())}return e.cancelBubble=!0,cur.audioListenersOnDone={onHide:function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(window.boxLayerWrap,"scroll",o)},onDone:function(_,e){window.audioListenersOffset=0,e?Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(window.boxLayerWrap,"scroll",o):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)("listeners_more_link"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)("listeners_more_link_trigger"))}},!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("/al_audio.php",{act:"listeners_box",oid:_},extend(cur.audioListenersOnDone,{cache:1}))},moreAudioListeners:function(_){window.audioListenersOffset+=50;var e=geByClass1("fans_rows"),o=ge("listeners_more_link");ajax.post("/al_audio.php",{act:"listeners_box",oid:_,offset:window.audioListenersOffset},{onDone:function(_,t){for(var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("div",{innerHTML:_}),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(i);a;a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(i))e.appendChild(a);if(t){var s=ge("listeners_more_link_trigger");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)(s)}else Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)(o),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)("listeners_more_link_trigger")},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.lockButton.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.unlockButton.pbind(o)})},postsUnseen:function(_){window._postsExtras||(window._postsExtras={});var e=Date.now(),o=!1;for(var t in _)for(var i in _[t])if("module"!=i&&"index"!=i&&"q"!=i&&"block"!=i&&"contain_ids"!=i){var a=window._postsExtras[i];a&&-1==a.diff&&(a.diff=e-a.start,o=!0)}o&&Page.postsClearTimeouts()},postsSeen:function(_){if(vk.id&&_.length&&!vk.pd){window._postsSeenModules||(window._postsSeenModules={}),window._postsExtras||(window._postsExtras={});var e,o=Date.now(),t=Page._adBlockSeenStorage;for(var i in _){var a=Page.getPostModuleCode(_[i].module?_[i].module:""),s=_[i].index,n=_[i].q,r=_[i].block,l=_[i].contain_ids;for(var c in _[i].hash&&!window._postsViewHash&&(window._postsViewHash=_[i].hash),_[i])if("module"!=c&&"index"!=c&&"q"!=c&&"hash"!=c&&"block"!=c&&"contain_ids"!=c){window._postsSeenModules[c]=a;var d=_[i][c],E=ge("post"+c);if(c in t||(t[c]=!(!E||!attr(E,"data-ad-view"))),!t[c]){var u=window._postsSeen[c],b=window._postsSaved[c];if(-1==b||-1==u||1==d&&(b||u))continue}var O=0;if(E){O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getSize)(E)[1];var p=geByClass1("replies",E);p&&(O-=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getSize)(p)[1])}window._postsSeen[c]=d,e=d,window._postsExtras[c]={start:o,diff:-1,index:s,q:n,block:r,postHeight:O,viewportHeight:window.clientHeight(),session_id:cur.feed_session_id?cur.feed_session_id:"na",contain_ids:l||""},Wall.triggerAdStat(c,_[i].long?"impression_long":"impression")}}e&&Page.postsClearTimeouts()}},postsClearTimeouts:function(){clearTimeout(window._postsSaveTimer),clearTimeout(window._postsSendTimer),++Page._postsClearTimeoutsCalls<10?(window._postsSaveTimer=setTimeout(Page.postsSave,2500),window._postsSendTimer=setTimeout(Page.postsSend,5e3)):(Page._postsClearTimeoutsCalls=0,Page.postsSave(),Page.postsSend())},postsSave:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.checkVersion()||Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.isEmpty)(window._postsSeen))return window._postsSeen;var _,e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_sent")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_seen")||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_seen_modules")||{},i=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_extras")||{},a=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),s=Page._adBlockSeenStorage;for(var n in window._postsExtras||(window._postsExtras={}),window._postsSeen){var r=window._postsSeen[n];window._postsExtras[n]&&(i[n]={diff:window._postsExtras[n].diff,index:window._postsExtras[n].index,q:window._postsExtras[n].q,session_id:window._postsExtras[n].session_id?window._postsExtras[n].session_id:"na",postHeight:window._postsExtras[n].postHeight,viewportHeight:window._postsExtras[n].viewportHeight,block:window._postsExtras[n].block,contain_ids:window._postsExtras[n].contain_ids},delete window._postsExtras[n]);var l=n.split("_");"ad"!==l[0]&&"adsite"!==l[0]&&"posthashtag"!==l[0]&&"block"!==l[0]&&"contain_ids"!==l[0]&&(l[0]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(l[0]),l[1]&&"p"==l[1].substr(0,1)||(l[1]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(l[1])));var c=(e[l[0]]||{})[l[1]],d=l&&"block"===l[0]&&4===Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(l[1]),E=l&&"block"===l[0]&&"market-items"===l[1];l[0]!=vk.id&&(d||E||s[n]||!c||-1==r&&c>0)&&(o[l[0]]||(o[l[0]]={},delete t[n]),(!o[l[0]][l[1]]||-1==r&&o[l[0]][l[1]]>0)&&(_=o[l[0]][l[1]]=a*r,t[n]=window._postsSeenModules[n])),window._postsSaved[n]=r}window._postsSeen={},window._postsSeenModules={},_&&(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_seen",o),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_seen_modules",t),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_extras",i))},getPostModuleCode:function(_){switch(_){case"feed":return"f";case"public":case"groups":return"c";case"profile":return"p";case"wall":return"w";case"wall_top":return"tw";case"feed_search":return"s";case"feed_news_recent":case"feed_news":return"rf";case"feed_news_top":return"tf";case"feed_recommended":case"feed_recommended_recent":return"d";case"feed_recommended_top":return"e";case"feed_other":return"o";case"feed_friends":case"feed_friends_recent":return"rr";case"feed_friends_top":return"tr";case"feed_podcasts":case"feed_podcasts_top":case"feed_podcasts_recent":return"h";case"feed_groups":case"feed_groups_recent":return"rg";case"feed_groups_top":return"tg";case"feed_videos":case"feed_videos_recent":return"rv";case"feed_videos_top":return"tv";case"feed_photos":case"feed_photos_recent":return"rp";case"feed_photos_top":return"tp";case"feed_list_recent":return"rl";case"feed_list_top":return"tl";case"groups_ads_promoted_post":return"ag";case"public_ads_promoted_post":return"ap";default:return"u"}},postsSend:function(){var _={},e={},o={};if(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.checkVersion())_=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_seen"),e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_seen_modules")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_extras")||{};else{var t=Page.postsSave();for(var i in t){var a=t[i],s=i.split("_");"ad"!==s[0]&&"posthashtag"!==s[0]&&(s[0]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(s[0]),"p"!=s[1].substr(0,1)&&(s[1]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(s[1]))),_[s[0]]||(_[s[0]]={}),(!_[s[0]][s[1]]||-1==a&&_[s[0]][s[1]]>0)&&(_[s[0]][s[1]]=a)}}var n=[],r=[];for(var l in _){var c=[];for(var d in _[l]){var E=l+"_"+d,u=e[E]||"",b=o[E],O="s"==u&&b&&b.q?b.q:"";O=O.replace(/[,;:]/g,"");var p=b&&b.session_id?b.session_id:"na",P="";b&&"ad"!==l&&"posthashtag"!==l&&(P=(P=":"+[b.diff,b.index,p,O||"",b.block||"",b.contain_ids||""].join(":")).replace(/:+$/,"")),b&&b.postHeight&&r.push([E,b.postHeight,b.viewportHeight].join(":")),c.push(u+(_[l][d]>0?d:-d)+P)}c.length&&n.push(l+"_"+c.join(","))}if(n.length){if(!vk.id)return Page.postsClear();var D={act:"seen",data:n.join(";"),meta:r.join(";")};window._postsViewHash&&(D.hash=window._postsViewHash),ajax.post("al_page.php",D,{onDone:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.checkVersion())return extend(window._postsSaved,window._postsSeen);var e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_seen")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_sent")||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_seen_modules");for(var i in _){var a=void 0;for(a in _[i])o[i]||(o[i]={}),-1!=o[i][a]&&(o[i][a]=_[i][a]),(e[i]||{})[a]&&(delete e[i][a],delete t[i+"_"+a]);e[i]&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.isEmpty)(e[i])&&(delete e[i],delete t[i+"_"+a])}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_seen",e),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_sent",o),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_seen_modules",t),clearTimeout(window._postsCleanTimer),window._postsCleanTimer=setTimeout(Page.postsClean,1e4)}})}},postsClean:function(){if(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle)return Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_12__.debugLog)("waiting ls clean.."),clearTimeout(window._postsCleanTimer),void(window._postsCleanTimer=setTimeout(Page.postsClean,1e4));Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_12__.debugLog)("cleaning ls..");var _=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("posts_sent")||{};for(var o in e){for(var t in e[o]){var i=e[o][t];_-(i>0?i:-i)>24&&delete e[o][t]}Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.isEmpty)(e[o])&&delete e[o]}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_sent",e),Wall.cleanAdsEvents()},postsClear:function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_seen",{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_extras",{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("posts_sent",{}),window._postsSaved={},window._postsSeen={},window._postsSeenModules={},window._postsExtras={},_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set(Wall.LS_ADS_EVENTS,Wall._lsAdsEvents={})},showContacts:function(_,e,o){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("/al_page.php",{act:"a_get_contacts",oid:_,edit:e}).setOptions({onHideAttempt:function(){return cur.reloadAfterClose&&(o?o():(nav.reload({noscroll:!0}),cur.reloadAfterClose=!1)),!0}})},showContactTT:function(_,e){Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_7__.showTooltip)(_,{text:()=>e,slideX:15,className:"pedit_tt",hasover:1,shift:[-Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getSize)(_)[0]-10,-15,-15],dir:"left",appendParentCls:"scroll_fix_wrap",onCreate:function(){_.tt&&setTimeout(_.tt.hide,3e3)}})},editContact:function editContact(oid,mid,hash,callback){var b=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_page.php",{act:"a_edit_contact_box",mid,oid}).setButtons(Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_save"),(function(btn){function onSearch(){var params={act:"a_add_contact",mid,oid};params.hash=hash,hash||(params.hash=ge("group_contact_hash").value),params.title=val("group_contact_position"),params.phone=val("group_contact_phone"),params.email=val("group_contact_email"),mid||!ge("group_contact_memlink")||(params.page=val("group_contact_memlink"),params.page||params.phone||params.email)?ajax.post("al_page.php",params,{onDone:function onDone(res,script){b.hide();var box=Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_13__.curBox)();if(box){if(box.content(res),ge("public_contacts_list")&&ge("public_contacts_list").sorter&&ge("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_12__.logEvalError)(_,script)}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.toggle)("group_add_contact",ge("public_contacts_list").childNodes.length<30)}else Page.showContacts(oid,1,callback)},onFail:function(_){if(ge("group_contact_error"))return ge("group_contact_error").innerHTML=_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)("group_contact_error_wrap"),!0},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.lockButton.pbind(btn),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.unlockButton.pbind(btn)}):b.hide()}cur.reloadAfterClose=!0,mid||cur.lastContact==val("group_contact_memlink")?onSearch():Page.searchContact(oid,val("group_contact_memlink"),onSearch)}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_cancel"));return!1},searchContact:function(_,e,o){if(!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.trim)(e))return cur.lastContact="",void(o&&o());e!=cur.lastContact&&ajax.post("al_page.php",{act:"a_search_contact",oid:_,page:e},{onDone:function(_,t,i,a){cur.lastContact=e,ge("group_contact_name").innerHTML=i,ge("group_contact_image").innerHTML=t,ge("group_contact_hash").value=a,_?o?o():hide("group_contact_error_wrap"):(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.notaBene)("group_contact_memlink","",!0),hide("group_contact_error_wrap"))}})},deleteContact:function deleteContact(oid,mid,hash){return cur.reloadAfterClose=!0,ajax.post("al_page.php",{act:"a_delete_contact",oid,mid,hash},{onDone:function onDone(res,script){var box=Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_13__.curBox)();if(box.content(res),ge("public_contacts_list")&&ge("public_contacts_list").sorter&&ge("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_12__.logEvalError)(_,script)}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.toggle)("group_add_contact",ge("public_contacts_list").childNodes.length<30)}}),!1},reorderContacts:function(_,e,o,t,i){var a=o.id.replace("group_contact_cell",""),s=(t&&t.id||"").replace("group_contact_cell",""),n=(i&&i.id||"").replace("group_contact_cell","");cur.reloadAfterClose=!0,ajax.post("/al_page.php",{act:"a_reorder_contacts",oid:_,mid:a,before:s,after:n,hash:e})},initStatusEditable:function(_){if(_.emojiInited)return!1;_.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(_,{ttDiff:-48,rPointer:!0,controlsCont:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_),noStickers:!0,forceEnterSend:!0,ref:"status",onSend:Page.infoSave,checkEditable:function(){var e=Emoji.editableVal(_);e.length>140&&(Emoji.val(_,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.clean)(e.substr(0,140))),Emoji.editableFocus(_,!1,!0))}})}))},infoEdit:function(_){if(cur.viewAsBox)return cur.viewAsBox();var e=ge("current_info").tt;e&&e.hide&&e.hide({fasthide:!0}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)("currinfo_editor","currinfo_fake"),hide("currinfo_wrap"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.isVisible)("currinfo_app")&&!cur.ciApp?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)("currinfo_audio"),hide("currinfo_app")):cur.ciApp&&(hide("currinfo_audio"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)("currinfo_app"));var o=ge("current_info").firstChild,t=ge("currinfo_input"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.geByTag1)("a",o);if(Page.initStatusEditable(t,cur.infoOld),cur.infoEditing="my_current_info"==o.className,cur.infoEditing){var a=i?i.innerHTML:o.innerHTML;a=a.replace(/<img[^>]+alt="([^"]+)"[^>]*>/g,"$1"),cur.infoOld=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.trim)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.clean)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.stripHTML)(a)))}else cur.infoOld="";return window.Emoji?(Emoji.val(t,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.winToUtf)(cur.infoOld)),Emoji.editableFocus(t,!1,!0,!0)):(val(t,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.winToUtf)(cur.infoOld)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.elfocus)(t)),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(window,"keydown",Page.infoKeydown),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(document,"mousedown",Page.infoMousedown),ge("currinfo_save").onclick=Page.infoSave,!1},infoCancel:function(){hide("currinfo_editor","currinfo_fake"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)("currinfo_wrap"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.cleanElems)("currinfo_save","currinfo_cancel"),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(window,"keydown",Page.infoKeydown),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(document,"mousedown",Page.infoMousedown),cur.ciApp=!1},infoShowShare:function(){if(cur.viewAsBox)return cur.viewAsBox();var _=ge("current_info"),e=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("share_current_info");Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_7__.showTooltip)(_,{content:'<div class="content"><div class="checkbox">'+e+"</div></div>",className:"share_tt",init:function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(geByClass1("checkbox",_.tt.container),"click",(function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.checkbox)(this),ajax.post("al_page.php",{act:"share_currinfo",hash:cur.options.info_hash,oid:cur.oid,checked:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.isChecked)(this)},{onDone:Wall.receive})}))},toup:!1,showdt:0,slide:10,shift:[6,8,8],dir:"auto",hidedt:200,onClean:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.cleanElems)(geByClass1("checkbox",_.tt.container))}})},infoKeydown:function(_){_.keyCode==KEY.ESC&&Page.infoCancel()},infoMousedown:function(_){for(var e=_.target;e.parentNode;){if("currinfo_editor"==e.id)return;e=e.parentNode}Page.infoCancel()},infoSave:function(){if(cur.viewAsBox)return cur.viewAsBox();var _=ge("currinfo_input"),e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.trim)((window.Emoji?Emoji.editableVal:val)(_)).replace(/\n/g," ");if(e==cur.infoOld||e==Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.winToUtf)(cur.infoOld))return Page.infoCancel();e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.trim)(e).substr(0,140),ajax.post("al_page.php",{act:"current_info",oid:cur.oid,info:e,hash:cur.options.info_hash},{onDone:function(){var _=e?"my":"no",o=e?'<span class="current_text">'+Emoji.emojiToHTML(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),!0)+"</span>":Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("change_current_info");ge("current_info").innerHTML=ge("currinfo_fake").innerHTML='<span class="'+_+'_current_info">'+o+"</span>",Page.infoCancel();var t=ge("current_info"),i=t.tt;i&&i.el&&(i.destroy(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(t,"mouseover")),e&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(t,"mouseover",Page.infoShowShare),Page.infoShowShare())},onFail:function(_){if(!_)return!0},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.lockButton.pbind("currinfo_save"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.unlockButton.pbind("currinfo_save"),stat:[jsc("web/tooltips.js"),"tooltips.css",jsc("web/emoji.js")]})},showGifBox:function(_,e,o,t,i,a){a&&(a.ctrlKey||a.metaKey||a.shiftKey)||(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(a),checkMp4((function(s){s&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(a),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("docs.php",{act:"show_box",doc_id:_,doc_owner_id:e,post_id:o,post_owner_id:t,hash:i},{stat:[window.jsc("web/docs.js"),"docs.css"],params:{white:!0,hideButtons:!0},onDone:function(_,e){if(!vk.widget){if(Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_13__.curBox)().setOptions({width:e.width+50}),cur.gifAdded&&cur.gifAdded[e.doc]){var o=geByClass1("docs_gif_box_add_"+e.doc);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.replaceClass)(o,"button_action_light_add","button_action_light_done"),val(o,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("wall_doc_added_short"))}var t=geByClass1("page_doc_photo_href",Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_13__.curBox)().bodyNode);Page.showGif(t)}}}))})))},showGif:function(_,e,o,t){if(e&&(e.ctrlKey||e.metaKey))return!0;if(!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.isUndefined)(t)){var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(i),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(_);cur.gifAdded=cur.gifAdded||{},(cur.activeGif&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(cur.activeGif))==a||hasClass(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(cur.activeGif),"page_gif_large")&&!o)&&Page.hideGif(cur.activeGif,!1);var n,r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"doc"),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"hash"),c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"add-txt")||"",d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"add-hash"),E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"share-txt")||"",u=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"post"),b=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"reply"),O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"preview"),p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"width"),P=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"height"),D=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"thumb"),M=hasClass(i,"page_gif_large"),m=!e;O||(t=!1);var g=_.href+"&wnd=1&module="+cur.module;t?(n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("video",{autoplay:!0,muted:!0,loop:"loop",poster:D,src:g+"&mp4=1",className:"pages_gif_img page_gif_big"},{width:p?p+"px":void 0,height:P?P+"px":void 0,background:M?"transparent url("+D+") no-repeat 0 0":"",backgroundSize:"cover"}),attr(n,"webkit-playsinline",""),browser.ipad&&attr(n,"controls","")):n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("img",{src:g,className:"pages_gif_img"},{visibility:"hidden"});var h=l?'<div class="page_gif_share" onmouseover="showTooltip(this, {text: \''+E+"', black: 1, shift: [7, 6, 6], toup: 0, needLeft: 1})\" onclick=\"return Page.shareGif(this, '"+r+"', '"+l+'\', event)"><div class="page_gif_share_icon"></div></div>':"",f=d?'<div class="page_gif_add" onmouseover="return Page.overGifAdd(this, \''+c+"', '"+r+"', event);\" onclick=\"return Page.addGif(this, '"+r+"', '"+l+"', '"+d+'\', event);"><div class="page_gif_add_icon"></div></div>':"",C=h||f?'<div class="page_gif_actions">'+h+f+"</div>":"",v='<div class="page_gif_progress_icon" style="display:none;">'+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.rs)(vk.pr_tpl,{id:"",cls:""})+"</div>",w=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("a",{href:_.href,className:"page_gif_preview"+(cur.gifAdded[r]?" page_gif_added":""),innerHTML:v+C,onclick:_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent},{backgroundImage:t?"":(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getStyle)(s,"backgroundImage")||"").replace(/"/g,"'"),backgroundSize:t?"":(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getStyle)(s,"backgroundSize")||"").replace(/"/g,"'"),width:p?p+"px":void 0,height:P?P+"px":void 0}),T=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(w);w.appendChild(n),cur.activeGif=w,i!==Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_)&&Wall.sendInsertBeforeError(),i.insertBefore(w,_),hide(_);var B,L=!1,A=function(){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getSize)(n);(_[0]||_[1])&&(clearInterval(B),delete n.onload,delete n.onloadeddata,L=!0,hide(T),w.style.background="",w.setAttribute("onclick","return Page.hideGif(this, event);"),addClass(n,"page_gif_big"),addClass(w,"page_gif_loaded"),p&&(n.style.width=p+"px"),P&&(n.style.height=P+"px"),n.style.visibility="",Object(_lib_stats__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("gif_play",0,t?"mp4":"gif",m?1:0))};e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)(T):setTimeout((function(){L||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)(T)}),300),t?n.onloadeddata=A:(B=setInterval(A,10),n.onload=A),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(i,"playing",1);var U=m?"autoplay":"manual",I=cur.module||"other",j=u?"post":b?"reply":"";if(Object(_lib_stats__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("gif_show",U,I,j),u){var R=u.split("_"),W=R[0],K=R[1];Object(_lib_stats__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("show_post_gif",1,W,K)}return Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(e)}checkMp4((function(t){Page.showGif(_,e,o,t)}))},hideGif:function(_,e){if(e&&(e.ctrlKey||e.metaKey))return!0;var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_),t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domNS)(_);return o.removeAttribute("data-playing"),e&&removeClass(o,"page_gif_autoplay"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)(t),delete cur.activeGif,!1},overGifAdd:function(_,e,o,t){return cur.gifAdded=cur.gifAdded||{},cur.gifAdded[o]&&!(e=cur.gifAdded[o].tooltip)||Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_7__.showTooltip)(_,{text:e,black:1,shift:[7,6,6],toup:0,needLeft:1}),!1},addGif:function(_,e,o,t,i){if(cur.viewAsBox)return Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.stopEvent)(i),cur.viewAsBox();cur.gifAdded=cur.gifAdded||{},isObject(_.tt)&&_.tt.hide();var a=hasClass(_,"button_action_light");return cur.gifAdded[e]?ajax.post("docs.php",{act:"a_delete",oid:vk.id,did:cur.gifAdded[e].did,hash:cur.gifAdded[e].hash},{onDone:function(){if(a)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.replaceClass)(_,"button_action_light_done","button_action_light_add"),val(_,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("wall_doc_add_short"));else{var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.gpeByClass)("page_gif_large",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_);removeClass(o,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}delete cur.gifAdded[e]}}):(addClass(_,"page_gif_adding"),ajax.post("docs.php",{act:"a_add",doc:e,hash:o,add_hash:t},{onDone:function(o,t,i,s){if(Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_13__.showDoneBox)(o),a)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.replaceClass)(_,"button_action_light_add","button_action_light_done"),val(_,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("wall_doc_added_short"));else{var n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.gpeByClass)("page_gif_large",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_);addClass(n,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}cur.gifAdded[e]={tooltip:t,did:i[0],hash:s}}})),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(i)},shareGif:function(_,e,o,t){return cur.viewAsBox?(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.stopEvent)(t),cur.viewAsBox()):(isObject(_.tt)&&_.tt.hide(),window.showBox("like.php",{act:"publish_box",object:"doc"+e,list:o},{stat:["wide_dd.js","wide_dd.css",jsc("web/sharebox.js")]}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(t))},initGifAutoplay:function(_){if(!(cur.gifAutoplayScrollHandler||browser.mobile||!1===_||cur.viewAsBox))if(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.isUndefined)(_))checkMp4((function(_){Page.initGifAutoplay(_)}));else{var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getSize)("page_header")[1],o=Object(_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_15__.debounce)((function(){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.geByClass)("page_gif_autoplay");if(!(!_.length||window.wkcur&&wkcur.shown)){var o,t,i,a=(window.innerHeight||document.documentElement.clientHeight)-e,s=e+a/2,n=Math.min(a,800),r=s-n/2,l=s+n/2,c=_.length-1,d=-1;if(cur.activeGif){var E=cur.activeGif.getBoundingClientRect();if(E.top>r&&E.bottom<l){if(E.top<s&&E.bottom>s)return;var u=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.indexOf)(_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(cur.activeGif)),b=Math.min(Math.abs(a/2-E.top),Math.abs(a/2-E.bottom));o={el:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(cur.activeGif),distanceToMiddle:b},u>-1&&(c=u,d=Math.abs(a/2-E.top)<Math.abs(a/2-E.bottom)?-1:1)}else inArray(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(cur.activeGif),_)&&Page.hideGif(cur.activeGif)}for(;t=_[c];){var O=t.getBoundingClientRect(),p=O.width&&O.height&&O.top>r&&O.bottom<l;if(p&&0==c&&Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollGetY)()<300){o={el:t,distanceToMiddle:i};break}if(p){if(i=Math.min(Math.abs(a/2-O.top),Math.abs(a/2-O.bottom)),o&&i>o.distanceToMiddle)break;o={el:t,distanceToMiddle:i}}c+=d}if(o&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(o.el)!==cur.activeGif){Page.showGif(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(o.el));for(var P,D=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.indexOf)(_,o.el)+1;P=_[D++];){var M=P.getBoundingClientRect();if(M.width&&M.height){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("video",{src:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(P).href+"&wnd=1&mp4=1",preload:"auto"});break}}}}}),50);cur.gifAutoplayScrollHandler=o,Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(window,"scroll",o),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(window,"resize",o),o(),cur.destroy.push((function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(window,"scroll",o),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(window,"resize",o),o=null,delete cur.gifAutoplayScrollHandler}))}},initVideoAutoplay:function(_){if(browser.mobile||!1===_||cur.videoAutoplayScrollHandler)"feed"==cur.module&&Object(_lib_stats__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("feed_init_video_autoplay",cur.videoAutoplayScrollHandler?"already_init":"bad_browser");else if(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.isUndefined)(_))checkMp4((function(_){Page.initVideoAutoplay(_)}));else{var e,o,t,i,a,s,n,r,l,c="im"==cur.module;if("feed"==cur.module)Object(_lib_stats__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("feed_init_video_autoplay","good_browser");else if(c){var d=geByClass1("_im_chat_body_abs");e=geByClass1("im-page--chat-header"),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.data)(d,"ui-scroll"),t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getSize)(e)[1],i=geByClass1("im-chat-input"),a=0,s=!0,n=null}var E=window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),u=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getSize)("page_header")[1],b=Object(_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_15__.debounce)((function(_,d){if(!(layers.visible||window.mvcur&&mvcur.mvShown||nav.objLoc.z||document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement)){var b=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.geByClass)("page_video_autoplayable"),M=b.length;if(M&&(!d||!cur.videoInlinePlayer||cur.videoInlinePlayer.isAutoplay())){var m,g,h,f=document.body.scrollHeight-u,C=(window.innerHeight||document.documentElement.clientHeight)-u,v=u+C/2,w=Math.min(C,800);c?(h=cur.imClassicInterface?f-(C+Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollGetY)()):o.api.data.scrollBottom,s=h>=a,a=h,(d||h&&(cur.imClassicInterface&&s||!cur.imClassicInterface&&s))&&(b=b.reverse()),m=v-w/2,g=h<100?C:m+w,cur.imClassicInterface?(r=e.getBoundingClientRect().top+t,l=i.getBoundingClientRect().top):(r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getXY)(e)[1]+t,l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.getXY)(i)[1]),m<r&&(m=r),g>l&&(g=l)):g=(m=(h=Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollGetY)())<300?u:v-w/2)+w;var T=cur.videoInlinePlayer;if(T){var B=T.isAutoplay(),L=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domClosest)("post",T.el),"ad-view"),A=T.el.getBoundingClientRect(),U=A.top>m&&A.bottom<g;if(!L&&B||(U=A.bottom>m&&A.bottom<g||A.top>m&&A.top<g),U){if(B&&"paused"==T.getState()&&T.play(),"ended"!=T.getState())return}else B&&!T.isActiveLive()&&T.pause()}var I=M;for(d&&n&&(I=b.indexOf(n));I--;){var j=b[I],R=hasClass(j,"VideoRestriction");if(!(!E&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(j,"duration"))>300||R)){var W=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(j,"loading"),K=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(j,"playing"),x=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domClosest)("post",j),"ad-view"),k=(K?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domNS)(j):j).getBoundingClientRect();if(k.width&&k.height){var y=k.top>m&&k.bottom<g;if(x&&!T&&(y=k.bottom>m&&k.bottom<g||k.top>m&&k.top<g),y){if(!K&&!W){var S=O(j),H=Date.now();n=j,Object(_lib_video__WEBPACK_IMPORTED_MODULE_17__.showInlineVideo)(S.video,S.list,{autoplay:1,no_progress:1,cache:1,addParams:S},!1,j),Object(_lib_stats__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("page_show_inline_video",Date.now()-H),P(S),cur.videoAutoplayStat={video:S.video,launched:Date.now(),preloaded:p(S.video)}}break}if(!c&&k.top<=m)break}}}var N=I+1;if(c){if(!h)return;N=I-1}do{var F=b[N];if(F&&(E||Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(F,"duration"))<=300)){var G=O(F);p(G.video)||Object(_lib_video__WEBPACK_IMPORTED_MODULE_17__.loadInlineVideo)(G,D,!0);break}}while(++N<M&&!c)}}}),50);cur.videoAutoplayScrollHandler=b,Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(window,"scroll",b),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(window,"resize",b),c&&!cur.imClassicInterface&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(window,"imScroll",b),b(),cur.destroy.push((function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(window,"scroll",b),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(window,"resize",b),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(window,"imScroll",b),b=null,delete cur.videoAutoplayScrollHandler}))}function O(_){return{video:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"video"),ad_data:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"ad-data"),ad_block_id:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"ad-block-id"),list:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"list"),post_id:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domClosest)("post",_),"post-id"),stretch_vertical:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"stretch-vertical")),autoplay_sound:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"autoplay-sound")),autoplay:1,from_autoplay:1,module:currentModule()}}function p(_){var e=!1;return each(window.ajaxCache,(function(o,t){if(0==o.indexOf("/al_video.php?act=show_inline")&&o.indexOf("&video="+_)>0)return e=!0,!1})),e}function P(_){ajax.post("al_video.php?act=autoplay_stat",{event:"load",video:_.video,post_id:_.post_id,module:cur.module||""},{})}function D(_,e){if(_){var o=e[3].player.params[0];VideoPlayer.preload(o)}}},actionsDropdown:function(_,e){_||!e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)(_):e()},actionsDropdownHide:function(_,e,o){if(1===e)return o&&o(),hide(_);clearTimeout(cur.actDdHide),cur.actDdHide=setTimeout((function(){Object(_lib_fx__WEBPACK_IMPORTED_MODULE_18__.fadeOut)(_,200,hide.pbind("page_actions_sublist")),o&&o()}),150)},actionsDropdownUnhide:function(){clearTimeout(cur.actDdHide)},actionsDropdownLocked:function(_){if(_=ge(_))return hasClass(_,"page_actions_item_lock")},lockTimeout:null,resetLockTimeout:null,actionsDropdownLock:function(_){(_=ge(_))&&hasClass(_,"page_actions_item")&&!hasClass(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),Page.resetLockTimeout=!1,Page.lockTimeout=setTimeout((function(){if(!Page.resetLockTimeout){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.data)(_,"inner",_.innerHTML),addClass(_,"page_actions_item_lock");var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("div",{className:"page_actions_item_lock_text"});val(e,_.innerHTML),_.appendChild(e),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.showProgress)(_)}}),500))},actionsDropdownUnlock:function(_){Page.resetLockTimeout=!0,(_=ge(_))&&hasClass(_,"page_actions_item")&&hasClass(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),removeClass(_,"page_actions_item_lock"),_.innerHTML=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.data)(_,"inner"))},actionsPreloadFeedLists:function actionsPreloadFeedLists(el,sh){ajax.post("al_feed.php",{act:"a_get_lists_by_item",item_id:cur.oid},{onDone:function onDone(html,js){if(sh&&!ge("page_actions_wrap")){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(el).appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.se)(html),el);try{eval(js)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_12__.logEvalError)(_,js)}}},cache:1})},feedListsDDShow:function(){var _=ge("page_actions_item_lists");if(addClass(_,"page_actions_item_unfolded"),ge("page_actions_sublist"))return clearTimeout(cur.feedListsDDHide),void Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)("page_actions_sublist");var e=[];for(var o in cur.options.feedLists){var t=cur.options.feedLists[o];t.length>20&&(t=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.trim)(t.substr(0,18))+"..."),e.push('<a id="page_feed_item'+o+'" class="page_actions_item page_actions_subitem'+(cur.options.feedListsSet&&cur.options.feedListsSet[o]?" checked":"")+'" onclick="Page.feedListsCheck(this, '+o+');">'+t+"</a>")}e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.se)('<div id="page_actions_sublist" onmouseover="Page.feedListsDDShow();">'+e.join("")+"</div>"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPN)(_).appendChild(e)},feedListsDDHide:function(){clearTimeout(cur.feedListsDDHide),cur.feedListsDDHide=setTimeout((function(){hide("page_actions_sublist"),removeClass("page_actions_item_lists","page_actions_item_unfolded")}),150)},feedListsCheck:function(_,e){var o=hasClass(_,"checked");o?(cur.options.feedListsSet[e]=0,cur.options.feedListsChanges[e]=-1):(cur.options.feedListsSet[e]=1,cur.options.feedListsChanges[e]=1),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(_,"checked",!o),cur.feedListsTO&&clearTimeout(cur.feedListsTO);var t=[];for(var i in cur.options.feedListsChanges)t.push(cur.options.feedListsChanges[i]*i);t.length&&(cur.feedListsTO=setTimeout((function(){ajax.post("al_feed.php",{act:"a_toggle_lists",item_id:cur.oid,lists_ids:t.join(","),hash:cur.options.feedListsHash},{onDone:function(){cur.options.feedListsChanges={}}})})))},addAudioPreview:function(_,e){return e[AudioUtils.AUDIO_ITEM_INDEX_CONTEXT]="attach_preview",AudioUtils.drawAudio(e,"inlined")},ownerButtonClick:function(_,e,o){if(!Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.checkEvent)(o)){switch(_.type){case"open_url":if(_.is_internal&&_.open_in_layer){var t=nav.fromStr(_.url),i=t[0].replace("/","");return delete t[0],Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__.showWiki)({w:i},null,null,{ads_params:t})}return nav.go(e,o)}return!1}},postAttachesShowMore:function(_,e){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPS)(_);if(o&&hasClass(o,"post_cropped_attaches")){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domPS)(o),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(o);["wall_audio_rows","post_media","post_thumbed_media"].some((function(_){return hasClass(t,_)&&hasClass(i,_)}))&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domChildren)(i).forEach((function(_){t.appendChild(_)})),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)(i));var a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.cf)(o.innerHTML);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domInsertBefore)(a,o),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)(o),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)(_);var s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.gpeByClass)("post",_),n=s?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(s,"post-id"):"";if(n){var r="feed"===cur.module&&feed?feed.getModuleRef():cur.module;Object(_lib_stats__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("post_activity","expand_attach",n,r)}}return e&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(e)},showLoginBox:()=>(Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showBox)("al_login.php",{act:"box"}),!1),showUnblurBox(_,e,o,t,i){var a=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showFastBox)({title:_},e,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("photos_restriction_button_watch"),(function(_){Page.unblurPhoto(o,t,_,(function(){a.hide(),i&&i()}))}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("global_cancel"))},unblurPhoto(_,e,o,t){ajax.post("al_photos.php",{act:"unblur",photo_raw:_,hash:e},{showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.lockButton.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_9__.unlockButton.pbind(o),onDone:function(e){var o=[];if(e){cur.unblurredOwners||(cur.unblurredOwners=[]);var i=_.split("_")[0];cur.unblurredOwners.push(i),o=document.querySelectorAll(`.PhotosRestriction--blur[data-photo-id^='${i}'], .PostPhotoRestriction--blur[data-photo-id^='${i}'], .PostPhotoRestriction--blurWithText[data-photo-id^='${i}']`)}else o=document.querySelectorAll(`.PhotosRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blurWithText[data-photo-id='${_}']`);if(o.forEach((function(_){removeClass(_,"PhotosRestriction--blur"),removeClass(_,"PostPhotoRestriction--blur"),removeClass(_,"PostPhotoRestriction--blurWithText");var e=_.querySelector(".PostPhotoRestriction__blurTitle"),o=_.querySelector(".PostPhotoRestriction__blurButton");e&&e.parentNode.removeChild(e),o&&o.parentNode.removeChild(o)})),cur.unblurredPhotos||(cur.unblurredPhotos=[]),cur.unblurredPhotos.push(_),cur.pvPhoto&&cur.pvCurData&&cur.pvCurData.photoRaw===_){removeClass(cur.pvPhoto,"ZPhotosRestriction--blur");var a=cur.pvPhoto.querySelector(".ZPhotosRestriction__title"),s=cur.pvPhoto.querySelector(".ZPhotosRestriction__text"),n=cur.pvPhoto.querySelector(".ZPhotosRestriction__button");a&&a.parentNode.removeChild(a),s&&s.parentNode.removeChild(s),n&&n.parentNode.removeChild(n),cur.pvCurData.restrictionBlur=!1,window.Photoview&&window.Photoview.doShow()}t&&t()}})},playVkFestBanner(){window.onDomReady((function(){setTimeout((function(){checkMp4((function(){!function(){var _=ge("vk_fest_2020_banner_video");if(_){var e={video:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domData)(_,"video"),module:currentModule()};Object(_lib_video__WEBPACK_IMPORTED_MODULE_17__.showInlineVideo)(e.video,"",{autoplay:1,no_progress:1,cache:1,addParams:e},!1,_)}}()}))}))}))},showGroupCallsOnboardingTooltip(){var _=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.get("group_calls_tooltip_shown")||0;_<=2&&!cur.groupCallsTooltip&&"im"!==cur.module&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.isVisible)("side_bar")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.isVisible)("side_bar_inner")&&!cur.introTooltipShow&&setTimeout((function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("group_calls_tooltip_shown",_+1);var e=()=>{cur.groupCallsTooltip&&cur.groupCallsTooltip.destroy(),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_10__.default.set("group_calls_tooltip_shown",999)};cur.groupCallsTooltip=new ElementTooltip("l_msg",{autoShow:!1,content:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_19__.getLang)("mail_group_calls_sidebar_tt"),cls:"feature_intro_tt feature_intro_blue_tt",forceSide:"right",width:228,appendTo:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_3__.geByTag1)("body"),offset:[7,0,0],onHide:function(){cur.groupCallsTooltip&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(cur.groupCallsTooltip._ttel,"click",e),cur.groupCallsTooltip.destroy())}}),cur.groupCallsTooltip.show(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(cur.groupCallsTooltip._ttel,"click",e),cur.destroy.push((function(){cur.groupCallsTooltip&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(cur.groupCallsTooltip._ttel,"click",e),cur.groupCallsTooltip.destroy())}))}),1e3)}};__webpack_exports__.default=Page}}]);try{stManager.done("cmodules/bundles/e1eb3733f1f626a37fd0d2e038b98573.25d68629c38a5491f36e.js")}catch(_){}