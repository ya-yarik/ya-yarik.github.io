(window.webpackJsonp=window.webpackJsonp||[]).push([["3113b7f72dc7a6cb1bd72a96856988db"],{"31O9":function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return g}));a("HEwt"),a("a1Th"),a("Btvt"),a("rGqo"),a("rE2o"),a("ioFf"),a("91GP"),a("KKXr"),a("OG14"),a("SRfc"),a("pIFo");var i=a("jE6c"),r=a("EE0W");function o(t,e){var a=domQuery1("[data-sizes]",t),o=JSON.parse(domData(a,"sizes"));(domData(a,"media-links")||"").split(",");if(!(o.length<=1||domData(t,"carousel-inited"))){if(domData(t,"carousel-inited",1),e.mobile)return function(t,e){var a,o,s,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=geByClass1("article_photo_carousel__controls",e),d=geByClass1("article_photo_carousel__counter",e),h=domData(d,"counter-lang")||getLang("global_article_carousel_counter"),u=getSize(geByClass1("article_figure_content",e)),g=geByClass1("article_photo_carousel_inner",e),p=c.onClick,_=0,m=0,v=!1,b=0,w=0,f=!1,y=!1;l.addEventListener("touchstart",t=>{o=t.touches[0].pageX,a=t.touches[0].pageY,addClass(g,"--no_trans"),v=!0,clearTimeout(s)});var O,j=!1;function E(a,o,c){var l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],m=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!o||!v){if(v=!0,o)return g.style.transform="translateX(-50px)",void(s=setTimeout(()=>{g.style.transform="translateX(0px)"},700));clearTimeout(s),_=void 0===_?Math.min(t.length-1,Math.max(0,_+a)):c,l&&Object(i.isFunction)(p)&&w!==_&&p(w<_?r.ArticleStatsEvents.clickOnCarouselNext:r.ArticleStatsEvents.clickOnCarouselPrev),domData(e,"photo-carousel-index",_),n(_,e),d.innerHTML=h.replace("{counter}",_+1).replace("{total}",t.length),m||addClass(g,"--no_trans"),g.style.transform=`translateX(-${_*u[0]}px)`,m||(g.offsetWidth,removeClass(g,"--no_trans"))}}return l.addEventListener("touchmove",e=>{if(y||!(Math.abs(e.touches[0].pageY-a)>5||f)){if(m=e.touches[0].pageX-o,!(Math.abs(m)<10)||j){y||window.addEventListener("touchmove",O=t=>cancelEvent(t),{passive:!1}),y=!0,j=!0;var i=Math.min(t.length-1,Math.max(0,_+(m<0?1:-1))),r=0===i&&0===_,n=i===t.length-1&&_===t.length-1;b=i;var s=-_*u[0];s+=r||n?.2*m:m,g.style.transform=`translateX(${s}px)`}}else f=!0}),l.addEventListener("touchend",()=>{j=!1,f=!1,y=!1,w=_,removeClass(g,"--no_trans"),O&&window.removeEventListener("touchmove",O),Math.abs(m)<50||(_=b),E(0,!1,b,!0)}),function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e||(b=a),w=_,E(t,e,a,i,r)}}(o,t,e);var s=function(t,e,a,i){var o,s=0,c=geByClass1("article_photo_carousel__controls",e),l=geByClass1("article_photo_carousel__counter",e),d=domData(l,"counter-lang")||getLang("global_article_carousel_counter"),h=getSize(geByClass1("article_figure_content",e)),u=geByClass1("article_photo_carousel_inner",e),g=geByClass1("article_photo_carousel__left",e),p=geByClass1("article_photo_carousel__right",e),_=a.onClick,m=!1;function v(a,i){if(!i||!m){if(m=!0,i)return u.style.transform="translateX(-50px)",void(o=setTimeout(()=>{u.style.transform="translateX(0px)"},700));clearTimeout(o),s=Math.min(t.length-1,Math.max(0,s+a)),u.style.transform=`translateX(-${s*h[0]}px)`,l.innerHTML=d.replace("{counter}",s+1).replace("{total}",t.length),toggle(g,s>0),toggle(p,s<t.length-1),domData(e,"photo-carousel-index",s),n(s,e)}}return p.addEventListener("click",t=>(v(1),_&&_(r.ArticleStatsEvents.clickOnCarouselNext),cancelEvent(t))),g.addEventListener("click",t=>(v(-1),_&&_(r.ArticleStatsEvents.clickOnCarouselPrev),cancelEvent(t))),e.addEventListener("mousemove",()=>{c.style.opacity=1}),e.addEventListener("mouseleave",()=>{c.style.opacity=0}),v}(o,t,e);return window.data(t,"changePhotoFunction",s),s}}function n(t,e){var a=geByTag1("figcaption",e),i=[];a&&((i=domData(a,"captions"))&&(i=JSON.parse(i)),a.innerHTML=i[t]||"")}var s=a("lkNA");function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,r=!1,o=void 0;try{for(var n,s=t[Symbol.iterator]();!(i=(n=s.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var d,h,u={};window._articleCarouselGlobalId=window._articleCarouselGlobalId||1;class g{constructor(t,e,a){this._handleClick=t=>{if(t.target.href)try{var e=new URL(t.target.href);window.location.pathname===e.pathname&&e.search.match(/\?|&anchor=/)&&(t.preventDefault(),this.scrollToAnchor(null,e.search),window.history.replaceState({},document.title,`${e.pathname}${e.search}`))}catch(t){console.error(t)}},this._article=t,this._options=e,this._readTO=null,this._scrollStatEvent=!1,this._openTime=0,this._els={view:ge("article_view_"+t.raw_id)},window.cur&&cur.destroy&&cur.destroy.push(()=>{this.deinit()}),a&&this.ready()}getEl(){return this._els.view}getArticle(){return this._article}getScrollNode(){return this._options.getScrollNode?this._options.getScrollNode():document}_getScrollTop(){return this._options.getScrollTop?this._options.getScrollTop():window.scrollNode?window.scrollNode.scrollTop:window.document.documentElement.scrollTop}getTimeSpent(){return Math.round((Date.now()-this._openTime)/1e3)}changeCarouselPosition(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=u[t];Object(i.isFunction)(o)&&o(0,!1,e,a,r)}deinit(){this._scrollEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollEvent),this._scrollEvent=!1),this._scrollStatEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),this._scrollStatEvent=!1),document.removeEventListener("click",this._handleClick),clearTimeout(this._readTO)}_onViewScroll(){var t=scrollGetY(),e=window.innerHeight;Object(i.each)(geByTag("figure",this._els.view),(a,r)=>{var o=Object(i.intval)(domData(r,"done"));if(!o){var n=getH(r),s=getXY(r)[1],c=Object(i.intval)(domData(r,"type")),l=101==c?-200:100,d=s<=t+e-l&&t+l<=s+n;(o=this._onObjectView(d,c,r))&&domData(r,"done",1)}}),Object(i.each)(geByTag("figure",this._els.view),(a,r)=>{var o,n=getH(r),s=getXY(r)[1],c=Object(i.intval)(domData(r,"type")),l=s,d=s+n,h=t,u=t+e;if(l>u||h>d)o=!1;else{var g=Math.max(l,h);o=(Math.min(d,u)-g)/n>.7}this._onObjectPartialView(o,c,r)})}_initObjects(){this._initedObjects=this._initedObjects||{},Object(i.each)(geByClass("_article_unmute_button",this._els.view),(t,e)=>{this._initedObjects[t]||(this._initedObjects[t]=!0,e.addEventListener("click",()=>{var t=e.parentNode,a=geByTag1("video",t);a.muted=!a.muted,toggleClass(t,"article_object_unmuted",!a.muted)}))}),Object(i.each)(geByTag("figure",this._els.view),(t,e)=>{if(!this._initedObjects[t])switch(this._initedObjects[t]=!0,parseInt(domData(e,"type"))){case r.ParagraphType.ObjectPhoto:var a=o(e,{mobile:this._options.mobile,moderDeletePhoto:this._options.moderDeletePhoto,onClick:t=>{this.sendStats({type:t})}});if(this._initPhoto(e),a){var i=window._articleCarouselGlobalId++;e.setAttribute("data-carousel-id",i),u[i]=a}break;case r.ParagraphType.ObjectAudio:case r.ParagraphType.ObjectAudioPlaylist:geByClass1("article_figure_content",e).addEventListener("click",()=>{this.sendStats({type:r.ArticleStatsEvents.clickOnAudio})},!0);break;case r.ParagraphType.ObjectMarketItem:case r.ParagraphType.ObjectAliExpressProduct:break;case r.ParagraphType.ObjectGIF:case r.ParagraphType.ObjectVideo:if(this._options.mobile){var n=geByTag1("video",e);n&&(n.addEventListener("play",()=>{this.sendStats({type:r.ArticleStatsEvents.clickOnVideo})}),n.addEventListener("pause",()=>{this.sendStats({type:r.ArticleStatsEvents.clickOnVideo})}))}else{geByClass1("article_figure_content",e).addEventListener("click",()=>{this.sendStats({type:r.ArticleStatsEvents.clickOnVideo})},!0)}}}),this._els.view&&this._els.view.addEventListener("click",t=>{var e=t.target;if(matchesSelector(e,'a[href^="/away"]')){var a=decodeURIComponent(unescape(e.href)).split("vk.com/away.php?to=")[1];a&&this.sendStats({type:r.ArticleStatsEvents.clickOnExternalLink,domain:encodeURIComponent(this._getUrlDomain(a))})}})}_initPhoto(t){geByClass1("article_figure_content",t).addEventListener("click",()=>{var e=domQuery1("[data-sizes]",t),a=JSON.parse(domData(e,"sizes")),o=Object(i.intval)(domData(t,"photo-carousel-index"));this._options.onImageOpen&&this._options.onImageOpen.call(this,a,t,o),this.sendStats({type:r.ArticleStatsEvents.clickOnPhoto})})}_initStats(){if(this._statsInited)this._scrollStatEvent&&this._scrollStatEvent();else{this._statsInited=!0,this._openTime=Date.now();var t,e=-1,a=[];this._scrollStatEvent&&this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),clearTimeout(this._readTO);var o=this;this.getScrollNode().addEventListener("scroll",this._scrollStatEvent=function(){var i=o.getCurrentScrollRatio();if(!(i<0)){var r=1;i>=.95?r=4:i>.66?r=3:i>.33&&(r=2),function(i){if(o._isReady&&(o._article.has_more&&(i=Math.min(i,1)),!(e>=i))){for(var r=e+1;r<=i;r++)a.push(r);if(e=i,clearTimeout(t),t=setTimeout(n,300),3==i&&o._article.ttr){var s=o._article.ttr-o.getTimeSpent();s>0&&(o._readTO=setTimeout(()=>{if(!document.hidden){var t=o.getCurrentScrollRatio();if(!(t<0||t>1.3)){var i=4==e;a=[e=4],n(i)}}},1e3*s))}}}(r),4!=r||o._article.has_more||(o.getScrollNode().removeEventListener("scroll",o._scrollStatEvent),o._scrollStatEvent=!1)}},{passive:!0}),this._scrollStatEvent&&this._scrollStatEvent()}function n(t){if(a.length){var e=o._article,n=o._options,s="";if(e.ref)s=e.ref;else if(window.cur){if("feed"===(s=window.cur.module)&&cur.articlePrevLoc&&!n.mobile)"search"===nav.fromStr(cur.articlePrevLoc).section&&(s="feed_search")}var c={act:"stats",scroll:a.join(","),spent:o.getTimeSpent(),hash:e.access_hash,article_owner_id:e.owner_id,article_id:e.id,is_web_view:n.isWebView?1:0,post_id:n.sourcePostId,is_widget:n.isWidget,is_delayed_scroll_4:Object(i.intval)(t),track_code:n.trackCode,ref:s};ajax.post(n.mobile?"article.php":"al_articles.php",c),e.mailru_stats_data&&a.forEach(t=>{Object(r.mailruStatsPixel)("scroll_"+t,e.mailru_stats_data)}),a=[]}}}_initGoogleAnalytics(){var t=this._options.googleAnalyticsId;if(t)if(window.dataLayer=window.dataLayer||[],window.gtag)window.gtag("config",t,{page_location:window.location.href});else{var e=document.createElement("script");e.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+t),e.setAttribute("async","true"),document.head.appendChild(e),window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",t)}}_onObjectPartialView(t,e,a){var i=domQuery1("[data-sizes]",a),o=Boolean(Number(domData(i,"should-disable-carousel-animation")));if(e==r.ParagraphType.ObjectPhoto&&!o&&JSON.parse(domData(i,"sizes")).length>1){var n=a.getAttribute("data-carousel-id");t?h!=n&&(clearTimeout(d),d=setTimeout(()=>{var t=u[n];t&&t(1,!0)},400),h=n):n==h&&(h=-1,clearTimeout(d))}}_onObjectView(t,e,a){var i=!1;switch(e){case r.ParagraphType.ObjectPhoto:if(t){var o=geByTag1("img",a),n=getW(o)||this._options.width,s=domQuery1("[data-sizes]",a),l=JSON.parse(domData(s,"sizes")),d=geByTag("img",a);l.forEach((t,e)=>{var a=c(Object(r.getAppropriateImage)(l[e],n,!0),1)[0];Object(r.preloadImage)(a,()=>{var t=d[e];removeClass(t,"article_object_photo__image_blur"),t.src=a})}),i=!0}break;case r.ParagraphType.ObjectGIF:if(!this._options.mobile){var h=geByTag1("video",a);if(h)if(t){if(h.hasAttribute("autoplay")){var u=h.play();u&&u.catch(()=>{})}}else h.pause();else i=!0}break;case r.ParagraphType.ObjectTwitter:case r.ParagraphType.ObjectFacebook:case r.ParagraphType.ObjectInstagram:case r.ParagraphType.ObjectVK:case r.ParagraphType.ObjectTelegram:this.initEmbed(e,a),i=!0}return i}initEmbed(t,e){switch(t){case r.ParagraphType.ObjectTwitter:var a=domQuery1("[data-tweet-id]",e),i=domData(a,"tweet-id");Object(s.loadScript)("https://platform.twitter.com/widgets.js",{onLoad:()=>{window.twttr.widgets.createTweet(i,a,{align:"center",lang:window.vk&&0==window.vk.lang?"ru":"en",dnt:!0})}});break;case r.ParagraphType.ObjectFacebook:var o=window.vk&&0==window.vk.lang?"ru_RU":"en_US";Object(s.loadScript)(`https://connect.facebook.net/${o}/all.js#xfbml=1&amp;version=v2.8`,{onLoad:()=>{window.FB.XFBML.parse()}});break;case r.ParagraphType.ObjectInstagram:Object(s.loadScript)("https://www.instagram.com/embed.js",{onLoad:()=>{window.instgrm.Embeds.process(),addEvent(window,"message",r.changeHeightInstagramEmbed)}});break;case r.ParagraphType.ObjectVK:var n=domQuery1("[data-raw-id]",e),l=domData(n,"raw-id"),d=domData(n,"index"),h=c(l.split(";"),2),u=h[0],g=h[1];Object(s.loadScript)("/js/api/openapi.js",{onLoad:()=>{ajax.post("dev.php",{act:"a_get_post_hash",post:`${u}_${g}`},{onDone:t=>{t&&window.VK&&window.VK.Widgets&&window.VK.Widgets.Post(`vk_post_${l}_${d}`,u,g,t,{from:this._options.isWebView?"article_webview":""})}})}});break;case r.ParagraphType.ObjectTelegram:Object(s.loadScript)("https://telegram.org/js/telegram-widget.js?5",{})}}getCurrentScrollRatio(){var t=getH(this._els.view),e=getXY(this._els.view)[1]-getXY(this.getScrollNode().firstElementChild)[1];return(this._getScrollTop()+window.innerHeight-e)/t}getScreenVisibilityRatio(){var t=getH(this._els.view),e=getXY(this._els.view)[1]-getXY(this.getScrollNode().firstElementChild)[1],a=this._getScrollTop(),i=window.innerHeight,r=e,o=e+t,n=a,s=a+i;if(n>o||r>s)return 0;var c=Math.max(r,n);return(Math.min(o,s)-c)/i}update(){this._initObjects(),this._initStats(),this._options.onScroll&&this._options.onScroll.call(this,this.getCurrentScrollRatio())}ready(){(this._isReady=!0,this._initObjects(),this._initStats(),this._initGoogleAnalytics(),setTimeout(()=>{var t=Object(r.getUrlParam)("anchor");if(t){this._options.isWebView||this.scrollToAnchor(t);var e=this.getScrollNode();e===document&&(e=document.scrollingElement||window.scrollNode||document.body),e.click&&e.click(),e.focus()}},0),!this._options.mobile&&window.AudioPlaylist)&&(this._article.audios_list&&this._article.audios_list.length>0&&new AudioPlaylist(AudioPlaylist.TYPE_TEMP,this._article.owner_id,"article_"+this._article.id).mergeWith({list:this._article.audios_list}));this.getScrollNode().addEventListener("scroll",this._scrollEvent=()=>{this._onViewScroll(),this._options.onScroll&&this._options.onScroll.call(this,this.getCurrentScrollRatio())}),document.addEventListener("click",this._handleClick),setTimeout(()=>{this._scrollEvent()},this._options.objectsInitDelay||0)}scrollToAnchor(t,e){t=t||Object(r.getUrlParam)("anchor",e);var a=this._options,i=this.getScrollNode();i===document&&(i=document.scrollingElement||window.scrollNode||document.body);t&&(()=>{var e=document.getElementById(t);if(e){"scrollRestoration"in history&&(history.scrollRestoration="manual");var r=a.isWebView?0:25,o=e.parentNode.offsetTop-r;window.setTimeout(()=>{i.scrollTo?i.scrollTo(0,o):i.scrollTop=o},10)}})()}sendStats(t){var e=this._article,a=this._options,i={act:"stats",spent:this.getTimeSpent(),article_id:e.id,article_owner_id:e.owner_id,hash:e.access_hash,is_web_view:a.isWebView?1:0};Object.assign(i,t),ajax.post(a.mobile?"article.php":"al_articles.php",i)}_getUrlDomain(t){var e=document.createElement("a");return e.href=t,e.hostname}}},EE0W:function(t,e,a){"use strict";a.r(e),a.d(e,"ParagraphType",(function(){return r})),a.d(e,"ResizableObjectTypes",(function(){return o})),a.d(e,"ObjectResizeType",(function(){return n})),a.d(e,"ArticleStatsEvents",(function(){return s})),a.d(e,"getAppropriateImage",(function(){return c})),a.d(e,"preloadImage",(function(){return d})),a.d(e,"mailruStatsPixel",(function(){return h})),a.d(e,"getUrlParam",(function(){return u})),a.d(e,"changeHeightInstagramEmbed",(function(){return g})),a.d(e,"ALLOWED_FILE_TYPES_FOR_PASTE",(function(){return p}));var i=a("jE6c"),r={Text:1,Header1:2,Header2:3,Header3:4,Code:5,NumericList:6,BulletList:7,Quote:8,Quote2:9,ObjectAudioPlaylist:100,ObjectPhoto:101,ObjectVideo:102,ObjectGIF:103,ObjectPodcast:104,ObjectAudio:105,ObjectTwitter:106,ObjectFacebook:107,ObjectInstagram:108,ObjectVK:109,ObjectTelegram:110,ObjectPoll:111,ObjectMarketItem:112,ObjectAliExpressProduct:113},o=[r.ObjectPhoto,r.ObjectGIF,r.ObjectVideo,r.ObjectTwitter,r.ObjectFacebook,r.ObjectInstagram,r.ObjectVK,r.ObjectTelegram],n={Normal:0,Float:1,Medium:2,Large:3},s={clickOnVideo:"click_on_video",clickOnAudio:"click_on_audio",clickOnPhoto:"click_on_photo",clickOnExternalLink:"external_link_click",clickOnCarouselNext:"click_on_carousel_next",clickOnCarouselPrev:"click_on_carousel_prev",clickOnMentions:"click_on_mentions",nightModeOn:"night_mod_on",nightModeOff:"night_mod_off",close:"close"};function c(t,e,a){var r=[];if(Object(i.each)(t,(function(t,e){a&&!["w","z","y","x","m","s"].includes(t)||r.push(e)})),!r.length)return[!1];r.sort((function(t,e){return t[1]-e[1]})),e*=window.devicePixelRatio>=2?2:1;var o=r[r.length-1];return Object(i.each)(r,(function(t,a){if(a[1]>=e)return o=a,!1})),o}var l={};function d(t,e){if(!0===l[t])return e&&e(),!0;if(Array.isArray(l[t]))return l[t].push(e),!1;l[t]=[e];var a=new Image;return a.onload=function(){var e=l[t];l[t]=!0,Object(i.each)(e,(function(t,e){e&&e()}))},a.src=t,!1}function h(t,e){if(Object(i.isObject)(e)&&!Object(i.isEmpty)(e)){var a="https://vk-callback.go.mail.ru/longread_pxl?action="+t;Object(i.each)(e,(function(t,e){a+="&"+t+"="+e})),(new Image).src=a}}function u(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e||location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function g(t){if(/^https?:\/\/([\w-]+\.)*(instagram\.com|instagr\.am)$/.test(t.origin)){var e=function(t){for(var e,a=document.getElementsByTagName("iframe"),i=a.length-1;i>=0;i--){var r=a[i];if(r.contentWindow===t.source){e=r;break}}return e}(t);if(e){try{t=JSON.parse(t.data)}catch(t){}"object"==typeof t&&"string"==typeof t.type&&"object"==typeof t.details&&setTimeout((function(){if("MEASURE"===t.type){var a=t.details.height;e.setAttribute("height",a)}}),100)}}}var p="*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF"}}]);try{stManager.done("cmodules/bundles/3113b7f72dc7a6cb1bd72a96856988db.4e5c484f7610cac71bbb.js")}catch(t){}