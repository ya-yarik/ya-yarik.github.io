!function(e){function t(t){for(var a,l,n=t[0],c=t[1],s=t[2],_=0,u=[];_<n.length;_++)l=n[_],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&u.push(i[l][0]),i[l]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(d&&d(t);u.length;)u.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,n=1;n<r.length;n++){var c=r[n];0!==i[c]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=r[0]))}return e}var a={},i={"web/article_layer":0},o=[];function l(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.e=function(){return Promise.resolve()},l.m=e,l.c=a,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(r,a,function(t){return e[t]}.bind(null,a));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/js/cmodules/";var n=window.webpackJsonp=window.webpackJsonp||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var s=0;s<n.length;s++)t(n[s]);var d=c;o.push([135,"common","983f42e70b3e18d97715513130ff4d9c","3113b7f72dc7a6cb1bd72a96856988db"]),r()}({135:function(e,t,r){e.exports=r("VmBg")},VmBg:function(e,t,r){"use strict";r.r(t);r("pIFo"),r("rGqo"),r("Btvt");var a,i,o,l=r("31O9"),n=r("EE0W"),c=r("4+be"),s=r("t7n3"),d=r("zxIV"),_={open:function(e,t,r){var o=this,l=Object(n.getAppropriateImage)(e[0],window.innerWidth,!0),c=l[0],s=u({width:l[1],height:l[2]},{width:window.innerWidth,height:window.innerHeight}),_=Object(d.getW)(r)<s.width&&Object(d.getH)(r)<s.height;if(c&&_){var h=Object(d.se)('<div class="article_full_view"><img class="article_full_view__image"></div>'),g=Object(d.geByTag1)("figcaption",r);g&&g.innerHTML&&h.appendChild(Object(d.se)('<div class="article_full_view__caption"><div class="article_full_view__caption_inner">'+g.innerHTML+"</div></div>")),i=Object(d.se)('<div class="article_full_view__counter"><div class="article_full_view__counter_text"></div><div class="article_full_view__close"></div></div>'),h.appendChild(i),e.length>1&&Object(d.toggleClass)(i,"article_full_view__carousel",e.length>1),Object(d.geByClass1)("_article_layer").appendChild(h),h.addEventListener("click",(function(e){Object(d.domClosest)("article_full_view__caption_inner",e.target)||o.close()})),h.addEventListener("mousewheel",this.close),a=h;var p=Object(d.geByTag1)("img",h);this._showImage(p,e,t),window.articleCloseImageFullSize=this.close.bind(this)}},_showImage:function(e,t,r){(Object(d.toggleClass)(void 0,"article_full_view__nav_hidden",0==r),Object(d.toggleClass)(void 0,"article_full_view__nav_hidden",r==t.length-1),t.length>1)&&(Object(d.geByClass1)("article_full_view__counter_text",i).innerHTML=Object(c.getLang)("global_article_carousel_counter").replace("{counter}",r+1).replace("{total}",t.length));o=r;var a=!1,l=Object(n.getAppropriateImage)(t[r],window.innerWidth,!0),_=l[0],h=u({width:l[1],height:l[2]},{width:window.innerWidth,height:window.innerHeight});if(Object(n.preloadImage)(_,(function(){if(o===r){a=!0,h.width&&Object(s.isNumeric)(h.width)?Object(d.setStyle)(e,{width:h.width,height:h.height}):Object(d.setStyle)(e,{width:null,height:null}),e.src=_,Object(d.removeClass)(e,"article_full_view__image_blurred");for(var i=r;i<Math.min(r+3,t.length);i++){var l=Object(n.getAppropriateImage)(t[i],window.innerWidth,!0)[0];Object(n.preloadImage)(l)}}})))Object(d.removeClass)(e,"article_full_view__image_blurred");else{var g=Object(n.getAppropriateImage)(t[r],200,!0)[0];Object(n.preloadImage)(g,(function(){o===r&&(a||(Object(d.setStyle)(e,{width:h.width,height:h.height}),e.src=g))})),Object(d.addClass)(e,"article_full_view__image_blurred")}},close:function(){return delete window.articleCloseImageFullSize,!!a&&(Object(d.re)(a),a=null,!0)}};function u(e,t){var r=e.width/e.height,a={width:0,height:0};return r>t.width/t.height?(a.width=Math.min(t.width,e.width),a.height=e.height*(a.width/e.width)):(a.height=Math.min(t.height,e.height),a.width=a.height*r),a}var h,g=[],p=!1;function v(e,t,r,a){g.push(`${r}/${e.owner_id}_${e.id}/${a}`),clearTimeout(h),h=setTimeout(()=>{var e=p?"article.php":"al_articles.php";ajax.post(e,{act:"ads_event",events:g.join(","),is_web_view:intval(t.isWebView)}),g=[]},200)}var b,w,f,y,m,j,O,C,S,k,B=r("RbYe"),L=r("FThC"),E=r("v+DW"),T=r("EasH"),x=r("/PiP"),A={},M={},D="",F=!1,I={},P={},H=[],R=[],V=!1;class N{static openEditor(e,t,r,a){if(!N.isStandalone())return N.close(!0),setTimeout(()=>{nav.change({z:`article_edit${t}_${r}`,from_rev:!!a&&1})},100),cancelEvent(e)}static isStandalone(){return!F}static setFaded(e){toggleClass(P.layer,"article_layer__faded",e)}static updateLocation(){var e=0,t=!1;R.forEach(r=>{var a=r.getScreenVisibilityRatio();a>=e&&(t=r.getArticle(),e=a)}),t&&m.raw_id!=t.raw_id&&(m=t,history.replaceState({layer:!0},t.title,t.url),Object(d.lockDocumentTitle)(!1),setDocumentTitle(t.title),Object(d.lockDocumentTitle)(!0))}static _toggleArticleVisibility(e,t){var r=Object(d.ge)("article_view_"+e);t=Object(s.intval)(t),Object(s.intval)(domData(r,"visible"))!=t&&(domData(r,"visible",t),setStyle(r,"visibility",t?"":"hidden"))}static _initArticleView(e,t){if(!N.isArticleWithoutData(e)){var r=gpeByClass("article_layer__content",Object(d.ge)("article_view_"+e.raw_id));r||(Object(d.removeClass)(N._getLastContentEl(),"article_layer__content_wait_next"),r=se(t),R.length>0&&(Object(d.addClass)(r,"article_layer__next_prepared"),requestAnimationFrame(()=>{Object(d.removeClass)(r,"article_layer__next_prepared")})),P.viewsList.appendChild(r));var a=R.length,i=new l.default(e,{getScrollNode:this.getScrollNode.bind(this),getScrollTop:this.getScrollTop.bind(this),isStandalone:N.isStandalone(),objectsInitDelay:0==a?0:350,onScroll:t=>{if(!vk.widget){e.next_article_url&&t>.6&&N._canShowMoreView()&&(N.prepare(e.next_article_url,null,{ref:"scroll"}),Object(d.addClass)(N._getLastContentEl(),"article_layer__content_wait_next")),t>0&&t<1&&0==a&&N._updateScrollSet(e);var r=i.getScreenVisibilityRatio();N.updateLocation(),N._toggleArticleVisibility(e.raw_id,r>0)}},onImageOpen:(e,t,r)=>{_.open(e,r,t)}},{},!0);R.push(i);var o=Object(d.geByClass1)("article_layer_ads_place",r);(class{static init(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(p=r.mobile||r.isWebView,t&&e.ads&&!isEmpty(e.ads)&&!(e.has_more||isArray(e.ads)&&0==e.ads.length)){var a=ce("ins");addClass(a,"mrg-tag"),addClass(a,"article_adsblock"),r.mobile&&addClass(a,"article_adsblock_mobile"),setStyle(a,{display:"block","text-decoration":"none"});var i="";for(var o in r.deviceInfo)r.deviceInfo.hasOwnProperty(o)&&(i+="&"+o+"="+r.deviceInfo[o]);for(var l in e.ads.data["ad-query"]=e.ads.data["ad-query"].replace("%device_info%",i),e.ads.data)e.ads.data.hasOwnProperty(l)&&domData(a,l,""+e.ads.data[l]);t.appendChild(a),window.MRGtag||(window.MRGtag=[]);var n=r.isWebView?{iframeMode:!0}:{},c=e.ads.eventsHash;if(v(e,r,"requested",c),n.onNoAds=()=>{v(e,r,"no_ads",c)},n.onAdsLoaded=()=>{v(e,r,"ads_loaded",c)},n.onAdsClosed=()=>{v(e,r,"ads_closed",c)},n.onAdsSuccess=()=>{v(e,r,"ads_success",c)},n.onAdsClicked=()=>{v(e,r,"ads_clicked",c)},n.onScriptError=()=>{v(e,r,"script_error",c)},window.MRGtagOnAdsImpression=()=>{v(e,r,"ads_impression",c)},window.MRGtag.push(n),!window.mailRuSdsScriptLoaded){var s=document.createElement("script");s.setAttribute("src",e.ads.script),s.setAttribute("async","true"),document.head.appendChild(s),window.mailRuSdsScriptLoaded=!0}}}static wasShown(){return!1}}).init(e,o,I),N._checkBottomReach(),N.moderActionsInit(e,r);var c=Object(d.geByClass1)("article_layer__mentions",r);c&&c.addEventListener("click",e=>{i.sendStats({type:n.ArticleStatsEvents.clickOnMentions})});var s=r.getElementsByClassName("ArticleLayer__educationCloseButton")[0];C&&s&&s.addEventListener("click",C)}}static _getLastContentEl(){var e=geByClass("article_layer__content");return e[e.length-1]}static _initBottomReached(){H.push(()=>{N._checkBottomReach()})}static _checkBottomReach(){var e=Object(d.geByClass1)("article_layer__views");if(N.getScrollTop()+window.innerHeight+200>=e.offsetHeight){if(k)return;var t=R[R.length-1].getArticle();N._canShowMoreView()&&t.next_article_url&&(N.prepare(t.next_article_url),k=setTimeout(()=>{N._loadNextArticle(t.next_article_url),k=!1},300))}}static _canShowMoreView(){return R.length<20}static closeImageFullSize(){return _.close()}static _loadNextArticle(e){N.prepare(e,(e,t)=>{N._initArticleView(t,e)})}static _restoreScroll(e){var t=N._getSavedScroll(e.url);N.setScrollTop(t)}static _deinitLayer(){H.forEach(e=>{var t=N.getScrollNode();t&&t.removeEventListener("scroll",e)}),H.splice(0,H.length),clearTimeout(k)}static _removeAllViews(){R.forEach(e=>{e.deinit()}),R.splice(0,R.length),P.viewsList&&(P.viewsList.innerHTML="")}static show(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!N.isArticleWithoutData(e))if(F=t,void 0!==a&&(I=a),r&&(boxRefreshCoords(boxLoader),Object(d.show)(boxLoader),Object(d.show)(boxLayerWrap)),N._deinitLayer(),layers.fullhide=!1,Object(s.isObject)(e)){var i=e;N._initLayer(),N._initArticleView(i),m=i,N._restoreScroll(i),N._initFooter()}else N.setFaded(!0),N.prepare(e,(e,t,i)=>{N.setFaded(!1),r&&(Object(d.hide)(boxLoader),Object(d.hide)(boxLayerWrap)),N._removeAllViews(),!0!==i.error?(N._initLayer(),N._initArticleView(t,e),m=t,N._restoreScroll(t),N._initFooter(),t.title&&(y=document.title,Object(d.lockDocumentTitle)(!1),setDocumentTitle(Object(s.replaceEntities)(Object(s.stripHTML)(t.title))),Object(d.lockDocumentTitle)(!0)),a.ev&&domClosest("bookmarks_row_type_article",a.ev.target)&&statlogsValueEvent("bookmarks_product_analytics",{item_type:"article",item_owner_id:t.owner_id,item_id:t.id,time:window.getServerTime()}),Object(s.isFunction)(a.onShowDone)&&a.onShowDone()):Object(T.showFastBox)({title:Object(c.getLang)("global_error")},i.error_message||Object(c.getLang)("global_unknown_error"))},{async:a.prepareAsync})}static isShown(){return!!P.layer}static isArticleWithoutData(e){return Object(s.isArray)(e)&&0===e.length}static back(){var e=R.length&&R[0].getArticle();if(N.isStandalone())if(e&&e.is_blog){if(e.from_blog&&window.history&&window.history.length>1)return window.history.back(),!0;location.href=e.owner_href}else location.href="/feed";else history.go(-1)}static close(e){if(!N.isShown())return!0;var t=R.length&&R[0].getArticle(),r=t?t.owner_href:"",a=m.back_url;if(N.isStandalone())return t.is_blog&&t.from_blog&&window.history&&window.history.length>1?(window.history.back(),!0):(window.location.href=a||r||"/feed",!0);if(window.onbeforeunload=!1,layers&&layers.hide&&layers.hide(),vk.widget)window.Rpc&&window.Rpc.callMethod("destroy");else{if(e){N._deinitLayer();var i=-1;window.cur&&cur.articleSequence&&(i=-cur.articleSequence),history.go(i),cur.articleSequence=0}else N._removeAllViews(),Object(d.removeClass)(bodyNode,"body_article_layer"),y&&(Object(d.lockDocumentTitle)(!1),setDocumentTitle(y)),Object(d.re)(P.layer),P.layer=!1;f&&f.destroy(),window.FastChat&&FastChat.toggleFastChats(!0),b&&window.removeEventListener("beforeunload",b),b=!1}}static getScrollNode(){return N.isStandalone()?window:P.layer}static getScrollTop(){return N.isStandalone()?scrollGetY():P.layer.scrollTop}static setScrollTop(e){(N.isStandalone()?window.scrollNode:P.layer).scrollTop=e}static _initLayer(){if(!P.layer){if(P.layer=Object(d.geByClass1)("_article_layer"),!P.layer){if(!D)throw new Error("Article layer html not found");P.layer=se(D),document.body.appendChild(P.layer),Object(d.addClass)(bodyNode,"body_article_layer"),setStyle(P.layer,{opacity:1})}P.up=Object(d.geByClass1)("article_layer__up",P.layer),P.darkBtn=Object(d.geByClass1)("article_layer__dark",P.layer),P.closeBtn=Object(d.geByClass1)("article_layer__close",P.layer),P.placeholderCloseBtn=Object(d.geByClass1)("article_layer_placeholder__back_button",P.layer),P.viewsList=Object(d.geByClass1)("article_layer__views",P.layer),j&&P.darkBtn.removeEventListener("click",j),P.darkBtn.addEventListener("click",j=()=>{N._toggleDarkMode(),R[R.length-1].sendStats({type:V?n.ArticleStatsEvents.nightModeOn:n.ArticleStatsEvents.nightModeOff})}),O&&P.closeBtn.removeEventListener("click",O),P.closeBtn.addEventListener("click",O=()=>{(N.close(!0),R.length)&&R[R.length-1].sendStats({type:n.ArticleStatsEvents.close})}),vk.widget&&Object(d.re)(P.up),P.placeholderCloseBtn&&(S&&P.placeholderCloseBtn.removeEventListener("click",S),P.placeholderCloseBtn.addEventListener("click",S=N.close.bind(null,!0))),P.scrollNode=vk.widget||!N.isStandalone()?P.layer:document.scrollingElement,N.isStandalone()||(b&&window.removeEventListener("beforeunload",b),window.addEventListener("beforeunload",b=()=>{window.scrollTo(0,0)})),N.getScrollNode().addEventListener("scroll",e=>{H.forEach(t=>{t(e)})}),H.push(()=>{toggleClass(P.up,"article_layer__up--shown",N.getScrollTop()>0)});var e=Object(d.geByClass1)("article_layer__inner",P.layer);w=se(`<div class='article_anchor_tooltip_content'>${Object(c.getLang)("pages_article_anchor_copy")}</div>`),f=new ElementTooltip(P.layer,{content:w,autoShow:!1,customShow:!0,forceSide:"top",cls:"article_anchor_tooltip",noBorder:!0,onHide:()=>{w.innerHTML=Object(c.getLang)("pages_article_anchor_copy")}}),P.layer.addEventListener("mousemove",t=>{if(toggleClass(P.layer,"article_layer__hover_left",e.contains(t.target)&&t.pageX<115),Object(d.hasClass)(t.target,"article_anchor_button")&&f&&!f.isShown()){var r=t.target.getBoundingClientRect(),a=r.top,i=r.left;f.show();var o=f._ttel.getBoundingClientRect(),l=N.getScrollTop();setStyle(f._ttel,{top:a+l-o.height-5,left:i-o.width/2+13}),t.target.addEventListener("mouseout",()=>{f.hide()})}}),P.layer.addEventListener("click",e=>{if(Object(d.hasClass)(P.layer,"article_layer__hover_left")&&(Object(d.hasClass)(P.up,"article_layer__up--shown")?N.setScrollTop(0):N.back()),Object(d.hasClass)(e.target,"article_anchor_button")&&e.target.id){var t=gpeByClass("article_view",e.target),r=domData(t,"article-url"),a=`${location.protocol}//${location.host}${r}`;Object(d.domClosestByTag)("h1",e.target)?Object(B.copyToClipboard)(a):Object(B.copyToClipboard)(`${a}?anchor=${e.target.id}`),w.innerHTML=Object(c.getLang)("pages_article_anchor_copied")}Object(d.hasClass)(P.layer,"article_layer__hover_right")&&N.close(!0)}),window.FastChat&&window.FastChat.toggleFastChats(!1),N._initBottomReached()}}static _initFooter(){if(vk.id){var e,t,r,a="static",i="fix_shown",o="fix_hidden",l=!1,n=N.getScrollTop(),c=!0;H.push(r=()=>{m||(m=R[0].getArticle());var e=Object(d.ge)("article_view_"+m.raw_id),r=gpeByClass("article_layer__content",e),s=Object(d.geByClass1)("article_layer__content_footer",r);if(r&&s){var u=N.getScrollTop(),h=u<=n;n=u,l!=s&&(t=r.offsetTop+s.offsetTop,_(l,a)),l=s;var g=u+window.innerHeight<t-100;_(s,g?!g||h?i:o:a,c),c=!1}}),r()}function s(e,t){setStyle(e,"transform","translateY("+(t?"0%":"100%"))}function _(t,r,l){var n=domData(t,"state")||a;n!=r&&(e||(n==a?r==i?(s(t,!1),l?(Object(d.addClass)(t,"article_layer__content_footer--fix"),s(t,!0)):e=setTimeout(()=>{Object(d.addClass)(t,"article_layer__content_footer--fix"),e=setTimeout(()=>{s(t,!0),e=!1})})):r==o&&(s(t,!1),e=setTimeout(()=>{Object(d.addClass)(t,"article_layer__content_footer--fix"),e=!1})):n==i?r==o?s(t,!1):r==a&&(s(t,!1),e=setTimeout(()=>{Object(d.removeClass)(t,"article_layer__content_footer--fix"),s(t,!0),e=!1},350)):n==o&&(r==i?s(t,!0):r==a&&(Object(d.removeClass)(t,"article_layer__content_footer--fix"),s(t,!0))),domData(t,"state",r)))}}static onShareBtnClick(e,t){showBox("like.php",{act:"publish_box",object:t},{stat:["page.js","page.css","wide_dd.js","wide_dd.css",jsc("web/sharebox.js")],onFail:function(e){return Object(T.showFastBox)(Object(c.getLang)("global_error"),e||Object(c.getLang)("global_error")),!0}})}static onFaveBtnClick(e,t,r,a,i,o){var l=gpeByClass("article_layer__content",domQuery1(`[data-article-url="${i}"]`));window.stManager.add(["notifier.css","notifier.js"]);var n=!1;Object(s.each)(geByClass("article_layer__content_footer_button_bookmark",l),(e,t)=>{n=toggleClass(t,"activated")}),Object(x.bookmarkArticle)(null,null,t,r,"article",o,!n)}static onReportBtnClick(e,t,r,a){var i=showBox("al_articles.php",{act:"report_box"},{onDone:()=>{var e=geByClass("radiobtn","article_report");radioBtns.article_report={val:0,els:e}},params:{onClean:()=>{delete radioBtns.article_report}}});i.removeButtons(),i.addButton(Object(c.getLang)("box_send"),e=>{N._sendReport(e,t,r,a)}),i.addButton(Object(c.getLang)("global_cancel"),!1,"no")}static _sendReport(e,t,r,a){ajax.post("al_articles.php",{act:"report",owner_id:t,article_id:r,hash:a,reason:radioBtns.article_report.val},{onDone:()=>{curBox().hide(),showDoneBox(Object(c.getLang)("pages_article_report_sent"),{className:"article_done_msg",parentEl:"_article_layer"})},showProgress:E.lockButton.pbind(e),hideProgress:E.unlockButton.pbind(e)})}static _getSavedScroll(e){return(window.ls.get("articles_scrolls")||{})[e]||0}static _updateScrollSet(e){var t=N.getScrollTop(),r=ls.get("articles_scrolls")||{};Object.keys(r).length>100&&(r={}),r[e.url]=t,ls.set("articles_scrolls",r)}static getDarkMode(){return!!Object(s.intval)(localStorage.getItem("article_dark_mode"))}static _toggleDarkMode(e,t){V=toggleClass(P.layer,"article_dark",t),N.isStandalone()&&toggleClass(document.body,"article_dark",V),t?toggleClass(P.layerSubscribeBtn,"black",V):(Object(d.addClass)(P.layerSubscribeBtn,"article_layer_btn_transition"),setTimeout(()=>{Object(d.removeClass)(P.layerSubscribeBtn,"article_layer_btn_transition")},450),Object(d.toggleClassDelayed)(P.layerSubscribeBtn,"black",V)),void 0===t&&vk.id&&ajax.post("al_articles.php",{act:"set_dark_mode",is_on:Object(s.intval)(V)}),localStorage.setItem("article_dark_mode",Object(s.intval)(V))}static clearAllPrepared(){A={}}static clearPrepared(e){e=e.replace(/^\//,""),delete A[e]}static prepare(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t||(t=()=>{}),Object(s.isObject)(e)&&(e=e.url),e=e.replace(/^\//,""),Object(s.isObject)(A[e])){var a=()=>t(...A[e].result);return r.async?void setTimeout(a,0):a()}if(A[e]=A[e]||[],A[e].push(t),!(A[e].length>1)){var i=Object(s.inArray)(cur.module,["groups","profile","public"])?cur.oid:"",o="",l="";r.ref&&(l=r.ref),Object(s.isFunction)(r.onEducationCloseBtnClick)&&(C=function(e){e.preventDefault(),e.stopPropagation();var t=e.target,a=Object(s.intval)(domData(t,"article-id")),i=Object(s.intval)(domData(t,"course-id")),o=Object(s.intval)(domData(t,"step-id"));r.onEducationCloseBtnClick({status:"read",data:{author_id:a,course_id:i,step_id:o}}),N.close(!0)}),o=cur.authorPage?"author_page_"+cur.authorPage.sortType:cur.module,ajax.post("al_articles.php",{act:"view",url:e,layer:1,wall_owner_id:i,context:o,ref:l},{onDone:(t,r,a,i)=>{var o=A[e]||[];D=t,A[e]={result:[r,a,i]},o.forEach(t=>t.apply(null,A[e].result))},onFail:()=>(Object(s.isFunction)(r.onFailCallBack)&&r.onFailCallBack(),!0)}),window.cur&&cur.destroy.push(()=>{N.clearPrepared()})}}static clearPrepared(){A={}}static onSubscribeBtnClick(e){if(!Object(E.isButtonLocked)(e)){var t=JSON.parse(domData(e,"data")),r=Object(d.hasClass)(e,"secondary"),a={showProgress:E.lockButton.pbind(e),hideProgress:E.unlockButton.pbind(e),onDone:function(){M[t.oid]=!r,toggleClass(e,"secondary"),t.confirm&&r&&Object(d.hide)(e)}};if(t.oid>0)ajax.post("al_friends.php",{act:r?"remove":"add",mid:t.oid,hash:t.hash},a);else{var i=ajax.post.pbind("al_groups.php",{act:r?"a_leave":"a_enter",gid:-t.oid,hash:t.hash},a);if(t.confirm&&r)var o=Object(T.showFastBox)(t.confirm.title,t.confirm.text,t.confirm.btn,(function(){o.hide(),i()}),Object(c.getLang)("global_cancel"));else i()}}}static moderActionsInit(e,t){var r=e.moder_actions_hash,a=domQuery1("#article_moder_rev_sel",t);a&&a.addEventListener("change",e=>{nav.change({rev:e.target.value}),location.reload()});var i=domQuery1("#article_moder__rev_restore",t);i&&i.addEventListener("click",()=>{a.value&&ajax.post("al_articles.php",{act:"moder_restore_article_rev",hash:r,article_owner_id:e.owner_id,article_id:e.id,revision:Object(s.intval)(a.value)},{showProgress:E.lockButton.pbind(i),onDone:()=>{nav.change({rev:!1}),location.reload()}})});var o=domQuery1("#article_moder__ban_btn",t);if(o){var l=Object(s.intval)(o.getAttribute("data-banned"))?0:1;o.addEventListener("click",()=>{var t={act:"moder_ban_article",hash:r,article_owner_id:e.owner_id,article_id:e.id,do_ban:Object(s.intval)(l)};Object(L.isClaimContent)()&&(t.claim=window.nav.objLoc.claim),ajax.post("al_articles.php",t,{showProgress:E.lockButton.pbind(o),onDone:()=>{location.reload()}})})}}}window.ArticleLayer=N;try{window.stManager.done(window.jsc("web/article_layer.js"))}catch(e){}},ofcU:function(e,t,r){"use strict";r.r(t),r.d(t,"createMutations",(function(){return s})),r.d(t,"createModule",(function(){return u})),r.d(t,"destroyModule",(function(){return h}));r("HEwt"),r("a1Th"),r("rE2o"),r("ioFf"),r("rGqo"),r("Btvt"),r("KKXr");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,i=!1,o=void 0;try{for(var l,n=e[Symbol.iterator]();!(a=(l=n.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var o=new window.Map;function l(e){var t=o.get(e.currentTarget);if(t){var r=t[e.type];if(r)for(var i,l=0;l<r.length;l++){var n=a(r[l],2),c=n[0],s=n[1],d=void 0;if(hasClass(e.target,c)?d=s(e,e.target):(i=gpeByClass(c,e.target,e.currentTarget))&&(d=s(e,i)),!1===d)break}}}var n=r("Egk5"),c=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var a=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],l=0,n=o.length;l<n;l++,i++)a[i]=o[l];return a};function s(e){return{callMutations:function(){if("function"==typeof e)throw console.trace(),new Error("Mutations are not initialized");return e},bindMutations:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if("function"!=typeof e)throw console.trace(),new Error("Mutations are already initialized");return e=e.apply(void 0,t)}}}function d(e,t,r,a){Object(n.addEvent)(t,r,a),e._registeredHandlers.push({handlerType:"bind",elem:t,types:r,handler:a})}function _(e,t,r,a,i){!function(e,t,r,a){var i=o.get(e);i||(o.set(e,{}),i=o.get(e));for(var n=t.split(" "),c=0;c<n.length;c++){var s=n[c];i[s]||(i[s]=[],addEvent(e,s,l)),i[s].push([r,a])}}(t,r,a,i),e._registeredHandlers.push({handlerType:"delegate",elem:t,types:r,selector:a,handler:i})}function u(e){var t={_registeredHandlers:[]};return e.handlers((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return d.apply(void 0,c([t],e))}),(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return _.apply(void 0,c([t],e))})),t}function h(e){e._registeredHandlers.forEach((function(e){var t=e.handlerType,r=e.elem,a=e.types,i=e.handler;"delegate"===t?function(e,t,r,a){var i=o.get(e);i&&(t.split(" ").forEach(t=>{i[t]&&(i[t]=i[t].filter(e=>e[0]!==r||e[1]!==a),0===i[t].length&&removeEvent(e,t,l))}),0===Object.keys(i).map(e=>i[e].length).reduce((e,t)=>e+t)&&o.delete(e))}(r,a,e.selector,i):Object(n.removeEvent)(r,a,i)})),e._registeredHandlers=[]}}});