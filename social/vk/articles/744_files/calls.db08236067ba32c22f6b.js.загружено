/*! For license information please see calls.db08236067ba32c22f6b.js.LICENSE.txt */
(()=>{var e,t,n,r={595318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},750008:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},337057:(e,t,n)=>{"use strict";n.d(t,{VkIndexer:()=>r});var r=function(){function e(e,t,n){this.delimiter=new RegExp("[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\#\\+\\?\\\\]+","g"),this.trimmer=new RegExp("^[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\+\\?\\\\]+|[\\s\\-,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\\\]+$","g"),this.toTranslit={1072:"a",1073:"b",1074:"v",1075:"g",1076:"d",1077:"e",1078:"zh",1079:"z",1080:"i",1081:"y",1082:"k",1083:"l",1084:"m",1085:"n",1086:"o",1087:"p",1088:"r",1089:"s",1090:"t",1091:"u",1092:"f",1093:"h",1094:"ts",1095:"ch",1096:"sh",1097:"sh",1099:"y",1101:"e",1102:"yu",1103:"ya",1105:"e",1098:"",1100:""},this.toLocalCase={f:"a",",":"b","<":"b",d:"v",u:"g",l:"d",t:"e",";":"zh",":":"zh",p:"z",b:"i",q:"y",r:"k",k:"l",v:"m",y:"n",j:"o",g:"p",h:"r",c:"s",n:"t",e:"u",a:"f","[":"h","{":"kh",w:"ts",x:"ch",i:"sh",o:"sh",s:"y","'":"e",'"':"e",".":"yu",">":"yu",z:"ya","`":"e","~":"e",m:"","]":"","}":""},this.toLocalTranslit={1072:"f",1074:"d",1075:"u",1076:"l",1077:"t",1079:"p",1080:"b",1081:"q",1082:"r",1083:"k",1084:"v",1085:"y",1086:"j",1087:"g",1088:"h",1089:"c",1090:"n",1091:"e",1092:"a",1094:"w",1095:"x",1096:"i",1097:"o",1099:"s",1103:"z",1098:"m"},this.list=e||[],this.iterCur=0,this.iterEnd=e?e.length:0,this.index={},this.callback=n||function(){},this.prepareFunc=t||function(e){return e},setTimeout(this.indexIteration.bind(this),10)}return e.prototype.indexIteration=function(){for(var e=Math.min(this.iterEnd,this.iterCur+200),t=this.iterCur;t<e;t++){var n=this.list[t];try{n._order=t}catch(e){}this.add(n)}this.iterCur=t,t>=this.iterEnd?this.callback(this):setTimeout(this.indexIteration.bind(this),10)},e.prototype.strToPrefixes=function(e){for(var t,n={},r=(t=e,t.replace(/&#(\d\d+);/g,(function(e,t){return(t=!0===(n=t)?1:parseInt(n)||0)>=32?String.fromCharCode(t):e;var n})).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")).toLowerCase().split(this.delimiter),a=r.length;a--;){var o=r[a],i="";if(o){for(var l=0;l<6;l++){var s=o.charCodeAt(l);if(s){var c=this.toTranslit[s],u=o.substr(l,1);i+=null!=c?c:u}}n[i]=1}}return n},e.prototype.strToSearchPrefixes=function(e){for(var t=[],n=e.toLowerCase().split(this.delimiter),r=n.length;r--;){var a={},o=n[r],i="",l="",s="",c=o.length>1;if(o){for(var u=0;u<6;u++){var d=o.charCodeAt(u);if(d){var p=this.toTranslit[d],f=o.substr(u,1);if(i+=null!=p?p:f,c){var m=this.toLocalCase[f],_=this.toLocalTranslit[d];l+=null!=m?m:f,s+=null!=_?_:f}}}a[i]=1,c&&(a[l]=2,a[s]=3),t.push(a)}}return t},e.prototype.toIndexTree=function(e,t){for(var n=this.index,r=0;r<6;r++){var a=e.substr(r,1)||-1;n=n[a]?n[a]:n[a]=5==r?[]:{}}n.push(t)},e.prototype.remove=function(e){var t=this.prepareFunc(e),n=this.strToPrefixes(t);for(var r in n)if(n.hasOwnProperty(r)){for(var a=this.index,o=0;o<6;o++){var i=r.substr(o,1)||-1;if(!a[i])break;a=a[i]}if(a.length)for(var o in a)if(this.equals(a[o],e)){a.splice(o,1);break}}},e.prototype.equals=function(e,t){for(var n in e)if(e.hasOwnProperty(n))switch(typeof e[n]){case"object":if(!this.equals(e[n],t[n]))return!1;break;case"function":if(void 0===e[n]||e[n].toString()!=t[n].toString())return!1;break;default:if(e[n]!=t[n])return!1}for(var n in t)if(void 0===t[n])return!1;return!0},e.prototype.intersect=function(e,t){var n=[];if(a(e[0])||a(t[0]))return e.filter((function(e){return-1!==t.indexOf(e)}));for(;e.length>0&&t.length>0;)if(e[0]._order<t[0]._order)e.shift();else if(e[0]._order>t[0]._order)t.shift();else{if(this.equals(e[0],t[0])){var r=e.shift();r&&n.push(r)}t.shift()}return n},e.prototype.add=function(e){var t=this.prepareFunc(e),n=this.strToPrefixes(t);for(var r in n)n.hasOwnProperty(r)&&this.toIndexTree(r,e)},e.prototype.search=function(e){var t=this.index,n=this.strToSearchPrefixes(e),r=[],a=!1;for(var o in n)if(n.hasOwnProperty(o)){if(a&&!r)break;var i=this.localSearch(n[o],0,t);i.sort((function(e,t){return e._order-t._order})),r=a?this.intersect(r,i):i,a=!0}for(var l=r[0],s=r.length+1,c=[],u=1;u<s;u++){var d=r[u];d!=l&&(c.push(l),l=d)}return c},e.prototype.localSearch=function(e,t,n){if(!n)return[];var r={};for(var a in e)e.hasOwnProperty(a)&&(r[i=a.substr(t,1)||-1]||(r[i]={}),r[i][a]=1);if(6==t++)return n;var o=[];for(var i in r)if("-1"===i)for(var l in n)n.hasOwnProperty(l)&&o.push.apply(o,this.localSearch(r[i],t,n[l]));else{var s=this.localSearch(r[i],t,n[i]);o.push.apply(o,s)}return o},e}();function a(e){return!isNaN(e)}},774351:(e,t,n)=>{"use strict";function r(e,t){return new Promise((function(n){setTimeout(n.bind(null,t),1e3*e)}))}n.d(t,{pause:()=>r})},788822:(e,t,n)=>{"use strict";n.d(t,{decodeHTMLEntities:()=>o,escape:()=>a});var r=[["&amp;","&"],["&lt;","<"],["&gt;",">"],["&quot;",'"']];function a(e){return r.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(r,"ig"),n)}),e)}function o(e){return r.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(n,"ig"),r)}),e).replace(/&#(\d+);/g,(function(e,t){return String.fromCodePoint(t)}))}},389953:(e,t,n)=>{"use strict";function r(e){return e>0&&e<2e9}function a(e){return e>2e9}n.d(t,{isChatPeer:()=>a,isUserPeer:()=>r})},465127:(e,t,n)=>{"use strict";n.d(t,{BlurFastWithMask:()=>B,EffectBackground:()=>U,EffectBlur:()=>F,ImageEdit:()=>l,Segmentation:()=>b,VideoEffects:()=>I,isSupported:()=>y});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function l(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var l=function(){function e(){this._backgroundCanvas=document.createElement("canvas")}return e.prototype.resize=function(e,t,n,r){var a=(void 0===r?{}:r).ctxOptions;return o(this,void 0,void 0,(function(){var r,o,l,s,c,u,d;return i(this,(function(i){return this._backgroundCanvas.width=t,this._backgroundCanvas.height=n,r=e.width,o=e.height,s=(r*(l=r/o<t/n?t/r:n/o)-t)/2,c=(o*l-n)/2,(u=this._backgroundCanvas.getContext("2d",a))?(u.drawImage(e,s/l,c/l,t/l,n/l,0,0,t,n),(d=new Image(t,n)).src=this._backgroundCanvas.toDataURL(),[2,new Promise((function(e){d.onload=function(){e(d)}}))]):[2,Promise.reject("ctx did not initialized")]}))}))},e}();function s(e){var t={exports:{}};return e(t,t.exports),t.exports}var c,u=s((function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,r){t=e,n=r}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var l,s="./this.program",c=function(e,t){throw t},u="";"undefined"!=typeof document&&document.currentScript&&(u=document.currentScript.src),void 0!==r&&r&&(u=r),u=0!==u.indexOf("blob:")?u.substr(0,u.lastIndexOf("/")+1):"",l=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText};var d,p=a.print||console.log.bind(console),f=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments,a.thisProgram&&(s=a.thisProgram),a.quit&&(c=a.quit),a.wasmBinary&&(d=a.wasmBinary);var m,_=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&x("no native wasm support detected");var g,h,v,A,E,C=!1,y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&y)return y.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var l=63&e[t++];if(192!=(224&i)){var s=63&e[t++];if((i=224==(240&i)?(15&i)<<12|l<<6|s:(7&i)<<18|l<<12|s<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|l)}else o+=String.fromCharCode(i)}return o}function w(e,t){return e?S(v,e,t):""}function b(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&e.charCodeAt(++i)),l<=127){if(n>=o)break;t[n++]=l}else if(l<=2047){if(n+1>=o)break;t[n++]=192|l>>6,t[n++]=128|63&l}else if(l<=65535){if(n+2>=o)break;t[n++]=224|l>>12,t[n++]=128|l>>6&63,t[n++]=128|63&l}else{if(n+3>=o)break;t[n++]=240|l>>18,t[n++]=128|l>>12&63,t[n++]=128|l>>6&63,t[n++]=128|63&l}}return t[n]=0,n-a}function T(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function I(e){g=e,a.HEAP8=h=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU8=v=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var k=[],N=[],P=[],D=[];N.push({func:function(){ue()}});var M=0,L=null;function O(e){M++,a.monitorRunDependencies&&a.monitorRunDependencies(M)}function R(e){if(M--,a.monitorRunDependencies&&a.monitorRunDependencies(M),0==M&&L){var t=L;L=null,t()}}function x(e){a.onAbort&&a.onAbort(e),f(e+=""),C=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function B(e){return t=e,n="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(n):0===t.indexOf(n);var t,n}a.preloadedImages={},a.preloadedAudios={};var H,U,F,G="https://stest.mycdn.me/static/callseffects/0-0-2/tflite-simd.wasm";function V(e){try{if(e==G&&d)return new Uint8Array(d);throw"both async and sync fetching of the wasm failed"}catch(e){x(e)}}function W(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?E.get(n)():E.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}B(G)||(H=G,G=a.locateFile?a.locateFile(H,u):u+H);var z;function j(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){A[this.ptr+8>>2]=e},this.get_type=function(){return A[this.ptr+8>>2]},this.set_destructor=function(e){A[this.ptr+0>>2]=e},this.get_destructor=function(){return A[this.ptr+0>>2]},this.set_refcount=function(e){A[this.ptr+4>>2]=e},this.set_caught=function(e){e=e?1:0,h[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=h[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,h[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=h[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=A[this.ptr+4>>2];A[this.ptr+4>>2]=e+1},this.release_ref=function(){var e=A[this.ptr+4>>2];return A[this.ptr+4>>2]=e-1,1===e}}function Y(e){return A[fe()>>2]=e,e}function K(e){try{return m.grow(e-g.byteLength+65535>>>16),I(m.buffer),1}catch(e){}}z=function(){return performance.now()};var Q={};function q(){if(!q.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"};for(var t in Q)e[t]=Q[t];var n=[];for(var t in e)n.push(t+"="+e[t]);q.strings=n}return q.strings}var J={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=J.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=J.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=J.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return J.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return J.normalize(e.join("/"))},join2:function(e,t){return J.normalize(e+"/"+t)}},X={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:ee.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return(t?"/":"")+(e=J.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=X.resolve(e).substr(1),t=X.resolve(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),o=Math.min(r.length,a.length),i=o,l=0;l<o;l++)if(r[l]!==a[l]){i=l;break}var s=[];for(l=i;l<r.length;l++)s.push("..");return(s=s.concat(a.slice(i))).join("/")}},Z={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Z.ttys[e]={input:[],output:[],ops:t},ee.registerDevice(e,Z.stream_ops)},stream_ops:{open:function(e){var t=Z.ttys[e.node.rdev];if(!t)throw new ee.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,a){if(!e.tty||!e.tty.ops.get_char)throw new ee.ErrnoError(60);for(var o=0,i=0;i<r;i++){var l;try{l=e.tty.ops.get_char(e.tty)}catch(e){throw new ee.ErrnoError(29)}if(void 0===l&&0===o)throw new ee.ErrnoError(6);if(null==l)break;o++,t[n+i]=l}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r,a){if(!e.tty||!e.tty.ops.put_char)throw new ee.ErrnoError(60);try{for(var o=0;o<r;o++)e.tty.ops.put_char(e.tty,t[n+o])}catch(e){throw new ee.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=se(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(p(S(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(p(S(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(f(S(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(f(S(e.output,0)),e.output=[])}}};var $={ops_table:null,mount:function(e){return $.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(ee.isBlkdev(n)||ee.isFIFO(n))throw new ee.ErrnoError(63);$.ops_table||($.ops_table={dir:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,lookup:$.node_ops.lookup,mknod:$.node_ops.mknod,rename:$.node_ops.rename,unlink:$.node_ops.unlink,rmdir:$.node_ops.rmdir,readdir:$.node_ops.readdir,symlink:$.node_ops.symlink},stream:{llseek:$.stream_ops.llseek}},file:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:{llseek:$.stream_ops.llseek,read:$.stream_ops.read,write:$.stream_ops.write,allocate:$.stream_ops.allocate,mmap:$.stream_ops.mmap,msync:$.stream_ops.msync}},link:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,readlink:$.node_ops.readlink},stream:{}},chrdev:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:ee.chrdev_stream_ops}});var a=ee.createNode(e,t,n,r);return ee.isDir(a.mode)?(a.node_ops=$.ops_table.dir.node,a.stream_ops=$.ops_table.dir.stream,a.contents={}):ee.isFile(a.mode)?(a.node_ops=$.ops_table.file.node,a.stream_ops=$.ops_table.file.stream,a.usedBytes=0,a.contents=null):ee.isLink(a.mode)?(a.node_ops=$.ops_table.link.node,a.stream_ops=$.ops_table.link.stream):ee.isChrdev(a.mode)&&(a.node_ops=$.ops_table.chrdev.node,a.stream_ops=$.ops_table.chrdev.stream),a.timestamp=Date.now(),e&&(e.contents[t]=a,e.timestamp=a.timestamp),a},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=ee.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ee.isDir(e.mode)?t.size=4096:ee.isFile(e.mode)?t.size=e.usedBytes:ee.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&$.resizeFileStorage(e,t.size)},lookup:function(e,t){throw ee.genericErrors[44]},mknod:function(e,t,n,r){return $.createNode(e,t,n,r)},rename:function(e,t,n){if(ee.isDir(e.mode)){var r;try{r=ee.lookupNode(t,n)}catch(e){}if(r)for(var a in r.contents)throw new ee.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=ee.lookupNode(e,t);for(var r in n.contents)throw new ee.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=$.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!ee.isLink(e.mode))throw new ee.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,a){var o=e.node.contents;if(a>=e.node.usedBytes)return 0;var i=Math.min(e.node.usedBytes-a,r);if(i>8&&o.subarray)t.set(o.subarray(a,a+i),n);else for(var l=0;l<i;l++)t[n+l]=o[a+l];return i},write:function(e,t,n,r,a,o){if(t.buffer===h.buffer&&(o=!1),!r)return 0;var i=e.node;if(i.timestamp=Date.now(),t.subarray&&(!i.contents||i.contents.subarray)){if(o)return i.contents=t.subarray(n,n+r),i.usedBytes=r,r;if(0===i.usedBytes&&0===a)return i.contents=t.slice(n,n+r),i.usedBytes=r,r;if(a+r<=i.usedBytes)return i.contents.set(t.subarray(n,n+r),a),r}if($.expandFileStorage(i,a+r),i.contents.subarray&&t.subarray)i.contents.set(t.subarray(n,n+r),a);else for(var l=0;l<r;l++)i.contents[a+l]=t[n+l];return i.usedBytes=Math.max(i.usedBytes,a+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&ee.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new ee.ErrnoError(28);return r},allocate:function(e,t,n){$.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,a,o){if(0!==t)throw new ee.ErrnoError(28);if(!ee.isFile(e.node.mode))throw new ee.ErrnoError(43);var i,l,s=e.node.contents;if(2&o||s.buffer!==g){if((r>0||r+n<s.length)&&(s=s.subarray?s.subarray(r,r+n):Array.prototype.slice.call(s,r,r+n)),l=!0,!(i=function(e){for(var t=function(e,t){return t||(t=16),Math.ceil(e/t)*t}(e,16384),n=pe(t);e<t;)h[n+e++]=0;return n}(n)))throw new ee.ErrnoError(48);h.set(s,i)}else l=!1,i=s.byteOffset;return{ptr:i,allocated:l}},msync:function(e,t,n,r,a){if(!ee.isFile(e.node.mode))throw new ee.ErrnoError(43);return 2&a||$.stream_ops.write(e,t,0,r,n,!1),0}}},ee={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=X.resolve(ee.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new ee.ErrnoError(32);for(var a=J.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),o=ee.root,i="/",l=0;l<a.length;l++){var s=l===a.length-1;if(s&&t.parent)break;if(o=ee.lookupNode(o,a[l]),i=J.join2(i,a[l]),ee.isMountpoint(o)&&(!s||s&&t.follow_mount)&&(o=o.mounted.root),!s||t.follow)for(var c=0;ee.isLink(o.mode);){var u=ee.readlink(i);if(i=X.resolve(J.dirname(i),u),o=ee.lookupPath(i,{recurse_count:t.recurse_count}).node,c++>40)throw new ee.ErrnoError(32)}}return{path:i,node:o}},getPath:function(e){for(var t;;){if(ee.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ee.nameTable.length},hashAddNode:function(e){var t=ee.hashName(e.parent.id,e.name);e.name_next=ee.nameTable[t],ee.nameTable[t]=e},hashRemoveNode:function(e){var t=ee.hashName(e.parent.id,e.name);if(ee.nameTable[t]===e)ee.nameTable[t]=e.name_next;else for(var n=ee.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=ee.mayLookup(e);if(n)throw new ee.ErrnoError(n,e);for(var r=ee.hashName(e.id,t),a=ee.nameTable[r];a;a=a.name_next){var o=a.name;if(a.parent.id===e.id&&o===t)return a}return ee.lookup(e,t)},createNode:function(e,t,n,r){var a=new ee.FSNode(e,t,n,r);return ee.hashAddNode(a),a},destroyNode:function(e){ee.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=ee.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return ee.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){return ee.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return ee.lookupNode(e,t),20}catch(e){}return ee.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=ee.lookupNode(e,t)}catch(e){return e.errno}var a=ee.nodePermissions(e,"wx");if(a)return a;if(n){if(!ee.isDir(r.mode))return 54;if(ee.isRoot(r)||ee.getPath(r)===ee.cwd())return 10}else if(ee.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?ee.isLink(e.mode)?32:ee.isDir(e.mode)&&("r"!==ee.flagsToPermissionString(t)||512&t)?31:ee.nodePermissions(e,ee.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||ee.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!ee.streams[n])return n;throw new ee.ErrnoError(33)},getStream:function(e){return ee.streams[e]},createStream:function(e,t,n){ee.FSStream||(ee.FSStream=function(){},ee.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new ee.FSStream;for(var a in e)r[a]=e[a];e=r;var o=ee.nextfd(t,n);return e.fd=o,ee.streams[o]=e,e},closeStream:function(e){ee.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=ee.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new ee.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){ee.devices[e]={stream_ops:t}},getDevice:function(e){return ee.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),ee.syncFSRequests++,ee.syncFSRequests>1&&f("warning: "+ee.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=ee.getMounts(ee.root.mount),r=0;function a(e){return ee.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,a(e));++r>=n.length&&a(null)}n.forEach((function(t){if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)}))},mount:function(e,t,n){var r,a="/"===n,o=!n;if(a&&ee.root)throw new ee.ErrnoError(10);if(!a&&!o){var i=ee.lookupPath(n,{follow_mount:!1});if(n=i.path,r=i.node,ee.isMountpoint(r))throw new ee.ErrnoError(10);if(!ee.isDir(r.mode))throw new ee.ErrnoError(54)}var l={type:e,opts:t,mountpoint:n,mounts:[]},s=e.mount(l);return s.mount=l,l.root=s,a?ee.root=s:r&&(r.mounted=l,r.mount&&r.mount.mounts.push(l)),s},unmount:function(e){var t=ee.lookupPath(e,{follow_mount:!1});if(!ee.isMountpoint(t.node))throw new ee.ErrnoError(28);var n=t.node,r=n.mounted,a=ee.getMounts(r);Object.keys(ee.nameTable).forEach((function(e){for(var t=ee.nameTable[e];t;){var n=t.name_next;-1!==a.indexOf(t.mount)&&ee.destroyNode(t),t=n}})),n.mounted=null;var o=n.mount.mounts.indexOf(r);n.mount.mounts.splice(o,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=ee.lookupPath(e,{parent:!0}).node,a=J.basename(e);if(!a||"."===a||".."===a)throw new ee.ErrnoError(28);var o=ee.mayCreate(r,a);if(o)throw new ee.ErrnoError(o);if(!r.node_ops.mknod)throw new ee.ErrnoError(63);return r.node_ops.mknod(r,a,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,ee.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,ee.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",a=0;a<n.length;++a)if(n[a]){r+="/"+n[a];try{ee.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,n){return void 0===n&&(n=t,t=438),t|=8192,ee.mknod(e,t,n)},symlink:function(e,t){if(!X.resolve(e))throw new ee.ErrnoError(44);var n=ee.lookupPath(t,{parent:!0}).node;if(!n)throw new ee.ErrnoError(44);var r=J.basename(t),a=ee.mayCreate(n,r);if(a)throw new ee.ErrnoError(a);if(!n.node_ops.symlink)throw new ee.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,a=J.dirname(e),o=J.dirname(t),i=J.basename(e),l=J.basename(t);if(n=ee.lookupPath(e,{parent:!0}).node,r=ee.lookupPath(t,{parent:!0}).node,!n||!r)throw new ee.ErrnoError(44);if(n.mount!==r.mount)throw new ee.ErrnoError(75);var s,c=ee.lookupNode(n,i),u=X.relative(e,o);if("."!==u.charAt(0))throw new ee.ErrnoError(28);if("."!==(u=X.relative(t,a)).charAt(0))throw new ee.ErrnoError(55);try{s=ee.lookupNode(r,l)}catch(e){}if(c!==s){var d=ee.isDir(c.mode),p=ee.mayDelete(n,i,d);if(p)throw new ee.ErrnoError(p);if(p=s?ee.mayDelete(r,l,d):ee.mayCreate(r,l))throw new ee.ErrnoError(p);if(!n.node_ops.rename)throw new ee.ErrnoError(63);if(ee.isMountpoint(c)||s&&ee.isMountpoint(s))throw new ee.ErrnoError(10);if(r!==n&&(p=ee.nodePermissions(n,"w")))throw new ee.ErrnoError(p);try{ee.trackingDelegate.willMovePath}catch(n){f("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}ee.hashRemoveNode(c);try{n.node_ops.rename(c,r,l)}catch(e){throw e}finally{ee.hashAddNode(c)}try{ee.trackingDelegate.onMovePath}catch(n){f("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}}},rmdir:function(e){var t=ee.lookupPath(e,{parent:!0}).node,n=J.basename(e),r=ee.lookupNode(t,n),a=ee.mayDelete(t,n,!0);if(a)throw new ee.ErrnoError(a);if(!t.node_ops.rmdir)throw new ee.ErrnoError(63);if(ee.isMountpoint(r))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath}catch(t){f("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,n),ee.destroyNode(r);try{ee.trackingDelegate.onDeletePath}catch(t){f("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=ee.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new ee.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=ee.lookupPath(e,{parent:!0}).node,n=J.basename(e),r=ee.lookupNode(t,n),a=ee.mayDelete(t,n,!1);if(a)throw new ee.ErrnoError(a);if(!t.node_ops.unlink)throw new ee.ErrnoError(63);if(ee.isMountpoint(r))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath}catch(t){f("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,n),ee.destroyNode(r);try{ee.trackingDelegate.onDeletePath}catch(t){f("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=ee.lookupPath(e).node;if(!t)throw new ee.ErrnoError(44);if(!t.node_ops.readlink)throw new ee.ErrnoError(28);return X.resolve(ee.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=ee.lookupPath(e,{follow:!t}).node;if(!n)throw new ee.ErrnoError(44);if(!n.node_ops.getattr)throw new ee.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return ee.stat(e,!0)},chmod:function(e,t,n){var r;if(!(r="string"==typeof e?ee.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){ee.chmod(e,t,!0)},fchmod:function(e,t){var n=ee.getStream(e);if(!n)throw new ee.ErrnoError(8);ee.chmod(n.node,t)},chown:function(e,t,n,r){var a;if(!(a="string"==typeof e?ee.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:function(e,t,n){ee.chown(e,t,n,!0)},fchown:function(e,t,n){var r=ee.getStream(e);if(!r)throw new ee.ErrnoError(8);ee.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new ee.ErrnoError(28);var n;if(!(n="string"==typeof e?ee.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);if(ee.isDir(n.mode))throw new ee.ErrnoError(31);if(!ee.isFile(n.mode))throw new ee.ErrnoError(28);var r=ee.nodePermissions(n,"w");if(r)throw new ee.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=ee.getStream(e);if(!n)throw new ee.ErrnoError(8);if(0==(2097155&n.flags))throw new ee.ErrnoError(28);ee.truncate(n.node,t)},utime:function(e,t,n){var r=ee.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,o){if(""===e)throw new ee.ErrnoError(44);var i;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?ee.modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof e)i=e;else{e=J.normalize(e);try{i=ee.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var l=!1;if(64&t)if(i){if(128&t)throw new ee.ErrnoError(20)}else i=ee.mknod(e,n,0),l=!0;if(!i)throw new ee.ErrnoError(44);if(ee.isChrdev(i.mode)&&(t&=-513),65536&t&&!ee.isDir(i.mode))throw new ee.ErrnoError(54);if(!l){var s=ee.mayOpen(i,t);if(s)throw new ee.ErrnoError(s)}512&t&&ee.truncate(i,0),t&=-131713;var c=ee.createStream({node:i,path:ee.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1},r,o);c.stream_ops.open&&c.stream_ops.open(c),!a.logReadFiles||1&t||(ee.readFiles||(ee.readFiles={}),e in ee.readFiles||(ee.readFiles[e]=1,f("FS.trackingDelegate error on read file: "+e)));try{ee.trackingDelegate.onOpenFile}catch(t){f("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return c},close:function(e){if(ee.isClosed(e))throw new ee.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{ee.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(ee.isClosed(e))throw new ee.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new ee.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new ee.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,a){if(r<0||a<0)throw new ee.ErrnoError(28);if(ee.isClosed(e))throw new ee.ErrnoError(8);if(1==(2097155&e.flags))throw new ee.ErrnoError(8);if(ee.isDir(e.node.mode))throw new ee.ErrnoError(31);if(!e.stream_ops.read)throw new ee.ErrnoError(28);var o=void 0!==a;if(o){if(!e.seekable)throw new ee.ErrnoError(70)}else a=e.position;var i=e.stream_ops.read(e,t,n,r,a);return o||(e.position+=i),i},write:function(e,t,n,r,a,o){if(r<0||a<0)throw new ee.ErrnoError(28);if(ee.isClosed(e))throw new ee.ErrnoError(8);if(0==(2097155&e.flags))throw new ee.ErrnoError(8);if(ee.isDir(e.node.mode))throw new ee.ErrnoError(31);if(!e.stream_ops.write)throw new ee.ErrnoError(28);e.seekable&&1024&e.flags&&ee.llseek(e,0,2);var i=void 0!==a;if(i){if(!e.seekable)throw new ee.ErrnoError(70)}else a=e.position;var l=e.stream_ops.write(e,t,n,r,a,o);i||(e.position+=l);try{e.path&&ee.trackingDelegate.onWriteToFile&&ee.trackingDelegate.onWriteToFile(e.path)}catch(t){f("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return l},allocate:function(e,t,n){if(ee.isClosed(e))throw new ee.ErrnoError(8);if(t<0||n<=0)throw new ee.ErrnoError(28);if(0==(2097155&e.flags))throw new ee.ErrnoError(8);if(!ee.isFile(e.node.mode)&&!ee.isDir(e.node.mode))throw new ee.ErrnoError(43);if(!e.stream_ops.allocate)throw new ee.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,a,o){if(0!=(2&a)&&0==(2&o)&&2!=(2097155&e.flags))throw new ee.ErrnoError(2);if(1==(2097155&e.flags))throw new ee.ErrnoError(2);if(!e.stream_ops.mmap)throw new ee.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,a,o)},msync:function(e,t,n,r,a){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,a):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new ee.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=ee.open(e,t.flags),a=ee.stat(e).size,o=new Uint8Array(a);return ee.read(r,o,0,a,0),"utf8"===t.encoding?n=S(o,0):"binary"===t.encoding&&(n=o),ee.close(r),n},writeFile:function(e,t,n){(n=n||{}).flags=n.flags||577;var r=ee.open(e,n.flags,n.mode);if("string"==typeof t){var a=new Uint8Array(T(t)+1),o=b(t,a,0,a.length);ee.write(r,a,0,o,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");ee.write(r,t,0,t.byteLength,void 0,n.canOwn)}ee.close(r)},cwd:function(){return ee.currentPath},chdir:function(e){var t=ee.lookupPath(e,{follow:!0});if(null===t.node)throw new ee.ErrnoError(44);if(!ee.isDir(t.node.mode))throw new ee.ErrnoError(54);var n=ee.nodePermissions(t.node,"x");if(n)throw new ee.ErrnoError(n);ee.currentPath=t.path},createDefaultDirectories:function(){ee.mkdir("/tmp"),ee.mkdir("/home"),ee.mkdir("/home/web_user")},createDefaultDevices:function(){ee.mkdir("/dev"),ee.registerDevice(ee.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,a){return r}}),ee.mkdev("/dev/null",ee.makedev(1,3)),Z.register(ee.makedev(5,0),Z.default_tty_ops),Z.register(ee.makedev(6,0),Z.default_tty1_ops),ee.mkdev("/dev/tty",ee.makedev(5,0)),ee.mkdev("/dev/tty1",ee.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){x("randomDevice")}}();ee.createDevice("/dev","random",e),ee.createDevice("/dev","urandom",e),ee.mkdir("/dev/shm"),ee.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){ee.mkdir("/proc");var e=ee.mkdir("/proc/self");ee.mkdir("/proc/self/fd"),ee.mount({mount:function(){var t=ee.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var n=+t,r=ee.getStream(n);if(!r)throw new ee.ErrnoError(8);var a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return a.parent=a,a}},t}},{},"/proc/self/fd")},createStandardStreams:function(){a.stdin?ee.createDevice("/dev","stdin",a.stdin):ee.symlink("/dev/tty","/dev/stdin"),a.stdout?ee.createDevice("/dev","stdout",null,a.stdout):ee.symlink("/dev/tty","/dev/stdout"),a.stderr?ee.createDevice("/dev","stderr",null,a.stderr):ee.symlink("/dev/tty1","/dev/stderr"),ee.open("/dev/stdin",0),ee.open("/dev/stdout",1),ee.open("/dev/stderr",1)},ensureErrnoError:function(){ee.ErrnoError||(ee.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},ee.ErrnoError.prototype=new Error,ee.ErrnoError.prototype.constructor=ee.ErrnoError,[44].forEach((function(e){ee.genericErrors[e]=new ee.ErrnoError(e),ee.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){ee.ensureErrnoError(),ee.nameTable=new Array(4096),ee.mount($,{},"/"),ee.createDefaultDirectories(),ee.createDefaultDevices(),ee.createSpecialDirectories(),ee.filesystems={MEMFS:$}},init:function(e,t,n){ee.init.initialized=!0,ee.ensureErrnoError(),a.stdin=e||a.stdin,a.stdout=t||a.stdout,a.stderr=n||a.stderr,ee.createStandardStreams()},quit:function(){ee.init.initialized=!1;var e=a._fflush;e&&e(0);for(var t=0;t<ee.streams.length;t++){var n=ee.streams[t];n&&ee.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:function(e,t){var n=ee.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=ee.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=ee.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=J.basename(e),r=ee.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:function(e,t,n,r){e="string"==typeof e?e:ee.getPath(e);for(var a=t.split("/").reverse();a.length;){var o=a.pop();if(o){var i=J.join2(e,o);try{ee.mkdir(i)}catch(e){}e=i}}return i},createFile:function(e,t,n,r,a){var o=J.join2("string"==typeof e?e:ee.getPath(e),t),i=ee.getMode(r,a);return ee.create(o,i)},createDataFile:function(e,t,n,r,a,o){var i=t?J.join2("string"==typeof e?e:ee.getPath(e),t):e,l=ee.getMode(r,a),s=ee.create(i,l);if(n){if("string"==typeof n){for(var c=new Array(n.length),u=0,d=n.length;u<d;++u)c[u]=n.charCodeAt(u);n=c}ee.chmod(s,146|l);var p=ee.open(s,577);ee.write(p,n,0,n.length,0,o),ee.close(p),ee.chmod(s,l)}return s},createDevice:function(e,t,n,r){var a=J.join2("string"==typeof e?e:ee.getPath(e),t),o=ee.getMode(!!n,!!r);ee.createDevice.major||(ee.createDevice.major=64);var i=ee.makedev(ee.createDevice.major++,0);return ee.registerDevice(i,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,a,o){for(var i=0,l=0;l<a;l++){var s;try{s=n()}catch(e){throw new ee.ErrnoError(29)}if(void 0===s&&0===i)throw new ee.ErrnoError(6);if(null==s)break;i++,t[r+l]=s}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,n,a,o){for(var i=0;i<a;i++)try{r(t[n+i])}catch(e){throw new ee.ErrnoError(29)}return a&&(e.node.timestamp=Date.now()),i}}),ee.mkdev(a,o,i)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!l)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=se(l(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new ee.ErrnoError(29)}},createLazyFile:function(e,t,n,r,a){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),a=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,i=1048576;a||(i=r);var l=this;l.setDataGetter((function(e){var t=e*i,a=(e+1)*i-1;if(a=Math.min(a,r-1),void 0===l.chunks[e]&&(l.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var a=new XMLHttpRequest;if(a.open("GET",n,!1),r!==i&&a.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(a.responseType="arraybuffer"),a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),a.send(null),!(a.status>=200&&a.status<300||304===a.status))throw new Error("Couldn't load "+n+". Status: "+a.status);return void 0!==a.response?new Uint8Array(a.response||[]):se(a.responseText||"",!0)}(t,a)),void 0===l.chunks[e])throw new Error("doXHR failed!");return l.chunks[e]})),!o&&r||(i=r=1,r=this.getter(0).length,i=r,p("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=i,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var i={isDevice:!1,url:n},l=ee.createFile(e,t,i,r,a);i.contents?l.contents=i.contents:i.url&&(l.contents=null,l.url=i.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var s={};return Object.keys(l.stream_ops).forEach((function(e){var t=l.stream_ops[e];s[e]=function(){return ee.forceLoadFile(l),t.apply(null,arguments)}})),s.read=function(e,t,n,r,a){ee.forceLoadFile(l);var o=e.node.contents;if(a>=o.length)return 0;var i=Math.min(o.length-a,r);if(o.slice)for(var s=0;s<i;s++)t[n+s]=o[a+s];else for(s=0;s<i;s++)t[n+s]=o.get(a+s);return i},l.stream_ops=s,l},createPreloadedFile:function(e,t,n,r,o,i,l,s,c,u){Browser.init();var d=t?X.resolve(J.join2(e,t)):e;function p(n){function p(n){u&&u(),s||ee.createDataFile(e,t,n,r,o,c),i&&i(),R()}var f=!1;a.preloadPlugins.forEach((function(e){f||e.canHandle(d)&&(e.handle(n,d,p,(function(){l&&l(),R()})),f=!0)})),f||p(n)}O(),"string"==typeof n?Browser.asyncLoad(n,(function(e){p(e)}),l):p(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ee.indexedDB();try{var a=r.open(ee.DB_NAME(),ee.DB_VERSION)}catch(e){return n(e)}a.onupgradeneeded=function(){p("creating db"),a.result.createObjectStore(ee.DB_STORE_NAME)},a.onsuccess=function(){var r=a.result.transaction([ee.DB_STORE_NAME],"readwrite"),o=r.objectStore(ee.DB_STORE_NAME),i=0,l=0,s=e.length;function c(){0==l?t():n()}e.forEach((function(e){var t=o.put(ee.analyzePath(e).object.contents,e);t.onsuccess=function(){++i+l==s&&c()},t.onerror=function(){l++,i+l==s&&c()}})),r.onerror=n},a.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ee.indexedDB();try{var a=r.open(ee.DB_NAME(),ee.DB_VERSION)}catch(e){return n(e)}a.onupgradeneeded=n,a.onsuccess=function(){var r=a.result;try{var o=r.transaction([ee.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var i=o.objectStore(ee.DB_STORE_NAME),l=0,s=0,c=e.length;function u(){0==s?t():n()}e.forEach((function(e){var t=i.get(e);t.onsuccess=function(){ee.analyzePath(e).exists&&ee.unlink(e),ee.createDataFile(J.dirname(e),J.basename(e),t.result,!0,!0,!0),++l+s==c&&u()},t.onerror=function(){s++,l+s==c&&u()}})),o.onerror=n},a.onerror=n}},te={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t,n){if("/"===t[0])return t;var r;if(-100===e)r=ee.cwd();else{var a=ee.getStream(e);if(!a)throw new ee.ErrnoError(8);r=a.path}if(0==t.length){if(!n)throw new ee.ErrnoError(44);return r}return J.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&J.normalize(t)!==J.normalize(ee.getPath(e.node)))return-54;throw e}return A[n>>2]=r.dev,A[n+4>>2]=0,A[n+8>>2]=r.ino,A[n+12>>2]=r.mode,A[n+16>>2]=r.nlink,A[n+20>>2]=r.uid,A[n+24>>2]=r.gid,A[n+28>>2]=r.rdev,A[n+32>>2]=0,F=[r.size>>>0,(U=r.size,+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],A[n+40>>2]=F[0],A[n+44>>2]=F[1],A[n+48>>2]=4096,A[n+52>>2]=r.blocks,A[n+56>>2]=r.atime.getTime()/1e3|0,A[n+60>>2]=0,A[n+64>>2]=r.mtime.getTime()/1e3|0,A[n+68>>2]=0,A[n+72>>2]=r.ctime.getTime()/1e3|0,A[n+76>>2]=0,F=[r.ino>>>0,(U=r.ino,+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],A[n+80>>2]=F[0],A[n+84>>2]=F[1],0},doMsync:function(e,t,n,r,a){var o=v.slice(e,e+n);ee.msync(t,o,a,n,r)},doMkdir:function(e,t){return"/"===(e=J.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),ee.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return ee.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var r=ee.readlink(e),a=Math.min(n,T(r)),o=h[t+a];return b(r,v,t,n+1),h[t+a]=o,a},doAccess:function(e,t){if(-8&t)return-28;var n;if(!(n=ee.lookupPath(e,{follow:!0}).node))return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&ee.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=ee.getStream(n);return r&&ee.close(r),ee.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var a=0,o=0;o<n;o++){var i=A[t+8*o>>2],l=A[t+(8*o+4)>>2],s=ee.read(e,h,i,l,r);if(s<0)return-1;if(a+=s,s<l)break}return a},doWritev:function(e,t,n,r){for(var a=0,o=0;o<n;o++){var i=A[t+8*o>>2],l=A[t+(8*o+4)>>2],s=ee.write(e,h,i,l,r);if(s<0)return-1;a+=s}return a},varargs:void 0,get:function(){return te.varargs+=4,A[te.varargs-4>>2]},getStr:function(e){return w(e)},getStreamFromFD:function(e){var t=ee.getStream(e);if(!t)throw new ee.ErrnoError(8);return t},get64:function(e,t){return e}};function ne(e){return e%4==0&&(e%100!=0||e%400==0)}function re(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var ae=[31,29,31,30,31,30,31,31,30,31,30,31],oe=[31,28,31,30,31,30,31,31,30,31,30,31];function ie(e,t){for(var n=new Date(e.getTime());t>0;){var r=ne(n.getFullYear()),a=n.getMonth(),o=(r?ae:oe)[a];if(!(t>o-n.getDate()))return n.setDate(n.getDate()+t),n;t-=o-n.getDate()+1,n.setDate(1),a<11?n.setMonth(a+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}var le=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=ee.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r};function se(e,t,n){var r=n>0?n:T(e)+1,a=new Array(r),o=b(e,a,0,a.length);return t&&(a.length=o),a}Object.defineProperties(le.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return ee.isDir(this.mode)}},isDevice:{get:function(){return ee.isChrdev(this.mode)}}}),ee.FSNode=le,ee.staticInit();var ce={d:function(e){return pe(e+16)+16},c:function(e,t,n){throw new j(e).init(t,n),e},a:function(){x()},n:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return Y(28),-1;n=z()}return A[t>>2]=n/1e3|0,A[t+4>>2]=n%1e3*1e3*1e3|0,0},i:function(e,t){x("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},g:function(e,t){x("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,n){v.copyWithin(e,t,t+n)},m:function(e){var t,n=v.length,r=2147483648;if(e>r)return!1;for(var a=1;a<=4;a*=2){var o=n*(1+.2/a);if(o=Math.min(o,e+100663296),K(Math.min(r,((t=Math.max(e,o))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},o:function(e){for(var t=z();z()-t<e;);},q:function(e,t){try{var n=0;return q().forEach((function(r,a){var o=t+n;A[e+4*a>>2]=o,function(e,t,n){for(var r=0;r<e.length;++r)h[t++>>0]=e.charCodeAt(r);h[t>>0]=0}(r,o),n+=r.length+1})),0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},r:function(e,t){try{var n=q();A[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),A[t>>2]=r,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},j:function(e){!function(e,t){_||(a.onExit&&a.onExit(e),C=!0),c(e,new me(e))}(e)},s:function(e){try{var t=te.getStreamFromFD(e);return ee.close(t),0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},t:function(e,t,n,r){try{var a=te.getStreamFromFD(e),o=te.doReadv(a,t,n);return A[r>>2]=o,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},k:function(e,t,n,r,a){try{var o=te.getStreamFromFD(e),i=4294967296*n+(t>>>0),l=9007199254740992;return i<=-l||i>=l?-61:(ee.llseek(o,i,r),F=[o.position>>>0,(U=o.position,+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],A[a>>2]=F[0],A[a+4>>2]=F[1],o.getdents&&0===i&&0===r&&(o.getdents=null),0)}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},e:function(e,t,n,r){try{var a=te.getStreamFromFD(e),o=te.doWritev(a,t,n);return A[r>>2]=o,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},f:function(){return 6},h:function(){return 28},p:function(e,t,n,r){return function(e,t,n,r){var a=A[r+40>>2],o={tm_sec:A[r>>2],tm_min:A[r+4>>2],tm_hour:A[r+8>>2],tm_mday:A[r+12>>2],tm_mon:A[r+16>>2],tm_year:A[r+20>>2],tm_wday:A[r+24>>2],tm_yday:A[r+28>>2],tm_isdst:A[r+32>>2],tm_gmtoff:A[r+36>>2],tm_zone:a?w(a):""},i=w(n),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var s in l)i=i.replace(new RegExp(s,"g"),l[s]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function p(e,t){return d(e,t,"0")}function f(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function m(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function _(e){var t=ie(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),a=m(n),o=m(r);return f(a,t)<=0?f(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return c[e.tm_wday].substring(0,3)},"%A":function(e){return c[e.tm_wday]},"%b":function(e){return u[e.tm_mon].substring(0,3)},"%B":function(e){return u[e.tm_mon]},"%C":function(e){return p((e.tm_year+1900)/100|0,2)},"%d":function(e){return p(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return _(e).toString().substring(2)},"%G":function(e){return _(e)},"%H":function(e){return p(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),p(t,2)},"%j":function(e){return p(e.tm_mday+re(ne(e.tm_year+1900)?ae:oe,e.tm_mon-1),3)},"%m":function(e){return p(e.tm_mon+1,2)},"%M":function(e){return p(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return p(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:ie(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(f(n,r)<0){var a=re(ne(r.getFullYear())?ae:oe,r.getMonth()-1)-31,o=31-n.getDate()+a+r.getDate();return p(Math.ceil(o/7),2)}return 0===f(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),a=m(n),o=m(r),i=ie(new Date(e.tm_year+1900,0,1),e.tm_yday);return f(i,a)<0?"53":f(o,i)<=0?"01":(t=a.getFullYear()<e.tm_year+1900?e.tm_yday+32-a.getDate():e.tm_yday+1-a.getDate(),p(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:ie(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(f(n,r)<0){var a=re(ne(r.getFullYear())?ae:oe,r.getMonth()-1)-31,o=31-n.getDate()+a+r.getDate();return p(Math.ceil(o/7),2)}return 0===f(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var s in g)i.indexOf(s)>=0&&(i=i.replace(new RegExp(s,"g"),g[s](o)));var v=se(i,!1);return v.length>t?0:(function(e,t){h.set(e,t)}(v,e),v.length-1)}(e,t,n,r)},b:function(e){switch(e){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Y(28),-1}};!function(){var e={a:ce};function t(e,t){var n=e.exports;a.asm=n,I((m=a.asm.u).buffer),E=a.asm.I,R()}function r(e){t(e.instance)}function o(t){return(d||"function"!=typeof fetch?Promise.resolve().then((function(){return V(G)})):fetch(G,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+G+"'";return e.arrayBuffer()})).catch((function(){return V(G)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){f("failed to asynchronously prepare wasm: "+e),x(e)}))}if(O(),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return f("Module.instantiateWasm callback failed with error: "+e),!1}(d||"function"!=typeof WebAssembly.instantiateStreaming||B(G)||"function"!=typeof fetch?o(r):fetch(G,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return f("wasm streaming compile failed: "+e),f("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(n)}();var ue=a.___wasm_call_ctors=function(){return(ue=a.___wasm_call_ctors=a.asm.v).apply(null,arguments)};a._getModelBufferMemoryOffset=function(){return(a._getModelBufferMemoryOffset=a.asm.w).apply(null,arguments)},a._getInputImageBufferOffset=function(){return(a._getInputImageBufferOffset=a.asm.x).apply(null,arguments)},a._getOutputImageBufferOffset=function(){return(a._getOutputImageBufferOffset=a.asm.y).apply(null,arguments)},a._getGrayedImageBufferOffset=function(){return(a._getGrayedImageBufferOffset=a.asm.z).apply(null,arguments)},a._setSmoothingR=function(){return(a._setSmoothingR=a.asm.A).apply(null,arguments)},a._setKernelSize=function(){return(a._setKernelSize=a.asm.B).apply(null,arguments)},a._setUseSoftmax=function(){return(a._setUseSoftmax=a.asm.C).apply(null,arguments)},a._setUsePadding=function(){return(a._setUsePadding=a.asm.D).apply(null,arguments)},a._setThresholdWithoutSoftmax=function(){return(a._setThresholdWithoutSoftmax=a.asm.E).apply(null,arguments)},a._setInterpolation=function(){return(a._setInterpolation=a.asm.F).apply(null,arguments)},a._exec=function(){return(a._exec=a.asm.G).apply(null,arguments)},a._loadModel=function(){return(a._loadModel=a.asm.H).apply(null,arguments)};var de,pe=a._malloc=function(){return(pe=a._malloc=a.asm.J).apply(null,arguments)},fe=a.___errno_location=function(){return(fe=a.___errno_location=a.asm.K).apply(null,arguments)};function me(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function _e(e){function n(){de||(de=!0,a.calledRun=!0,C||(a.noFSInit||ee.init.initialized||ee.init(),W(N),ee.ignorePermissions=!1,W(P),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),D.unshift(e);var e;W(D)}()))}M>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),k.unshift(e);var e;W(k)}(),M>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(L=function e(){de||_e(),de||(L=e)},a.run=_e,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return _e(),e.ready}})),d=s((function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,r){t=e,n=r}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var l,s="./this.program",c=function(e,t){throw t},u="";"undefined"!=typeof document&&document.currentScript&&(u=document.currentScript.src),void 0!==r&&r&&(u=r),u=0!==u.indexOf("blob:")?u.substr(0,u.lastIndexOf("/")+1):"",l=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText};var d,p=a.print||console.log.bind(console),f=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments,a.thisProgram&&(s=a.thisProgram),a.quit&&(c=a.quit),a.wasmBinary&&(d=a.wasmBinary);var m,_=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&x("no native wasm support detected");var g,h,v,A,E,C=!1,y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&y)return y.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var l=63&e[t++];if(192!=(224&i)){var s=63&e[t++];if((i=224==(240&i)?(15&i)<<12|l<<6|s:(7&i)<<18|l<<12|s<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|l)}else o+=String.fromCharCode(i)}return o}function w(e,t){return e?S(v,e,t):""}function b(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&e.charCodeAt(++i)),l<=127){if(n>=o)break;t[n++]=l}else if(l<=2047){if(n+1>=o)break;t[n++]=192|l>>6,t[n++]=128|63&l}else if(l<=65535){if(n+2>=o)break;t[n++]=224|l>>12,t[n++]=128|l>>6&63,t[n++]=128|63&l}else{if(n+3>=o)break;t[n++]=240|l>>18,t[n++]=128|l>>12&63,t[n++]=128|l>>6&63,t[n++]=128|63&l}}return t[n]=0,n-a}function T(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function I(e){g=e,a.HEAP8=h=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU8=v=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var k=[],N=[],P=[],D=[];N.push({func:function(){ue()}});var M=0,L=null;function O(e){M++,a.monitorRunDependencies&&a.monitorRunDependencies(M)}function R(e){if(M--,a.monitorRunDependencies&&a.monitorRunDependencies(M),0==M&&L){var t=L;L=null,t()}}function x(e){a.onAbort&&a.onAbort(e),f(e+=""),C=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function B(e){return t=e,n="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(n):0===t.indexOf(n);var t,n}a.preloadedImages={},a.preloadedAudios={};var H,U,F,G="https://stest.mycdn.me/static/callseffects/0-0-2/tflite.wasm";function V(e){try{if(e==G&&d)return new Uint8Array(d);throw"both async and sync fetching of the wasm failed"}catch(e){x(e)}}function W(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?E.get(n)():E.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}B(G)||(H=G,G=a.locateFile?a.locateFile(H,u):u+H);var z;function j(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){A[this.ptr+8>>2]=e},this.get_type=function(){return A[this.ptr+8>>2]},this.set_destructor=function(e){A[this.ptr+0>>2]=e},this.get_destructor=function(){return A[this.ptr+0>>2]},this.set_refcount=function(e){A[this.ptr+4>>2]=e},this.set_caught=function(e){e=e?1:0,h[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=h[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,h[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=h[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=A[this.ptr+4>>2];A[this.ptr+4>>2]=e+1},this.release_ref=function(){var e=A[this.ptr+4>>2];return A[this.ptr+4>>2]=e-1,1===e}}function Y(e){return A[fe()>>2]=e,e}function K(e){try{return m.grow(e-g.byteLength+65535>>>16),I(m.buffer),1}catch(e){}}z=function(){return performance.now()};var Q={};function q(){if(!q.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"};for(var t in Q)e[t]=Q[t];var n=[];for(var t in e)n.push(t+"="+e[t]);q.strings=n}return q.strings}var J={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=J.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=J.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=J.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return J.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return J.normalize(e.join("/"))},join2:function(e,t){return J.normalize(e+"/"+t)}},X={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:ee.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return(t?"/":"")+(e=J.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=X.resolve(e).substr(1),t=X.resolve(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),o=Math.min(r.length,a.length),i=o,l=0;l<o;l++)if(r[l]!==a[l]){i=l;break}var s=[];for(l=i;l<r.length;l++)s.push("..");return(s=s.concat(a.slice(i))).join("/")}},Z={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Z.ttys[e]={input:[],output:[],ops:t},ee.registerDevice(e,Z.stream_ops)},stream_ops:{open:function(e){var t=Z.ttys[e.node.rdev];if(!t)throw new ee.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,a){if(!e.tty||!e.tty.ops.get_char)throw new ee.ErrnoError(60);for(var o=0,i=0;i<r;i++){var l;try{l=e.tty.ops.get_char(e.tty)}catch(e){throw new ee.ErrnoError(29)}if(void 0===l&&0===o)throw new ee.ErrnoError(6);if(null==l)break;o++,t[n+i]=l}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r,a){if(!e.tty||!e.tty.ops.put_char)throw new ee.ErrnoError(60);try{for(var o=0;o<r;o++)e.tty.ops.put_char(e.tty,t[n+o])}catch(e){throw new ee.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=se(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(p(S(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(p(S(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(f(S(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(f(S(e.output,0)),e.output=[])}}};var $={ops_table:null,mount:function(e){return $.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(ee.isBlkdev(n)||ee.isFIFO(n))throw new ee.ErrnoError(63);$.ops_table||($.ops_table={dir:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,lookup:$.node_ops.lookup,mknod:$.node_ops.mknod,rename:$.node_ops.rename,unlink:$.node_ops.unlink,rmdir:$.node_ops.rmdir,readdir:$.node_ops.readdir,symlink:$.node_ops.symlink},stream:{llseek:$.stream_ops.llseek}},file:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:{llseek:$.stream_ops.llseek,read:$.stream_ops.read,write:$.stream_ops.write,allocate:$.stream_ops.allocate,mmap:$.stream_ops.mmap,msync:$.stream_ops.msync}},link:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,readlink:$.node_ops.readlink},stream:{}},chrdev:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:ee.chrdev_stream_ops}});var a=ee.createNode(e,t,n,r);return ee.isDir(a.mode)?(a.node_ops=$.ops_table.dir.node,a.stream_ops=$.ops_table.dir.stream,a.contents={}):ee.isFile(a.mode)?(a.node_ops=$.ops_table.file.node,a.stream_ops=$.ops_table.file.stream,a.usedBytes=0,a.contents=null):ee.isLink(a.mode)?(a.node_ops=$.ops_table.link.node,a.stream_ops=$.ops_table.link.stream):ee.isChrdev(a.mode)&&(a.node_ops=$.ops_table.chrdev.node,a.stream_ops=$.ops_table.chrdev.stream),a.timestamp=Date.now(),e&&(e.contents[t]=a,e.timestamp=a.timestamp),a},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=ee.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ee.isDir(e.mode)?t.size=4096:ee.isFile(e.mode)?t.size=e.usedBytes:ee.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&$.resizeFileStorage(e,t.size)},lookup:function(e,t){throw ee.genericErrors[44]},mknod:function(e,t,n,r){return $.createNode(e,t,n,r)},rename:function(e,t,n){if(ee.isDir(e.mode)){var r;try{r=ee.lookupNode(t,n)}catch(e){}if(r)for(var a in r.contents)throw new ee.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=ee.lookupNode(e,t);for(var r in n.contents)throw new ee.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=$.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!ee.isLink(e.mode))throw new ee.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,a){var o=e.node.contents;if(a>=e.node.usedBytes)return 0;var i=Math.min(e.node.usedBytes-a,r);if(i>8&&o.subarray)t.set(o.subarray(a,a+i),n);else for(var l=0;l<i;l++)t[n+l]=o[a+l];return i},write:function(e,t,n,r,a,o){if(t.buffer===h.buffer&&(o=!1),!r)return 0;var i=e.node;if(i.timestamp=Date.now(),t.subarray&&(!i.contents||i.contents.subarray)){if(o)return i.contents=t.subarray(n,n+r),i.usedBytes=r,r;if(0===i.usedBytes&&0===a)return i.contents=t.slice(n,n+r),i.usedBytes=r,r;if(a+r<=i.usedBytes)return i.contents.set(t.subarray(n,n+r),a),r}if($.expandFileStorage(i,a+r),i.contents.subarray&&t.subarray)i.contents.set(t.subarray(n,n+r),a);else for(var l=0;l<r;l++)i.contents[a+l]=t[n+l];return i.usedBytes=Math.max(i.usedBytes,a+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&ee.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new ee.ErrnoError(28);return r},allocate:function(e,t,n){$.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,a,o){if(0!==t)throw new ee.ErrnoError(28);if(!ee.isFile(e.node.mode))throw new ee.ErrnoError(43);var i,l,s=e.node.contents;if(2&o||s.buffer!==g){if((r>0||r+n<s.length)&&(s=s.subarray?s.subarray(r,r+n):Array.prototype.slice.call(s,r,r+n)),l=!0,!(i=function(e){for(var t=function(e,t){return t||(t=16),Math.ceil(e/t)*t}(e,16384),n=pe(t);e<t;)h[n+e++]=0;return n}(n)))throw new ee.ErrnoError(48);h.set(s,i)}else l=!1,i=s.byteOffset;return{ptr:i,allocated:l}},msync:function(e,t,n,r,a){if(!ee.isFile(e.node.mode))throw new ee.ErrnoError(43);return 2&a||$.stream_ops.write(e,t,0,r,n,!1),0}}},ee={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=X.resolve(ee.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new ee.ErrnoError(32);for(var a=J.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),o=ee.root,i="/",l=0;l<a.length;l++){var s=l===a.length-1;if(s&&t.parent)break;if(o=ee.lookupNode(o,a[l]),i=J.join2(i,a[l]),ee.isMountpoint(o)&&(!s||s&&t.follow_mount)&&(o=o.mounted.root),!s||t.follow)for(var c=0;ee.isLink(o.mode);){var u=ee.readlink(i);if(i=X.resolve(J.dirname(i),u),o=ee.lookupPath(i,{recurse_count:t.recurse_count}).node,c++>40)throw new ee.ErrnoError(32)}}return{path:i,node:o}},getPath:function(e){for(var t;;){if(ee.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ee.nameTable.length},hashAddNode:function(e){var t=ee.hashName(e.parent.id,e.name);e.name_next=ee.nameTable[t],ee.nameTable[t]=e},hashRemoveNode:function(e){var t=ee.hashName(e.parent.id,e.name);if(ee.nameTable[t]===e)ee.nameTable[t]=e.name_next;else for(var n=ee.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=ee.mayLookup(e);if(n)throw new ee.ErrnoError(n,e);for(var r=ee.hashName(e.id,t),a=ee.nameTable[r];a;a=a.name_next){var o=a.name;if(a.parent.id===e.id&&o===t)return a}return ee.lookup(e,t)},createNode:function(e,t,n,r){var a=new ee.FSNode(e,t,n,r);return ee.hashAddNode(a),a},destroyNode:function(e){ee.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=ee.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return ee.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){return ee.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return ee.lookupNode(e,t),20}catch(e){}return ee.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=ee.lookupNode(e,t)}catch(e){return e.errno}var a=ee.nodePermissions(e,"wx");if(a)return a;if(n){if(!ee.isDir(r.mode))return 54;if(ee.isRoot(r)||ee.getPath(r)===ee.cwd())return 10}else if(ee.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?ee.isLink(e.mode)?32:ee.isDir(e.mode)&&("r"!==ee.flagsToPermissionString(t)||512&t)?31:ee.nodePermissions(e,ee.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||ee.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!ee.streams[n])return n;throw new ee.ErrnoError(33)},getStream:function(e){return ee.streams[e]},createStream:function(e,t,n){ee.FSStream||(ee.FSStream=function(){},ee.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new ee.FSStream;for(var a in e)r[a]=e[a];e=r;var o=ee.nextfd(t,n);return e.fd=o,ee.streams[o]=e,e},closeStream:function(e){ee.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=ee.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new ee.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){ee.devices[e]={stream_ops:t}},getDevice:function(e){return ee.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),ee.syncFSRequests++,ee.syncFSRequests>1&&f("warning: "+ee.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=ee.getMounts(ee.root.mount),r=0;function a(e){return ee.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,a(e));++r>=n.length&&a(null)}n.forEach((function(t){if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)}))},mount:function(e,t,n){var r,a="/"===n,o=!n;if(a&&ee.root)throw new ee.ErrnoError(10);if(!a&&!o){var i=ee.lookupPath(n,{follow_mount:!1});if(n=i.path,r=i.node,ee.isMountpoint(r))throw new ee.ErrnoError(10);if(!ee.isDir(r.mode))throw new ee.ErrnoError(54)}var l={type:e,opts:t,mountpoint:n,mounts:[]},s=e.mount(l);return s.mount=l,l.root=s,a?ee.root=s:r&&(r.mounted=l,r.mount&&r.mount.mounts.push(l)),s},unmount:function(e){var t=ee.lookupPath(e,{follow_mount:!1});if(!ee.isMountpoint(t.node))throw new ee.ErrnoError(28);var n=t.node,r=n.mounted,a=ee.getMounts(r);Object.keys(ee.nameTable).forEach((function(e){for(var t=ee.nameTable[e];t;){var n=t.name_next;-1!==a.indexOf(t.mount)&&ee.destroyNode(t),t=n}})),n.mounted=null;var o=n.mount.mounts.indexOf(r);n.mount.mounts.splice(o,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=ee.lookupPath(e,{parent:!0}).node,a=J.basename(e);if(!a||"."===a||".."===a)throw new ee.ErrnoError(28);var o=ee.mayCreate(r,a);if(o)throw new ee.ErrnoError(o);if(!r.node_ops.mknod)throw new ee.ErrnoError(63);return r.node_ops.mknod(r,a,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,ee.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,ee.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",a=0;a<n.length;++a)if(n[a]){r+="/"+n[a];try{ee.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,n){return void 0===n&&(n=t,t=438),t|=8192,ee.mknod(e,t,n)},symlink:function(e,t){if(!X.resolve(e))throw new ee.ErrnoError(44);var n=ee.lookupPath(t,{parent:!0}).node;if(!n)throw new ee.ErrnoError(44);var r=J.basename(t),a=ee.mayCreate(n,r);if(a)throw new ee.ErrnoError(a);if(!n.node_ops.symlink)throw new ee.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,a=J.dirname(e),o=J.dirname(t),i=J.basename(e),l=J.basename(t);if(n=ee.lookupPath(e,{parent:!0}).node,r=ee.lookupPath(t,{parent:!0}).node,!n||!r)throw new ee.ErrnoError(44);if(n.mount!==r.mount)throw new ee.ErrnoError(75);var s,c=ee.lookupNode(n,i),u=X.relative(e,o);if("."!==u.charAt(0))throw new ee.ErrnoError(28);if("."!==(u=X.relative(t,a)).charAt(0))throw new ee.ErrnoError(55);try{s=ee.lookupNode(r,l)}catch(e){}if(c!==s){var d=ee.isDir(c.mode),p=ee.mayDelete(n,i,d);if(p)throw new ee.ErrnoError(p);if(p=s?ee.mayDelete(r,l,d):ee.mayCreate(r,l))throw new ee.ErrnoError(p);if(!n.node_ops.rename)throw new ee.ErrnoError(63);if(ee.isMountpoint(c)||s&&ee.isMountpoint(s))throw new ee.ErrnoError(10);if(r!==n&&(p=ee.nodePermissions(n,"w")))throw new ee.ErrnoError(p);try{ee.trackingDelegate.willMovePath}catch(n){f("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}ee.hashRemoveNode(c);try{n.node_ops.rename(c,r,l)}catch(e){throw e}finally{ee.hashAddNode(c)}try{ee.trackingDelegate.onMovePath}catch(n){f("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}}},rmdir:function(e){var t=ee.lookupPath(e,{parent:!0}).node,n=J.basename(e),r=ee.lookupNode(t,n),a=ee.mayDelete(t,n,!0);if(a)throw new ee.ErrnoError(a);if(!t.node_ops.rmdir)throw new ee.ErrnoError(63);if(ee.isMountpoint(r))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath}catch(t){f("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,n),ee.destroyNode(r);try{ee.trackingDelegate.onDeletePath}catch(t){f("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=ee.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new ee.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=ee.lookupPath(e,{parent:!0}).node,n=J.basename(e),r=ee.lookupNode(t,n),a=ee.mayDelete(t,n,!1);if(a)throw new ee.ErrnoError(a);if(!t.node_ops.unlink)throw new ee.ErrnoError(63);if(ee.isMountpoint(r))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath}catch(t){f("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,n),ee.destroyNode(r);try{ee.trackingDelegate.onDeletePath}catch(t){f("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=ee.lookupPath(e).node;if(!t)throw new ee.ErrnoError(44);if(!t.node_ops.readlink)throw new ee.ErrnoError(28);return X.resolve(ee.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=ee.lookupPath(e,{follow:!t}).node;if(!n)throw new ee.ErrnoError(44);if(!n.node_ops.getattr)throw new ee.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return ee.stat(e,!0)},chmod:function(e,t,n){var r;if(!(r="string"==typeof e?ee.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){ee.chmod(e,t,!0)},fchmod:function(e,t){var n=ee.getStream(e);if(!n)throw new ee.ErrnoError(8);ee.chmod(n.node,t)},chown:function(e,t,n,r){var a;if(!(a="string"==typeof e?ee.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:function(e,t,n){ee.chown(e,t,n,!0)},fchown:function(e,t,n){var r=ee.getStream(e);if(!r)throw new ee.ErrnoError(8);ee.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new ee.ErrnoError(28);var n;if(!(n="string"==typeof e?ee.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);if(ee.isDir(n.mode))throw new ee.ErrnoError(31);if(!ee.isFile(n.mode))throw new ee.ErrnoError(28);var r=ee.nodePermissions(n,"w");if(r)throw new ee.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=ee.getStream(e);if(!n)throw new ee.ErrnoError(8);if(0==(2097155&n.flags))throw new ee.ErrnoError(28);ee.truncate(n.node,t)},utime:function(e,t,n){var r=ee.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,o){if(""===e)throw new ee.ErrnoError(44);var i;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?ee.modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof e)i=e;else{e=J.normalize(e);try{i=ee.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var l=!1;if(64&t)if(i){if(128&t)throw new ee.ErrnoError(20)}else i=ee.mknod(e,n,0),l=!0;if(!i)throw new ee.ErrnoError(44);if(ee.isChrdev(i.mode)&&(t&=-513),65536&t&&!ee.isDir(i.mode))throw new ee.ErrnoError(54);if(!l){var s=ee.mayOpen(i,t);if(s)throw new ee.ErrnoError(s)}512&t&&ee.truncate(i,0),t&=-131713;var c=ee.createStream({node:i,path:ee.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1},r,o);c.stream_ops.open&&c.stream_ops.open(c),!a.logReadFiles||1&t||(ee.readFiles||(ee.readFiles={}),e in ee.readFiles||(ee.readFiles[e]=1,f("FS.trackingDelegate error on read file: "+e)));try{ee.trackingDelegate.onOpenFile}catch(t){f("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return c},close:function(e){if(ee.isClosed(e))throw new ee.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{ee.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(ee.isClosed(e))throw new ee.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new ee.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new ee.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,a){if(r<0||a<0)throw new ee.ErrnoError(28);if(ee.isClosed(e))throw new ee.ErrnoError(8);if(1==(2097155&e.flags))throw new ee.ErrnoError(8);if(ee.isDir(e.node.mode))throw new ee.ErrnoError(31);if(!e.stream_ops.read)throw new ee.ErrnoError(28);var o=void 0!==a;if(o){if(!e.seekable)throw new ee.ErrnoError(70)}else a=e.position;var i=e.stream_ops.read(e,t,n,r,a);return o||(e.position+=i),i},write:function(e,t,n,r,a,o){if(r<0||a<0)throw new ee.ErrnoError(28);if(ee.isClosed(e))throw new ee.ErrnoError(8);if(0==(2097155&e.flags))throw new ee.ErrnoError(8);if(ee.isDir(e.node.mode))throw new ee.ErrnoError(31);if(!e.stream_ops.write)throw new ee.ErrnoError(28);e.seekable&&1024&e.flags&&ee.llseek(e,0,2);var i=void 0!==a;if(i){if(!e.seekable)throw new ee.ErrnoError(70)}else a=e.position;var l=e.stream_ops.write(e,t,n,r,a,o);i||(e.position+=l);try{e.path&&ee.trackingDelegate.onWriteToFile&&ee.trackingDelegate.onWriteToFile(e.path)}catch(t){f("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return l},allocate:function(e,t,n){if(ee.isClosed(e))throw new ee.ErrnoError(8);if(t<0||n<=0)throw new ee.ErrnoError(28);if(0==(2097155&e.flags))throw new ee.ErrnoError(8);if(!ee.isFile(e.node.mode)&&!ee.isDir(e.node.mode))throw new ee.ErrnoError(43);if(!e.stream_ops.allocate)throw new ee.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,a,o){if(0!=(2&a)&&0==(2&o)&&2!=(2097155&e.flags))throw new ee.ErrnoError(2);if(1==(2097155&e.flags))throw new ee.ErrnoError(2);if(!e.stream_ops.mmap)throw new ee.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,a,o)},msync:function(e,t,n,r,a){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,a):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new ee.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=ee.open(e,t.flags),a=ee.stat(e).size,o=new Uint8Array(a);return ee.read(r,o,0,a,0),"utf8"===t.encoding?n=S(o,0):"binary"===t.encoding&&(n=o),ee.close(r),n},writeFile:function(e,t,n){(n=n||{}).flags=n.flags||577;var r=ee.open(e,n.flags,n.mode);if("string"==typeof t){var a=new Uint8Array(T(t)+1),o=b(t,a,0,a.length);ee.write(r,a,0,o,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");ee.write(r,t,0,t.byteLength,void 0,n.canOwn)}ee.close(r)},cwd:function(){return ee.currentPath},chdir:function(e){var t=ee.lookupPath(e,{follow:!0});if(null===t.node)throw new ee.ErrnoError(44);if(!ee.isDir(t.node.mode))throw new ee.ErrnoError(54);var n=ee.nodePermissions(t.node,"x");if(n)throw new ee.ErrnoError(n);ee.currentPath=t.path},createDefaultDirectories:function(){ee.mkdir("/tmp"),ee.mkdir("/home"),ee.mkdir("/home/web_user")},createDefaultDevices:function(){ee.mkdir("/dev"),ee.registerDevice(ee.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,a){return r}}),ee.mkdev("/dev/null",ee.makedev(1,3)),Z.register(ee.makedev(5,0),Z.default_tty_ops),Z.register(ee.makedev(6,0),Z.default_tty1_ops),ee.mkdev("/dev/tty",ee.makedev(5,0)),ee.mkdev("/dev/tty1",ee.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){x("randomDevice")}}();ee.createDevice("/dev","random",e),ee.createDevice("/dev","urandom",e),ee.mkdir("/dev/shm"),ee.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){ee.mkdir("/proc");var e=ee.mkdir("/proc/self");ee.mkdir("/proc/self/fd"),ee.mount({mount:function(){var t=ee.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var n=+t,r=ee.getStream(n);if(!r)throw new ee.ErrnoError(8);var a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return a.parent=a,a}},t}},{},"/proc/self/fd")},createStandardStreams:function(){a.stdin?ee.createDevice("/dev","stdin",a.stdin):ee.symlink("/dev/tty","/dev/stdin"),a.stdout?ee.createDevice("/dev","stdout",null,a.stdout):ee.symlink("/dev/tty","/dev/stdout"),a.stderr?ee.createDevice("/dev","stderr",null,a.stderr):ee.symlink("/dev/tty1","/dev/stderr"),ee.open("/dev/stdin",0),ee.open("/dev/stdout",1),ee.open("/dev/stderr",1)},ensureErrnoError:function(){ee.ErrnoError||(ee.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},ee.ErrnoError.prototype=new Error,ee.ErrnoError.prototype.constructor=ee.ErrnoError,[44].forEach((function(e){ee.genericErrors[e]=new ee.ErrnoError(e),ee.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){ee.ensureErrnoError(),ee.nameTable=new Array(4096),ee.mount($,{},"/"),ee.createDefaultDirectories(),ee.createDefaultDevices(),ee.createSpecialDirectories(),ee.filesystems={MEMFS:$}},init:function(e,t,n){ee.init.initialized=!0,ee.ensureErrnoError(),a.stdin=e||a.stdin,a.stdout=t||a.stdout,a.stderr=n||a.stderr,ee.createStandardStreams()},quit:function(){ee.init.initialized=!1;var e=a._fflush;e&&e(0);for(var t=0;t<ee.streams.length;t++){var n=ee.streams[t];n&&ee.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:function(e,t){var n=ee.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=ee.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=ee.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=J.basename(e),r=ee.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:function(e,t,n,r){e="string"==typeof e?e:ee.getPath(e);for(var a=t.split("/").reverse();a.length;){var o=a.pop();if(o){var i=J.join2(e,o);try{ee.mkdir(i)}catch(e){}e=i}}return i},createFile:function(e,t,n,r,a){var o=J.join2("string"==typeof e?e:ee.getPath(e),t),i=ee.getMode(r,a);return ee.create(o,i)},createDataFile:function(e,t,n,r,a,o){var i=t?J.join2("string"==typeof e?e:ee.getPath(e),t):e,l=ee.getMode(r,a),s=ee.create(i,l);if(n){if("string"==typeof n){for(var c=new Array(n.length),u=0,d=n.length;u<d;++u)c[u]=n.charCodeAt(u);n=c}ee.chmod(s,146|l);var p=ee.open(s,577);ee.write(p,n,0,n.length,0,o),ee.close(p),ee.chmod(s,l)}return s},createDevice:function(e,t,n,r){var a=J.join2("string"==typeof e?e:ee.getPath(e),t),o=ee.getMode(!!n,!!r);ee.createDevice.major||(ee.createDevice.major=64);var i=ee.makedev(ee.createDevice.major++,0);return ee.registerDevice(i,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,a,o){for(var i=0,l=0;l<a;l++){var s;try{s=n()}catch(e){throw new ee.ErrnoError(29)}if(void 0===s&&0===i)throw new ee.ErrnoError(6);if(null==s)break;i++,t[r+l]=s}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,n,a,o){for(var i=0;i<a;i++)try{r(t[n+i])}catch(e){throw new ee.ErrnoError(29)}return a&&(e.node.timestamp=Date.now()),i}}),ee.mkdev(a,o,i)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!l)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=se(l(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new ee.ErrnoError(29)}},createLazyFile:function(e,t,n,r,a){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),a=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,i=1048576;a||(i=r);var l=this;l.setDataGetter((function(e){var t=e*i,a=(e+1)*i-1;if(a=Math.min(a,r-1),void 0===l.chunks[e]&&(l.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var a=new XMLHttpRequest;if(a.open("GET",n,!1),r!==i&&a.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(a.responseType="arraybuffer"),a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),a.send(null),!(a.status>=200&&a.status<300||304===a.status))throw new Error("Couldn't load "+n+". Status: "+a.status);return void 0!==a.response?new Uint8Array(a.response||[]):se(a.responseText||"",!0)}(t,a)),void 0===l.chunks[e])throw new Error("doXHR failed!");return l.chunks[e]})),!o&&r||(i=r=1,r=this.getter(0).length,i=r,p("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=i,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var i={isDevice:!1,url:n},l=ee.createFile(e,t,i,r,a);i.contents?l.contents=i.contents:i.url&&(l.contents=null,l.url=i.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var s={};return Object.keys(l.stream_ops).forEach((function(e){var t=l.stream_ops[e];s[e]=function(){return ee.forceLoadFile(l),t.apply(null,arguments)}})),s.read=function(e,t,n,r,a){ee.forceLoadFile(l);var o=e.node.contents;if(a>=o.length)return 0;var i=Math.min(o.length-a,r);if(o.slice)for(var s=0;s<i;s++)t[n+s]=o[a+s];else for(s=0;s<i;s++)t[n+s]=o.get(a+s);return i},l.stream_ops=s,l},createPreloadedFile:function(e,t,n,r,o,i,l,s,c,u){Browser.init();var d=t?X.resolve(J.join2(e,t)):e;function p(n){function p(n){u&&u(),s||ee.createDataFile(e,t,n,r,o,c),i&&i(),R()}var f=!1;a.preloadPlugins.forEach((function(e){f||e.canHandle(d)&&(e.handle(n,d,p,(function(){l&&l(),R()})),f=!0)})),f||p(n)}O(),"string"==typeof n?Browser.asyncLoad(n,(function(e){p(e)}),l):p(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ee.indexedDB();try{var a=r.open(ee.DB_NAME(),ee.DB_VERSION)}catch(e){return n(e)}a.onupgradeneeded=function(){p("creating db"),a.result.createObjectStore(ee.DB_STORE_NAME)},a.onsuccess=function(){var r=a.result.transaction([ee.DB_STORE_NAME],"readwrite"),o=r.objectStore(ee.DB_STORE_NAME),i=0,l=0,s=e.length;function c(){0==l?t():n()}e.forEach((function(e){var t=o.put(ee.analyzePath(e).object.contents,e);t.onsuccess=function(){++i+l==s&&c()},t.onerror=function(){l++,i+l==s&&c()}})),r.onerror=n},a.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ee.indexedDB();try{var a=r.open(ee.DB_NAME(),ee.DB_VERSION)}catch(e){return n(e)}a.onupgradeneeded=n,a.onsuccess=function(){var r=a.result;try{var o=r.transaction([ee.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var i=o.objectStore(ee.DB_STORE_NAME),l=0,s=0,c=e.length;function u(){0==s?t():n()}e.forEach((function(e){var t=i.get(e);t.onsuccess=function(){ee.analyzePath(e).exists&&ee.unlink(e),ee.createDataFile(J.dirname(e),J.basename(e),t.result,!0,!0,!0),++l+s==c&&u()},t.onerror=function(){s++,l+s==c&&u()}})),o.onerror=n},a.onerror=n}},te={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t,n){if("/"===t[0])return t;var r;if(-100===e)r=ee.cwd();else{var a=ee.getStream(e);if(!a)throw new ee.ErrnoError(8);r=a.path}if(0==t.length){if(!n)throw new ee.ErrnoError(44);return r}return J.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&J.normalize(t)!==J.normalize(ee.getPath(e.node)))return-54;throw e}return A[n>>2]=r.dev,A[n+4>>2]=0,A[n+8>>2]=r.ino,A[n+12>>2]=r.mode,A[n+16>>2]=r.nlink,A[n+20>>2]=r.uid,A[n+24>>2]=r.gid,A[n+28>>2]=r.rdev,A[n+32>>2]=0,F=[r.size>>>0,(U=r.size,+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],A[n+40>>2]=F[0],A[n+44>>2]=F[1],A[n+48>>2]=4096,A[n+52>>2]=r.blocks,A[n+56>>2]=r.atime.getTime()/1e3|0,A[n+60>>2]=0,A[n+64>>2]=r.mtime.getTime()/1e3|0,A[n+68>>2]=0,A[n+72>>2]=r.ctime.getTime()/1e3|0,A[n+76>>2]=0,F=[r.ino>>>0,(U=r.ino,+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],A[n+80>>2]=F[0],A[n+84>>2]=F[1],0},doMsync:function(e,t,n,r,a){var o=v.slice(e,e+n);ee.msync(t,o,a,n,r)},doMkdir:function(e,t){return"/"===(e=J.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),ee.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return ee.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var r=ee.readlink(e),a=Math.min(n,T(r)),o=h[t+a];return b(r,v,t,n+1),h[t+a]=o,a},doAccess:function(e,t){if(-8&t)return-28;var n;if(!(n=ee.lookupPath(e,{follow:!0}).node))return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&ee.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=ee.getStream(n);return r&&ee.close(r),ee.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var a=0,o=0;o<n;o++){var i=A[t+8*o>>2],l=A[t+(8*o+4)>>2],s=ee.read(e,h,i,l,r);if(s<0)return-1;if(a+=s,s<l)break}return a},doWritev:function(e,t,n,r){for(var a=0,o=0;o<n;o++){var i=A[t+8*o>>2],l=A[t+(8*o+4)>>2],s=ee.write(e,h,i,l,r);if(s<0)return-1;a+=s}return a},varargs:void 0,get:function(){return te.varargs+=4,A[te.varargs-4>>2]},getStr:function(e){return w(e)},getStreamFromFD:function(e){var t=ee.getStream(e);if(!t)throw new ee.ErrnoError(8);return t},get64:function(e,t){return e}};function ne(e){return e%4==0&&(e%100!=0||e%400==0)}function re(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var ae=[31,29,31,30,31,30,31,31,30,31,30,31],oe=[31,28,31,30,31,30,31,31,30,31,30,31];function ie(e,t){for(var n=new Date(e.getTime());t>0;){var r=ne(n.getFullYear()),a=n.getMonth(),o=(r?ae:oe)[a];if(!(t>o-n.getDate()))return n.setDate(n.getDate()+t),n;t-=o-n.getDate()+1,n.setDate(1),a<11?n.setMonth(a+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}var le=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=ee.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r};function se(e,t,n){var r=n>0?n:T(e)+1,a=new Array(r),o=b(e,a,0,a.length);return t&&(a.length=o),a}Object.defineProperties(le.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return ee.isDir(this.mode)}},isDevice:{get:function(){return ee.isChrdev(this.mode)}}}),ee.FSNode=le,ee.staticInit();var ce={d:function(e){return pe(e+16)+16},c:function(e,t,n){throw new j(e).init(t,n),e},a:function(){x()},n:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return Y(28),-1;n=z()}return A[t>>2]=n/1e3|0,A[t+4>>2]=n%1e3*1e3*1e3|0,0},i:function(e,t){x("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},g:function(e,t){x("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,n){v.copyWithin(e,t,t+n)},m:function(e){var t,n=v.length,r=2147483648;if(e>r)return!1;for(var a=1;a<=4;a*=2){var o=n*(1+.2/a);if(o=Math.min(o,e+100663296),K(Math.min(r,((t=Math.max(e,o))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},o:function(e){for(var t=z();z()-t<e;);},q:function(e,t){try{var n=0;return q().forEach((function(r,a){var o=t+n;A[e+4*a>>2]=o,function(e,t,n){for(var r=0;r<e.length;++r)h[t++>>0]=e.charCodeAt(r);h[t>>0]=0}(r,o),n+=r.length+1})),0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},r:function(e,t){try{var n=q();A[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),A[t>>2]=r,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},j:function(e){!function(e,t){_||(a.onExit&&a.onExit(e),C=!0),c(e,new me(e))}(e)},s:function(e){try{var t=te.getStreamFromFD(e);return ee.close(t),0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},t:function(e,t,n,r){try{var a=te.getStreamFromFD(e),o=te.doReadv(a,t,n);return A[r>>2]=o,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},k:function(e,t,n,r,a){try{var o=te.getStreamFromFD(e),i=4294967296*n+(t>>>0),l=9007199254740992;return i<=-l||i>=l?-61:(ee.llseek(o,i,r),F=[o.position>>>0,(U=o.position,+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],A[a>>2]=F[0],A[a+4>>2]=F[1],o.getdents&&0===i&&0===r&&(o.getdents=null),0)}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},e:function(e,t,n,r){try{var a=te.getStreamFromFD(e),o=te.doWritev(a,t,n);return A[r>>2]=o,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||x(e),e.errno}},f:function(){return 6},h:function(){return 28},p:function(e,t,n,r){return function(e,t,n,r){var a=A[r+40>>2],o={tm_sec:A[r>>2],tm_min:A[r+4>>2],tm_hour:A[r+8>>2],tm_mday:A[r+12>>2],tm_mon:A[r+16>>2],tm_year:A[r+20>>2],tm_wday:A[r+24>>2],tm_yday:A[r+28>>2],tm_isdst:A[r+32>>2],tm_gmtoff:A[r+36>>2],tm_zone:a?w(a):""},i=w(n),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var s in l)i=i.replace(new RegExp(s,"g"),l[s]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function p(e,t){return d(e,t,"0")}function f(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function m(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function _(e){var t=ie(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),a=m(n),o=m(r);return f(a,t)<=0?f(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return c[e.tm_wday].substring(0,3)},"%A":function(e){return c[e.tm_wday]},"%b":function(e){return u[e.tm_mon].substring(0,3)},"%B":function(e){return u[e.tm_mon]},"%C":function(e){return p((e.tm_year+1900)/100|0,2)},"%d":function(e){return p(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return _(e).toString().substring(2)},"%G":function(e){return _(e)},"%H":function(e){return p(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),p(t,2)},"%j":function(e){return p(e.tm_mday+re(ne(e.tm_year+1900)?ae:oe,e.tm_mon-1),3)},"%m":function(e){return p(e.tm_mon+1,2)},"%M":function(e){return p(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return p(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:ie(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(f(n,r)<0){var a=re(ne(r.getFullYear())?ae:oe,r.getMonth()-1)-31,o=31-n.getDate()+a+r.getDate();return p(Math.ceil(o/7),2)}return 0===f(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),a=m(n),o=m(r),i=ie(new Date(e.tm_year+1900,0,1),e.tm_yday);return f(i,a)<0?"53":f(o,i)<=0?"01":(t=a.getFullYear()<e.tm_year+1900?e.tm_yday+32-a.getDate():e.tm_yday+1-a.getDate(),p(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:ie(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(f(n,r)<0){var a=re(ne(r.getFullYear())?ae:oe,r.getMonth()-1)-31,o=31-n.getDate()+a+r.getDate();return p(Math.ceil(o/7),2)}return 0===f(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var s in g)i.indexOf(s)>=0&&(i=i.replace(new RegExp(s,"g"),g[s](o)));var v=se(i,!1);return v.length>t?0:(function(e,t){h.set(e,t)}(v,e),v.length-1)}(e,t,n,r)},b:function(e){switch(e){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Y(28),-1}};!function(){var e={a:ce};function t(e,t){var n=e.exports;a.asm=n,I((m=a.asm.u).buffer),E=a.asm.I,R()}function r(e){t(e.instance)}function o(t){return(d||"function"!=typeof fetch?Promise.resolve().then((function(){return V(G)})):fetch(G,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+G+"'";return e.arrayBuffer()})).catch((function(){return V(G)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){f("failed to asynchronously prepare wasm: "+e),x(e)}))}if(O(),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return f("Module.instantiateWasm callback failed with error: "+e),!1}(d||"function"!=typeof WebAssembly.instantiateStreaming||B(G)||"function"!=typeof fetch?o(r):fetch(G,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return f("wasm streaming compile failed: "+e),f("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(n)}();var ue=a.___wasm_call_ctors=function(){return(ue=a.___wasm_call_ctors=a.asm.v).apply(null,arguments)};a._getModelBufferMemoryOffset=function(){return(a._getModelBufferMemoryOffset=a.asm.w).apply(null,arguments)},a._getInputImageBufferOffset=function(){return(a._getInputImageBufferOffset=a.asm.x).apply(null,arguments)},a._getOutputImageBufferOffset=function(){return(a._getOutputImageBufferOffset=a.asm.y).apply(null,arguments)},a._getGrayedImageBufferOffset=function(){return(a._getGrayedImageBufferOffset=a.asm.z).apply(null,arguments)},a._setSmoothingR=function(){return(a._setSmoothingR=a.asm.A).apply(null,arguments)},a._setKernelSize=function(){return(a._setKernelSize=a.asm.B).apply(null,arguments)},a._setUseSoftmax=function(){return(a._setUseSoftmax=a.asm.C).apply(null,arguments)},a._setUsePadding=function(){return(a._setUsePadding=a.asm.D).apply(null,arguments)},a._setThresholdWithoutSoftmax=function(){return(a._setThresholdWithoutSoftmax=a.asm.E).apply(null,arguments)},a._setInterpolation=function(){return(a._setInterpolation=a.asm.F).apply(null,arguments)},a._exec=function(){return(a._exec=a.asm.G).apply(null,arguments)},a._loadModel=function(){return(a._loadModel=a.asm.H).apply(null,arguments)};var de,pe=a._malloc=function(){return(pe=a._malloc=a.asm.J).apply(null,arguments)},fe=a.___errno_location=function(){return(fe=a.___errno_location=a.asm.K).apply(null,arguments)};function me(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function _e(e){function n(){de||(de=!0,a.calledRun=!0,C||(a.noFSInit||ee.init.initialized||ee.init(),W(N),ee.ignorePermissions=!1,W(P),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),D.unshift(e);var e;W(D)}()))}M>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),k.unshift(e);var e;W(k)}(),M>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(L=function e(){de||_e(),de||(L=e)},a.run=_e,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return _e(),e.ready}})),p="https://st.mycdn.me/static/callseffects/0-0-2",f={segmentation:{models:{"96x160":p+"/96x160.tflite","128x128":p+"/128x128.tflite","144x256":p+"/144x256.tflite","256x256":p+"/256x256.tflite"}}},m=function(e,t){void 0===t&&(t=[]);var n=t.join(","),r=new Blob(["("+e+")("+n+");"],{type:"application/javascript; charset=utf-8"});return window.URL.createObjectURL(r)};!function(e){e.IE="IE",e.Safari="Safari",e.Chrome="Chrome",e.Edge="Edge",e.Firefox="Firefox",e.Yandex="Yandex",e.Opera="Opera",e.Sferum="Sferum"}(c||(c={}));var _,g,h,v,A,E=(_=navigator.appVersion,g=navigator.appName,h=navigator.userAgent,v=[],function(){return v.length?v:v=function(){var e,t=!1,n=0,r=h.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return e=/\brv[ :]+(\d+)/g.exec(h),[c.IE,e&&e[1]||"Unknown",t,n];if("Safari"===r[1]){if(e=h.match(/\bEdge\/(\d+)/))return[c.Edge,e[1]||"Unknown",t,n];if(e=h.match(/\bCriOS\/(\d+)/))return[c.Chrome,e[1],!0,+e[1]];if(e=h.match(/\bFxiOS\/(\d+)/))return[c.Firefox,e[1],!1,n];if(e=h.match(/\bYaBrowser\/(\d+)/))return[c.Yandex,e[1],!1,n];if(e=h.match(/\bOPT\/(\d+)/))return[c.Opera,e[1],!1,n]}if(r[1]===c.Chrome){if(t=!0,n=Number(r[2]),e=h.match(/\bOPR\/(\d+)/))return[c.Opera,e[1]||"Unknown",t,n];if(e=h.match(/\bYaBrowser\/(\d+)/))return[c.Yandex,e[1]||"Unknown",t,n];if(e=h.match(/\bSferum\/((\d+)(?:\.\d+)*)/))return[c.Sferum,e[1]||"Unknown",t,n];if(e=h.match(/\bEdge?\/(\d+)/))return[c.Edge,e[1]||"Unknown",t,n];if(void 0!==window.opr&&/^(.+\.)?ok.ru$/.test(window.location.host))return[c.Opera,"Hidden",t,n]}return e=h.match(/version\/(\d+)/i),[r[2]?r[1]:g,e&&e[1]||r[2]||_,t,n]}()}),C=function(e){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){return[2,new Promise((function(t,n){var r=document.createElement("img");r.crossOrigin="anonymous",r.onerror=function(e){n("Failed image loading: "+e)},r.onload=function(){return t(r)},r.src=e}))]}))}))},y=function(){try{var e=window,t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.captureStream&&e.CanvasCaptureMediaStreamTrack&&!0,n=E()[0]===c.Safari;return t&&!n}catch(e){return!1}},S=function(){function e(){}return e.updateSegmentationParams=function(t){Object.assign(e._params.segmentation,t)},e.getSegmentationParams=function(){return e._params.segmentation},e.setDebug=function(t){e._params.debug=t},e.getDebug=function(){return!!e._params.debug},e._params={segmentation:{interpolation:4,kernelSize:0,threshold:.1,usePadding:!0,useSoftmax:!0,processSizeKey:E()[0]===c.Safari?"128x128":"256x256",modelKey:E()[0]===c.Safari?"128x128":"256x256"}},e}(),w=function(){function e(){}return e.workerFn=function(e,t,n){var r=n.segmentationFix,a=n.simdSupport,o=null,i=!1,l={"96x160":[96,160],"128x128":[128,128],"144x256":[144,256],"256x256":[256,256]},s={interpolation:4,kernelSize:0,threshold:.1,usePadding:!0,useSoftmax:!0,processSizeKey:"256x256"},c=function(){f.call(null,"log",Array.from(arguments))},u=function(){f.call(null,"warn",Array.from(arguments))};function d(n,r,l){void 0===r&&(r={}),void 0===l&&(l=!1),i=l;var d=a?t:e;return c("[createModel]",n,r,{debugFlag:l}),d().then((function(e){return function(e,t){return c("[loadModel][modelPath]",e,t),fetch(t).then((function(e){return e.arrayBuffer()})).then((function(t){c("Model buffer size:",t.byteLength);var n=e._getModelBufferMemoryOffset();c("Model buffer memory offset:",n),c("Loading model buffer..."),e.HEAPU8.set(new Uint8Array(t),n);var r=e._loadModel(t.byteLength,i);c("_loadModel result:",r),c("Input Image Buffer Offset:",e._getInputImageBufferOffset()),c("Output Image Buffer Offset:",e._getOutputImageBufferOffset()),c("TFLITE Loaded!")}))}(e,n).then((function(){o=e}))})).then((function(){p(Object.assign({},s,r))})).catch((function(e){o=null,u("simd error",e),self.postMessage({type:"error",error:e})}))}function p(e){Object.assign(s,e),c("settings updated",s),null==o||o._setKernelSize(s.kernelSize),null==o||o._setUseSoftmax(s.useSoftmax?1:0),null==o||o._setUsePadding(s.usePadding?1:0),null==o||o._setThresholdWithoutSoftmax(s.threshold),null==o||o._setInterpolation(s.interpolation)}function f(e,t){if(void 0===e&&(e="log"),"function"==typeof console[e]&&i){var n=["[segmentation-worker]"].concat(t);console[e].apply(null,n)}}self.onmessage=function(e){try{switch(e.data.type){case"create":d(e.data.modelPath,e.data.settings,e.data.debug).then((function(){self.postMessage({type:"ready"})}));break;case"frame":var t=function(e){if(o){var t=l[s.processSizeKey],n=t[0],a=t[1],i=o._getInputImageBufferOffset();o.HEAPU8.set(e.data,i),o._exec(n,a);var c=o._getOutputImageBufferOffset(),d=new ImageData(new Uint8ClampedArray(o.HEAPU8.slice(c,c+n*a*4)),n,a);if(r)for(var p=0;p<d.data.length;p+=4)d.data[p+3]<r?d.data[p+3]=0:d.data[p+3]=255;return d}u("no tfliteSIMD instance!")}(e.data.imageData);t&&self.postMessage({type:"frame",segmentationMask:t,savedImage:e.data.savedImage,resizedImage:e.data.imageData},[t.data.buffer,e.data.savedImage.data.buffer,e.data.imageData.data.buffer]);break;case"params":p(e.data.params);break;default:u("unhandled event",e.data)}}catch(e){u("onmessage error",e),self.postMessage({type:"error",error:e})}}},e}(),b=function(){function e(e){var t=this,n=e.onFrame,r=e.onReady,a=e.onError;this._settings=S.getSegmentationParams(),this._processSize={"96x160":[96,160],"128x128":[128,128],"144x256":[144,256],"256x256":[256,256]},this._worker=null;var o=E()[0]===c.Safari;this._worker=new Worker(m(w.workerFn,[d,u,JSON.stringify({simdSupport:!o,segmentationFix:200})])),this._worker.onmessage=function(e){switch(e.data.type){case"ready":r(t);break;case"frame":n(e.data.segmentationMask,e.data.savedImage,e.data.resizedImage);break;case"error":null==a||a(e.data);break;default:console.warn("unhandled event type",e.data)}},this._canvas=document.createElement("canvas"),this._canvasImageBackup=document.createElement("canvas");var i=this._canvas.getContext("2d"),l=this._canvasImageBackup.getContext("2d");if(!i||!l)throw new Error("can't get ctx for canvas");this._ctx=i,this._ctxImageBackup=l}return e.prototype.createModel=function(e){var t,n=this._settings,r=f.segmentation.models[n.modelKey];null===(t=this._worker)||void 0===t||t.postMessage({type:"create",modelPath:r,settings:n,debug:e})},e.prototype.setParams=function(e){var t=this._worker,n=this._settings;Object.assign(n,e),null==t||t.postMessage({type:"params",params:n})},e.prototype.requestSegmentation=function(e){var t=this,n=t._settings,r=t._canvas,a=t._ctx,o=t._worker,i=t._processSize[n.processSizeKey],l=i[0],s=i[1],c=this._saveImage(e);r.width=l,r.height=s,a.drawImage(e,0,0,r.width,r.height);var u=a.getImageData(0,0,r.width,r.height);null==o||o.postMessage({type:"frame",imageData:u,savedImage:c},[u.data.buffer,c.data.buffer])},e.prototype._saveImage=function(e){var t=this._ctxImageBackup,n=this._canvasImageBackup,r=function(e){var t={height:0,width:0};return"number"==typeof e.height?t.height=e.height:t.height=e.height.baseVal.value,"number"==typeof e.width?t.width=e.width:t.width=e.width.baseVal.value,t}(e),a=r.height,o=r.width;return n.height=a,n.width=o,t.clearRect(0,0,o,a),t.drawImage(e,0,0,o,a),t.getImageData(0,0,o,a)},e.prototype.destroy=function(){this._worker&&(this._worker.terminate(),this._worker=null)},e}(),T=function(){function e(){this._timeouts=new Map,this._throttles=new Map,this._worker=new Worker(m(e.workerFn))}return e.prototype.initWorker=function(e){var t=void 0===e?{}:e,n=t.onError,r=t.onTimeout,a=t.onThrottle,l=t.onReady;return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return[2,new Promise((function(t,o){e._worker.addEventListener("message",(function(i){switch(i.data.type){case"timeout":e._callTimeout(i.data.id),null==r||r(i.data);break;case"throttle":e._callThrottle(i.data.id),null==a||a(i.data);break;case"error":null==n||n(i.data),o(i.data);break;case"ready":null==l||l(i.data),t()}})),e._worker.addEventListener("error",(function(e){null==n||n(e),o(e)})),e._worker.postMessage({type:"ready"})}))]}))}))},e.workerFn=function(){var e=new Map,t=new Map;self.onmessage=function(n){switch(n.data.type){case"timeout":!function(t,n){void 0===n&&(n=5);var r=setTimeout((function(){self.postMessage({type:"timeout",id:t}),e.delete(t)}),n);e.set(t,r)}(n.data.id,n.data.ms);break;case"throttle":!function(e,n){void 0===n&&(n=5);var r=t.get(e);r&&clearTimeout(r);var a=setTimeout((function(){self.postMessage({type:"throttle",id:e}),t.delete(e)}),n);t.set(e,a)}(n.data.id,n.data.ms);break;case"ready":self.postMessage({type:"ready"});break;default:self.postMessage({type:"error",data:n.data})}},self.postMessage({type:"ready"})},e.prototype.postTimeout=function(e,t,n){void 0===n&&(n=5),this._timeouts.set(e,t),this._worker.postMessage({type:"timeout",id:e,ms:n})},e.prototype.postThrottle=function(e,t,n){void 0===n&&(n=5),this._throttles.set(e,t),this._worker.postMessage({type:"throttle",id:e,ms:n})},e.prototype._callTimeout=function(e){var t=this._timeouts.get(e);t&&(this._timeouts.delete(e),t())},e.prototype._callThrottle=function(e){var t=this._throttles.get(e);t&&(this._throttles.delete(e),t())},e.prototype.destroy=function(){this._worker.terminate(),this._throttles.clear(),this._timeouts.clear()},e}();!function(e){e.NONE="none",e.BLUR="blur",e.BACKGROUND="background"}(A||(A={}));var I=function(){function e(e){var t=void 0===e?{}:e,n=t.segmentation,r=t.debug;this._effect=null,this._net=null,this._video=null,this._canvas=null,this._stream=null,this._track=null,this._sendNextFrame=null,this._timerWorker=null,n&&S.updateSegmentationParams(n),r&&S.setDebug(r)}return e.prototype._createDom=function(e){var t=function(e){var t=e.constraints,n=e.defaults;return t?("number"==typeof t.height?n.height=t.height:"object"==typeof t.height&&(n.height=t.height.exact||t.height.ideal||t.height.max||t.height.min||n.height),"number"==typeof t.width?n.width=t.width:"object"==typeof t.width&&(n.width=t.width.exact||t.width.ideal||t.width.max||t.width.min||n.width),n):n}({constraints:e,defaults:{height:360,width:640}}),n=t.width,r=t.height;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.style.pointerEvents="none",this._canvas.style.visibility="hidden",this._canvas.style.position="absolute",this._canvas.style.width="160px",this._canvas.style.height="90px",this._canvas.height=r,this._canvas.width=n,this._canvas.style.bottom="0",this._canvas.style.left="0",this._canvas.style.zIndex="5000",document.body.appendChild(this._canvas)),this._video||(this._video=document.createElement("video"),this._video.controls=!1,this._video.autoplay=!1,this._video.preload="auto",this._video.muted=!0,this._video.style.pointerEvents="none",this._video.style.visibility="hidden",this._video.style.position="absolute",this._video.style.width="160px",this._video.style.height="90px",this._video.height=r,this._video.width=n,this._video.style.bottom="0",this._video.style.right="0",this._video.style.zIndex="5000",document.body.appendChild(this._video))},e.prototype._removeDom=function(){try{this._canvas&&document.body.removeChild(this._canvas),this._video&&document.body.removeChild(this._video)}catch(e){}this._canvas=null,this._video=null},e.prototype._createStream=function(e){return o(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){if(!this._canvas||!this._video)throw new Error("Video element or canvas not found");return this._stream=this._canvas.captureStream(0),[2,new Promise((function(n,r){var a=t._video;a.srcObject=new MediaStream([e]),a.onloadeddata=function(){var e;a.width=a.videoWidth,a.height=a.videoHeight,t._track=null===(e=t._stream)||void 0===e?void 0:e.getVideoTracks()[0],n()},a.onerror=function(){return r(new Error("Video element error"))};var o=a.play(),i=function(){return r(new Error("Autoplay is disabled"))};o?o.catch(i):i()}))]}))}))},e.prototype._createNet=function(){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return[2,new Promise((function(t,n){var r=S.getDebug()?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e),n()}:void 0;new b({onFrame:function(t,n,r){e._drawFrame(t,n,r)},onReady:t,onError:r}).createModel(S.getDebug())}))]}))}))},e.prototype._removeStream=function(){this._stream&&(this._stream.getTracks().forEach((function(e){return e.stop()})),this._stream=null,this._track=null),this._video&&(this._video.pause(),this._video.srcObject&&this._video.srcObject.getTracks().forEach((function(e){return e.stop()})),this._video.srcObject=null)},e.prototype._drawFrame=function(e,t,n){var r,a=this;this._net&&this._video&&this._effect&&this._canvas&&this._video&&this._effect&&(this._effect.draw(t,e,n),this._track&&(this._track.requestFrame(),null===(r=this._timerWorker)||void 0===r||r.postTimeout(Date.now(),(function(){a._video&&a._sendNextFrame&&a._sendNextFrame(a._video)}))))},e.prototype._cleanup=function(){this._effect&&(this._effect.destroy(),this._effect=null),this._net&&(this._net.destroy(),this._net=null),this._removeStream(),this._removeDom(),this._timerWorker&&(this._timerWorker.destroy(),this._timerWorker=null)},e.prototype._setEffect=function(e,t){return o(this,void 0,void 0,(function(){var n,r=this;return i(this,(function(a){switch(a.label){case 0:return this._timerWorker?[3,2]:(this._timerWorker=new T,[4,this._timerWorker.initWorker()]);case 1:a.sent(),a.label=2;case 2:return this._net?[3,4]:(n=this,[4,this._createNet()]);case 3:n._net=a.sent(),a.label=4;case 4:return this._effect&&(this._effect=null),this._sendNextFrame=function(e){var t;null===(t=r._timerWorker)||void 0===t||t.postThrottle("img-segm",(function(){var t;null===(t=r._net)||void 0===t||t.requestSegmentation(e)}),1e3/60)},this._removeStream(),this._createDom(t.getConstraints()),[4,this._createStream(t)];case 5:if(a.sent(),!this._canvas||!this._video)throw new Error("Video element or canvas not found");return this._effect=e,this._effect.video=this._video,this._effect.canvas=this._canvas,this._sendNextFrame(this._video),[2]}}))}))},e.prototype.setEffect=function(e,t){var n;return o(this,void 0,void 0,(function(){var r;return i(this,(function(a){switch(a.label){case 0:if(!e)return this._cleanup(),[2,t];e.effect!==(null===(n=this._effect)||void 0===n?void 0:n.effect)&&e.destroy(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._setEffect(e,t)];case 2:return a.sent(),[2,this._track||t];case 3:throw r=a.sent(),this._cleanup(),r;case 4:return[2]}}))}))},e.prototype.stopEffect=function(){this._cleanup()},Object.defineProperty(e.prototype,"effect",{get:function(){return this._effect?this._effect.effect:A.NONE},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._cleanup(),this._net=null},e}(),k=function(e){var t=e.gl,n=e.fs,r=e.vs,a=t.createShader(t.VERTEX_SHADER);if(!a)throw new Error("vertex shader didn't initialized");t.shaderSource(a,r),t.compileShader(a);var o=t.createShader(t.FRAGMENT_SHADER);if(!o)throw new Error("fragment shader didn't initialized");t.shaderSource(o,n),t.compileShader(o);var i=t.createProgram();if(!i)throw new Error("shader program didn't initialized");if(t.attachShader(i,a),t.attachShader(i,o),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw t.getProgramInfoLog(i);return t.deleteShader(a),t.deleteShader(o),{program:i}},N=function(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),t},P=function(e,t,n){var r=N(e);if(!r)throw new Error("texture was not created");e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null);var a=e.createFramebuffer();if(!a)throw new Error("framebuffer was not created");return e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),{framebuffer:a,texture:r}},D=function(e,t){return{aTextureCoord:e.getAttribLocation(t,"aTextureCoord"),aVertexCoord:e.getAttribLocation(t,"aVertexCoord")}},M="attribute vec3 aVertexCoord;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = vec4(aVertexCoord, 1.0);\n  vTextureCoord = aTextureCoord;\n}",L=function(){function e(e){var t=this;this.gl=e,this.program=k({fs:"precision highp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uAlphaTexture;\nuniform float uLowerBound;\nuniform float uUpperBound;\n\nvoid main(void) {\n  vec4 color = texture2D(uAlphaTexture, vTextureCoord);\n  if (color.a < uLowerBound) {\n    color.a = 0.0;\n  } else {\n    if (color.a < uUpperBound) {\n      color.a = (color.a - uLowerBound) / (uUpperBound - uLowerBound);\n    } else {\n      color.a = 1.0;\n    }\n  }\n  gl_FragColor = color;\n}",gl:e,vs:M}).program,this.uniforms={uAlphaTexture:function(e){var n=t.gl.getUniformLocation(t.program,"uAlphaTexture");t.gl.uniform1i(n,e)},uLowerBound:function(e){var n=t.gl.getUniformLocation(t.program,"uLowerBound");t.gl.uniform1f(n,e)},uUpperBound:function(e){var n=t.gl.getUniformLocation(t.program,"uUpperBound");t.gl.uniform1f(n,e)}},this.attributes=D(this.gl,this.program)}return e.prototype.bind=function(){this.gl.useProgram(this.program)},e.prototype.destroy=function(){this.gl.deleteProgram(this.program)},e}(),O=function(){function e(e){var t=this;this.gl=e,this.program=k({fs:"precision highp float;\n\nuniform sampler2D uCameraFrameTexture;\nuniform sampler2D uBackgroundTexture;\nuniform sampler2D uAlphaTexture;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  vec4 cameraFrameColor = texture2D(uCameraFrameTexture, vTextureCoord);\n  vec4 backgroundColor = texture2D(uBackgroundTexture, vTextureCoord);\n  vec4 alphaMask = texture2D(uAlphaTexture, vTextureCoord);\n  gl_FragColor = mix(backgroundColor, cameraFrameColor, alphaMask.a);\n}",gl:e,vs:M}).program,this.uniforms={uAlphaTexture:function(e){var n=t.gl.getUniformLocation(t.program,"uAlphaTexture");t.gl.uniform1i(n,e)},uCameraFrameTexture:function(e){var n=t.gl.getUniformLocation(t.program,"uCameraFrameTexture");t.gl.uniform1i(n,e)},uBackgroundTexture:function(e){var n=t.gl.getUniformLocation(t.program,"uBackgroundTexture");t.gl.uniform1i(n,e)}},this.attributes=D(this.gl,this.program)}return e.prototype.bind=function(){this.gl.useProgram(this.program)},e.prototype.destroy=function(){this.gl.deleteProgram(this.program)},e}(),R=function(){function e(e){var t=this;this.gl=e,this.program=k({fs:"// https://github.com/Jam3/glsl-fast-gaussian-blur\n\nprecision highp float;\n\nuniform sampler2D texture;\nuniform vec3 iResolution;\nuniform bool flip;\nuniform vec2 direction;\n\nvec4 blur5(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3333333333333333) * direction;\n  color += texture2D(image, uv) * 0.29411764705882354;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.35294117647058826;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.35294117647058826;\n  return color;\n}\n\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.411764705882353) * direction;\n  vec2 off2 = vec2(3.2941176470588234) * direction;\n  vec2 off3 = vec2(5.176470588235294) * direction;\n  color += texture2D(image, uv) * 0.1964825501511404;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\n  color += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\n  color += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\n  return color;\n}\n\nvoid main() {\n  vec2 uv = vec2(gl_FragCoord.xy / iResolution.xy);\n  if (flip) {\n    uv.y = 1.0 - uv.y;\n  }\n\n  gl_FragColor = blur13(texture, uv, iResolution.xy, direction);\n}",gl:e,vs:"attribute vec3 position;\n\nvoid main() { gl_Position = vec4(position, 1.0); }"}).program,this.uniforms={texture:function(e){var n=t.gl.getUniformLocation(t.program,"texture");t.gl.uniform1i(n,e)},iResolution:function(e,n,r){var a=t.gl.getUniformLocation(t.program,"iResolution");t.gl.uniform3f(a,e,n,r)},flip:function(e){var n=t.gl.getUniformLocation(t.program,"flip");t.gl.uniform1f(n,e)},direction:function(e,n){var r=t.gl.getUniformLocation(t.program,"direction");t.gl.uniform2f(r,e,n)}},this.attributes={position:this.gl.getAttribLocation(this.program,"position")}}return e.prototype.bind=function(){this.gl.useProgram(this.program)},e.prototype.destroy=function(){this.gl.deleteProgram(this.program)},e}(),x=function(){function e(e){var t=this;this.gl=e,this.program=k({fs:"precision highp float;\n\nuniform sampler2D uTextureOriginal;\nuniform sampler2D uTextureMask;\nuniform vec3 iResolution;\nuniform bool flip;\nuniform vec2 direction;\n\nvec4 blur13(sampler2D image, sampler2D maskTexture, vec2 uv, vec2 resolution,\n            vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.411764705882353) * direction;\n  vec2 off2 = vec2(3.2941176470588234) * direction;\n  vec2 off3 = vec2(5.176470588235294) * direction;\n  float sumCof = 0.0;\n\n  vec4 c = texture2D(image, uv);\n  vec4 m = texture2D(maskTexture, uv);\n  color += c * 0.1964825501511404 * (1.0 - m.a);\n  sumCof += 0.1964825501511404 * (1.0 - m.a);\n\n  c = texture2D(image, uv + (off1 / resolution));\n  m = texture2D(maskTexture, uv + (off1 / resolution));\n  color += c * 0.2969069646728344 * (1.0 - m.a);\n  sumCof += 0.2969069646728344 * (1.0 - m.a);\n\n  c = texture2D(image, uv - (off1 / resolution));\n  m = texture2D(maskTexture, uv - (off1 / resolution));\n  color += c * 0.2969069646728344 * (1.0 - m.a);\n  sumCof += 0.2969069646728344 * (1.0 - m.a);\n\n  c = texture2D(image, uv + (off2 / resolution));\n  m = texture2D(maskTexture, uv + (off2 / resolution));\n  color += c * 0.09447039785044732 * (1.0 - m.a);\n  sumCof += 0.09447039785044732 * (1.0 - m.a);\n\n  c = texture2D(image, uv - (off2 / resolution));\n  m = texture2D(maskTexture, uv - (off2 / resolution));\n  color += c * 0.09447039785044732 * (1.0 - m.a);\n  sumCof += 0.09447039785044732 * (1.0 - m.a);\n\n  c = texture2D(image, uv + (off3 / resolution));\n  m = texture2D(maskTexture, uv + (off3 / resolution));\n  color += c * 0.010381362401148057 * (1.0 - m.a);\n  sumCof += 0.010381362401148057 * (1.0 - m.a);\n\n  c = texture2D(image, uv - (off3 / resolution));\n  m = texture2D(maskTexture, uv - (off3 / resolution));\n  color += c * 0.010381362401148057 * (1.0 - m.a);\n  sumCof += 0.010381362401148057 * (1.0 - m.a);\n\n  return sumCof > 0.0 ? color / sumCof : vec4(0.0, 0.0, 0.0, 0.0);\n}\n\nvoid main() {\n  vec2 uv = vec2(gl_FragCoord.xy / iResolution.xy);\n\n  if (flip) {\n    uv.y = 1.0 - uv.y;\n  }\n\n  gl_FragColor =\n      blur13(uTextureOriginal, uTextureMask, uv, iResolution.xy, direction);\n}",gl:e,vs:"attribute vec3 position;\n\nvoid main() { gl_Position = vec4(position, 1.0); }"}).program,this.uniforms={uTextureOriginal:function(e){var n=t.gl.getUniformLocation(t.program,"uTextureOriginal");t.gl.uniform1i(n,e)},uTextureMask:function(e){var n=t.gl.getUniformLocation(t.program,"uTextureMask");t.gl.uniform1i(n,e)},iResolution:function(e,n,r){var a=t.gl.getUniformLocation(t.program,"iResolution");t.gl.uniform3f(a,e,n,r)},flip:function(e){var n=t.gl.getUniformLocation(t.program,"flip");t.gl.uniform1f(n,e)},direction:function(e,n){var r=t.gl.getUniformLocation(t.program,"direction");t.gl.uniform2f(r,e,n)}},this.attributes={position:this.gl.getAttribLocation(this.program,"position")}}return e.prototype.bind=function(){this.gl.useProgram(this.program)},e.prototype.destroy=function(){this.gl.deleteProgram(this.program)},e}(),B=function(){function e(e){this.parameters={blurStrength:.8,fixSegmentation:!0,fixSegmentationBlurStrength:.25,fixSegmentationIterations:8,alphaCutterLowerBound:.4,alphaCutterUpperBound:.6},this.$canvas=e;var t=this.$canvas.getContext("webgl");if(!t)throw new Error("getting ctx failed");this.gl=t;var n=this.gl;this.onresize=this.onresize.bind(this),this.onresize(),window.addEventListener("resize",this.onresize),this.pBlurFastWithMask=new x(this.gl),this.pBackgroundComposer=new O(this.gl),this.pBlurFast=new R(this.gl),this.pAlphaCutter=new L(this.gl),this.vertices=[1,1,0,1,1,1,-1,0,1,0,-1,-1,0,0,0,-1,1,0,0,1],this.indices=[0,1,3,1,2,3];var r=n.createBuffer(),a=n.createBuffer();if(!r||!a)throw new Error("create buffer error");this.positionBuffer=r,this.indexBuffer=a,n.bindBuffer(n.ARRAY_BUFFER,this.positionBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(this.vertices),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indices),n.STATIC_DRAW)}return e.prototype.onresize=function(){var e=this.$canvas,t=this.gl;e.width=e.width||e.clientWidth,e.height=e.height||e.clientHeight,t.viewport(0,0,e.width,e.height)},e.prototype.loadTexture=function(e){var t=this.gl,n=N(t);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.bindTexture(t.TEXTURE_2D,null),n},e.prototype.close=function(){var e=this,t=e.gl,n=e.positionBuffer,r=e.indexBuffer,a=e.pBackgroundComposer,o=e.pBlurFast,i=e.pBlurFastWithMask,l=e.pAlphaCutter;t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(n),t.deleteBuffer(r),t.useProgram(null),a.destroy(),o.destroy(),i.destroy(),l.destroy()},e.prototype.drawGeometry=function(){var e=this,t=e.gl,n=e.indexBuffer,r=e.indices;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.drawElements(t.TRIANGLES,r.length,t.UNSIGNED_SHORT,0)},e.prototype.createTextureLayers=function(){var e=this.gl,t=this.$canvas,n=t.width,r=t.height;return[P(e,n,r),P(e,n,r)]},e.prototype.setGeometry=function(e,t){var n=this.gl,r=this.positionBuffer;n.bindBuffer(n.ARRAY_BUFFER,r),n.enableVertexAttribArray(e),n.vertexAttribPointer(e,3,n.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),void 0!==t&&(n.enableVertexAttribArray(t),n.vertexAttribPointer(t,2,n.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT))},e.prototype.setParameters=function(e){Object.assign(this.parameters,e)},e.prototype.draw=function(e){var t,n,r=e.image,a=e.segmentationMask,o=e.background,i=e.resizedImage,l=this,s=l.gl,c=l.$canvas,u=l.parameters,d=l.pBlurFastWithMask,p=l.pBackgroundComposer,f=l.pBlurFast,m=l.pAlphaCutter,_=u.fixSegmentation,g=u.fixSegmentationBlurStrength,h=u.blurStrength,v=u.fixSegmentationIterations,A=u.alphaCutterLowerBound,E=u.alphaCutterUpperBound,C=c.width,y=c.height;s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),s.viewport(0,0,C,y),s.disable(s.BLEND),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!0);var S=this.loadTexture(r),w=this.loadTexture(a),b=o&&this.loadTexture(o),T=null,I=this.createTextureLayers(),k=this.createTextureLayers();if(_){f.bind(),this.setGeometry(f.attributes.position),f.uniforms.iResolution(C,y,0),f.uniforms.flip(0),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,w),f.uniforms.texture(0);for(var N=0,P=0;P<v;++P){var D=(v-P-1)*g,M=P%2==0?[D,0]:[0,D];(t=f.uniforms).direction.apply(t,M),s.bindFramebuffer(s.FRAMEBUFFER,k[N%2].framebuffer),this.drawGeometry(),s.bindTexture(s.TEXTURE_2D,k[N%2].texture),++N}m.bind(),this.setGeometry(m.attributes.aVertexCoord,m.attributes.aTextureCoord),m.uniforms.uLowerBound(A),m.uniforms.uUpperBound(E),m.uniforms.uAlphaTexture(0),s.bindFramebuffer(s.FRAMEBUFFER,k[N%2].framebuffer),this.drawGeometry(),T=k[N%2].texture}if(!b){var L=this.loadTexture(i);d.bind(),this.setGeometry(d.attributes.position),d.uniforms.iResolution(C,y,0),d.uniforms.flip(0),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,T||w),d.uniforms.uTextureMask(0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,L),d.uniforms.uTextureOriginal(1);var O=0;for(P=0;P<8;++P)D=(8-P-1)*h,M=P%2==0?[D,0]:[0,D],(n=d.uniforms).direction.apply(n,M),s.bindFramebuffer(s.FRAMEBUFFER,I[O%2].framebuffer),this.drawGeometry(),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,I[O%2].texture),++O;b=I[(O-1)%2].texture,s.deleteTexture(L)}p.bind(),this.setGeometry(p.attributes.aVertexCoord,p.attributes.aTextureCoord),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,T||w),p.uniforms.uAlphaTexture(0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,b),p.uniforms.uBackgroundTexture(1),s.activeTexture(s.TEXTURE2),s.bindTexture(s.TEXTURE_2D,S),p.uniforms.uCameraFrameTexture(2),s.bindFramebuffer(s.FRAMEBUFFER,null),this.drawGeometry(),s.deleteTexture(S),s.deleteTexture(b),s.deleteTexture(w),s.deleteTexture(T),I.forEach((function(e){s.deleteFramebuffer(e.framebuffer),s.deleteTexture(e.texture)})),k.forEach((function(e){s.deleteFramebuffer(e.framebuffer),s.deleteTexture(e.texture)}))},e}(),H=function(){function e(e){this._effect=e}return Object.defineProperty(e.prototype,"video",{set:function(e){this._video=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{set:function(e){this._canvas=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"effect",{get:function(){return this._effect},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){},e}(),U=function(e){function t(){var t=e.call(this,A.BACKGROUND)||this;return t._imageEdit=new l,t._WebGlBlend=null,t._isChangedBackground=!1,t}return a(t,e),t.prototype.setBackgroundImage=function(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=this,e?[4,C(e)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=void 0,r.label=3;case 3:return t._backgroundImage=n,this._isChangedBackground=!0,[2]}}))}))},t.prototype._updateBackground=function(){return o(this,void 0,void 0,(function(){var e,t,n,r;return i(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),this._backgroundImage?(t=(e=this)._canvas,[4,e._imageEdit.resize(this._backgroundImage,t.width,t.height)]):[3,2];case 1:n=a.sent(),this._backgroundImage=n,a.label=2;case 2:return this._isChangedBackground=!1,[3,4];case 3:return r=a.sent(),console.warn(r),[3,4];case 4:return[2]}}))}))},t.prototype.draw=function(e,t,n){try{this._WebGlBlend||(this._WebGlBlend=new B(this._canvas)),this._isChangedBackground&&this._updateBackground(),this._WebGlBlend&&this._WebGlBlend.draw({image:e,segmentationMask:t,background:this._backgroundImage,resizedImage:n})}catch(e){console.warn(e)}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._WebGlBlend&&(this._WebGlBlend.close(),this._WebGlBlend=null)},t}(H),F=function(e){function t(){var t=e.call(this,A.BLUR)||this;return t._WebGLEffects=null,t._savedOptions=null,t}return a(t,e),t.prototype.draw=function(e,t,n){try{this._WebGLEffects||(this._WebGLEffects=new B(this._canvas),console.log(this._canvas),this._savedOptions&&this._WebGLEffects.setParameters(this._savedOptions)),this._WebGLEffects.draw({image:e,segmentationMask:t,resizedImage:n})}catch(e){console.warn(e)}},t.prototype.setEffects=function(e){this._savedOptions=e,this._WebGLEffects&&this._WebGLEffects.setParameters(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._WebGLEffects&&(this._WebGLEffects.close(),this._WebGLEffects=null)},t}(H)},890638:(e,t,n)=>{"use strict";t.default=void 0;var r=s(n(667294)),a=s(n(887854)),o=n(408091),i=n(279353),l=n(269659);function s(e){return e&&e.__esModule?e:{default:e}}var c="0 0 24 24",u="more_horizontal_24",d=!1;function p(){d||((0,i.addSpriteSymbol)(new a.default({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="more_horizontal_24"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" fill="currentColor" /></g></symbol>'})),d=!0)}var f=function(e){return(0,i.useIsomorphicLayoutEffect)((function(){p()}),[]),r.default.createElement(l.SvgIcon,(0,o.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};f.mountIcon=p;var m=f;t.default=m},725074:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.IconSettingsProvider=t.IconSettingsContext=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(667294));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=(0,a.createContext)({});t.IconSettingsContext=l;t.IconSettingsProvider=function(e){var t=e.children,n=i(e,["children"]),r=(0,a.useMemo)((function(){return n}),[n.classPrefix,n.globalClasses]);return a.default.createElement(l.Provider,{value:r},t)}},269659:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SvgIcon=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(667294)),o=n(725074);function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p={display:"block"};var f=function(e){var t=e.width,n=e.height,r=e.viewBox,i=e.id,s=e.className,u=e.style,f=e.fill,m=e.getRootRef,_=e.Component,g=d(e,["width","height","viewBox","id","className","style","fill","getRootRef","Component"]),h=Math.max(t,n),v=(0,a.useContext)(o.IconSettingsContext),A=function(e,t){for(var n=t.classPrefix,r=t.globalClasses,a="",o=0;o<e.length;o++)n&&(a+=" "+(n+e[o])),n&&!r||(a+=" "+e[o]);return a}(["Icon","Icon--".concat(h),"Icon--w-".concat(t),"Icon--h-".concat(n),"Icon--".concat(i)],v);return a.default.createElement(_,l({role:"presentation"},g,{ref:m,className:"".concat(A," ").concat(s),style:c(c({},u),{},{width:t,height:n})}),a.default.createElement("svg",{viewBox:r,width:t,height:n,style:p},a.default.createElement("use",{xlinkHref:"#".concat(i),style:{fill:"currentColor",color:f}})))};t.SvgIcon=f,f.defaultProps={Component:"div",className:"",style:{}}},263986:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 12 12",u="arrow_down_left_12",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="arrow_down_left_12"><path d="M3 10a1 1 0 01-1-1V4a1 1 0 012 0v2.586l4.293-4.293a1 1 0 011.414 1.414L5.415 8.001 8 8a1 1 0 010 2z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?12:+e.width,height:isNaN(e.height)?12:+e.height}))};f.mountIcon=p;const m=f},800055:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 12 12",u="arrow_up_right_12",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="arrow_up_right_12"><path d="M9 2a1 1 0 011 1v5a1 1 0 01-2 0V5.414L3.707 9.707a1 1 0 01-1.414-1.414l4.292-4.294L4 4a1 1 0 010-2z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?12:+e.width,height:isNaN(e.height)?12:+e.height}))};f.mountIcon=p;const m=f},711798:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 12 12",u="cancel_12",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="cancel_12"><path d="M3.525 2.464a.75.75 0 00-1.06 1.061L4.938 6 2.464 8.475a.75.75 0 101.061 1.06L6 7.062l2.475 2.475a.75.75 0 001.06-1.061L7.062 6l2.475-2.475a.75.75 0 10-1.061-1.06L6 4.938z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?12:+e.width,height:isNaN(e.height)?12:+e.height}))};f.mountIcon=p;const m=f},700881:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 12 12",u="cancel_outline_12",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="cancel_outline_12"><path clip-rule="evenodd" d="M9.03 2.97a.75.75 0 010 1.06L7.06 6l1.97 1.97a.75.75 0 01-1.06 1.06L6 7.06 4.03 9.03a.75.75 0 01-1.06-1.06L4.94 6 2.97 4.03a.75.75 0 011.06-1.06L6 4.94l1.97-1.97a.75.75 0 011.06 0z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?12:+e.width,height:isNaN(e.height)?12:+e.height}))};f.mountIcon=p;const m=f},297627:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 16 16",u="connection_16",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="connection_16"><g fill="currentColor"><path d="M12 3a1 1 0 00-1 1v8a1 1 0 102 0V4a1 1 0 00-1-1zM7 6a1 1 0 012 0v6a1 1 0 11-2 0zM3 8a1 1 0 012 0v4a1 1 0 11-2 0z" /></g></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};f.mountIcon=p;const m=f},722254:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 16 16",u="microphone_slash_16",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="microphone_slash_16"><path d="M5.498 7.06v.44a2.501 2.501 0 002.909 2.467l1.2 1.198a4.005 4.005 0 01-5.521-2.822.75.75 0 00-1.47.314A5.508 5.508 0 007.25 12.95v1.301a.75.75 0 001.502 0v-1.3a5.473 5.473 0 001.972-.669l1.25 1.25a.751.751 0 001.062-1.061L3.88 3.32a.75.75 0 10-1.06 1.06l2.678 2.68zm6.356 1.529c-.089.314-.03.66.2.89.37.37.993.284 1.16-.211a5.44 5.44 0 00.17-.61.75.75 0 10-1.469-.315 3.943 3.943 0 01-.061.246zM6.303 2.662c-.332.307-.254.818.066 1.138l3.428 3.424a.4.4 0 00.683-.279l.022-2.445a2.501 2.501 0 00-4.199-1.838z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};f.mountIcon=p;const m=f},607350:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 16 16",u="pin_16",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="pin_16"><path d="M10.235 2.106l3.657 3.663c.225.226.064.633-.263.633h-.523a.895.895 0 00-.633.263L10.758 8.38a.896.896 0 00-.262.633v2.996c0 .554-.7.858-1.1.456l-2.301-2.3-3.57 3.57a.893.893 0 11-1.264-1.263L5.83 8.898l-2.29-2.29c-.391-.392-.109-1.102.456-1.102H6.99a.895.895 0 00.633-.262L9.338 3.53a.896.896 0 00.263-.634V2.37c0-.32.403-.495.634-.263z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};f.mountIcon=p;const m=f},86339:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 16 16",u="pin_dot_16",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="pin_dot_16"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 4a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zm7.642 1.77l-3.657-3.664c-.231-.232-.634-.057-.634.263v.526a.896.896 0 01-.263.634L7.623 5.244a.895.895 0 01-.633.262H3.995c-.565 0-.847.71-.455 1.102l2.29 2.29-3.569 3.574a.894.894 0 001.263 1.264l3.57-3.572 2.301 2.301c.402.402 1.101.098 1.101-.456V9.013a.9.9 0 01.262-.633l1.715-1.715a.895.895 0 01.633-.263h.523c.327 0 .488-.407.263-.633z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};f.mountIcon=p;const m=f},239446:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 20 20",u="delete_outline_20",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="delete_outline_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.697 6.502a.75.75 0 00-.695.801l.5 7a.75.75 0 001.496-.106l-.5-7a.75.75 0 00-.801-.695zm4.606 0a.75.75 0 01.695.801l-.5 7a.75.75 0 01-1.496-.106l.5-7a.75.75 0 01.801-.695z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 3a.75.75 0 000 1.5h1.066l.958 10.44c.045.489.083.898.14 1.233.06.35.15.675.331.98.279.47.691.846 1.185 1.08.32.153.652.213 1.006.24.338.027.75.027 1.24.027h3.647c.491 0 .903 0 1.24-.026.355-.028.687-.088 1.007-.24a2.75 2.75 0 001.185-1.081c.18-.305.27-.63.33-.98.058-.335.096-.744.14-1.233l.96-10.44h1.065a.75.75 0 000-1.5h-4.587a3.251 3.251 0 00-6.326 0H2.25zm3.516 11.774c.048.525.08.876.127 1.145.044.26.093.385.142.469.127.213.314.384.539.49.087.043.216.08.48.1.272.021.624.022 1.151.022h3.59c.527 0 .879 0 1.152-.022.263-.02.392-.057.48-.1a1.25 1.25 0 00.538-.49c.05-.084.098-.209.142-.469.046-.27.08-.62.127-1.145L15.178 4.5H4.822l.944 10.274zM10 2c-.698 0-1.3.409-1.582 1h3.164A1.75 1.75 0 0010 2z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};f.mountIcon=p;const m=f},967458:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 20 20",u="message_outline_20",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="message_outline_20"><g fill="none" fill-rule="evenodd"><path opacity=".4" d="M0 0h20v20H0z" /><path d="M6.828 15.752a.75.75 0 01.821-.207A7.52 7.52 0 0010.25 16c3.772 0 6.75-2.694 6.75-6s-2.978-6-6.75-6S3.5 6.694 3.5 10c0 1.21.4 2.367 1.14 3.349a.75.75 0 01.15.49c-.04.756-.403 1.785-1.085 3.135 1.483-.116 2.514-.534 3.123-1.222zM3.242 18.5a1.204 1.204 0 01-1.101-1.767c.644-1.216 1.016-2.14 1.121-2.73A7.009 7.009 0 012 10c0-4.17 3.681-7.5 8.25-7.5S18.5 5.83 18.5 10s-3.681 7.5-8.25 7.5a9.077 9.077 0 01-2.66-.393c-.996.881-2.456 1.336-4.348 1.393z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};f.mountIcon=p;const m=f},25347:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 24 24",u="door_arrow_left_outline_24",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="door_arrow_left_outline_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.754 20.366c-.763.407-1.512.534-3.082.534H13a.9.9 0 110-1.8h2.672c1.487 0 1.87-.128 2.233-.322.336-.18.594-.437.773-.773.194-.362.322-.746.322-2.233V8.228c0-1.487-.128-1.87-.322-2.233a1.847 1.847 0 00-.773-.774c-.362-.193-.746-.321-2.233-.321H13a.9.9 0 110-1.8h2.672c1.57 0 2.32.127 3.082.534.65.348 1.164.863 1.512 1.512.407.762.534 1.512.534 3.082v7.544c0 1.57-.127 2.32-.534 3.082a3.646 3.646 0 01-1.512 1.512zm-9.39-5.002l2.463-2.464H3.9a.9.9 0 110-1.8h7.927L9.364 8.636a.9.9 0 111.272-1.272l4 4a.9.9 0 010 1.272l-4 4a.9.9 0 11-1.272-1.272z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};f.mountIcon=p;const m=f},573669:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 24 24",u="live_24",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="live_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M12 22.5C6.201 22.5 1.5 17.799 1.5 12S6.201 1.5 12 1.5 22.5 6.201 22.5 12 17.799 22.5 12 22.5zm0-2a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0-2a6.5 6.5 0 110-13 6.5 6.5 0 010 13zm0-2a4.5 4.5 0 100-9 4.5 4.5 0 000 9zm0-2a2.5 2.5 0 110-5 2.5 2.5 0 010 5z" fill="currentColor" /></g></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};f.mountIcon=p;const m=f},735144:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 24 24",u="phone_outline_24",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="phone_outline_24"><g fill="none"><path d="M0 0h24v24H0z" /><path d="M4.477 4.116c-2.924 3.217-1.362 8.196 2.932 12.51 4.204 4.222 9.407 5.8 12.486 2.936 1.685-1.567 1.436-4.343-.645-6.198l-.19-.161c-1.931-1.563-4.734-1.568-6.445-.027l-.088.082-.05-.042c-.187-.16-.43-.381-.724-.673l-.298-.303-.306-.326c-.092-.101-.174-.194-.246-.277l-.124-.147-.07.075c1.69-1.697 1.706-4.72.006-6.75-1.887-2.255-4.75-2.335-6.238-.699zM9.335 5.97c1.18 1.41 1.049 3.371.099 4.325l-.148.14c-.63.567-1.246.901 1.032 3.218 2.458 2.499 2.765 1.622 3.405.952 1.006-1.01 2.975-1.104 4.329.103 1.497 1.334 1.335 2.868.617 3.536-2.222 2.067-6.476.636-9.984-2.888-3.507-3.523-5.064-7.622-2.876-10.03.508-.558 2.101-1.057 3.526.644z" fill="currentColor" /></g></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};f.mountIcon=p;const m=f},250516:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 24 24",u="videocam_outline_24",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="videocam_outline_24"><path d="M11.872 4.5c1.783 0 2.43.186 3.082.534.651.349 1.163.86 1.512 1.512.21.393.36.783.447 1.42l2.478-1.444A2.4 2.4 0 0123 8.595v6.81a2.4 2.4 0 01-3.61 2.073l-2.477-1.444c-.087.637-.238 1.027-.447 1.42a3.635 3.635 0 01-1.512 1.512c-.652.348-1.299.534-3.082.534H6.128c-1.783 0-2.43-.186-3.082-.534a3.635 3.635 0 01-1.512-1.512C1.186 16.802 1 16.155 1 14.372V9.628c0-1.783.186-2.43.534-3.082a3.635 3.635 0 011.512-1.512c.652-.348 1.299-.534 3.082-.534h5.744zm0 1.8H6.128c-1.354 0-1.788.084-2.233.322-.338.18-.593.435-.773.773-.238.445-.322.879-.322 2.233v4.744c0 1.354.084 1.788.322 2.233.18.338.435.593.773.773.445.238.879.322 2.233.322h5.744c1.354 0 1.788-.084 2.233-.322.338-.18.593-.435.774-.773.237-.445.321-.879.321-2.233V9.628c0-1.354-.084-1.788-.321-2.233a1.835 1.835 0 00-.774-.773c-.445-.238-.879-.322-2.233-.322zm8.426 1.776L17 10v4l3.298 1.924a.6.6 0 00.902-.519v-6.81a.6.6 0 00-.902-.519z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};f.mountIcon=p;const m=f},529071:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 28 28",u="arrow_up_rectangle_outline_28",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="arrow_up_rectangle_outline_28"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.07 4.801C6.164 4.216 7.243 4 9.691 4h8.616c2.448 0 3.527.216 4.622.801A5.465 5.465 0 0125.2 7.07c.585 1.096.801 2.175.801 4.623v4.616c0 2.448-.216 3.527-.801 4.622A5.465 5.465 0 0122.93 23.2c-1.095.585-2.174.801-4.622.801H9.692c-2.448 0-3.527-.216-4.623-.801a5.465 5.465 0 01-2.268-2.269C2.216 19.835 2 18.756 2 16.308v-4.616c0-2.448.216-3.527.801-4.623A5.466 5.466 0 015.07 4.801zM9.691 6c-2.335 0-3.019.212-3.68.565a3.466 3.466 0 00-1.447 1.448C4.212 8.673 4 9.357 4 11.692v4.616c0 2.335.212 3.019.565 3.68a3.466 3.466 0 001.448 1.447c.66.353 1.344.565 3.679.565h8.616c2.335 0 3.019-.212 3.68-.565a3.467 3.467 0 001.447-1.448c.353-.66.565-1.344.565-3.679v-4.616c0-2.335-.212-3.019-.565-3.68a3.466 3.466 0 00-1.448-1.447C21.327 6.212 20.643 6 18.308 6H9.692z" fill="currentColor" /><path d="M13 18a1 1 0 102 0v-5.586l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 101.414 1.414L13 12.414V18z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};f.mountIcon=p;const m=f},382459:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 28 28",u="chain_outline_28",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chain_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M12.59 16.83c-.39.39-1.03.39-1.42 0a5.003 5.003 0 010-7.07l5.24-5.24a5.003 5.003 0 017.07 0 5.003 5.003 0 010 7.07l-1.436 1.436a.999.999 0 01-1.414-1.41l1.43-1.436a2.982 2.982 0 000-4.24 2.982 2.982 0 00-4.24 0l-5.23 5.23a2.982 2.982 0 000 4.24c.41.39.41 1.03 0 1.42zm2.82-5.66c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 010 7.07l-5.24 5.24a5.003 5.003 0 01-7.07 0 5.003 5.003 0 010-7.07l1.431-1.431a1 1 0 011.414 0h.001c.39.392.39 1.025 0 1.415L5.94 17.82a2.982 2.982 0 000 4.24 2.982 2.982 0 004.24 0l5.23-5.23a2.982 2.982 0 000-4.24.973.973 0 010-1.42z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};f.mountIcon=p;const m=f},383925:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 28 28",u="chevron_right_outline_28",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chevron_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M11 7.5l6.5 6.5-6.5 6.5" stroke="#8BC1FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" /><path d="M16.086 14l-5.793 5.793a1 1 0 001.414 1.414l6.5-6.5a1 1 0 000-1.414l-6.5-6.5a1 1 0 00-1.414 1.414L16.086 14z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};f.mountIcon=p;const m=f},835849:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 28 28",u="download_outline_28",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="download_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M21 22a1 1 0 110 2H7a1 1 0 010-2h14zM14 2a1 1 0 011 1v13.585l5.293-5.292a1 1 0 011.414 1.414l-7 7a1 1 0 01-1.414 0l-7-7a1 1 0 011.414-1.414L13 16.585V3a1 1 0 011-1z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};f.mountIcon=p;const m=f},196287:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 28 28",u="laptop_outline_28",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="laptop_outline_28"><path clip-rule="evenodd" d="M8 5h-.151c-.781 0-1.4-.001-1.93.171A3.5 3.5 0 003.67 7.418C3.5 7.95 3.5 8.568 3.5 9.348V19H2.162a1.162 1.162 0 00-.367 2.265l1.466.489c.276.092.415.138.556.17.125.029.253.05.38.062.145.014.29.014.582.014H23.22c.291 0 .437 0 .581-.014.128-.012.256-.033.381-.062.141-.032.28-.078.556-.17l1.466-.49A1.162 1.162 0 0025.838 19H24.5V9.349c0-.781.001-1.4-.171-1.93a3.5 3.5 0 00-2.247-2.248C21.55 5 20.932 5 20.152 5H20zM6.536 7.073C6.724 7.013 6.992 7 8 7h12c1.008 0 1.276.012 1.464.073a1.5 1.5 0 01.963.963c.06.188.073.456.073 1.464V19h-17V9.5c0-1.008.012-1.276.073-1.464a1.5 1.5 0 01.963-.963z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};f.mountIcon=p;const m=f},539052:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 28 28",u="phone_outline_28",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="phone_outline_28"><g fill-rule="nonzero" fill="none"><path d="M0 0h28v28H0z" /><path d="M16.112 17.259l-.734.734a.712.712 0 01-.75.166c-.73-.269-1.643-.95-2.74-2.047-1.095-1.096-1.778-2.01-2.045-2.74a.712.712 0 01.164-.75l.736-.734c1.354-1.354 1.478-3.487.284-4.903l-.862-1.024c-.984-1.17-2.756-1.288-3.96-.264a3.319 3.319 0 00-.974 1.443 3.25 3.25 0 00-.159.752c-.44 3.272 1.137 6.707 4.733 10.303 3.596 3.596 7.03 5.174 10.303 4.733a3.318 3.318 0 002.195-1.134c1.024-1.202.905-2.976-.263-3.96l-1.025-.862c-1.417-1.192-3.55-1.067-4.903.287zm-2.81-2.561c.525.523.982.92 1.35 1.191 2.124-2.123 5.428-2.317 7.652-.447l1.023.862c2.03 1.708 2.233 4.751.49 6.798-.896 1.036-2.156 1.687-3.442 1.808-3.982.536-7.987-1.303-11.984-5.3-3.997-3.998-5.837-8.004-5.31-11.896.036-.414.122-.822.257-1.22A5.33 5.33 0 014.91 4.174c2.037-1.732 5.079-1.53 6.785.5l.86 1.023c1.873 2.22 1.681 5.527-.4 7.608.227.413.624.87 1.148 1.394z" fill="currentColor" /></g></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};f.mountIcon=p;const m=f},590439:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 28 28",u="user_outline_28",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="user_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M17.5 8.5C17.5 6.566 15.934 5 14 5a3.499 3.499 0 00-3.5 3.5c0 1.934 1.566 3.5 3.5 3.5s3.5-1.566 3.5-3.5zm2 0c0 3.039-2.461 5.5-5.5 5.5a5.499 5.499 0 01-5.5-5.5C8.5 5.461 10.961 3 14 3s5.5 2.461 5.5 5.5zM7 20.643c0 .943-.08.857.456.857h13.588c.536 0 .456.086.456-.857 0-2.288-3.304-3.643-7.25-3.643S7 18.355 7 20.643zm-2 0C5 16.763 9.299 15 14.25 15s9.25 1.763 9.25 5.643c0 2.016-.781 2.857-2.456 2.857H7.456C5.78 23.5 5 22.66 5 20.643z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};f.mountIcon=p;const m=f},443774:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r=n(667294),a=n(887854),o=n.n(a),i=n(408091),l=n(634777),s=n(379333),c="0 0 29 28",u="videocam_outline_28",d=!1;function p(){d||((0,l.addSpriteSymbol)(new(o())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 28" id="videocam_outline_28"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.857 5h4.286c1.084 0 1.958 0 2.666.058.729.06 1.369.185 1.961.487a5 5 0 012.185 2.185c.231.454.36.936.433 1.464l.437-.284.903-.585c.239-.155.52-.338.773-.471.255-.134.794-.395 1.482-.348a2.7 2.7 0 011.975 1.07c.415.552.49 1.148.516 1.434.026.285.026.62.026.904v6.172c0 .284 0 .619-.026.904-.026.286-.1.882-.516 1.434a2.7 2.7 0 01-1.975 1.07c-.688.047-1.227-.214-1.482-.348a10.407 10.407 0 01-.773-.47l-.905-.588-.435-.282c-.074.528-.202 1.01-.433 1.464a5 5 0 01-2.185 2.185c-.592.302-1.232.428-1.961.487C16.1 23 15.227 23 14.143 23H9.857c-1.084 0-1.958 0-2.666-.058-.728-.06-1.369-.185-1.96-.487a5 5 0 01-2.186-2.185c-.302-.592-.428-1.232-.487-1.961C2.5 17.6 2.5 16.727 2.5 15.643v-3.286c0-1.084 0-1.958.058-2.666.06-.728.185-1.369.487-1.961A5 5 0 015.23 5.545c.592-.302 1.233-.428 1.961-.487C7.9 5 8.773 5 9.857 5zM21.5 15.643v-4.138l2.27-1.472c.563-.365.844-.548 1.077-.532a.7.7 0 01.513.277c.14.187.14.522.14 1.192v6.06c0 .67 0 1.005-.14 1.192a.7.7 0 01-.513.277c-.233.016-.514-.167-1.077-.532l-2.27-1.472v-.852zM7.354 7.05c-.605.05-.953.142-1.216.276a3 3 0 00-1.311 1.311c-.134.263-.226.611-.276 1.216-.05.617-.051 1.41-.051 2.546v3.2c0 1.137 0 1.929.051 2.546.05.605.142.953.276 1.216a3 3 0 001.311 1.311c.263.134.611.226 1.216.276.617.05 1.41.051 2.546.051h4.2c1.137 0 1.929 0 2.546-.051.605-.05.953-.142 1.216-.276a3 3 0 001.311-1.311c.134-.263.226-.611.276-1.216.05-.617.051-1.41.051-2.546v-3.2c0-1.137 0-1.929-.051-2.546-.05-.605-.142-.953-.276-1.216a3 3 0 00-1.311-1.311c-.263-.134-.611-.226-1.216-.276-.617-.049-1.41-.05-2.546-.05H9.9c-1.137 0-1.929 0-2.546.051z" fill="currentColor" /></symbol>'})),d=!0)}var f=function(e){return(0,l.useIsomorphicLayoutEffect)((function(){p()}),[]),r.createElement(s.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?29:+e.width,height:isNaN(e.height)?28:+e.height}))};f.mountIcon=p;const m=f},279353:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSpriteSymbol=function(e){i&&i.add(e)},t.useIsomorphicLayoutEffect=void 0;var r,a=(r=n(362548))&&r.__esModule?r:{default:r},o=n(667294);var i,l=!("undefined"==typeof window||!window.document||!window.document.createElement);if(l){var s="__SVG_SPRITE_NODE__";i=new a.default({attrs:{id:s}});var c=function(){var e=document.getElementById(s);e?i.attach(e):i.mount()};document.querySelector("body")?c():document.addEventListener("DOMContentLoaded",c)}else i=null;var u=l?o.useLayoutEffect:o.useEffect;t.useIsomorphicLayoutEffect=u},911099:(e,t,n)=>{"use strict";var r=n(595318);t.classNames=function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){if(t)switch((0,a.default)(t)){case"string":e.push(t);break;case"object":Object.keys(t).forEach((function(n){t[n]&&e.push(n)}));break;default:e.push("".concat(t))}})),e.join(" ")};var a=r(n(750008))},441143:e=>{"use strict";e.exports=function(e,t,n,r,a,o,i,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,i,l],u=0;(s=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},869921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,_=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,h=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,A=n?Symbol.for("react.responder"):60118,E=n?Symbol.for("react.scope"):60119;function C(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case l:case i:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case g:case _:case s:return e;default:return t}}case a:return t}}}function y(e){return C(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=p,t.Fragment=o,t.Lazy=g,t.Memo=_,t.Portal=a,t.Profiler=l,t.StrictMode=i,t.Suspense=f,t.isAsyncMode=function(e){return y(e)||C(e)===u},t.isConcurrentMode=y,t.isContextConsumer=function(e){return C(e)===c},t.isContextProvider=function(e){return C(e)===s},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return C(e)===p},t.isFragment=function(e){return C(e)===o},t.isLazy=function(e){return C(e)===g},t.isMemo=function(e){return C(e)===_},t.isPortal=function(e){return C(e)===a},t.isProfiler=function(e){return C(e)===l},t.isStrictMode=function(e){return C(e)===i},t.isSuspense=function(e){return C(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===l||e===i||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===s||e.$$typeof===c||e.$$typeof===p||e.$$typeof===v||e.$$typeof===A||e.$$typeof===E||e.$$typeof===h)},t.typeOf=C},659864:(e,t,n)=>{"use strict";e.exports=n(869921)},429697:(e,t,n)=>{"use strict";n.d(t,{default:()=>p});var r=n(654337),a=n(773949),o=n(486186),i=(n(45697),n(292859)),l=n(316787),s=n(667294),c=n(696630),u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,l.default)(e,t)}))},d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){t.removeClasses(e,"exit"),t.addClass(e,n?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=n?"appear":"enter";t.addClass(e,r,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=n?"appear":"enter";t.removeClasses(e,r),t.addClass(e,r,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),t.addClass(e,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){t.addClass(e,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){t.removeClasses(e,"exit"),t.addClass(e,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,a=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:a,activeClassName:r?a+"-active":n[e+"Active"],doneClassName:r?a+"-done":n[e+"Done"]}},t}(0,o.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"];"appear"===t&&"done"===n&&(r+=" "+this.getClassNames("enter").doneClassName),"active"===n&&e&&e.scrollTop,this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))}(e,r)},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,a=n.active,o=n.done;this.appliedClasses[t]={},r&&u(e,r),a&&u(e,a),o&&u(e,o)},n.render=function(){var e=this.props,t=(e.classNames,(0,a.default)(e,["classNames"]));return s.createElement(c.default,(0,r.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(s.Component);d.defaultProps={classNames:""},d.propTypes={};const p=d},696630:(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var r=n(773949),a=n(486186),o=(n(45697),n(667294)),i=n(973935),l=n(806035),s=n(500220),c="unmounted",u="exited",d="entering",p="entered",f="exiting",m=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(a=u,r.appearStatus=d):a=p:a=t.unmountOnExit||t.mountOnEnter?c:u,r.state={status:a},r.nextCallback=null,r}(0,a.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===c?{status:u}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==d&&n!==p&&(t=d):n!==d&&n!==p||(t=f)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.findDOMNode(this);t===d?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:c})},n.performEnter=function(e,t){var n=this,r=this.props.enter,a=this.context?this.context.isMounting:t,o=this.getTimeouts(),i=a?o.appear:o.enter;!t&&!r||l.default.disabled?this.safeSetState({status:p},(function(){n.props.onEntered(e)})):(this.props.onEnter(e,a),this.safeSetState({status:d},(function(){n.props.onEntering(e,a),n.onTransitionEnd(e,i,(function(){n.safeSetState({status:p},(function(){n.props.onEntered(e,a)}))}))})))},n.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n&&!l.default.disabled?(this.props.onExit(e),this.safeSetState({status:f},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:u},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:u},(function(){t.props.onExited(e)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===c)return null;var t=this.props,n=t.children,a=(0,r.default)(t,["children"]);if(delete a.in,delete a.mountOnEnter,delete a.unmountOnExit,delete a.appear,delete a.enter,delete a.exit,delete a.timeout,delete a.addEndListener,delete a.onEnter,delete a.onEntering,delete a.onEntered,delete a.onExit,delete a.onExiting,delete a.onExited,"function"==typeof n)return o.createElement(s.default.Provider,{value:null},n(e,a));var i=o.Children.only(n);return o.createElement(s.default.Provider,{value:null},o.cloneElement(i,a))},t}(o.Component);function _(){}m.contextType=s.default,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_,onEntering:_,onEntered:_,onExit:_,onExiting:_,onExited:_},m.UNMOUNTED=0,m.EXITED=1,m.ENTERING=2,m.ENTERED=3,m.EXITING=4;const g=m},500220:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=n(667294).createContext(null)},806035:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={disabled:!1}},654337:(e,t,n)=>{"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{default:()=>r})},486186:(e,t,n)=>{"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{default:()=>r})},773949:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{default:()=>r})},292859:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(305261);function a(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},305261:(e,t,n)=>{"use strict";function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>r})},316787:(e,t,n)=>{"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function a(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>a})},366206:(e,t,n)=>{"use strict";var r=n(294757),a=n(933294),o=n(124961),i=n(76238),l=n(41437),s=n(116886),c=n(663527),u=n(621260);if(!window.Calls){var d=new i.ActionStatCollector(new i.ProductionStatCollector),p={getLang:l.getLang,langSex:function(e,t,n){return(0,s.langSex)(e,n)},langNumeric:function(e,t,n,r){return(0,s.langNumeric)(e,n,r)},langShortDateTime:function(e){return(0,s.langDate)(e,(0,l.getLang)("global_short_date_time",!0),0,(0,l.getLang)("months_of"),!0)},langShortDate:function(e,t){return void 0===t&&(t=!0),(0,s.langDate)(e,(0,l.getLang)("global_short_date",!0),0,(0,l.getLang)("months_sm_of"),t)}},f={onScreenSharingEnabled:null,onScreenSharingDisabled:null,onErrorStartCall:null,onHandCountChanged:null,onSuccessFeedback:function(){(0,u.showDoneBox)((0,l.getLang)("calls_feedback_success"))},onError:null};window.Calls=(0,r.init)({apiWrapper:a.apiWrapper,apiWrapperWithAuth:a.apiWrapperWithAuth,actionStatCollector:d,saveStatlogEvents:o.saveStatlogEvents,langUtils:p,navigateToConvo:function(e){window.nav.go((0,c.getConvoLocation)(e),null,{params:{entrypoint:"calls"}})},callSounds:{end:"/mp3/call_end.mp3",incoming:"/mp3/call_incoming.mp3",outgoing:"/mp3/call_outgoing.mp3",connected:"/mp3/call_connected.mp3",connecting:"/mp3/call_connecting.mp3"},navigateToProfile:function(e,t){!e.target.href&&window.Calls&&(window.Calls.collapseCall(),t&&window.nav.go(t))},eventHandlers:f})}try{window.stManager.done(window.jsc("web/calls.js"))}catch(e){}},820717:(e,t,n)=>{"use strict";n.d(t,{loadFriendsAction:()=>d,loadChatMembersAction:()=>p,loadAllowedToCallGroupMembersAction:()=>f,loadCallPeersWithWaitingImagesAction:()=>m,loadCallPeersWithoutWaitingImagesAction:()=>_,loadActiveCallDataAction:()=>g,loadCallParticipantsAccumulate:()=>v,loadCallParticipants:()=>A,loadCallUrlLink:()=>E,setActiveCallData:()=>C,startUpcomingStream:()=>y,startCallStream:()=>S,setAnonymousJoin:()=>w,setWaitingHall:()=>b,serverSearchGroupMembers:()=>T,loadAndCopyJoinLink:()=>I});var r=n(570655),a=n(121255),o=n(298811),i=n(329538),l=n(613335),s=n(834735),c=n(464380),u=n(659397);function d(e,t,n){if(e.authorizedGroupId)return Promise.resolve();if((0,o.unpackState)(t).friends.length>0)return Promise.resolve();if(e.getFriends){var r=e.getFriends();if(null!==r)return n({type:a.SET_FRIENDS,data:r}),Promise.resolve()}return(0,i.loadFriends)().then((function(e){return e.items.map(l.normalizeUser)})).then((function(e){n({type:a.SET_FRIENDS,data:e})}))}function p(e,t,n,r){return(0,i.loadChatMembers)(n).then((function(n){var i=n.profiles;i&&t({type:a.SET_CHAT_INFO,data:i.map(l.normalizeUser).sort((function(t,n){var r=(0,o.unpackState)(e).me;return t.peerId===r?-1:n.peerId===r?1:0})),conversation:r})}))}function f(e,t,n){return e.authorizedGroupId?t.groupMembers.length>0?Promise.resolve():(0,i.getGroupMembers)(-e.authorizedGroupId,0,a.COUNT_OF_GROUP_MEMBERS_TO_LOAD).then((function(e){var t=e.items,n=e.count,r=[],a=[];return t.forEach((function(e){e.deactivated||(r.push((0,l.normalizeUser)(e)),e.can_call_from_group||a.push(e.id))})),[r,a,n]})).then((function(e){var t=(0,r.__read)(e,3),o=t[0],i=t[1],l=t[2];return n({type:a.SET_GROUP_MEMBERS,groupMembersCount:l,groupMembers:o,unableToCallGroupMembersIds:i}),Promise.resolve()})):Promise.resolve()}function m(e,t,n){return(0,i.retryLoadCallPeers)(n).then((function(e){var n=(0,r.__read)((0,o.convertServerData)(e),3),a=n[0],i=n[1],l=n[2];return C(t,l),(0,s.preloadImagesFromResponse)([a,i])})).then((function(e){var o=(0,r.__read)(e,2),i=o[0],l=o[1];t({type:a.LOAD_PEERS,conversation:i,members:l,peerId:n})}))}function _(e,t,n,l){return(0,i.retryLoadCallPeers)(l).then((function(e){var i=(0,r.__read)((0,o.convertServerData)(e),3),l=i[0],u=i[1],d=i[2];C(t,d),(0,s.preloadImagesFromResponse)([l,u]).catch((function(e){n.eventHandlers.onError&&e&&n.eventHandlers.onError(e),(0,c.debugMessage)(c.DebugMessageType.ERROR,e),console.error(e)})),t({type:a.LOAD_PEERS,conversation:l,members:u})}))}function g(e,t,n){return n?(0,i.loadCallPeers)(n).then((function(e){var n=e.items,a=(0,r.__read)(n,1)[0];C(t,a)})):Promise.resolve()}var h={acc:[],timer:0,tasks:0,timeout:100};function v(e,t,n,a,o,i){var l;(l=h.acc).push.apply(l,(0,r.__spreadArray)([],(0,r.__read)(o))),h.timer&&clearTimeout(h.timer),h.timer=window.setTimeout((function(){var r=h.acc;h.acc=[],A(e,t,n,a,r,i).catch((function(e){n.eventHandlers.onError&&e&&n.eventHandlers.onError(e),(0,c.debugMessage)(c.DebugMessageType.ERROR,e),console.error(e)}))}),h.timeout)}function A(e,t,n,u,d,p){var f=(0,o.unpackState)(e).me,m=(0,o.unpackState)(e).anonymSecret,_=f<0?f:void 0;return(0,i.getCallParticipants)(u,d,_,f<0,m).then((function(e){var o=e.profiles,i=void 0===o?[]:o,c=e.anonyms,f=void 0===c?[]:c,m=e.secret,_=e.groups,g=void 0===_?[]:_;m&&t({type:a.UPDATE_ANON_SECRET,secret:m});var h=(0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(i)),(0,r.__read)(f)),(0,r.__read)(g)),v=d.filter((function(e){return!h.find((function(t){return t&&t.id===e}))}));v.length>0&&n.eventHandlers.onError&&n.eventHandlers.onError(new Error("callId: "+u+", timestamp: "+Date.now()+", cant find in participants: "+v.join(", ")));var A=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(f)),(0,r.__read)(i)).map(l.normalizeUser);(null==g?void 0:g.length)>0&&(A=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(A)),(0,r.__read)(g.map(l.normalizeGroup))));var E=(0,s.preloadImagesFromResponse)([{},A]);return p.awaitImages?E.then((function(){return[null,A]})):[null,A]})).then((function(e){var n=(0,r.__read)(e,2)[1];n.length>0&&t({type:a.LOAD_PEERS,members:n})})).catch((function(e){n.eventHandlers.onError&&e&&n.eventHandlers.onError(e),(0,c.debugMessage)(c.DebugMessageType.ERROR,e),console.error(e)}))}function E(e,t,n,r){return void 0===r&&(r=0),(0,i.getCallUrlLink)(t,n,r).then((function(t){var n=t.join_link;return e({type:a.CALL_STATE,callData:{callUrlLink:n}}),n}))}function C(e,t){if(t&&t.call_in_progress){var n=t.unread_count,r=t.last_message_id,o=t.call_in_progress.has_link,i=t.call_in_progress.can_finish_call;e({type:a.CALL_STATE,callData:{canFinishCall:i,hasUrlLink:o}}),(n||r)&&e({type:a.SET_UNREAD_COUNT,chatUnreadCount:n,chatUpToMsgId:r})}}function y(e){return(0,c.startStream)(!1,null,e).catch((function(e){(0,c.debugMessage)(c.DebugMessageType.ERROR,e),console.error(e)}))}function S(e){return(0,i.videoStartStreaming)(e).then((function(e){return(0,c.startStream)(!1,null,e.stream.ov_id)})).catch((function(e){(0,c.debugMessage)(c.DebugMessageType.ERROR,e),console.error(e)}))}function w(e){var t;return(0,c.changeConversationOptions)(((t={})[c.ConversationOption.REQUIRE_AUTH_TO_JOIN]=e,t))}function b(e){var t;return(0,c.changeConversationOptions)(((t={})[c.ConversationOption.WAITING_HALL]=e,t))}function T(e,t,n,o){return void 0===t&&(t=""),(0,i.searchGroupMembers)(e,t).then((function(e){var t=e.items,i=[],s=[];return t&&t.forEach((function(e){e.deactivated||e.id in n.groupMembersCache||(i.push((0,l.normalizeUser)(e)),e.can_call_from_group||s.push(e.id))})),i.length>0&&o({type:a.SET_GROUP_MEMBERS,groupMembersCount:n.groupMembersCount,groupMembers:(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(n.groupMembers)),(0,r.__read)(i)),unableToCallGroupMembersIds:(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(n.unableToCallGroupMembersIds)),(0,r.__read)(s))}),i}))}function I(e,t,n){void 0===n&&(n=0),E(e,t,!1,n).then((function(t){(0,u.copyTextToClipboard)(t).then((function(t){t&&e({type:a.CALL_NOTIFICATION,notification:{type:a.NotificationType.LINK_COPIED_TO_CLIPBOARD}})}))})).catch(console.log)}},444083:(e,t,n)=>{"use strict";n.d(t,{onForceCallFinish:()=>o});var r=n(121255),a=n(329538);function o(e,t,n,o){var i=t.callData.callId||"";n({type:r.SHOW_LOADER,isLoaderVisible:!0}),(0,a.forceCallFinish)(i).catch((function(e){console.error(e),n({type:r.ERROR,text:o("calls_error_force_call_finish"),handleType:r.ErrorHandleType.FATAL})})).finally((function(){n({type:r.SHOW_LOADER,isLoaderVisible:!1})}))}},256480:(e,t,n)=>{"use strict";n.d(t,{updateProfilesAndUrls:()=>s,loadCurrentCalls:()=>c,loadHistoryCalls:()=>u,changeQuery:()=>d});var r=n(570655),a=n(329538),o=n(121255),i=n(613335),l=n(171659);function s(e,t){var n,a,s,c,u,d,p=[],f=[];try{for(var m=(0,r.__values)(t),_=m.next();!_.done;_=m.next()){var g=_.value;(null==g?void 0:g.profiles)&&(null===(s=g.profiles)||void 0===s?void 0:s.length)>0&&(p=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(p)),(0,r.__read)(g.profiles))),"anonyms"in g&&(null==g?void 0:g.anonyms)&&(null===(c=g.anonyms)||void 0===c?void 0:c.length)>0&&(p=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(p)),(0,r.__read)(g.anonyms))),(null==g?void 0:g.groups)&&(null===(u=g.groups)||void 0===u?void 0:u.length)>0&&(p=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(p)),(0,r.__read)(g.groups))),(null==g?void 0:g.items)&&(null===(d=g.items)||void 0===d?void 0:d.length)>0&&(f=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(f)),(0,r.__read)(g.items)))}}catch(e){n={error:e}}finally{try{_&&!_.done&&(a=m.return)&&a.call(m)}finally{if(n)throw n.error}}return p.length&&function(e,t){var n=t.reduce((function(e,t){var n=String(t.id);if(!(n in e)){var r=(0,i.normalizeUser)(t);r.nameGen=t.first_name_gen+" "+t.last_name_gen,e[n]=r}return e}),{});e({type:o.HistoryScreenDispatchEvents.SET_PROFILES,data:n})}(e,p),f.length&&function(e,t){var n=t.reduce((function(e,t){var n=0;n="type"in t?(0,l.getHistoryCallPeerId)(t):(0,l.getCurrentCallPeerId)(t);var r=String(n);return r in e||(null==t?void 0:t.join_link)&&(e[r]=null==t?void 0:t.join_link),e}),{});e({type:o.HistoryScreenDispatchEvents.SET_URLS,data:n})}(e,f),Promise.resolve(f.length>0)}function c(e){return(0,a.getCurrentCalls)().then((function(t){var n,r=null!==(n=null==t?void 0:t.items)&&void 0!==n?n:[];return r.length>0&&e({type:o.HistoryScreenDispatchEvents.SET_CURRENT_CALLS,data:r}),t}))}function u(e,t,n,i,l,s,c){return void 0===t&&(t=5),void 0===n&&(n=0),void 0===i&&(i=0),void 0===l&&(l="all"),void 0===s&&(s=[]),void 0===c&&(c=!1),(0,a.getCallsHistory)(t,n,i,l).then((function(t){var n,a=null!==(n=null==t?void 0:t.items)&&void 0!==n?n:[],i=a.length>0||c,l=[];return a.length>0&&(l=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(s)),(0,r.__read)(a))),i&&e({type:o.HistoryScreenDispatchEvents.SET_HISTORY_CALLS,data:l}),t}))}function d(e){window.nav.setLoc(window.nav.fromStr(e))}},719481:(e,t,n)=>{"use strict";n.d(t,{promoteUserAndRemoveFromWaitingHall:()=>c,removeUserFromWaitingHall:()=>u,clearWaitingList:()=>d,loadWaitingHall:()=>p,loadAdditionalWaitingHall:()=>f,resetWaitingHallNew:()=>m});var r=n(570655),a=n(121255),o=n(613335),i=n(464380),l=n(329538),s=n(834735);function c(e,t,n){var r=(0,o.getExternalIdByUserId)(e);return(0,i.promoteParticipant)(r).then((function(){u(e,t,n)}))}function u(e,t,n){t&&(t.totalCount-=1,t.members.delete(e),n({type:a.SET_WAITING_HALL,data:t}))}function d(e){e({type:a.SET_WAITING_HALL,data:null})}function p(e,t,n,c){return new Promise((function(n){0!==t.length?e>t.length?(0,i.getWaitingHall)(null,e).then((function(e){n(e.participants)})):n(t):n([])})).then((function(t){var a={totalCount:e,members:new Map,hasNew:!1},i=[];if(n.waitingHall){var c=n.waitingHall,u=c.members,d=c.hasNew;a.hasNew=d,t.forEach((function(e){var t=+e.id;if(u.has(t)){var n=u.get(t);n&&a.members.set(t,n)}else i.push(t)}))}else i=t.map((function(e){return+e.id}));if(i.length>0){a.hasNew=!0;var p=n.me,f=n.callData,m=n.anonymSecret,_=f.callId||"",g=p<0,h=g?p:0;return(0,l.getCallParticipantsApiCall)(_,i,g,m,h).then((function(e){var t=e.profiles,n=void 0===t?[]:t,i=e.anonyms,l=void 0===i?[]:i,c=e.groups,u=void 0===c?[]:c,d=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(l)),(0,r.__read)(n)).map(o.normalizeUser);return(null==u?void 0:u.length)>0&&(d=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(d)),(0,r.__read)(u.map(o.normalizeGroup)))),(0,s.preloadImagesFromResponse)([{},d]),d.forEach((function(e){e&&e.peerId&&a.members.set(e.peerId,e)})),a})).catch((function(){return a}))}return a})).then((function(e){e.members&&c({type:a.SET_WAITING_HALL,data:e})}))}function f(e,t,n){var r;if(void 0===n&&(n=!1),n)r=void 0;else{if(!e.waitingHall)return Promise.resolve();if(!((r=e.waitingHall.totalCount)>e.waitingHall.members.size))return Promise.resolve()}return new Promise((function(n){(0,i.getWaitingHall)(null,r).then((function(r){p(r.totalCount,r.participants,e,t).then((function(){n()}))}))}))}function m(e,t){e&&(e.hasNew=!1,t({type:a.SET_WAITING_HALL,data:e}))}},734273:(e,t,n)=>{"use strict";n.d(t,{AdminPinUnmuteRequestModal:()=>o});var r=n(667294),a=n(7692),o=function(e){var t=e.onClose,n=e.actionButtons,o=e.title,i=e.description;return r.createElement(a.default,{className:"AdminPinUnmuteRequestModal",appearance:"blue",title:o,actionButtons:n,onClose:t},r.createElement("div",{className:"AdminPinUnmuteRequestModal__content"},i))}},908651:(e,t,n)=>{"use strict";n.d(t,{AssignAdminModal:()=>o});var r=n(667294),a=n(7692),o=function(e){var t=e.title,n=e.description,o=e.onClose,i=e.actionButtons;return r.createElement(a.default,{className:"AssignAdminModal",appearance:"blue",title:t,actionButtons:i,onClose:o},r.createElement("div",{className:"AssignAdminModal__content"},n))}},853055:(e,t,n)=>{"use strict";n.d(t,{BlurredBackground:()=>o});var r=n(667294),a=n(659397),o=function(e){var t=e.id,n=e.className,o=e.children,i=(0,r.useMemo)((function(){return"radial-gradient(circle, rgb("+(48+Math.abs(t)%3*4)+","+(48+Math.abs(t)%4*5)+","+(52+Math.abs(t)%5*6)+") 40%, #0a0a0a 100%)"}),[]),l=(0,a.classNames)("BlurredBackground",n);return r.createElement("div",{className:l,style:{background:i}},o)}},492512:(e,t,n)=>{"use strict";n.d(t,{Call:()=>I});var r=n(570655),a=n(667294),o=n(309605),i=n(995141),l=n(423197),s=n(826988),c=n(815155),u=n(884609),d=n(747212),p=n(818114),f=n(659397),m=n(156482),_=n(748972),g=n(167903),h=n(172397),v=n(701683),A=n(722959),E=n(641221),C=n(112877),y=n(662208),S=n(498110),w=n(968125),b=n(573669),T=n(343379);function I(e){var t,n,I=e.info,k=e.chatUnreadCount,N=void 0===k?0:k,P=e.callMenuActions,D=e.isAudioAllowed,M=void 0!==D&&D,L=e.isVideoAllowed,O=void 0!==L&&L,R=e.isVideoEnabled,x=void 0!==R&&R,B=e.isAudioEnabled,H=void 0!==B&&B,U=e.isScreenSharingEnabled,F=void 0!==U&&U,G=e.isOratorMode,V=void 0===G||G,W=e.isFullScreen,z=void 0!==W&&W,j=e.onToggleVideo,Y=e.onToggleAudio,K=e.onLeaveCall,Q=e.onCollapseCall,q=e.onToggleOratorMode,J=e.onChat,X=e.onHandClick,Z=e.onToggleScreenShare,$=e.onFullScreenToggle,ee=e.onDeferredStreamStart,te=e.isParticipantControlActive,ne=void 0!==te&&te,re=e.isLayoutSwitchShown,ae=void 0!==re&&re,oe=e.isScreenShareControlShown,ie=void 0!==oe&&oe,le=e.isHandRaised,se=void 0!==le&&le,ce=e.isHandControlShown,ue=void 0!==ce&&ce,de=e.isChatControlShown,pe=void 0!==de&&de,fe=e.isStreamingControlShown,me=void 0!==fe&&fe,_e=e.isChainControlShown,ge=void 0===_e||_e,he=e.onParticipantsClick,ve=e.onTooltipChange,Ae=e.onHidePanel,Ee=e.notification,Ce=e.tooltips,ye=e.amISpeaking,Se=void 0!==ye&&ye,we=e.onChainClick,be=e.notificationWithButton,Te=e.withoutPadding,Ie=void 0!==Te&&Te,ke=e.participantCount,Ne=void 0===ke?0:ke,Pe=e.children,De=e.isPopupOrModalOpen,Me=a.useContext(S.ConfigContext),Le=Me.withAnimation,Oe=Me.isModalView,Re=a.useContext(y.LangContext).getLang,xe=(0,f.classNames)("Call",{"Call--fullscreen":z||!Oe}),Be=(0,f.classNames)("Call__content",{"Call__content--withoutPadding":Ie}),He=300,Ue=null===(n=null===(t=window.location)||void 0===t?void 0:t.host)||void 0===n?void 0:n.includes("vk.com"),Fe=a.useRef(null),Ge=a.useRef(null),Ve=a.useRef(null),We=a.useRef(null),ze=(0,r.__read)(a.useState(!1),2),je=ze[0],Ye=ze[1],Ke=(0,r.__read)(function(e,t,n,o,i,l){var s=(0,r.__read)(a.useState(!0),2),c=s[0],u=s[1],d=a.useRef(null),p=a.useRef(!1),m=a.useRef(!1),_=a.useRef(!1);_.current!==l&&(_.current=l);var g=a.useRef(!1),h=function(){p.current||g.current?g.current=!1:(d.current&&window.clearTimeout(d.current),u(!0),m.current||_.current||(d.current=window.setTimeout((function(){u(!1),d.current=null,i&&i()}),5e3)))};return a.useEffect((function(){h();var r=(0,f.throttle)((function(){h()}),1e3),a=function(){m.current=!0},i=function(){m.current=!1};return t.current.addEventListener("mouseenter",a),t.current.addEventListener("mouseleave",i),n.current.addEventListener("mouseenter",a),n.current.addEventListener("mouseleave",i),o.current.addEventListener("mouseenter",a),o.current.addEventListener("mouseleave",i),e.current.addEventListener("mousemove",r),function(){p.current=!0,d.current&&window.clearTimeout(d.current),t.current&&(t.current.removeEventListener("mouseenter",a),t.current.removeEventListener("mouseleave",i)),n.current&&(n.current.removeEventListener("mouseenter",a),n.current.removeEventListener("mouseleave",i)),o.current&&(o.current.removeEventListener("mouseenter",a),o.current.removeEventListener("mouseleave",i)),e.current&&e.current.removeEventListener("mousemove",r)}}),[m,_.current]),[c,function(e){e?u(!0):(u(!1),g.current=!0)}]}(Fe,Ge,Ve,We,Ae,je),2),Qe=Ke[0],qe=Ke[1],Je=(0,f.classNames)({"Call__controlPanel--withAnimation":Le,"Call__controlPanel--hideBottomWithAnimation":Le,"Call__controlPanel--hideBottom":!Qe}),Xe=(0,f.classNames)({"Call__controlPanel--withAnimation":Le,"Call__controlPanel--hideBottomWithAnimation":Le,"Call__controlPanel--hideBottom":!Qe},"Call__curtain"),Ze=(0,f.classNames)("Call__buttons",{"Call__controlPanel--withAnimation":Le,"Call__controlPanel--hideBottomWithAnimation":Le,"Call__controlPanel--hideBottom":!Qe}),$e=a.useCallback((function(){return qe(!0)}),[]),et=a.useCallback((function(){De||(qe(!1),Ce.streaming&&ve("streaming",!1))}),[De,Ce.streaming]);return a.createElement("section",{className:xe,onMouseEnter:$e,onMouseLeave:et,ref:Fe},I,Ee,a.createElement("div",{className:Be,"data-calls-id":"content"},Pe),a.createElement("div",{className:Xe}),a.createElement(l.CallIconButtonGroup,{alignX:"l",alignY:"b",className:Je,ref:Ve},a.createElement(a.Fragment,null,pe&&a.createElement(E.TooltipNew,{content:Re("calls_chat"),open:Ce.chat,delay:He,onOpen:function(){return ve("chat",!0)},onClose:function(){return ve("chat",!1)}},a.createElement(u.ChatIconButton,{unreadCount:N,onClick:J})),ue&&a.createElement(E.TooltipNew,{content:Re(se?"calls_tooltip_lower_hand":"calls_tooltip_raise_hand"),open:Ce.hand,delay:He,onOpen:function(){return ve("hand",!0)},onClose:function(){return ve("hand",!1)}},a.createElement(i.CallIconButton,{icon:a.createElement(_.RaiseHandIcon,null),type:"hand",isActive:se,onClick:X})),ie&&a.createElement(E.TooltipNew,{content:Re(F?"calls_stop_screen_share":"calls_start_screen_share"),open:Ce.screenShare,delay:He,onOpen:function(){return ve("screenShare",!0)},onClose:function(){return ve("screenShare",!1)}},a.createElement(i.CallIconButton,{icon:a.createElement(m.ShareScreenIcon,null),isActive:F,onClick:Z})),me&&a.createElement(E.TooltipNew,{content:Re("calls_call_menu_translation"),open:Ce.streaming,delay:He,onOpen:function(){return ve("streaming",!0)},onClose:function(){return ve("streaming",!1)}},a.createElement(i.CallIconButton,{icon:a.createElement(b.default,null),isActive:me,onClick:ee})))),a.createElement(l.CallIconButtonGroup,{alignX:"r",alignY:"b",style:z&&Ue?{right:"78px"}:void 0,className:Je,ref:We},a.createElement(a.Fragment,null,ae&&a.createElement(E.TooltipNew,{content:Re(V?"calls_show_grid":"calls_show_orator"),open:Ce.layout,delay:He,onOpen:function(){return ve("layout",!0)},onClose:function(){return ve("layout",!1)}},a.createElement(i.CallIconButton,{type:V?"changeToGrid":"changeToOrator",onClick:q})),P&&a.createElement(A.CallsDropdown,{items:P,open:je,setOpen:Ye},a.createElement(i.CallIconButton,{type:"settings"})),Q&&a.createElement(E.TooltipNew,{content:Re("calls_collapse"),open:Ce.collapse,delay:He,onOpen:function(){return ve("collapse",!0)},onClose:function(){return ve("collapse",!1)}},a.createElement(i.CallIconButton,{type:"collapse",onClick:Q})),$&&a.createElement(E.TooltipNew,{content:Re(z?"calls_tooltip_fullscreen_off":"calls_tooltip_fullscreen_on"),open:Ce.fullscreen,delay:He,onOpen:function(){return ve("fullscreen",!0)},onClose:function(){return ve("fullscreen",!1)}},a.createElement(i.CallIconButton,{onClick:$,icon:z?a.createElement(g.FullScreenOffIcon,null):a.createElement(h.FullScreenIcon,null)})))),a.createElement("footer",{className:"Call__footer",ref:Ge},a.createElement("div",{className:Ze},ge&&we&&a.createElement(o.CallButton,{type:o.CallButtonTypes.ON,icon:a.createElement(w.ChainIcon,null),onClick:we,className:"Call__footerButton"}),he&&a.createElement(T.ParticipantIconButton,{isParticipantControlActive:ne,onClick:he,participantCount:Ne}),a.createElement(o.CallButton,{type:O?x?o.CallButtonTypes.ON:o.CallButtonTypes.OFF:o.CallButtonTypes.DISABLED,icon:x?a.createElement(s.VideoIcon,null):a.createElement(v.DisabledVideoIcon,null),onClick:j,className:"Call__footerButton"}),Y&&a.createElement(o.CallButton,{type:M?H?o.CallButtonTypes.ON:o.CallButtonTypes.OFF:o.CallButtonTypes.DISABLED,icon:H?Se?a.createElement(C.MicIconWithSpeakingIndicator,null):a.createElement(p.MicIcon,null):a.createElement(d.MutedMicIcon,null),onClick:Y,className:"Call__footerButton"}),a.createElement(o.CallButton,{type:o.CallButtonTypes.NEGATIVE,icon:a.createElement(c.EndCallIcon,null),onClick:K,className:"Call__footerButton"}))),be&&be)}},309605:(e,t,n)=>{"use strict";n.d(t,{CallButtonTypes:()=>r,CallButton:()=>l});var r,a=n(570655),o=n(667294),i=n(659397);!function(e){e.POSITIVE="positive",e.NEGATIVE="negative",e.REGULAR="regular",e.ON="on",e.OFF="off",e.CLEAR="clear",e.DISABLED="disabled"}(r||(r={}));var l=function(e){var t=e.icon,n=e.text,l=e.type,s=e.className,c=(0,a.__rest)(e,["icon","text","type","className"]),u=(0,i.classNames)("CallButton","CallButton--"+l,s,{"CallButton--withText":!!n},"CallButton--withAnimation"),d=(0,i.classNames)("CallButton__icon","CallButton__icon--withAnimation"),p=(0,a.__assign)((0,a.__assign)({},c),{onMouseDown:function(e){e.preventDefault(),c.onMouseDown&&c.onMouseDown(e)}});return o.createElement("button",(0,a.__assign)({className:u},p,{disabled:l===r.DISABLED}),o.createElement("figure",{className:d},t),n)}},790281:(e,t,n)=>{"use strict";n.d(t,{CallByNameModal:()=>_});var r=n(667294),a=n(138671),o=n(838480),i=n(774415),l=n(662208),s=n(736434),c=n(295886),u=n(670546),d=n(248586),p=n(279060),f=n(750598),m=n(884143),_=function(e){var t=e.items,n=e.actionButtons,_=e.onListItemClick,g=e.selectedId,h=e.onClose,v=e.onSearchChange,A=r.useContext(l.LangContext).getLang;return r.createElement(a.default,{className:"CallByNameModal",onClose:h},r.createElement(o.ModalHeader,{title:A("calls_call_by_name_title"),onClose:h}),r.createElement("div",{className:"CallByNameModal__content"},r.createElement(s.BlockSearchInput,{className:"CallByNameModalList__input",placeholder:A("calls_call_by_name_search_placeholder"),onChange:v,onInput:v,onPaste:v}),r.createElement(c.ListHeader,{extra:t.length||""},A("calls_call_by_name_list_header")),0!==t.length&&r.createElement(u.default,{border:!1,className:"CallByNameModalList__list"},t.map((function(e){return function(e,t){var n=null;return n=t===e.id?r.createElement("span",{className:"CallByNameModalList__selected"},A("calls_call_by_name_selected")):r.createElement("span",{className:"CallByNameModalList__select"},A("calls_call_by_name_select")),r.createElement(f.default,{key:e.id,onClick:function(){return _(e.id)},className:"CallByNameModalList__listItem",aside:n},r.createElement(d.default,{photo:r.createElement(p.CallPhoto,{id:e.id,photo:e.photo,alt:e.name||"",className:"CallByNameModalList__photo"}),title:e.name,href:e.link,target:"_blank"}))}(e,g)}))),0===t.length&&r.createElement(m.default,null,A("calls_call_by_name_not_found"))),r.createElement(i.ModalFooter,{actionButtons:n}))}},440896:(e,t,n)=>{"use strict";n.d(t,{CallError:()=>i});var r=n(667294),a=n(7692),o=n(952907),i=function(e){var t=e.title,n=e.onClose,i=e.actionButtons,l=e.text;return r.createElement(a.default,{appearance:"blue",title:t,onClose:n,actionButtons:i,className:"CallError"},r.createElement(o.ErrorPopupText,null,l))}},225652:(e,t,n)=>{"use strict";n.d(t,{CallExitModal:()=>i});var r=n(667294),a=n(7692),o=n(662208),i=function(e){var t=e.onClose,n=e.actionButtons,i=r.useContext(o.LangContext).getLang;return r.createElement(a.default,{onClose:t,title:i("calls_exit_menu"),appearance:"blue",actionButtons:n,className:"CallExitModal"},r.createElement("div",{className:"CallExitModal__text"},i("calls_sure_leave_call")))}},362542:(e,t,n)=>{"use strict";n.d(t,{CallGridNew:()=>i});var r=n(667294),a=n(659397),o=n(148434),i=function(e){var t=e.onScroll,n=e.scrollPosition,i=e.participantsCount,l=e.participantsShiftCount,s=e.children,c=r.Children.toArray(s),u=(0,a.classNames)("CallGridNew","CallGridNew--c"+i),d=(0,r.useRef)(null);(0,r.useEffect)((function(){var e=function(){null!==d.current&&t(d.current.scrollTop)};return null!==d.current&&d.current.addEventListener("scroll",e),function(){d.current&&d.current.removeEventListener("scroll",e)}}),[]),(0,r.useEffect)((function(){var e;null===(e=d.current)||void 0===e||e.scrollTo(0,n)}),[d.current]);var p=(0,r.useMemo)((function(){return new Array(l).fill(0).map((function(e,t){return r.createElement("article",{className:"CallGridNew__item CallGridNew__item--empty",key:-t})}))}),[l]),f=i-l-c.length>0;return r.createElement("section",{className:u,ref:d},r.createElement("div",{className:"CallGridNew__in"},p,c.map((function(e,t){return r.createElement("article",{className:"CallGridNew__item",key:e.key||t,"data-calls-id":"grid-item"},e)}))),f&&r.createElement(o.default,{color:"white",size:64,duration:1,className:"CallGridNew__spinner"}))}},503592:(e,t,n)=>{"use strict";n.d(t,{CallHeader:()=>s});var r=n(667294),a=n(659397),o=n(796726),i=n(297627),l=n(838482),s=(0,r.memo)((function(e){var t=e.translation,n=e.speakers,s=e.hands,c=e.time,u=e.network,d=e.networkTooltipText,p=(0,a.classNames)("CallHeader__hands",{"CallHeader__hands--visible":s>0});return r.createElement("div",{className:"CallHeader"},r.createElement("div",{className:"CallHeader__main"},r.createElement("div",{className:"CallHeader__timeAndNetwork"},u<.6&&r.createElement(l.default,{text:d,align:"left",className:"Call__oldTooltip"},r.createElement("div",{className:"CallHeader__network"},r.createElement(i.default,{fill:u<=.3?"#ff5c5c":"#FECE00"}))),c),t&&r.createElement("div",{className:"CallHeader__translation"},t)),r.createElement("div",{className:"CallHeader__aside"},r.createElement("div",{className:"CallHeader__participants"},n),r.createElement("div",{className:p},r.createElement(o.RaisedHandIconXs,null)," ",s)))}))},343035:(e,t,n)=>{"use strict";n.d(t,{CallHistoryList:()=>s});var r=n(667294),a=n(670546),o=n(884143),i=n(374327),l=n(658861),s=function(e){var t=e.calls,n=e.onMenuItemClick,s=e.stubText,c=e.hasMore,u=e.onLoadMore,d=e.selectedOwnerId,p=void 0===d?0:d;return r.createElement(l.default,{useWindowScroll:!0,hasMore:c,loadMore:u},r.createElement(a.default,{className:"CallHistoryList",border:!1},t.map((function(e,t){return r.createElement(i.CallHistoryListItem,{selectedOwnerId:p,key:t,onMenuItemClick:n,call:e,index:t})})),0===t.length&&r.createElement(o.default,{className:"CallHistoryList--stub"},s)))}},374327:(e,t,n)=>{"use strict";n.d(t,{HistoryCallMenuActionsEnum:()=>r,CallHistoryListItem:()=>C});var r,a=n(667294),o=n(662208),i=n(309739),l=n(890638),s=n(659397),c=n(263986),u=n(800055),d=n(967458),p=n(239446),f=n(735144),m=n(250516),_=n(248586),g=n(750598),h=n(171659),v=n(50533);!function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.MESSAGE=2]="MESSAGE",e[e.DELETE=3]="DELETE"}(r||(r={}));var A=function(e,t){void 0===t&&(t=0);var n="";if(t){var r=new Date(t);if((0,s.isDateToday)(r)){var a=(0,s.leadingZero)(r.getMinutes());n=r.getHours()+":"+a}else n=t?e(t,!1):""}return n},E=function(e,t,n){return{text:a.createElement("div",{className:"CallHistoryListItem--dropdownItem"},e,a.createElement("div",{className:"CallHistoryListItem--dropdownItemText"},t)),onClick:n}},C=(0,a.memo)((function(e){var t=e.index,n=e.call,C=e.onMenuItemClick,y=e.selectedOwnerId,S=void 0===y?0:y,w=(0,v.useSelector)((function(e){return e})).profiles,b=(0,a.useContext)(o.LangContext),T=b.getLang,I=b.langShortDate,k=(0,h.getHistoryItemOwner)(n,w),N=k.member,P=k.chat,D=(0,a.useMemo)((function(){var e=n.type,o=n.items,i=n.started_at,l=n.finished_at,f="";i&&l&&(f=(0,s.formatDuration)(Math.floor((l-i)/1e3)));var m=function(e){if(void 0===e&&(e=0),!e)return{date:"",time:""};var t=new Date(e),n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear(),o=t.getHours(),i=t.getMinutes();return{date:[(0,s.leadingZero)(n),(0,s.leadingZero)(r),a].join("."),time:[(0,s.leadingZero)(o),(0,s.leadingZero)(i)].join(":")}}(l),_=m.date,g=m.time,v=P?function(e,t,n,r){var a=n.title,o=void 0===a?"":a,i=n.photo_100,l=void 0===i?"":i,s=n.id,c=void 0===s?0:s,u=r.finished_at,d=void 0===u?0:u,p=c?"/im?sel=c"+c:"",f=e("calls_history_call_type_group_hint"),m=A(t,d);return{title:o,href:p,hint:m?e("calls_history_call_type_group_time_hint").replace("{time}",m):"",photo:l,status:f}}(T,I,P,n):N?function(e,t,n,r){var o=n.name,i=void 0===o?"":o,l=n.photo,d=void 0===l?"":l,p=n.id,f=void 0===p?0:p,m=n.link,_=void 0===m?"":m,g=r.is_inbound,h=void 0!==g&&g,v=r.finished_at,E=void 0===v?0:v,C=r.reach_status,y=void 0===C?"":C,S=h?a.createElement(c.default,{className:"CallHistoryListItem--hintIcon"}):a.createElement(u.default,{className:"CallHistoryListItem--hintIcon"}),w=A(t,E),b="",T=!1;return h?"CANCELLED_BY_INITIATOR"===y?(b=e("calls_history_status_inb_cancelled_by_initiator"),T=!0):b=e("REACHED"===y?"calls_history_status_inb_reached":"REJECTED_BY_RECEIVER"===y?"calls_history_status_inb_reject_by_receiver":"calls_history_status_inb"):"CANCELLED_BY_INITIATOR"===y?b=e("calls_history_status_out_cancelled_by_initiator"):"REACHED"===y?b=e("calls_history_status_out_reached"):"REJECTED_BY_RECEIVER"===y?(b=e("calls_history_status_out_reject_by_receiver"),T=!0):b=e("calls_history_status_out"),{title:i,href:_||"/id"+f,hint:a.createElement("div",{className:(0,s.classNames)("CallHistoryListItem",{"CallHistoryListItem--important":T})},S,e("calls_history_call_list_item_description").replace("%type",b).replace("%time",w)),photo:d,status:b}}(T,I,N,n):{},y=v.title,S=void 0===y?"":y,w=v.photo,b=void 0===w?"":w,k=v.href,D=void 0===k?"":k,M=v.hint,L=void 0===M?"":M,O=v.status,R=void 0===O?"":O;S+="merged"===e?" ("+(null==o?void 0:o.length)+")":"";var x=(0,h.getHistoryCallPeerId)(n),B=[],H=function(e){return function(){return C(n,e,t)}};return B.push({onClick:function(){},noHover:!0,text:a.createElement("div",{className:"CallHistoryListItem--dropdownItemStatus"},a.createElement("div",{className:"CallHistoryListItem--dropdownItemStatusFinishTime"},a.createElement("div",{className:"CallHistoryListItem--dropdownItemStatusDate"},_),a.createElement("div",{className:"CallHistoryListItem--dropdownItemStatusTime"},g)),a.createElement("div",{className:"CallHistoryListItem--dropdownItemStatusType"},R),!!f&&a.createElement("div",{className:"CallHistoryListItem--dropdownItemStatusDuration"},f))}),x&&(B.push(E(a.createElement(d.default,null),T("calls_history_dropdown_item_message"),H(r.MESSAGE))),B.push({separator:!0})),B.push(E(a.createElement(p.default,null),T("calls_history_dropdown_item_delete"),H(r.DELETE))),{title:S,photo:b,href:D,hint:L,actions:B,peerId:x}}),[n]),M=D.title,L=D.photo,O=D.href,R=D.hint,x=D.actions,B=D.peerId;return N||P?a.createElement(g.default,{className:"CallHistoryListItem",selectable:!1,canBeHovered:!1,aside:a.createElement("div",{className:"CallHistoryListItem--aside"},!!B&&!(null==P?void 0:P.left_or_kicked)&&a.createElement(a.Fragment,null,a.createElement(f.default,{className:"CallHistoryScreen--friendsIcon CallHistoryScreen--friendsIconsPhone",onClick:function(){return C(n,r.AUDIO,t,S)}}),a.createElement(m.default,{className:"CallHistoryScreen--friendsIcon",onClick:function(){return C(n,r.VIDEO,t,S)}})),a.createElement(i.default,{className:"CallHistoryListItem--asideMenu",trigger:"hover",align:"right",data:x},a.createElement(l.default,{className:"CallHistoryScreen--friendsIcon CallHistoryListItem--asidePointers"})))},a.createElement(_.default,{className:"CallHistoryListItem--entity",photo:L,title:M,href:O,description:R||T("calls_history_call_type_group_hint"),target:"_blank"})):a.createElement(a.Fragment,null)}))},328962:(e,t,n)=>{"use strict";n.d(t,{CallHistoryScreen:()=>s});var r=n(667294),a=n(605329),o=n(575003),i=n(730300),l=n(765446),s=function(e){var t=e.showCreateCall,n=e.onCreateCallClick,s=e.activeMenuItem,c=e.menuItems,u=e.onMenuItemClick,d=e.loading,p=e.children;return r.createElement(a.PageColumns,{narrow:r.createElement(o.RightMenu,{tabs:c,activeTab:s,onTabClick:u,loading:d})},r.createElement("div",{className:"CallHistoryScreen"},t&&r.createElement(i.CallHistoryScreenCreateCall,{onCreateCallClick:function(){return n(l.CallStatSource.HISTORY_CREATE)}}),p))}},730300:(e,t,n)=>{"use strict";n.d(t,{CallHistoryScreenCreateCall:()=>u});var r=n(667294),a=n(662208),o=n(670546),i=n(750598),l=n(881150),s=n(744499),c=n(797847),u=function(e){var t=e.onCreateCallClick,n=(0,r.useContext)(a.LangContext).getLang;return r.createElement(s.default,{title:"",isSaved:!1,savedTitle:"",className:""},r.createElement(o.default,{className:"CallHistoryScreenCreateCall",border:!1},r.createElement(i.default,{chevron:!1,selectable:!1,icon:r.createElement(c.CreateCallIcon,null),aside:r.createElement(l.default,{onClick:t,size:"s"},n("calls_page_call_by_link_create"))},r.createElement("div",{className:"CallHistoryScreenCreateCall--title"},n("calls_page_call_by_link_header")))))}},115706:(e,t,n)=>{"use strict";n.d(t,{CallHistoryScreenLanding:()=>p});var r=n(667294),a=n(662208),o=n(670546),i=n(750598),l=n(590439),s=n(382459),c=n(529071),u=n(881150),d=n(765446),p=function(e){var t=e.onCreateCallClick,n=(0,r.useContext)(a.LangContext).getLang;return r.createElement("div",{className:"CallHistoryScreenLanding"},r.createElement("div",{className:"CallHistoryScreenLanding--content"},r.createElement("div",{className:"CallHistoryScreenLanding--header"},n("calls_screen_landing_header")),r.createElement("div",{className:"CallHistoryScreenLanding--subheader"},n("calls_screen_landing_subheader")),r.createElement(o.default,{className:"CallHistoryScreenLanding--list",border:!1},r.createElement(i.default,{border:!1,chevron:!1,selectable:!1,icon:r.createElement(l.default,null)},n("calls_screen_landing_feature_participants")),r.createElement(i.default,{border:!1,chevron:!1,selectable:!1,icon:r.createElement(s.default,null)},n("calls_screen_landing_feature_anon")),r.createElement(i.default,{border:!1,chevron:!1,selectable:!1,icon:r.createElement(c.default,null)},n("calls_screen_landing_feature_share"))),r.createElement(u.default,{size:"l",className:"CallHistoryScreenLanding--createButton",onClick:function(){return t(d.CallStatSource.HISTORY_CREATE)}},n("calls_current_calls_create_call_by_link"))))}},995141:(e,t,n)=>{"use strict";n.d(t,{CallIconButton:()=>i});var r=n(570655),a=n(667294),o=n(659397),i=(0,a.forwardRef)((function(e,t){var n,i=e.type,l=e.isActive,s=e.icon,c=e.className,u=(0,r.__rest)(e,["type","isActive","icon","className"]),d=(0,o.classNames)("CallIconButton",c,"CallIconButton--withAnimation",((n={"CallIconButton--active":l})["CallIconButton--"+i]=!!i,n)),p=(0,r.__assign)((0,r.__assign)({},u),{onMouseDown:function(e){e.preventDefault(),u.onMouseDown&&u.onMouseDown(e)}});return a.createElement("button",(0,r.__assign)({},p,{className:d,ref:t}),s)}))},423197:(e,t,n)=>{"use strict";n.d(t,{CallIconButtonGroup:()=>i});var r=n(570655),a=n(667294),o=n(659397),i=(0,a.forwardRef)((function(e,t){var n=e.children,i=e.className,l=e.alignX,s=e.alignY,c=e.size,u=void 0===c?"m":c,d=(0,r.__rest)(e,["children","className","alignX","alignY","size"]),p=(0,o.classNames)("CallIconButtonGroup","CallIconButtonGroup--"+l,"CallIconButtonGroup--"+s,"CallIconButtonGroup--size-"+u,i);return a.createElement("div",(0,r.__assign)({className:p,ref:t},d),n)}))},177774:(e,t,n)=>{"use strict";n.d(t,{CallLink:()=>c});var r=n(667294),a=n(595775),o=n(629142),i=n(385177),l=n(880767),s=n(662208),c=function(e){var t=e.link,n=void 0===t?"":t,c=e.isLinkLoading,u=e.isCopied,d=e.hideCopiedText,p=r.useContext(s.LangContext).getLang;return r.createElement("div",{className:"CallLink"},r.createElement("p",{className:"CallLink__info"},p("calls_management_link_info_desc")),c?r.createElement(i.default,{className:"CallLink__input"},r.createElement(l.default,null)):r.createElement("div",{className:"CallLink__input"},r.createElement(a.default,{readOnly:"readonly",value:n}),r.createElement("div",null,r.createElement("div",{className:"CallLink__hint"},p("calls_management_add_warning"),r.createElement(o.default,{className:"CallLink__copied",shown:u,callback:d},p("calls_link_copied"))))))}},562192:(e,t,n)=>{"use strict";n.d(t,{CallLinkSettings:()=>f});var r=n(570655),a=n(667294),o=n(662208),i=n(277256),l=n(750598),s=n(670546),c=n(594504),u=n(560301),d=n(448625),p=n(25347),f=function(e){var t=e.requireAuthToJoin,n=void 0!==t&&t,f=e.onRequireAuthToJoinChanged,m=e.isWaitingHallBlockShown,_=void 0!==m&&m,g=e.isWaitingHallEnabled,h=void 0!==g&&g,v=e.onWaitingHallEnabledChanged,A=(0,a.useContext)(o.LangContext).getLang,E=(0,r.__read)((0,a.useState)(!n),2),C=E[0],y=E[1],S=(0,r.__read)((0,a.useState)(h),2),w=S[0],b=S[1],T=!1,I=(0,a.useCallback)((function(){if(!T){T=!0;var e=!C;y(e),f&&f(!e)}}),[n]),k=!1,N=(0,a.useCallback)((function(){if(!k){k=!0;var e=!w;b(e),v&&v(e)}}),[h]);return a.createElement(s.default,null,_&&a.createElement(u.ListItemWithHint,{onClick:N,canBeHovered:!1,icon:a.createElement(d.ListIcon,{icon:a.createElement(p.default,{width:20,height:20}),color:d.ListIconColors.BLUE}),hint:A("calls_menu_waiting_hall_description"),selectable:!0,aside:a.createElement(i.default,{onChange:N,checked:w})},A("calls_menu_waiting_hall_title")),a.createElement(l.default,{border:!0,canBeHovered:!1,onClick:I,selectable:!0,icon:a.createElement(c.AnonymousIcon,null),aside:a.createElement(i.default,{onChange:I,checked:C})},A("calls_management_link_allow_anonymous")))}},445586:(e,t,n)=>{"use strict";n.d(t,{CallManagementMenu:()=>d});var r=n(667294),a=n(670546),o=n(750598),i=n(448625),l=n(489685),s=n(607691),c=n(662208),u=n(498110),d=function(e){var t=e.isLinkBlockShown,n=e.linkBlockTitle,d=e.onLinkBlockClick,p=e.callUrlLink,f=(0,r.useContext)(u.ConfigContext).allowWaitingHall,m=r.useContext(c.LangContext).getLang;return r.createElement(a.default,null,t&&r.createElement(o.default,{onClick:d,chevron:!0,icon:r.createElement(i.ListIcon,{icon:r.createElement(l.LinkIcon,null),color:i.ListIconColors.GREEN}),aside:f?r.createElement("span",{className:"CallManagementMenu__asideHint"},m("calls_menu_link_setup")):""},n,p&&r.createElement(s.ListCopyControl,{value:p,copyText:m("calls_menu_link_copy"),doneText:m("calls_menu_link_copied")})))}},186983:(e,t,n)=>{"use strict";n.d(t,{CallManagementModal:()=>s});var r=n(667294),a=n(138671),o=n(838480),i=n(774415),l=n(662208),s=function(e){var t=e.title,n=e.onCloseModal,s=e.hint,c=e.actionButtons,u=e.isWithBackButton,d=e.onBackClick,p=e.children,f=r.useContext(l.LangContext).getLang;return r.createElement(a.default,{className:"CallManagementModal",disableBodyScroll:!1,onClose:n},r.createElement(o.ModalHeader,{title:t,onClose:n,backText:u?f("calls_back"):void 0,onBack:d}),r.createElement("div",{className:"CallManagementModal__content"},r.Children.toArray(p).map((function(e,t){return r.createElement("div",{className:"CallManagementModal__section",key:t},e)}))),(c||s)&&r.createElement(i.ModalFooter,{actionButtons:c||[],hint:s}))}},269481:(e,t,n)=>{"use strict";n.d(t,{CallModal:()=>u});var r=n(667294),a=n(50533),o=n(138671),i=n(431469),l=n(121255),s=n(659397),c=n(498110),u=function(e){var t=e.onClose,n=e.onBackdropClick,u=e.isIncoming,d=void 0!==u&&u,p=e.isCautionBoxShown,f=void 0!==p&&p,m=e.children,_=(0,a.useDispatch)(),g=(0,r.useContext)(c.ConfigContext).withAnimation,h=(0,s.classNames)("CallModal",{"CallModal--withAnimation":g});(0,i.usePseudoLayer)();var v=(0,r.useCallback)((function(){return f?void _({type:l.SHOW_CAUTION_BOX,isOpen:!0,isIncoming:d||!1}):t()}),[f]);return r.createElement(o.default,{className:h,disableBodyScroll:!0,onClose:v,onBackdropClick:n},m)}},925082:(e,t,n)=>{"use strict";n.d(t,{CallNotification:()=>o});var r=n(667294),a=n(659397),o=function(e){var t=e.children,n=e.className,o=(0,a.classNames)("CallNotification",n);return r.createElement("div",{className:o},t)}},548237:(e,t,n)=>{"use strict";n.d(t,{CallOrator:()=>o});var r=n(667294),a=n(659397),o=function(e){var t=e.children,n=e.orator,o=e.oratorTitle,i=e.onToggleParticipantsAside,l=e.isShownParticipantsAside,s=e.onScroll,c=e.scrollPosition,u=e.participantsAsideCount,d=e.participantsAsideShift,p=r.Children.toArray(t),f=(0,a.classNames)({CallOrator__toggleIcon:!0,"CallOrator__toggleIcon--withAnimation":!0}),m=(0,a.classNames)({CallOrator:!0,"CallOrator--withoutOthers":!l}),_=(0,a.classNames)({CallOrator__others:!0,"CallOrator__others--hide":!l}),g=(0,a.classNames)({CallOrator__toggleArrow:!0,"CallOrator__toggleArrow--toLeft":l,"CallOrator__toggleArrow--toRight":!l}),h=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=function(){null!==h.current&&s(h.current.scrollTop)};return null!==h.current&&h.current.addEventListener("scroll",e),function(){h.current&&h.current.removeEventListener("scroll",e)}}),[]),(0,r.useEffect)((function(){var e;null===(e=h.current)||void 0===e||e.scrollTo(0,c)}),[h.current]),r.createElement("article",{className:m,ref:h},r.createElement("main",{className:"CallOrator__orator"},n),r.createElement("button",{className:"CallOrator__toggleOthers",onClick:i},r.createElement("div",{className:f},r.createElement("div",{className:g}))),r.createElement("aside",{className:_},r.createElement("ul",{className:"CallOrator__list",style:{height:148*u-8+"px"}},d>0&&r.createElement("li",{className:"CallOrator__participant",key:-1,"data-calls-id":"participant",style:{height:d+"px"}}),p.map((function(e){return r.createElement("li",{className:"CallOrator__participant",key:"key"in e?e.key:void 0,"data-calls-id":"participant"},e)})))),o)}},813245:(e,t,n)=>{"use strict";n.d(t,{CallParticipantList:()=>s});var r=n(667294),a=n(736434),o=n(295886),i=n(670546),l=n(662208),s=function(e){var t=e.searchQuery,n=e.onSearchChange,s=e.length,c=e.children,u=e.waitingHallList,d=r.useContext(l.LangContext).getLang;return r.createElement("div",{className:"CallParticipantList"},r.createElement(a.BlockSearchInput,{value:t,placeholder:d("calls_search_participants_placeholder"),onChange:n,onInput:n,onPaste:n,className:"CallParticipantList__input"}),!!u&&u,r.createElement(o.ListHeader,{extra:s||""},d("calls_participant_list_header")),r.createElement(i.default,{border:!1,className:"CallParticipantList__list"},c))}},279060:(e,t,n)=>{"use strict";n.d(t,{CallPhoto:()=>u});var r=n(667294),a=n(906942),o=n(659397),i=n(121255),l=n(690128),s=n(498110),c=n(697483),u=function(e){var t,n,u=e.id,d=e.waves,p=void 0!==d&&d,f=e.size,m=e.photo,_=void 0===m?"":m,g=e.alt,h=e.letter,v=e.showCreatorBadge,A=e.showAdminBadge,E=e.className,C=(0,r.useContext)(s.ConfigContext),y=C.withAnimation,S=C.anonymPhoto,w=(0,c.isParticipantAnonym)(u),b=(0,o.classNames)("CallPhoto",E,((t={"CallPhoto--waves":y&&!!p})["CallPhoto--"+f]=!!f,t)),T=null!=h?h:String.fromCodePoint(null!==(n=g.codePointAt(0))&&void 0!==n?n:32);return!_||_.includes(i.DEFAULT_AVATAR)||w&&!S?r.createElement(r.Fragment,null,r.createElement(a.ConversationNoPhoto,{id:Math.abs(u),text:T,size:f,className:b}),v?r.createElement(l.UserBadge,{className:"CallPhoto__badge",type:"creator"}):A?r.createElement(l.UserBadge,{className:"CallPhoto__badge",type:"admin"}):null):r.createElement(r.Fragment,null,r.createElement("img",{src:_,className:b,alt:g}),v?r.createElement(l.UserBadge,{className:"CallPhoto__badge",type:"creator"}):A?r.createElement(l.UserBadge,{className:"CallPhoto__badge",type:"admin"}):null)}},471304:(e,t,n)=>{"use strict";n.d(t,{CallSettings:()=>f});var r=n(570655),a=n(667294),o=n(539503),i=n(385177),l=n(662208),s=n(969135),c=n(838482),u=n(121255),d=n(498110),p=n(731585);function f(e){var t=e.cameras,n=e.mics,u=e.noiseCancellationOptions,f=e.videoResolutionOptions,g=e.currentCamId,h=e.currentMicId,v=e.currentNoiseCancellation,A=e.currentVideoResolution,E=e.isCamAvailable,C=void 0!==E&&E,y=e.isMicAvailable,S=void 0!==y&&y,w=e.onCameraChange,b=e.onMicChange,T=e.onNoiseCancellationChange,I=e.onVideoResolutionChange,k=e.pushToTalkEnabled,N=e.onPushToTalkChange,P=a.useContext(l.LangContext).getLang,D=a.useContext(d.ConfigContext).allowPushToTalk,M=(0,a.useRef)(null),L=(0,a.useRef)(null),O=(0,a.useRef)(null),R=(0,a.useRef)(null),x={controls:!1,crossOrigin:"anonymous",playsInline:!0};return _({kind:"video",resolution:A,mediaElRef:M,streamRef:O,deviceId:g,isActive:C}),_({kind:"audio",mediaElRef:L,streamRef:R,deviceId:h,isActive:S}),a.createElement("div",{className:"CallSettings"},a.createElement("div",{className:"CallSettings__camera"},C?a.createElement("video",(0,r.__assign)({ref:M},x,{className:"CallSettings__cameraStream CallSettings__cameraContent"})):a.createElement("div",{className:"CallSettings__cameraStub CallSettings__cameraContent"},P("calls_no_camera"))),S&&a.createElement("audio",(0,r.__assign)({ref:L},x)),a.createElement("div",{className:"CallSettings__block"},a.createElement("div",{className:"CallSettings__label"},P("calls_settings_camera")),C?a.createElement(o.default,{options:t.map(m),value:g,onChange:function(e){var t=e.selected;return w(t.value)},appearance:"secondary",className:"CallSettings__field"}):a.createElement(i.default,{className:"CallSettings__field"},P("calls_settings_no_camera"))),C&&a.createElement("div",{className:"CallSettings__block"},a.createElement("div",{className:"CallSettings__label"},P("calls_settings_video_resolution")),a.createElement(o.default,{options:f,value:A,onChange:function(e){var t=e.selected;return I(t.value)},appearance:"secondary",className:"CallSettings__field"})),a.createElement("div",{className:"CallSettings__block"},a.createElement("div",{className:"CallSettings__label"},P("calls_settings_mic")),S?a.createElement(o.default,{options:n.map(m),value:h,onChange:function(e){var t=e.selected;return b(t.value)},appearance:"secondary",className:"CallSettings__field"}):a.createElement(i.default,{className:"CallSettings__field"},P("calls_settings_no_mic"))),D&&a.createElement("div",{className:"CallSettings__block"},a.createElement("div",{className:"CallSettings__label"}),a.createElement(p.default,{className:"CallSettings__field",onChange:N,checked:k},P("calls_settings_push_to_talk_mode_description")),a.createElement(c.default,{className:"CallSettings__tooltip",text:P("calls_settings_push_to_talk_mode_hint"),position:"t",appearance:"light",maxWidth:320},a.createElement(s.default,{className:"CallSettings__hint","aria-label":P("calls_settings_push_to_talk_mode_hint")}))),a.createElement("div",{className:"CallSettings__block"},a.createElement("div",{className:"CallSettings__label"},a.createElement("span",{dangerouslySetInnerHTML:{__html:P("calls_settings_noise")}})),S?a.createElement(o.default,{options:u,value:v,onChange:function(e){var t=e.selected;return T(t.value)},appearance:"secondary",className:"CallSettings__field"}):a.createElement(i.default,{className:"CallSettings__field"},P("calls_settings_no_mic")),a.createElement(c.default,{className:"CallSettings__tooltip",text:P("calls_settings_noise_description"),position:"t",appearance:"light",maxWidth:320},a.createElement(s.default,{className:"CallSettings__hint","aria-label":P("calls_settings_noise_description")}))))}function m(e){return{value:e.deviceId,label:e.label}}function _(e){var t=e.kind,n=e.resolution,o=e.mediaElRef,i=e.streamRef,l=e.deviceId,s=e.isActive,c={video:!1,audio:!1},d={deviceId:l};"video"===t&&n&&(d.width={min:428,max:u.VideoWidth[n]||u.VideoWidth.SD,ideal:u.VideoWidth[n]||u.VideoWidth.SD},d.height={min:240,max:u.VideoHeight[n]||u.VideoHeight.SD,ideal:u.VideoHeight[n]||u.VideoHeight.SD}),(0,a.useEffect)((function(){var e;s&&navigator.mediaDevices.getUserMedia((0,r.__assign)((0,r.__assign)({},c),(e={},e[t]=d,e))).then((function(e){var t=i.current;t&&t.getTracks().forEach((function(e){return e.stop()}));var n=o.current;n&&(i.current=e,n.srcObject=e,n.volume=0,n.play())})).catch((function(e){console.error("Error occurred: "+e)}))}),[l,s,n]),(0,a.useEffect)((function(){return function(){var e=i.current;e&&e.getTracks().forEach((function(e){return e.stop()}));var t=o.current;t&&(t.srcObject=null)}}),[])}},555700:(e,t,n)=>{"use strict";n.d(t,{CallSettingsModal:()=>l});var r=n(667294),a=n(7692),o=n(881150),i=n(662208);function l(e){var t=e.onClose,n=e.onSubmit,l=e.children,s=r.useContext(i.LangContext).getLang;return r.createElement(a.default,{onClose:t,title:s("calls_settings"),appearance:"blue",actionButtons:r.createElement(r.Fragment,null,r.createElement(o.default,{onClick:t,appearance:"tertiary"},s("calls_cancel")),r.createElement(o.default,{onClick:n},s("calls_save"))),className:"CallSettingsModal"},l)}},52777:(e,t,n)=>{"use strict";n.d(t,{CallTimer:()=>a});var r=n(667294),a=function(e){var t=e.duration;return r.createElement("div",{className:"CallTimer","aria-label":t,"data-duration":t})}},180474:(e,t,n)=>{"use strict";n.d(t,{CallVideoWidget:()=>f});var r=n(570655),a=n(667294),o=n(423197),i=n(838482),l=n(995141),s=n(952152),c=n(75794),u=n(662208),d=n(464380),p=n(32491),f=function(e){var t=e.localVideoStream,n=e.isLocalAudioEnabled,f=e.isLocalAudioAllowed,m=e.isLocalScreenSharing,_=e.participantId,g=e.isMe,h=void 0!==g&&g,v=e.isWithVideo,A=e.isWithAudio,E=e.isScreenSharing,C=e.stream,y=e.photo,S=e.name,w=e.status,b=void 0===w?d.ParticipantStatus.CONNECTED:w,T=e.networkStatus,I=e.onRestoreCall,k=e.onToggleAudio,N=e.children,P=a.useContext(u.LangContext).getLang,D=(0,r.__read)((0,a.useState)(!1),2),M=D[0],L=D[1],O=(0,p.useVideoOptions)().storedVideoOptions;(0,a.useEffect)((function(){t||L(!1)}),[t,M]);var R=(0,a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),I()}),[I]),x=(0,a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),k&&k()}),[k]);return a.createElement("div",{className:"CallVideoWidget",onClick:I},t&&a.createElement(s.Video,{className:"CallVideoWidget__local",stream:t,isMirrored:!m&&O[p.EVideoOptionType.IS_VIDEO_MIRRORED],isContained:!1,isStartWithVisible:!0}),a.createElement(c.Participant,{id:_,hasVideo:v,hasAudio:A,isSharingScreen:E,isMe:h,stream:C,photo:y,name:S,status:b,allowContain:!1,networkStatus:T}),N,a.createElement(o.CallIconButtonGroup,{alignX:"l",alignY:"b",size:"s",className:"CallVideoWidget__buttons"},a.createElement(i.default,{position:"t",align:"left",marginTop:6,text:P(n?"calls_mute":"calls_unmute")},a.createElement(l.CallIconButton,{type:n?"mute":"unmute",onClick:x,disabled:!f}))),a.createElement(o.CallIconButtonGroup,{alignX:"r",alignY:"b",size:"s",className:"CallVideoWidget__buttons"},a.createElement(i.default,{position:"t",align:"right",text:P("calls_restore"),marginTop:6},a.createElement(l.CallIconButton,{type:"restore",onClick:R}))))}},400412:(e,t,n)=>{"use strict";n.d(t,{CallWidget:()=>i});var r=n(667294),a=n(853055),o=n(279060),i=function(e){var t=e.id,n=e.photo,i=e.title,l=e.status,s=e.isIncoming,c=e.onClick,u=e.children;return r.createElement("div",{className:"CallWidget",onClick:c},r.createElement(a.BlurredBackground,{id:t,className:"CallWidget__background"}),r.createElement(o.CallPhoto,{id:t,photo:n,waves:s,alt:i||"",className:"CallWidget__photo"}),r.createElement("h1",{className:"CallWidget__name"},i),r.createElement("div",{className:"CallWidget__status"},l),u)}},647686:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(667294),a=n(659397);function o(e){var t=e.isInverted,n=(0,a.classNames)("CallingStatus",{"CallingStatus--inverted":!!t}),o=(0,a.classNames)("CallingStatus__part","CallingStatus__part--withAnimation");return r.createElement("div",{className:n},r.createElement("span",{className:o}),r.createElement("span",{className:o}),r.createElement("span",{className:o}))}},722959:(e,t,n)=>{"use strict";n.d(t,{CallsDropdown:()=>l});var r=n(570655),a=n(667294),o=n(617841),i=n(659397),l=function(e){var t=e.children,n=e.items,l=e.open,s=void 0!==l&&l,c=e.setOpen,u=(0,a.useRef)(null),d=(0,a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),c(!s)}),[s]),p=function(e){u.current&&u.current.contains(e.target)||c(!1)};return(0,a.useEffect)((function(){return s?document.documentElement.addEventListener("click",p,!0):document.documentElement.removeEventListener("click",p,!0),function(){return document.documentElement.removeEventListener("click",p,!0)}}),[s]),s?a.createElement(o.Popper,{content:a.createElement("ul",{className:"CallsDropdown",ref:u},n.map((function(e,t,n){return a.createElement("li",{className:"CallsDropdown__item",key:e.key||t},"separator"in e?(r=!t||n.length-1===t,a.createElement("div",{className:(0,i.classNames)({CallsDropdown__separator:!r})})):function(e,t,n){void 0===n&&(n=!1);var r=(0,i.classNames)("CallsDropdown__button",{"CallsDropdown__button--disabled":n});return"href"in e&&"onClick"in e&&void 0!==e.onClick?a.createElement("a",{href:e.href,rel:"noopener noreferrer",target:"_blank",onClick:n?void 0:function(n){n.stopPropagation(),e.onClick(n),t(!1)},className:r},e.text):"href"in e?a.createElement("a",{href:e.href,rel:"noopener noreferrer",target:"_blank",onClick:n?void 0:function(e){e.stopPropagation(),t(!1)},className:r},e.text):"onClick"in e?a.createElement("button",{onClick:n?void 0:function(n){n.stopPropagation(),e.onClick(n),t(!1)},className:r},e.text):null}(e,c,e.disabled));var r}))),mode:"point"},a.cloneElement(t,(0,r.__assign)((0,r.__assign)({},t.props),{onClick:d,"data-active":s}))):a.cloneElement(t,(0,r.__assign)((0,r.__assign)({},t.props),{onClick:d}))}},587551:(e,t,n)=>{"use strict";n.d(t,{CallsMultiSelect:()=>i});var r=n(667294),a=n(167578),o=n(662208),i=function(e){var t=e.tokens,n=e.onRemoveToken,i=e.value,l=e.onChange,s=e.onSelect,c=e.renderSuggest,u=e.data,d=r.useContext(o.LangContext).getLang;return r.createElement(a.default,{className:"CallsMultiSelect",tokens:t,removeTokenPlaceholder:d("calls_remove_token"),onRemoveToken:n,placeholder:d("calls_search_participants_placeholder"),value:i,onChange:l,onSelect:s,useInfiniteScroll:!1,hasMore:!1,virtualized:!1,loadMore:function(){},notFoundText:d("calls_participants_not_found"),autoFocus:!0,isSearching:!1,renderSuggest:c,data:u})}},152205:(e,t,n)=>{"use strict";n.d(t,{CallsSearchResult:()=>d});var r=n(667294),a=n(295886),o=n(750598),i=n(677247),l=n(121255),s=n(956462),c=n(881150),u=n(780573),d=function(e){var t=e.data,n=e.onClick,d=e.selected,p=e.disabled;if("type"in t)switch(t.type){case l.SearchResultType.HEADER:return r.createElement(a.ListHeader,{className:"CallsSearchResult CallsSearchResult--header",extra:t.count},t.text);case l.SearchResultType.CALL_ALL_IN_CHAT:return r.createElement("div",{className:"CallsSearchResult CallsSearchResult--select"},r.createElement(c.default,{appearance:"secondary",wide:!0,onClick:n},r.createElement("span",{className:"CallsSearchResult__icon"},r.createElement(u.PhoneIconS,null)),t.text));case l.SearchResultType.MEMBERS_MORE:case l.SearchResultType.FRIENDS_MORE:case l.SearchResultType.GROUP_MEMBERS_MORE:return r.createElement(s.ListMore,{onClick:n},t.text)}return r.createElement(o.default,{"data-id":t.peerId,onClick:n,selectable:!p},r.createElement(i.ParticipantSuggest,{member:t,selected:d,disabled:p}))}},884609:(e,t,n)=>{"use strict";n.d(t,{ChatIconButton:()=>l});var r=n(570655),a=n(667294),o=n(659397),i=n(498110),l=(0,a.forwardRef)((function(e,t){var n=e.unreadCount,l=void 0===n?0:n,s=(0,r.__rest)(e,["unreadCount"]),c=(0,a.useContext)(i.ConfigContext).withAnimation,u="",d="";switch(!0){case!l:u="none";break;case l<=9:u="single",d=l.toString();break;case l<=99:u="double",d=l.toString();break;case l>99:u="max",d="99+"}var p=(0,o.classNames)("ChatIconButton","ChatIconButton--"+u,{"ChatIconButton--withAnimation":c});return a.createElement("button",(0,r.__assign)({className:p},s,{ref:t}),d&&a.createElement("div",{className:"ChatIconButton__count "},d))}))},275109:(e,t,n)=>{"use strict";n.d(t,{CollapsedCall:()=>i});var r=n(667294),a=n(498110),o=n(659397),i=function(e){var t=e.children,n=(0,r.useContext)(a.ConfigContext).withAnimation,i=(0,o.classNames)("CollapsedCall",{"CollapsedCall--withAnimation":n});return r.createElement("div",{className:i},t)}},614183:(e,t,n)=>{"use strict";n.d(t,{CreateCallByLinkModal:()=>g});var r=n(667294),a=n(138671),o=n(838480),i=n(774415),l=n(662208),s=n(670546),c=n(750598),u=n(277256),d=n(539503),p=n(560301),f=n(625920),m=n(599318),_=n(460851),g=function(e){var t=e.actionButtons,n=e.onClose,g=e.ownerOptions,h=e.selectedOwnerId,v=e.waitingHall,A=e.allowAnon,E=e.onGroupSelectChange,C=e.onChangeWaitingHall,y=e.onChangeAllowAnon,S=r.useContext(l.LangContext).getLang;return r.createElement(a.default,{className:"CreateCallByLinkModal",onClose:n},r.createElement(o.ModalHeader,{title:S("calls_create_call_by_link_title"),onClose:n}),r.createElement("div",{className:"CreateCallByLinkModal__content"},r.createElement("div",{className:"CreateCallByLinkModal__description"},S("calls_create_call_by_link_description")),r.createElement(s.default,null,r.createElement(c.default,{border:!0,canBeHovered:!1,selectable:!1,icon:r.createElement(f.CreateCallUserIcon,null),aside:r.createElement(d.default,{className:"CreateCallByLinkModalOptions__longselect",options:g,value:h,onChange:E,disabled:g.length<=1})},S("calls_create_call_by_link_by_name")),r.createElement(p.ListItemWithHint,{canBeHovered:!1,onClick:C,icon:r.createElement(m.CreateCallWaitingHallIcon,null),hint:S("calls_menu_waiting_hall_description"),aside:r.createElement(u.default,{onChange:C,checked:v})},S("calls_menu_waiting_hall_title")),r.createElement(p.ListItemWithHint,{canBeHovered:!1,onClick:y,icon:r.createElement(_.CreateCallAnonymousIcon,null),hint:S("calls_create_call_by_link_anon_hint"),aside:r.createElement(u.default,{onChange:y,checked:A})},S("calls_create_call_by_link_anon")))),r.createElement(i.ModalFooter,{actionButtons:t}))}},462176:(e,t,n)=>{"use strict";n.d(t,{CurrentCallsList:()=>i});var r=n(667294),a=n(670546),o=n(423753),i=function(e){var t=e.currentCalls,n=e.onJoin,i=e.listItemBorder,l=void 0===i||i;return t.length?r.createElement(a.default,{border:!1},t.map((function(e,t){return r.createElement(o.CurrentCallsListItem,{key:t,listItemBorder:l,call:e,onJoin:n})}))):r.createElement(r.Fragment,null)}},423753:(e,t,n)=>{"use strict";n.d(t,{CurrentCallsListItem:()=>_});var r=n(570655),a=n(667294),o=n(662208),i=n(121255),l=n(279060),s=n(881150),c=n(613335),u=n(750598),d=n(248586),p=n(622206),f=n(50533),m=n(171659);var _=function(e){var t=e.call,n=e.onJoin,_=e.listItemBorder,g=void 0===_||_,h=(0,f.useSelector)((function(e){return e})).profiles,v=a.useContext(o.LangContext),A=v.getLang,E=v.langNumeric,C=(0,m.getCurrentCallOwner)(t,h),y=C.member,S=C.chat,w=(0,a.useMemo)((function(){var e,n,a=S?function(e){var t=e.title,n=void 0===t?"":t,r=e.photo_100,a=void 0===r?"":r,o=e.id,i=void 0===o?0:o;return{title:n,photo:a,href:i?"/im?sel=c"+i:"",id:i}}(S):y?function(e){var t=e.name,n=void 0===t?"":t,r=e.photo,a=void 0===r?"":r,o=e.link,i=void 0===o?"":o,l=e.id,s=void 0===l?0:l;return{title:n,photo:a,href:i||"/im?sel=c"+s,id:s}}(y):{},o=a.id,i=void 0===o?0:o,l=a.title,s=void 0===l?"":l,u=a.photo,d=void 0===u?"":u,p=a.href,f=void 0===p?"":p,m=t.users_count,_=t.user_ids,g=t.join_link,v=void 0===g?"":g,C=E(m,"calls_history_members_count",A("calls_history_members_count",m)).replace("%n",String(m)),w=_.slice(0,3),b=[];try{for(var T=(0,r.__values)(w),I=T.next();!I.done;I=T.next()){var k=I.value;k in h&&b.push((0,c.getMemberForUserStack)(h[k]))}}catch(t){e={error:t}}finally{try{I&&!I.done&&(n=T.return)&&n.call(T)}finally{if(e)throw e.error}}return{id:i,title:s,photo:d,href:f,description:C,join_link:v,avatarItems:b}}),[S,t,y,h]),b=w.id,T=w.title,I=w.photo,k=w.href,N=w.description,P=w.avatarItems,D=w.join_link;return y||S?a.createElement(u.default,{border:g,className:"CurrentCallsListItem",key:b,selectable:!1,canBeHovered:!1,aside:a.createElement(a.Fragment,null,P.length>0&&a.createElement("div",{className:"CurrentCallsListItem--avatarStack"},a.createElement(p.AvatarsStackNoSvg,{size:p.AvatarsStackNoSvgSizes.SIZE_24,items:P})),a.createElement(s.default,{size:"s",onClick:function(){return n(D,b,i.CallStatSource.HISTORY)}},A("calls_history_join_call_button")))},a.createElement(d.default,{photo:a.createElement(l.CallPhoto,{id:b,photo:I,alt:T,size:"34"}),title:T,href:k,description:N,target:"_blank"})):a.createElement(a.Fragment,null)}},487318:(e,t,n)=>{"use strict";n.d(t,{DeleteCallModal:()=>i});var r=n(667294),a=n(7692),o=n(662208),i=function(e){var t=e.onClose,n=e.actionButtons,i=e.text,l=(0,r.useContext)(o.LangContext).getLang;return r.createElement(a.default,{className:"DeleteCallModal",title:l("calls_history_delete_modal_title"),actionButtons:n,onClose:t,appearance:"blue",hasScroll:!1},r.createElement("div",{className:"DeleteCallModal__content"},i))}},952907:(e,t,n)=>{"use strict";n.d(t,{ErrorPopupText:()=>a});var r=n(667294),a=function(e){var t=e.children;return r.createElement("div",{className:"ErrorPopupText"},t)}},501451:(e,t,n)=>{"use strict";n.d(t,{Fade:()=>o});var r=n(667294),a=n(429697),o=function(e){var t=e.children,n=e.open,o=(0,r.useMemo)((function(){return{enter:"CallsFadeComponent--enter",enterActive:"CallsFadeComponent--enterActive",exit:"CallsFadeComponent--exit",exitActive:"CallsFadeComponent--exitActive"}}),[]);return r.createElement(a.default,{timeout:300,in:n,mountOnEnter:!0,unmountOnExit:!0,classNames:o},t)}},25947:(e,t,n)=>{"use strict";n.d(t,{FeedbackScreen:()=>i});var r=n(667294),a=n(662208),o=n(881150),i=function(e){var t=e.title,n=e.children,i=e.sendButtonClick,l=e.skipButtonClick,s=e.sendButtonDisabled,c=void 0===s||s,u=r.useContext(a.LangContext).getLang;return r.createElement("div",{className:"FeedbackScreen"},r.createElement("div",{className:"FeedbackScreen__close",onClick:l}),r.createElement("div",{className:"FeedbackScreen__title"},t),n,r.createElement("div",{className:"FeedbackScreen__actions"},r.createElement(o.default,{appearance:"overlay_secondary",onClick:l},u("calls_feedback_skip")),r.createElement(o.default,{appearance:"overlay_primary",onClick:i,disabled:c},u("calls_feedback_send"))))}},789241:(e,t,n)=>{"use strict";n.d(t,{IncomingCall:()=>u});var r=n(667294),a=n(853055),o=n(279060),i=n(782117),l=n(995141),s=n(838482),c=n(662208);function u(e){var t=e.id,n=e.photo,u=e.title,d=e.description,p=e.onCollapseCall,f=e.children,m=r.useContext(c.LangContext).getLang;return r.createElement("section",{className:"IncomingCall"},r.createElement(a.BlurredBackground,{id:t}),r.createElement(s.default,{position:"b",text:m("calls_collapse"),marginTop:-6},r.createElement(l.CallIconButton,{type:"collapse",className:"IncomingCall__collapse",onClick:p})),r.createElement(i.IncomingCallHeader,{title:u,description:d}),r.createElement(o.CallPhoto,{id:t,waves:!0,photo:n,alt:u||"",className:"IncomingCall__photo"}),r.createElement("footer",{className:"IncomingCall__footer"},f))}},782117:(e,t,n)=>{"use strict";n.d(t,{IncomingCallHeader:()=>o});var r=n(667294),a=n(659397);function o(e){var t=e.title,n=e.description,o=e.className;return r.createElement("header",{className:(0,a.classNames)("IncomingCallHeader",o)},r.createElement("h1",{className:"IncomingCallHeader__title"},t),r.createElement("div",{className:"IncomingCallHeader__description"},n))}},991989:(e,t,n)=>{"use strict";n.d(t,{JoinHeader:()=>a});var r=n(667294),a=function(e){var t=e.children;return r.createElement("h2",{className:"JoinHeader"},t)}},991390:(e,t,n)=>{"use strict";n.d(t,{JoinScreen:()=>_});var r=n(667294),a=n(991989),o=n(685537),i=n(881150),l=n(168634),s=n(780573),c=n(595775),u=n(659397),d=n(196287),p=n(590439),f=n(670546),m=n(750598),_=function(e){var t=e.isAnonym,n=e.title,_=e.label,g=e.items,h=e.onChangeName,v=e.name,A=e.namePlaceholder,E=e.joinWithVideoText,C=e.joinWithAudioText,y=e.onJoinWithVideo,S=e.onJoinWithAudio,w=e.disabled,b=e.inputDisabled,T=e.callByNameShow,I=e.onCallByNameClick,k=e.onCallViaNativeAppClick,N=e.callViaNativeAppShow,P=e.callByNameTitle,D=e.callViaNativeAppTitle;return r.createElement("div",{className:(0,u.classNames)("JoinScreen",{"JoinScreen--anonym":t})},r.createElement(a.JoinHeader,null,n),r.createElement("div",{className:"JoinScreen__members"},r.createElement(o.AvatarsStack,{items:g}),r.createElement("div",{className:"JoinScreen__membersLabel"},_)),r.createElement("footer",{className:"JoinScreen__footer"},t&&r.createElement(c.default,{onChange:h,className:"JoinScreen__input",value:v,placeholder:A,disabled:b,maxLength:25,onKeyDown:function(e){"Enter"===e.key&&y()}}),r.createElement(i.default,{appearance:"primary",onClick:y,disabled:w,type:"submit"},r.createElement(l.VideoIconS,{className:"JoinScreen__icon"}),r.createElement("span",null,E)),r.createElement(i.default,{appearance:"primary",title:C,"aria-label":C,onClick:S,disabled:w},r.createElement(s.PhoneIconS,{className:"JoinScreen__icon"}))),(T||N)&&r.createElement(f.default,{border:!1,className:"JoinScreen__options"},N&&r.createElement(m.default,{border:!1,selectable:!0,chevron:!0,onClick:k,icon:r.createElement(d.default,{className:"JoinScreen__optionIcon"})},D),T&&r.createElement(m.default,{border:!1,selectable:!0,chevron:!0,onClick:I,icon:r.createElement(p.default,{className:"JoinScreen__optionIcon"})},P)))}},963985:(e,t,n)=>{"use strict";n.d(t,{KickParticipantModal:()=>c});var r=n(570655),a=n(667294),o=n(7692),i=n(662208),l=n(731585),s=n(498110),c=function(e){var t=e.onClose,n=e.actionButtons,c=e.onAllowReconnectChange,u=e.description,d=e.allowBan,p=e.banText,f=(0,a.useContext)(i.LangContext).getLang,m=(0,a.useContext)(s.ConfigContext).allowBanParticipant,_=(0,r.__read)((0,a.useState)(!0),2),g=_[0],h=_[1],v=(0,a.useCallback)((function(e,t){c&&c(t),h(t)}),[]);return a.createElement(o.default,{className:"KickParticipantModal",appearance:"blue",title:f("calls_kick_participant_title"),actionButtons:n,onClose:t,hasScroll:!1},a.createElement("div",{className:"KickParticipantModal__content"},u,m&&d&&a.createElement("div",null,a.createElement(l.default,{className:"KickParticipantModal__checkbox",onChange:v,checked:g},p))))}},560301:(e,t,n)=>{"use strict";n.d(t,{ListItemWithHint:()=>l});var r=n(570655),a=n(667294),o=n(750598),i=n(911099),l=function(e){var t=e.hint,n=e.className,l=e.children,s=(0,r.__rest)(e,["hint","className","children"]),c=!!t,u={"ListItem--withHint":c};return a.createElement(o.default,(0,r.__assign)({},s,{className:(0,i.classNames)(u,n)}),l,c&&a.createElement("div",{className:"ListItem--hint"},t))}},112877:(e,t,n)=>{"use strict";n.d(t,{MicIconWithSpeakingIndicator:()=>o});var r=n(667294),a=n(911099),o=function(){var e=(0,a.classNames)({MicIconWithSpeakingIndicator__scale:!0});return r.createElement("svg",{height:"20",width:"16",xmlns:"http://www.w3.org/2000/svg",className:"MicIconWithSpeakingIndicator"},r.createElement("mask",{id:"MicIconWithSpeakingIndicatorMask"},r.createElement("path",{d:"M8 0a4 4 0 00-4 4v5a4 4 0 008 0V4a4 4 0 00-4-4z"})),r.createElement("path",{d:"M1.1 10c-.55 0-.98.49-.84 1.02a8 8 0 006.84 5.93v2.15a.9.9 0 101.8 0v-2.15a8 8 0 006.84-5.93c.14-.53-.29-1.02-.84-1.02-.45 0-.83.33-.95.76a6.2 6.2 0 01-11.9 0c-.12-.43-.5-.76-.95-.76z"}),r.createElement("g",{mask:"url(#MicIconWithSpeakingIndicatorMask)"},r.createElement("g",{className:e},r.createElement("path",{d:"M8 0a4 4 0 00-4 4v7h8V4a4 4 0 00-4-4z"}),r.createElement("path",{d:"M8 7a4 4 0 00-4 4v5a4 4 0 008 0v-5a4 4 0 00-4-4z",className:"MicIconWithSpeakingIndicator__filled"}))))}},467667:(e,t,n)=>{"use strict";n.d(t,{MuteParticipantModal:()=>i});var r=n(667294),a=n(7692),o=n(731585),i=function(e){var t=e.onClose,n=e.onUnmuteToggle,i=e.allowUnmute,l=e.unmuteToggleDisabled,s=e.actionButtons,c=e.title,u=e.description,d=e.toggleSign;return r.createElement(a.default,{className:"MuteParticipantModal",appearance:"blue",title:c,actionButtons:s,onClose:t},r.createElement("div",{className:"MuteParticipantModal__content"},u,r.createElement(o.default,{className:"MuteParticipantModal__checkbox",onChange:n,checked:i,disabled:l},d)))}},827244:(e,t,n)=>{"use strict";n.d(t,{NotificationDesktopApp:()=>p});var r=n(667294),a=n(700881),o=n(881150),i=n(662208),l=n(153907),s=n(121255),c=n(610781),u=n(865203),d=n(233194),p=function(e){var t=e.onClose,n=r.useContext(i.LangContext).getLang,p=(0,l.getPlatformUrl)(),f=d.Platform.OS===d.OS.MAC?"macOS":d.Platform.OS===d.OS.WINDOWS?"Windows":null,m=f?n("calls_notification_native_app_button_for").replace("{name}",f):n("calls_notification_native_app_button");return r.createElement("div",{className:"NotificationDesktopApp"},r.createElement(a.default,{className:"NotificationDesktopApp--close",onClick:t,width:16,height:16}),r.createElement(c.DesktopAppIcon,{className:"NotificationDesktopApp--icon"}),r.createElement("span",{className:"NotificationDesktopApp--text"},n("calls_notification_native_app_text")),null!==f&&r.createElement(o.default,{onClick:function(){p&&(0,l.download)(p.url,p.filename),t()},appearance:"overlay_primary",className:"NotificationDesktopApp--button"},m," ",r.createElement(u.AngleIcon,{className:"NotificationDesktopApp--angleIcon"})),null===f&&r.createElement("a",{href:s.DESKTOP_CALLS_DOWNLOAD_PAGE,rel:"noopener noreferrer",target:"_blank",className:"NotificationDesktopApp--button"},m," ",r.createElement(u.AngleIcon,{className:"NotificationDesktopApp--angleIcon"})))}},170181:(e,t,n)=>{"use strict";n.d(t,{NotificationWithButton:()=>o});var r=n(667294),a=n(659397),o=function(e){var t=e.children,n=e.className,o=(0,a.classNames)("NotificationWithButton",n);return r.createElement("div",{className:o},t)}},242422:(e,t,n)=>{"use strict";n.d(t,{OneToOne:()=>i});var r=n(667294),a=n(659397),o=n(75794),i=function(e){var t=e.id,n=e.name,i=e.letter,l=e.hasAudio,s=e.hasVideo,c=e.isSharingScreen,u=e.stream,d=e.wasConnected,p=e.networkStatus,f=e.opponentId,m=e.opponentHasAudio,_=e.opponentHasVideo,g=e.opponentIsSharingScreen,h=e.opponentStream,v=e.opponentPhoto,A=e.opponentName,E=e.opponentWasConnected,C=e.opponentNetworkStatus,y=(0,a.classNames)("OneToOne",{"OneToOne--hasVideo":s,"OneToOne--opponentHasVideo":_});return r.createElement("div",{className:y},r.createElement("aside",{className:"OneToOne__local"},r.createElement(o.Participant,{id:t,hasVideo:s,hasAudio:l,isSharingScreen:c,stream:u,isMe:!0,name:n,letter:i,wasConnected:d,allowContain:!0,networkStatus:p})),r.createElement("main",{className:"OneToOne__remote"},r.createElement(o.Participant,{id:f,hasVideo:_,hasAudio:m,isSharingScreen:g,stream:h,photo:v,name:A,allowContain:!0,wasConnected:E,networkStatus:C})))}},766610:(e,t,n)=>{"use strict";n.d(t,{OratorTitle:()=>u});var r=n(667294),a=n(641221),o=n(662208),i=n(297627),l=n(722254),s=n(86339),c=n(607350),u=(0,r.memo)((function(e){var t,n,u,d,p,f=e.orator,m=e.me,_=e.isPinned,g=e.isPinnedByAdmin,h=e.isPinnedByShareScreen,v=e.isUnpinAllowed,A=e.onTooltipChange,E=e.onUnpin,C=e.tooltips,y=(0,r.useContext)(o.LangContext).getLang,S=g||h||_,w=(0,r.useCallback)((function(){A("oratorPin",!1),E()}),[E]),b=(0,r.useCallback)((function(){return A("oratorPin",!0)}),[]),T=(0,r.useCallback)((function(){return A("oratorPin",!1)}),[]),I=(f.wasConnected||f.peerId===m)&&!(null===(t=f.mediaSettings)||void 0===t?void 0:t.isAudioEnabled),k=null===(n=f.mediaSettings)||void 0===n?void 0:n.isScreenSharingEnabled,N=f.shortName||f.name,P=f.shortNameGen||f.shortName||f.name,D=((null===(u=f.mediaSettings)||void 0===u?void 0:u.isAudioEnabled)||(null===(d=f.mediaSettings)||void 0===d?void 0:d.isScreenSharingEnabled)||(null===(p=f.mediaSettings)||void 0===p?void 0:p.isVideoEnabled))&&f.networkStatus<.6,M=r.createElement(r.Fragment,null,D&&r.createElement(i.default,{fill:f.networkStatus<=.3?"#ff5c5c":"#FECE00"}),k&&r.createElement("span",{className:"OratorTitle__additionInfo"},y("calls_orator_screen_sharing")),k?P:N,I&&r.createElement(l.default,null),g&&r.createElement(s.default,null),!g&&(h||_)&&r.createElement(c.default,null));return S?r.createElement(a.TooltipNew,{position:"b",align:"center",content:y(g&&v?"calls_hint_admin_pin_for_admin":g?"calls_hint_admin_pin_for_user":"calls_hint_user_pin"),open:C.oratorPin,delay:300,onOpen:b,onClose:T},r.createElement("button",{className:"OratorTitle OratorTitle--button",onClick:w,disabled:!v},M)):r.createElement("div",{className:"OratorTitle"},M)}))},75794:(e,t,n)=>{"use strict";n.d(t,{Participant:()=>C});var r=n(570655),a=n(667294),o=n(853055),i=n(952152),l=n(659397),s=n(595285),c=n(830810),u=n(722959),d=n(662208),p=n(711034),f=n(498110),m=n(697483),_=n(122317),g=n(647686),h=n(464380),v=n(297627),A=n(279060),E=n(32491),C=(0,a.memo)((function(e){var t=e.id,n=e.isVisible,C=void 0===n||n,y=e.isOrator,S=void 0!==y&&y,w=e.isInfoShown,b=e.isPinned,T=e.isPinnedByAdmin,I=e.isHandRaised,k=e.photo,N=e.hasVideo,P=e.hasAudio,D=e.isSharingScreen,M=e.isSpeaking,L=void 0!==M&&M,O=e.stream,R=void 0===O?null:O,x=e.isMe,B=void 0!==x&&x,H=e.name,U=e.letter,F=e.status,G=void 0===F?h.ParticipantStatus.CONNECTED:F,V=e.wasConnected,W=void 0===V||V,z=e.networkStatus,j=void 0===z?1:z,Y=e.onClickParticipant,K=e.onDblClickParticipant,Q=e.onStopScreenShare,q=e.allowContain,J=e.actions,X=a.useContext(d.LangContext).getLang,Z=(0,a.useContext)(f.ConfigContext),$=Z.withAnimation,ee=Z.anonymPhoto,te=a.useRef(null),ne=(0,m.isParticipantAnonym)(t),re=(0,E.useVideoOptions)().storedVideoOptions,ae=!!Y||!!K,oe=S&&D&&B,ie=(0,l.classNames)("Participant",{"Participant--isInteractive":ae,"Participant--isPinned":b,"Participant--isSpeaking":L,"Participant--isOrator":S,"Participant--withAnimation":$}),le=(0,l.classNames)("Participant__more",{"Participant__more--withAnimation":$}),se=(0,r.__read)(a.useState(!1),2),ce=se[0],ue=se[1],de=(0,a.useCallback)((function(e){Y&&Y(e,Number(t))}),[Y]),pe=(0,a.useCallback)((function(e){K&&K(e,t)}),[K]),fe=(0,l.classNames)({Participant__offsetCard:w,Participant__oratorPhoto:S});return a.createElement("article",{ref:te,className:ie,onClick:de,onDoubleClick:pe,"participant-id":String(t)},!C&&a.createElement(a.Fragment,null,a.createElement(o.BlurredBackground,{id:t,className:"Participant__main"},a.createElement(A.CallPhoto,{id:t,photo:!ee&&ne?"":k,alt:H||"",letter:U,className:fe})),w&&a.createElement("footer",{className:"Participant__footer"},a.createElement("span",{className:"Participant__name"},H),(W||B)&&!P&&a.createElement("span",{className:"Participant__statusIcon Participant__statusIcon--mic"}))),C&&a.createElement(a.Fragment,null,J&&J.length>0&&a.createElement(u.CallsDropdown,{items:J,open:ce,setOpen:ue},a.createElement("button",{className:le,"aria-label":X("calls_actions")},a.createElement(c.MoreIcon,null))),!(N&&S)&&a.createElement(o.BlurredBackground,{id:t,className:"Participant__main"},a.createElement(A.CallPhoto,{id:t,photo:!ee&&ne?"":k,alt:H||"",className:fe})),I&&a.createElement("div",{className:"Participant__handIndicator"},a.createElement(s.RaisedHandContourIcon,{className:"Participant__handIcon"})),oe&&a.createElement("div",{className:"Participant__screenSharer"},a.createElement(_.ShareScreenBigIcon,null),a.createElement("div",{className:"Participant__screenSharerText"},X("calls_you_are_screen_sharer")),a.createElement("button",{className:"Participant__screenSharerButton",onClick:Q},X("calls_screen_share_stop"))),R&&N&&!oe&&a.createElement(i.Video,{className:"Participant__main",stream:R,isMirrored:B&&!D&&re[E.EVideoOptionType.IS_VIDEO_MIRRORED],isContained:q||D,isStartWithVisible:B}),G!==h.ParticipantStatus.CONNECTED&&!B&&a.createElement("div",{className:"Participant__status"},a.createElement(g.default,{isInverted:!0})),!S&&w&&a.createElement("footer",{className:"Participant__footer"},(P||R||D)&&j<.6&&a.createElement(v.default,{fill:j<=.3?"#ff5c5c":"#FECE00"}),a.createElement("span",{className:"Participant__name"},H),(W||B)&&!P&&a.createElement("span",{className:"Participant__statusIcon Participant__statusIcon--mic"}))),!T&&b&&a.createElement("header",{className:"Participant__header"},a.createElement("div",{className:"Participant__pin"})),T&&a.createElement("header",{className:"Participant__header"},a.createElement(p.PinDotIcon,{className:"Participant__icon"})))}))},343379:(e,t,n)=>{"use strict";n.d(t,{ParticipantIconButton:()=>i});var r=n(667294),a=n(309605),o=n(494549),i=function(e){var t=e.participantCount,n=e.onClick,i=e.isParticipantControlActive,l=r.createElement(o.ParticipantsIcon,null);if(t&&t>0){var s="";(s=t>99?"99+":null==t?void 0:t.toString())&&(l=r.createElement("div",null,r.createElement("div",{className:"ParticipantIconButton__count"},s),l))}return r.createElement(a.CallButton,{type:i?a.CallButtonTypes.OFF:a.CallButtonTypes.ON,icon:l,onClick:n,className:"Call__footerButton"})}},51247:(e,t,n)=>{"use strict";n.d(t,{ParticipantIndicators:()=>d});var r=n(667294),a=n(659397),o=n(838482),i=n(647686),l=n(942775),s=n(135063),c=n(449587),u=n(662208),d=function(e){var t=e.showSpeaking,n=e.showAudioDisabled,d=e.showRaisedHand,p=e.showConnecting,f=e.showRaisedHandTooltip,m=e.onRaisedHandClick,_=(0,r.useContext)(u.LangContext).getLang,g=r.createElement("span",{className:(0,a.classNames)("ParticipantIndicators__item",{"ParticipantIndicators__item--interactive":void 0!==m}),onClick:null!=m?m:void 0},r.createElement(s.RaisedHandIconS,{className:"ParticipantIndicators__hand"}));return r.createElement("span",{className:"ParticipantIndicators"},t&&r.createElement("span",{className:"ParticipantIndicators__item"},r.createElement(c.VolumeMeterAnimation,null)),n&&r.createElement("span",{className:"ParticipantIndicators__item"},r.createElement(l.MutedMicIconS,{className:"ParticipantIndicators__muted"})),d?f?r.createElement(o.default,{className:"ParticipantIndicators__tooltip",text:_("calls_participant_menu_enable_media_request"),position:"t",align:"center",appearance:"light"},g):g:null,p&&r.createElement("span",{className:"ParticipantIndicators__item"},r.createElement(i.default,null)))}},707604:(e,t,n)=>{"use strict";n.d(t,{ParticipantLite:()=>d});var r=n(667294),a=n(853055),o=n(659397),i=n(711034),l=n(498110),s=n(697483),c=n(595285),u=n(279060),d=(0,r.memo)((function(e){var t=e.id,n=e.isInfoShown,d=e.isPinned,p=e.isPinnedByAdmin,f=e.isHandRaised,m=void 0!==f&&f,_=e.photo,g=e.hasAudio,h=e.isMe,v=void 0!==h&&h,A=e.name,E=e.letter,C=e.wasConnected,y=void 0===C||C,S=e.onClickParticipant,w=e.onDblClickParticipant,b=(0,r.useContext)(l.ConfigContext).anonymPhoto,T=r.useRef(null),I=(0,s.isParticipantAnonym)(t),k=(0,o.classNames)("Participant","Participant--withAnimation",{"Participant--isPinned":d}),N=(0,r.useCallback)((function(e){S&&S(e,Number(t))}),[S,t]),P=(0,r.useCallback)((function(e){w&&w(e,t)}),[w,t]);return r.createElement("article",{ref:T,className:k,onClick:N,onDoubleClick:P,"participant-id":String(t)},r.createElement(a.BlurredBackground,{id:t,className:"Participant__main"},r.createElement(u.CallPhoto,{id:t,photo:!b&&I?"":_,alt:A||"",letter:E,className:n?"Participant__offsetCard":""})),m&&r.createElement("div",{className:"Participant__handIndicator"},r.createElement(c.RaisedHandContourIcon,{className:"Participant__handIcon"})),n&&r.createElement("footer",{className:"Participant__footer"},r.createElement("span",{className:"Participant__name"},A),(y||v)&&!g&&r.createElement("span",{className:"Participant__statusIcon Participant__statusIcon--mic"})),!p&&d&&r.createElement("header",{className:"Participant__header"},r.createElement("div",{className:"Participant__pin"})),p&&r.createElement("header",{className:"Participant__header"},r.createElement(i.PinDotIcon,{className:"Participant__icon"})))}))},95939:(e,t,n)=>{"use strict";n.d(t,{ParticipantMenu:()=>i});var r=n(667294),a=n(919535),o=n(309739),i=function(e){var t=e.position,n=e.align,i=e.trigger,l=e.marginTop,s=e.marginLeft,c=e.actions;return c.length>0?r.createElement(o.default,{position:t,align:n,trigger:i,marginTop:l,marginLeft:s,className:"ParticipantMenu__dropdown",data:c},r.createElement(a.ListActionsControl,null)):null}},677247:(e,t,n)=>{"use strict";n.d(t,{ParticipantSuggest:()=>i});var r=n(667294),a=n(248586),o=n(659397);function i(e){var t=e.member,n=e.selected,i=void 0!==n&&n,l=e.disabled,s=void 0!==l&&l,c=(0,o.classNames)("ParticipantSuggest",{"ParticipantSuggest--selected":i,"ParticipantSuggest--disabled":s});return r.createElement("div",{className:c,"data-id":t.id},r.createElement(a.default,{size:"34",title:t.name,photo:t.photo}))}},338374:(e,t,n)=>{"use strict";n.d(t,{TransferAdminRightsModal:()=>g});var r=n(667294),a=n(50533),o=n(881150),i=n(138671),l=n(838480),s=n(774415),c=n(662208),u=n(670546),d=n(295886),p=n(750598),f=n(248586),m=n(595775),_=n(884143),g=function(e){var t=e.participants,n=e.selected,g=e.onSelect,h=e.onClose,v=e.onCallForceFinish,A=e.onRightsTransfer,E=e.onSearch,C=(0,r.useContext)(c.LangContext).getLang,y=(0,a.useSelector)((function(e){return e.me}));return r.createElement(i.default,{className:"TransferAdminRightsModal",disableBodyScroll:!1,onClose:h},r.createElement(l.ModalHeader,{title:C("calls_dialog_creator_exit_title"),onClose:h}),r.createElement("div",{className:"TransferAdminRightsModal__content"},r.createElement(m.default,{onChange:function(e){return E(e.target.value)},placeholder:C("calls_search_participants_placeholder"),className:"TransferAdminRightsModal__searchInput"}),r.createElement(u.default,{border:!1},r.createElement(d.ListHeader,{extra:t.length},C("calls_call_participants")),0===t.filter((function(e){return e.peerId!==y})).length&&r.createElement(_.default,null,C("calls_participants_not_found")),t.filter((function(e){return e.peerId!==y})).map((function(e){return r.createElement(p.default,{key:e.peerId,className:"TransferAdminRightsModal__item",onClick:function(){return g(n!==e.peerId?e:null)},aside:r.createElement("span",{className:"TransferAdminRightsModal__label","aria-selected":n===e.peerId},n===e.peerId?C("calls_dialog_creator_exit_selected"):C("calls_dialog_creator_exit_select"))},r.createElement(f.default,{size:"34",title:e.name,photo:e.photo}))})))),r.createElement(s.ModalFooter,{actionButtons:[r.createElement(o.default,{key:"force",appearance:"secondary",onClick:v},C("calls_force_call_finish")),r.createElement(o.default,{key:"action",onClick:A},C(null===n?"calls_leave_call":"calls_dialog_creator_exit_action"))]}))}},958713:(e,t,n)=>{"use strict";n.d(t,{TranslationCreateForm:()=>y});var r,a,o=n(570655),i=n(667294),l=n(595775),s=n(244809),c=n(662208),u=n(942019),d=n(750598),p=n(448625),f=n(670546),m=n(539503),_=n(823694),g=n(449608),h=n(329538),v=n(326542),A=n(874023),E=n(613335),C=n(50533);function y(e){var t=e.onSubmit,n=e.onClose,y=(0,i.useContext)(c.LangContext),S=y.getLang,w=y.langShortDateTime,b=(0,C.useSelector)((function(e){return e})),T=function(){var e=(new Date).toISOString().split("T")[0];return S("calls_translation_title_default_value").replace("%s",e)},I=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=""),{id:e,name:t,photo:n,isGroup:e<0}},k=function(e){var t=[{value:r.ONLY_ME,label:S("calls_translation_privacy_only_me_and_chat")},{value:r.FRIENDS,label:S("calls_translation_privacy_friends_and_chat")}];return e&&t.push({value:r.ALL,label:S("calls_translation_privacy_all_users")}),t},N=(0,E.getMe)(b),P=b.config,D=(0,o.__read)((0,i.useState)(T()),2),M=D[0],L=D[1],O=(0,o.__read)((0,i.useState)(""),2),R=O[0],x=O[1],B=(0,o.__read)((0,i.useState)(b.groupId?r.ALL:r.ONLY_ME),2),H=B[0],U=B[1],F=(0,o.__read)((0,i.useState)((function(){return k(!N.isClosed||!!b.groupId)})),2),G=F[0],V=F[1],W=(0,o.__read)((0,i.useState)((function(){var e,t;return b.groupId?I(b.groupId,null===(e=b.meGroup)||void 0===e?void 0:e.name,null===(t=b.meGroup)||void 0===t?void 0:t.photo):I(N.peerId,N.name,N.photo)})),2),z=W[0],j=W[1],Y=(0,o.__read)((0,i.useState)(a.MAIN),2),K=Y[0],Q=Y[1],q=(0,o.__read)((0,i.useState)({}),2),J=q[0],X=q[1],Z=(0,o.__read)((0,i.useState)((function(){return b.groupId&&b.meGroup?[{value:b.meGroup.peerId,label:b.meGroup.name}]:[{value:N.peerId,label:N.name}]})),2),$=Z[0],ee=Z[1],te=(0,o.__read)((0,i.useState)([]),2),ne=te[0],re=te[1],ae=(0,o.__read)((0,i.useState)(!1),2),oe=ae[0],ie=ae[1],le=(0,o.__read)((0,i.useState)([]),2),se=le[0],ce=le[1],ue=(0,o.__read)((0,i.useState)([]),2),de=ue[0],pe=ue[1],fe=(0,i.useCallback)((function(){var e=M.trim(),n=R.trim(),r={};if(Object.keys(J).length>0){e||(e=J.title),n||(n=J.description);var a=n!=J.title||e!=J.description;a||(a=z.id>0&&J.privacy_view.category!=H),a&&(0,h.sendVideoEdit)(z.id,J.id,e,n,H).catch((function(e){return console.error(e)}));var o={ovId:J.ov_id};J.live_start_time&&(o.startTime=J.live_start_time),r.upcomingStreamParams=o}else r.streamParams={name:e||T(),description:n,privacy_view:H,group_id:z.id<0?-z.id:0,call:!0};t(r)}),[M,R,H,z,J]);(0,i.useEffect)((function(){b.groupId||(0,h.getGroupsForStreaming)().then((function(e){var t=(0,o.__spreadArray)([],(0,o.__read)($));e.length>0&&(e.forEach((function(e){t.push({value:-e.id,label:e.name})})),ee(t),re(e))})).catch(console.error)}),[]),(0,i.useEffect)((function(){X({}),ie(!1),ce([]),(0,h.getUpcomingLives)([z.id]).then((function(e){var t=[];e.count>0&&(t=e.items.filter((function(e){return""!==e.ov_id})));var n=t.length>0;if(ie(n),ce(t),n){var r=[];t.forEach((function(e){e.owner_id&&e.owner_id>0&&r.push(e.owner_id.toString())})),r&&(0,h.loadUsers)({user_ids:r.join(",")}).then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,name:e.first_name+" "+e.last_name})})),pe(t)})).catch((function(e){return console.error(e)}))}})).catch((function(e){return console.error(e)}))}),[z]);var me=function(e){var t=e.date;e.live_start_time&&(t=e.live_start_time);var n=t-Date.now()/1e3;return n>0&&n<A.WEEK?S("calls_translation_date_label_soon"):""};return i.createElement(i.Fragment,null,K===a.MAIN&&i.createElement(u.TranslationCreateModal,{onClose:n,onSubmit:fe,title:S("calls_translation_box_title")},i.createElement("div",{className:"TranslationCreateForm__link"},i.createElement(f.default,null,$.length>0&&i.createElement(d.default,{border:!0,canBeHovered:!1,selectable:!1,icon:i.createElement(p.ListIcon,{icon:i.createElement("img",{className:"TranslationCreateForm__ownerIcon",src:z.photo,alt:z.name}),color:p.ListIconColors.GRAY}),aside:i.createElement(m.default,{className:"TranslationCreateFormOptions__longselect",options:$,value:z.id,onChange:function(e){var t=e.selected.value;t<0?ne.forEach((function(e){e.id==-t&&(U(r.ALL),V(k(!0)),j(I(-e.id,e.name,e.photo_100)))})):(V(k(!N.isClosed)),U(r.ONLY_ME),j(I(N.peerId,N.name,N.photo)))},disabled:$.length<=1})},S("calls_translation_owner_title")),oe&&i.createElement(d.default,{onClick:function(){oe&&Q(a.SELECT_POSTPONE)},chevron:!0,border:!0,icon:i.createElement(p.ListIcon,{icon:i.createElement(g.TimeIcon,null),color:p.ListIconColors.GREEN})},S("calls_translation_postponed_title"),Object.keys(J).length>0&&i.createElement("div",{className:"TranslationCreateForm__copyControl"},i.createElement(v.default,{className:"TranslationCreateForm__copyButton",onClick:function(e){e.preventDefault(),e.stopPropagation(),X({}),L(T()),x("")}},S("calls_translation_postponed_reset")))),!P.sferum&&i.createElement(d.default,{border:!1,canBeHovered:!1,selectable:!1,icon:i.createElement(p.ListIcon,{icon:i.createElement(_.PrivacyIcon,null),color:p.ListIconColors.GRAY}),aside:i.createElement(m.default,{className:"TranslationCreateForm__privacySelector TranslationCreateFormOptions__longselect",disabled:z.isGroup,options:G,value:H,onChange:function(e){U(e.selected.value)}})},S("calls_translation_who_can_see_video_privacy"))),i.createElement("div",{className:"TranslationCreateForm__privacyHint"},S("calls_translation_who_can_see_video_privacy_hint"))),i.createElement("form",{className:"TranslationCreateForm__main",onSubmit:fe},i.createElement("div",{className:"TranslationCreateForm__section"},i.createElement("div",{className:"TranslationCreateForm__block"},i.createElement("label",{className:"TranslationCreateForm__label"},S("calls_translation_title"),i.createElement(l.default,{className:"TranslationCreateForm__field",value:M,onChange:function(e){var t=e.target;L(t.value)},placeholder:S("calls_translation_name_placeholder")}))),i.createElement("div",{className:"TranslationCreateForm__block"},i.createElement("label",{className:"TranslationCreateForm__label"},S("calls_translation_description"),i.createElement(s.default,{className:"TranslationCreateForm__field",placeholder:S("calls_translation_description_placeholder"),value:R,onChange:function(e){var t=e.target;x(t.value)}})))),i.createElement("div",{className:"TranslationCreateForm__tabSection"},i.createElement("div",{className:"TranslationCreateForm__warning"},S("calls_translation_notification_warning"))))),K===a.SELECT_POSTPONE&&i.createElement(u.TranslationCreateModal,{title:S("calls_translation_select_upcoming_box_title"),isWithBackButton:!0,onBackClick:function(){return Q(a.MAIN)},onClose:n,contentClassName:"TranslationCreateForm__modalVideo"},i.createElement("div",null,se.length>0&&i.createElement(f.default,{className:"TranslationCreateForm__VideoList"},se.map((function(e,t){return i.createElement(d.default,{className:"TranslationCreateForm__videoItem",active:e.id===J,key:t,border:!0,canBeHovered:!0,selectable:!0,onClick:function(){return(t=e).owner_id>0&&(0,h.getVideos)(t.owner_id,[t.owner_id+"_"+t.id],!0).then((function(e){if(e.count>0){var n=e.items.filter((function(e){return e.id==t.id}));n.length>0&&(t.privacy_view=n[0].privacy_view,X(t),t.privacy_view&&U(t.privacy_view.category))}})),X(t),Q(a.MAIN),L(t.title),void x(t.description);var t},aside:i.createElement("span",{className:"TranslationCreateForm__videoLink"},S("calls_translation_select_video_link"))},i.createElement("div",{className:"TranslationCreateForm__videoImagePreview"},i.createElement("img",{className:"TranslationCreateForm__videoImage",src:e.image&&e.image[0]&&e.image[0].url?e.image[0].url:"",alt:e.title}),me(e)&&i.createElement("span",{className:"TranslationCreateForm__videoImageLabel"},me(e))),i.createElement("div",{className:"TranslationCreateForm__videoDescription"},i.createElement("div",{className:"TranslationCreateForm__videoTitle"},e.title),i.createElement("div",{className:"TranslationCreateForm__videoOwner"},function(e){if(!(e>0))return z.name;var t=de.filter((function(t){return t.id==e}));if(t.length>0){var n=t[0];if(n)return n.name}return""}(e.owner_id)),i.createElement("div",{className:"TranslationCreateForm__videoDate"},(r=(n=e).date,n.live_start_time&&(r=n.live_start_time),w(1e3*r)))));var n,r}))))))}!function(e){e.ONLY_ME="only_me",e.FRIENDS="friends",e.ALL="all"}(r||(r={})),function(e){e[e.MAIN=0]="MAIN",e[e.SELECT_POSTPONE=1]="SELECT_POSTPONE"}(a||(a={}))},942019:(e,t,n)=>{"use strict";n.d(t,{TranslationCreateModal:()=>c});var r=n(667294),a=n(881150),o=n(662208),i=n(138671),l=n(838480),s=n(774415);function c(e){var t=e.onClose,n=e.onSubmit,c=e.title,u=e.children,d=e.isWithBackButton,p=e.onBackClick,f=e.contentClassName,m=void 0===f?"TranslationCreateModal__content":f,_=r.useContext(o.LangContext).getLang,g=n&&t;return r.createElement(i.default,{disableBodyScroll:!0,onClose:t,className:"TranslationCreateModal",hasScroll:!1},r.createElement(l.ModalHeader,{title:c,onClose:t,backText:d?_("calls_back"):void 0,onBack:p}),r.createElement("div",{className:m},u),g&&r.createElement(s.ModalFooter,{actionButtons:r.createElement(r.Fragment,null,r.createElement(a.default,{onClick:t,appearance:"tertiary"},_("calls_cancel")),r.createElement(a.default,{onClick:n},_("calls_translation_start")))}))}},162144:(e,t,n)=>{"use strict";n.d(t,{TranslationLink:()=>u});var r=n(570655),a=n(667294),o=n(595775),i=n(881150),l=n(629142),s=n(58600),c=n(662208),u=function(e){var t=e.link,n=a.useContext(c.LangContext).getLang,u=(0,r.__read)((0,a.useState)(!1),2),d=u[0],p=u[1],f=(0,a.useCallback)((function(){return p(!0)}),[]),m=(0,a.useCallback)((function(){return p(!1)}),[]);return a.createElement("div",{className:"TranslationLink"},a.createElement("p",{className:"TranslationLink__info"},n("calls_translation_link_info")),a.createElement(o.default,{readOnly:"readonly",className:"TranslationLink__input",value:t}),t&&a.createElement(s.CopyText,{text:t,onCopyDone:f},a.createElement(i.default,null,n("calls_translation_link_copy"))),a.createElement(l.default,{className:"TranslationLink__copied",shown:d,callback:m},n("calls_translation_link_copied")))}},979414:(e,t,n)=>{"use strict";n.d(t,{TranslationStartCountdownModal:()=>l});var r=n(667294),a=n(138671),o=n(662208),i=n(881150),l=function(e){var t=e.onCloseModal,n=e.counter,l=e.onStopTranslation,s=r.useContext(o.LangContext).getLang;return r.createElement(a.default,{disableBackdropClick:!0,disableEscapeClose:!0,className:"TranslationStartCountdownModal",onClose:t},r.createElement("div",{className:"TranslationStartCountdownModal__content"},r.createElement("div",{className:"TranslationStartCountdownModal__counter"},n),r.createElement(i.default,{className:"TranslationStartCountdownModal__stop",onClick:l,appearance:"overlay_secondary"},s("calls_translation_cancel_button"))))}},880076:(e,t,n)=>{"use strict";n.d(t,{TranslationStatus:()=>u});var r=n(667294),a=n(801513),o=n(30933),i=n(659397),l=n(309739),s=n(607910),c=n(641221),u=function(e){var t=e.translationTimer,n=e.viewersCount,u=void 0===n?0:n,d=e.isLiveIndicatorOff,p=void 0!==d&&d,f=e.actions,m=void 0===f?[]:f,_=e.tooltipText,g=void 0===_?"":_,h=(0,i.classNames)("TranslationStatus__translationIndicator",{"TranslationStatus__translationIndicator--disabled":p}),v=(null==m?void 0:m.length)>0,A=(0,i.classNames)("TranslationStatus__translationTimer",{"TranslationStatus__translationTimer--hasIndicator":!p}),E=r.createElement("div",{className:"TranslationStatus__translation",key:"translation"},r.createElement(a.LiveIcon,{className:h}),r.createElement(r.Fragment,null,!!t&&r.createElement("div",{className:A},t),!p&&r.createElement("div",{className:"TranslationStatus__translationViewersCount"},r.createElement(o.ViewersCountIcon,null),r.createElement("div",{className:"TranslationStatus__translationViewersCountNumber"},u)),v&&r.createElement("div",{className:"TranslationStatus__translationDropdown"},r.createElement(s.TranslationStatusChevronIcon,null))));return v?E=r.createElement(l.default,{position:"b",align:"center",horizontalPosition:"right",trigger:"hover",marginLeft:-10,data:m,className:"TranslationStatus_dropdown"},E):g&&(E=r.createElement(c.TooltipNew,{content:r.createElement(r.Fragment,null,g)},E)),r.createElement("div",{className:"TranslationStatus"},E)}},389809:(e,t,n)=>{"use strict";n.d(t,{TranslationStopModal:()=>i});var r=n(667294),a=n(7692),o=n(662208),i=function(e){var t=e.onClose,n=e.actionButtons,i=r.useContext(o.LangContext).getLang;return r.createElement(a.default,{onClose:t,title:i("calls_translation_stop_confirmation"),appearance:"blue",actionButtons:n,className:"TranslationStopModal"},r.createElement("div",{className:"TranslationStopModal__text"},i("calls_translation_stop_sure")))}},904992:(e,t,n)=>{"use strict";n.d(t,{UnbanMembersModal:()=>l});var r=n(667294),a=n(7692),o=n(662208),i=n(685537),l=function(e){var t=e.onClose,n=e.actionButtons,l=e.description,s=e.subDescription,c=e.avatarsItems,u=(0,r.useContext)(o.LangContext).getLang;return r.createElement(a.default,{className:"UnbanMembersModal",appearance:"blue",title:u("calls_unban_participant_title"),actionButtons:n,onClose:t,hasScroll:!1},r.createElement("div",{className:"UnbanMembersModal__content"},r.createElement(i.AvatarsStack,{items:c}),r.createElement("div",{className:"UnbanMembersModal__description"},l),r.createElement("div",{className:"UnbanMembersModal__subDescription"},s)))}},860925:(e,t,n)=>{"use strict";n.d(t,{UnmuteRequestModal:()=>o});var r=n(667294),a=n(7692),o=function(e){var t=e.onClose,n=e.actionButtons,o=e.title,i=e.description;return r.createElement(a.default,{className:"UnmuteRequestModal",appearance:"blue",title:o,actionButtons:n,onClose:t},r.createElement("div",{className:"UnmuteRequestModal__content"},i))}},983179:(e,t,n)=>{"use strict";n.d(t,{UploadBackgroundErrorModal:()=>l});var r=n(667294),a=n(7692),o=n(881150),i=n(662208),l=function(e){var t=e.children,n=e.onClose,l=e.onSubmit,s=(0,r.useContext)(i.LangContext).getLang;return r.createElement(a.default,{onClose:n,title:s("calls_warning"),appearance:"blue",className:"UploadBackgroundErrorModal",actionButtons:r.createElement(r.Fragment,null,r.createElement(o.default,{onClick:n,appearance:"tertiary"},s("calls_cancel")),r.createElement(o.default,{onClick:l},s("calls_retry_action")))},r.createElement("div",{className:"UploadBackgroundErrorModal__content"},t))}},860228:(e,t,n)=>{"use strict";n.d(t,{UploadBackgroundPhoto:()=>l});var r=n(667294),a=n(662208),o=n(881150),i=n(760620),l=function(e){var t=e.onSubmit,n=e.loading,l=(0,r.useContext)(a.LangContext).getLang,s=(0,r.useRef)(null),c=(0,i.useFileReader)({$inputEl:s,onSubmit:t}),u=c.onClick,d=c.error,p=(0,r.useMemo)((function(){return(""+l("profile_oph_err_size")).replace("{sorry}","<b>"+l("global_sorry_error")+"</b>").replace("{min}","200").replace("{max}","7000")}),[]);return r.createElement("div",{className:"UploadBackgroundPhoto"},r.createElement("input",{ref:s,type:"file",className:"UploadBackgroundPhoto__upload"}),d&&r.createElement("div",{className:"UploadBackgroundPhoto__error"},r.createElement("div",{className:"UploadBackgroundPhoto__error__left"}),r.createElement("div",{className:"UploadBackgroundPhoto__error__right",dangerouslySetInnerHTML:{__html:p}})),r.createElement("div",{className:"UploadBackgroundPhoto__description",dangerouslySetInnerHTML:{__html:l("calls_you_can_upload_description")}}),!n&&r.createElement("div",{className:"UploadBackgroundPhoto__button"},r.createElement(o.default,{onClick:u},l("calls_choose_file"))),n&&r.createElement("div",{className:"UploadBackgroundPhoto__progress"}))}},760620:(e,t,n)=>{"use strict";n.d(t,{useFileReader:()=>i});var r=n(570655),a=n(667294),o=n(799401),i=function(e){var t=e.$inputEl,n=e.onSubmit,i=(0,r.__read)((0,a.useState)({}),2),l=i[0],s=i[1],c=(0,r.__read)((0,a.useState)(!1),2),u=c[0],d=c[1];return{error:u,fileData:l,onClick:(0,a.useCallback)((function(){t.current&&(t.current.onchange=function(e){var t;d(!1);var r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){var a=new FileReader;a.onload=function(){var e=new Image;e.onload=function(){(0,o.checkImageDimentions)(e)?(s({file:r,image:e}),n&&n(r)):d(!0)},e.onerror=function(){return d(!0)},e.src=a.result},a.onerror=function(){return d(!0)},a.readAsDataURL(r)}},t.current.click())}),[])}}},799401:(e,t,n)=>{"use strict";n.d(t,{checkImageDimentions:()=>r});var r=function(e){return(e.width>=510||e.width>7e3)&&(e.height>=200||e.height>7e3)}},654837:(e,t,n)=>{"use strict";n.d(t,{UploadBackgroundPhotoModal:()=>i});var r=n(667294),a=n(7692),o=n(662208),i=function(e){var t=e.children,n=e.onClose,i=(0,r.useContext)(o.LangContext).getLang;return r.createElement(a.default,{onClose:n,title:i("calls_upload_image_for_background"),appearance:"blue",className:"UploadBackgroundPhotoModal",footerHint:i("calls_if_you_have_problems_with_upload"),actionButtons:""},t)}},690128:(e,t,n)=>{"use strict";n.d(t,{UserBadge:()=>i});var r=n(667294),a=n(659397),o=n(995811),i=function(e){var t=e.className,n=e.type;return r.createElement("div",{className:(0,a.classNames)("UserBadge","UserBadge--"+n,t)},r.createElement(o.StarIcon,null))}},952152:(e,t,n)=>{"use strict";n.d(t,{Video:()=>l});var r=n(667294),a=n(659397),o=n(604233),i=new WeakMap,l=(0,r.memo)((function(e){var t=e.stream,n=e.isMirrored,l=void 0!==n&&n,s=e.isContained,c=void 0!==s&&s,u=e.isStartWithVisible,d=void 0!==u&&u,p=e.className,f=r.useRef(null),m=r.useRef(null),_=r.useRef(t);return r.useEffect((function(){var e,n,r,s;if(!(null===(e=f.current)||void 0===e?void 0:e.lastElementChild)||_.current!==t){var u=d;if(t&&(i.has(t)?null===(null===(n=i.get(t))||void 0===n?void 0:n.closest("body"))?(m.current=null!==(r=i.get(t))&&void 0!==r?r:null,u=!0):m.current=(0,o.createVideoTag)(t):(m.current=(0,o.createVideoTag)(t),i.set(t,m.current))),m.current&&f.current&&f.current.lastElementChild!==m.current){var p=(0,a.classNames)("Video",{"Video--contain":c,"Video--mirrored":l,"Video--visible":u||(null===(s=m.current)||void 0===s?void 0:s.classList.contains("Video--visible"))});f.current.lastElementChild&&(f.current.innerHTML=""),m.current.className=p,f.current.appendChild(m.current),m.current.play()}return function(){m.current&&m.current!==i.get(t)&&(m.current.srcObject=null,m.current.src="",m.current.pause(),m.current.removeAttribute("src"),m.current.load()),f.current&&(f.current.innerHTML="")}}}),[t,f.current]),(0,r.useEffect)((function(){m.current&&m.current.classList.toggle("Video--mirrored",l)}),[l]),r.createElement("div",{ref:f,className:p})}))},13912:(e,t,n)=>{"use strict";n.d(t,{ClearCanvas:()=>r});var r=function(){function e(e){this.$c=e,this.gl=this.$c.getContext("webgl")}return e.prototype.draw=function(){var e=this.gl;null==e||e.clearColor(0,0,0,0),null==e||e.clear(e.COLOR_BUFFER_BIT)},e}()},955590:(e,t,n)=>{"use strict";n.d(t,{ItemAddImage:()=>i});var r=n(667294),a=n(945873),o=n(659397),i=(0,r.memo)((function(){return r.createElement("div",{className:(0,o.classNames)("VirtualBackgroundSettings__item","VirtualBackgroundSettings__item--add-image")},r.createElement(a.AddImageIcon,null))}))},173001:(e,t,n)=>{"use strict";n.d(t,{ItemBackground:()=>u});var r=n(570655),a=n(667294),o=n(659397),i=n(324604),l=n(641221),s=n(827491),c=n(662208),u=(0,a.memo)((function(e){var t=e.backgroundUrl,n=e.checked,u=e.onDelete,d=e.photoId,p=(0,r.__rest)(e,["backgroundUrl","checked","onDelete","photoId"]),f=(0,a.useContext)(c.LangContext).getLang,m=(0,a.useMemo)((function(){return a.createElement("div",{dangerouslySetInnerHTML:{__html:f(n?"calls_cant_remove_background":"calls_delete_background")}})}),[n]),_=(0,a.useCallback)((function(e){e.stopPropagation(),n||u(d)}),[n,d]);return a.createElement(i.WithRadioButton,(0,r.__assign)({},p,{checked:n,className:(0,o.classNames)("VirtualBackgroundSettings__item","VirtualBackgroundSettings__item--background"),style:{backgroundImage:"url("+t+")"}}),a.createElement("div",{className:(0,o.classNames)("VirtualBackgroundSettings__item--background__deletebtn",{"VirtualBackgroundSettings__item--background__deletebtn--disabled":n}),onClick:_},a.createElement(l.TooltipNew,{content:m,className:"VirtualBackgroundSettings__item__popper",position:"t",align:"center"},a.createElement(s.DeleteBackgroundIcon,null))))}))},667517:(e,t,n)=>{"use strict";n.d(t,{ItemBlur:()=>l});var r=n(570655),a=n(667294),o=n(659397),i=n(324604),l=(0,a.memo)((function(e){return a.createElement(i.WithRadioButton,(0,r.__assign)({},e,{className:(0,o.classNames)("VirtualBackgroundSettings__item","VirtualBackgroundSettings__item--blur")}))}))},290949:(e,t,n)=>{"use strict";n.d(t,{ItemNoBackground:()=>s});var r=n(570655),a=n(667294),o=n(659397),i=n(662208),l=n(324604),s=(0,a.memo)((function(e){var t=(0,a.useContext)(i.LangContext).getLang;return a.createElement(l.WithRadioButton,(0,r.__assign)({},e,{className:(0,o.classNames)("VirtualBackgroundSettings__item","VirtualBackgroundSettings__item--with-border")}),t("calls_virtual_background_settings_no_background"))}))},536228:(e,t,n)=>{"use strict";n.d(t,{VirtualBackgroundSettings:()=>_});var r=n(667294),a=n(659397),o=n(662208),i=n(821244),l=n(588283),s=n(530928),c=n(543162),u=n(551974),d=n(916353),p=n(881150),f=n(731585),m=n(32491),_=function(e){var t=e.backgroundList,n=e.onDeleteBackground,_=e.onChooseBackground,g=e.chosen,h=e.onChangeVideoOption,v=e.videoOptions,A=(0,r.useContext)(o.LangContext).getLang,E=(0,u.useUserMediaStream)(d.defaultConstraints),C=E.userStream,y=E.error,S=E.updateUserMediaStream,w=(0,i.useCurrentUserVideoElement)({userStream:C}).$video,b=(0,s.useVideoEffects)({backgroundList:t,$srcElement:w,userStream:C}),T=b.$canvas,I=b.onUpdateVideoEffectsSettings,k=b.isPlaying,N=(0,l.useCarouselItems)({backgroundList:t,onDeleteBackground:n,onUpdateVideoEffectsSettings:I,onChooseBackground:_,chosen:g}).carouselItems;return r.createElement("div",{className:"VirtualBackgroundSettings"},r.createElement("div",{className:"VirtualBackgroundSettings__userStream"},C&&r.createElement("video",{className:(0,a.classNames)("Video",{"Video--visible":!k},"Video--contain",{"Video--mirrored":v[m.EVideoOptionType.IS_VIDEO_MIRRORED]}),ref:w,controls:!1,crossOrigin:"anonymous",playsInline:!0,muted:!0,autoPlay:!0},"Video tag is not supported"),r.createElement("canvas",{ref:T,className:(0,a.classNames)("VirtualBackgroundSettings__userCanvas",{"Video--mirrored":v[m.EVideoOptionType.IS_VIDEO_MIRRORED]},{"VirtualBackgroundSettings__userCanvas--playing":k})}),y&&r.createElement("div",{className:"VirtualBackgroundSettings__error"},r.createElement("div",null,A("profile_no_camera_access")),r.createElement("div",null,r.createElement(p.default,{className:"VirtualBackgroundSettings__error__btn",size:"m",onClick:S},A("calls_button_allow_access"))))),r.createElement("div",{className:"VirtualBackgroundSettings__title"},A("calls_virtual_background")),r.createElement("div",{className:"VirtualBackgroundSettings__carousel"},r.createElement(c.VirtualBackgroundSettingsCarousel,{items:N})),r.createElement("div",{className:"VirtualBackgroundSettings__separator"}),r.createElement("div",{className:"VirtualBackgroundSettings__options"},r.createElement(f.default,{checked:!!v[m.EVideoOptionType.IS_VIDEO_MIRRORED],name:m.EVideoOptionType.IS_VIDEO_MIRRORED,onChange:h},A("calls_mirror_display_view"))))}},324604:(e,t,n)=>{"use strict";n.d(t,{WithRadioButton:()=>l});var r=n(570655),a=n(667294),o=n(62738),i=n(659397),l=function(e){var t=e.children,n=e.className,l=e.style,s=(0,r.__rest)(e,["children","className","style"]),c=(0,a.useCallback)((function(){}),[]);return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,i.classNames)(n),style:l},t),a.createElement("div",{className:"VirtualBackgroundSettings__item--radio"},a.createElement(o.default,(0,r.__assign)({},s,{onChange:c}))))}},916353:(e,t,n)=>{"use strict";n.d(t,{WIDTH:()=>r,HEIGHT:()=>a,defaultConstraints:()=>o});var r=510,a=382,o={audio:!1,video:{frameRate:25,height:a,width:r}}},20832:(e,t,n)=>{"use strict";n.d(t,{useBackgroundEffects:()=>i});var r=n(667294),a=n(465127),o=n(121255),i=function(e){var t=e.SDK,n=(0,r.useMemo)((function(){return{background:new a.EffectBackground,blur:new a.EffectBlur,effect:new a.VideoEffects({debug:!0})}}),[]);return(0,r.useEffect)((function(){return t.setVideoEffects(n.effect),function(){n.effect.destroy()}}),[]),{onSettingsChange:(0,r.useCallback)((function(e){switch(e.type){case o.EVideoEffectType.BACKGROUND:n.background.setBackgroundImage(e.value).then((function(){t.changeVideoEffect(n.background)}));break;case o.EVideoEffectType.BLUR:t.changeVideoEffect(n.blur);break;case o.EVideoEffectType.NONE:t.changeVideoEffect(null);break;case o.EVideoEffectType.ADD:}}),[])}}},588283:(e,t,n)=>{"use strict";n.d(t,{useCarouselItems:()=>d});var r=n(570655),a=n(667294),o=n(290949),i=n(667517),l=n(955590),s=n(173001),c=n(121255),u=n(739735),d=function(e){var t=e.onDeleteBackground,n=e.backgroundList,d=e.chosen,p=e.onUpdateVideoEffectsSettings,f=e.onChooseBackground;(0,a.useEffect)((function(){d!==c.EVideoEffectType.NONE&&p(d)}),[]);var m=(0,a.useCallback)((function(e){f(e),p(e)}),[f,p]),_=(0,a.useMemo)((function(){return n.map((function(e){var n=(0,u.getPreviewPhotoSizeUrl)(e);return{id:e.id,onClick:m,content:a.createElement(s.ItemBackground,{checked:d===e.id,backgroundUrl:n,onDelete:t,photoId:e.id})}}))}),[d,n,m]);return{carouselItems:(0,a.useMemo)((function(){return(0,r.__spreadArray)([{id:c.EVideoEffectType.NONE,onClick:m,content:a.createElement(o.ItemNoBackground,{checked:d===c.EVideoEffectType.NONE})},{id:c.EVideoEffectType.BLUR,onClick:m,content:a.createElement(i.ItemBlur,{checked:d===c.EVideoEffectType.BLUR})},{id:c.EVideoEffectType.ADD,onClick:m,content:a.createElement(l.ItemAddImage,null)}],(0,r.__read)(_))}),[d,_,m])}}},821244:(e,t,n)=>{"use strict";n.d(t,{useCurrentUserVideoElement:()=>o});var r=n(667294),a=n(739735),o=function(e){var t=e.userStream,n=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(t&&n.current){var e=(0,a.getMediaStreamDimentions)(t),r=e.height,o=e.width;n.current.height=r,n.current.width=o,n.current.srcObject=t}}),[t]),{$video:n}}},363220:(e,t,n)=>{"use strict";n.d(t,{useInitialBackgroundEffect:()=>i});var r=n(667294),a=n(739735),o=n(121255),i=function(e){var t=e.userStream,n=e.onSettingsChange;(0,r.useEffect)((function(){if(t){var e=a.effectStotage.getEffect();"number"==typeof e?(0,a.getPhotoById)(e).then((function(e){e&&n({type:o.EVideoEffectType.BACKGROUND,value:(0,a.getMaxPhotoSizeUrl)(e)})})):e===o.EVideoEffectType.BLUR&&n({type:o.EVideoEffectType.BLUR})}}),[t])}},591172:(e,t,n)=>{"use strict";n.d(t,{useSavedSettings:()=>l});var r=n(667294),a=n(121255),o=n(739735),i=n(637534),l=function(e){var t=e.chosen,n=e.settingsOpened,l=e.onSettingsChange,s=e.setChosen,c=e.photos,u=(0,i.useSendStatsData)().sendStatsData,d=(0,r.useRef)(null);return(0,r.useEffect)((function(){n&&(d.current=t)}),[n]),{onApplySettings:(0,r.useCallback)((function(){d.current!==t&&(o.effectStotage.saveEffect(t),"number"==typeof t?(0,o.getPhotoById)(t,c).then((function(e){e&&(l({type:a.EVideoEffectType.BACKGROUND,value:(0,o.getMaxPhotoSizeUrl)(e)}),u(i.ECallActionEventType.CUSTOM_VIRTUAL_BACKGROUND_SELECTED,{background_id:e.id}))})):t===a.EVideoEffectType.BLUR?(l({type:a.EVideoEffectType.BLUR}),u(i.ECallActionEventType.VIRTUAL_BACKGROUND_SELECTED,{background_id:-16})):t===a.EVideoEffectType.NONE&&(l({type:a.EVideoEffectType.NONE}),u(i.ECallActionEventType.VIRTUAL_BACKGROUND_DISABLED)))}),[l,c,t,u]),onRestoreSettings:(0,r.useCallback)((function(){d.current&&s(d.current)}),[s])}}},116930:(e,t,n)=>{"use strict";n.d(t,{useSettingsItems:()=>s});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(739735),s=function(e){var t=e.photos,n=(0,o.useDispatch)(),s=(0,r.__read)((0,a.useState)(l.effectStotage.getEffect),2),c=s[0],u=s[1],d=(0,a.useCallback)((function(e){switch(e){case i.EVideoEffectType.BLUR:u(e);break;case i.EVideoEffectType.ADD:n({type:i.TOGGLE_POPUP,data:i.POPUP_UPLOAD_BACKGROUND_PHOTO});break;case i.EVideoEffectType.NONE:u(e);break;default:t.some((function(t){return t.id===e}))&&u(e)}}),[t]),p=(0,a.useRef)(null),f=(0,a.useCallback)((function(e){return p.current=e}),[]);return(0,a.useEffect)((function(){p.current&&(d(p.current.id),p.current=null)}),[d]),{chosen:c,setChosen:u,onClick:d,onSuccessPhotoUpload:f}}},530928:(e,t,n)=>{"use strict";n.d(t,{useVideoEffects:()=>u});var r=n(570655),a=n(667294),o=n(465127),i=n(916353),l=n(739735),s=n(121255),c=n(13912),u=function(e){var t=e.backgroundList,n=e.$srcElement,u=e.userStream,d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),m=(0,a.useRef)(null),_=(0,a.useRef)(null);null===_.current&&(_.current=new o.ImageEdit);var g=(0,a.useRef)(null),h=(0,a.useRef)(s.EVideoEffectType.NONE),v=(0,a.useRef)(s.EVideoEffectType.NONE),A=(0,a.useRef)(void 0),E=(0,a.useRef)(null),C=(0,a.useRef)(!1),y=(0,r.__read)((0,a.useState)(!1),2),S=y[0],w=y[1],b=(0,a.useCallback)((function(e){C.current="play"===e,w("play"===e)}),[]),T=(0,a.useCallback)((function(e,t){void 0===t&&(t=!1),v.current=e,t||(h.current=e)}),[]),I=(0,a.useCallback)((function(){if(E.current&&clearTimeout(E.current),C.current)if(n.current&&p.current)try{p.current.requestSegmentation(n.current)}catch(e){console.error("[useVideoEffects][onRequestSegmentation][error]",e)}else E.current=setTimeout((function(){I()}),300)}),[]),k=(0,a.useCallback)((function(e){var n;switch(e){case s.EVideoEffectType.ADD:break;case s.EVideoEffectType.BLUR:T(e),A.current&&(A.current=void 0),C.current||(b("play"),I());break;case s.EVideoEffectType.NONE:T(e),A.current&&(A.current=void 0),null===(n=g.current)||void 0===n||n.draw(),b("stop");break;default:var r=t.find((function(t){return t.id===e}));if(r){T(e,!0);var a=(0,l.getMaxPhotoSizeUrl)(r);(0,l.loadImage)(a).then((function(t){if(!d.current)throw new Error("output canvas is not initialized");if(!_.current)throw new Error("ImageEdit class is not initialized");if(v.current!==e)throw new Error("Settings changed during load");var n=d.current,r=n.width,a=n.height;return _.current.resize(t,r,a)})).then((function(t){if(v.current!==e)throw new Error("Settings changed during load");T(e),A.current=t,C.current||(b("play"),I())})).catch(console.warn)}}}),[t]),N=(0,a.useCallback)((function(e,t,n){switch(h.current){case s.EVideoEffectType.ADD:case s.EVideoEffectType.NONE:break;case s.EVideoEffectType.BLUR:requestAnimationFrame((function(){var r;null===(r=m.current)||void 0===r||r.draw({image:t,segmentationMask:e,resizedImage:n}),C.current&&I()}));break;default:requestAnimationFrame((function(){var r;null===(r=f.current)||void 0===r||r.draw({image:t,segmentationMask:e,background:A.current,resizedImage:n}),C.current&&I()}))}}),[]);return(0,a.useEffect)((function(){d.current?(d.current.width=i.WIDTH,d.current.height=i.HEIGHT):console.error("[useVideoEffects][on-mount] canvas is not initialized")}),[]),(0,a.useEffect)((function(){if(u){if(d.current){return f.current=new o.BlurFastWithMask(d.current),m.current=new o.BlurFastWithMask(d.current),g.current=new c.ClearCanvas(d.current),new Promise((function(e,t){new o.Segmentation({onReady:e,onError:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.warn.apply(console,(0,r.__spreadArray)([],(0,r.__read)(e))),t()},onFrame:N}).createModel(!0)})).then((function(e){p.current=e})).catch((function(){p.current=null})),function(){var e,t,n;null===(e=f.current)||void 0===e||e.close(),null===(t=m.current)||void 0===t||t.close(),null===(n=p.current)||void 0===n||n.destroy(),f.current=null,m.current=null,p.current=null}}console.error("[useVideoEffects][on-userStream-update] canvas is not initialized")}}),[u]),{$canvas:d,onRequestSegmentation:I,onUpdateVideoEffectsSettings:k,isPlaying:S}}},739735:(e,t,n)=>{"use strict";n.d(t,{getMaxPhotoSizeUrl:()=>c,getPreviewPhotoSizeUrl:()=>u,effectStotage:()=>d,getPhotoById:()=>p,getMediaStreamDimentions:()=>f,loadImage:()=>m});var r=n(570655),a=n(659397),o=n(121255),i=n(329538),l=n(916353),s=function(e){var t;return null===(t=e.sizes)||void 0===t?void 0:t.reduce((function(e,t){return e[t.type]=t.url,e}),{})},c=function(e){var t=s(e);return(null==t?void 0:t.x)||(null==t?void 0:t.m)||(null==t?void 0:t.s)||""},u=function(e){var t=s(e);return(null==t?void 0:t.m)||(null==t?void 0:t.x)||(null==t?void 0:t.s)||""},d={getEffect:function(){var e=a.localStorage.getItem(o.LS_KEYS.VIRTUAL_BACKGROUND_EFFECT);return"string"!=typeof e?o.EVideoEffectType.NONE:/^\d+$/.test(e)?+e:e},saveEffect:function(e){a.localStorage.setItem(o.LS_KEYS.VIRTUAL_BACKGROUND_EFFECT,""+e)}},p=function(e,t){if(t){var n=t.find((function(t){return t.id===e}));if(n)return Promise.resolve(n)}return(0,i.photosGetAllImages)({photo_ids:""+e}).then((function(e){try{var t=e.items[0];return t||null}catch(e){return null}}))},f=function(e){var t=e.getVideoTracks()[0].getSettings(),n=t.width,r=void 0===n?l.WIDTH:n,a=t.height;return{width:r,height:void 0===a?l.HEIGHT:a}},m=function(e){return(0,r.__awaiter)(void 0,void 0,Promise,(function(){return(0,r.__generator)(this,(function(t){return[2,new Promise((function(t,n){var r=document.createElement("img");r.crossOrigin="anonymous",r.onerror=function(e){n("Failed image loading: "+e)},r.onload=function(){return t(r)},r.src=e}))]}))}))}},902996:(e,t,n)=>{"use strict";n.d(t,{CarouselItem:()=>a});var r=n(667294),a=(0,r.memo)((function(e){var t=e.onClick,n=e.id,a=e.content;return r.createElement("div",{className:"VirtualBackgroundSettingsCarousel__Item",onClick:function(){return null==t?void 0:t(n)}},a)}))},543162:(e,t,n)=>{"use strict";n.d(t,{VirtualBackgroundSettingsCarousel:()=>u});var r=n(667294),a=n(902996),o=n(659397),i=n(635191),l=n(261859),s=n(308242),c=n(501451),u=(0,r.memo)((function(e){var t=e.items,n=(0,i.useCarouselControls)(),u=n.$carouselLayer,d=n.$viewport,p=n.goNext,f=n.goPrev,m=n.isNext,_=n.isPrev;return r.createElement("div",{className:"VirtualBackgroundSettingsCarousel"},r.createElement("div",{ref:d,className:"VirtualBackgroundSettingsCarousel__viewport"},r.createElement("div",{ref:u,className:"VirtualBackgroundSettingsCarousel_carousel"},t.map((function(e){return r.createElement(a.CarouselItem,{key:e.id,id:e.id,onClick:e.onClick,content:e.content})})))),r.createElement(c.Fade,{open:_},r.createElement("div",{className:(0,o.classNames)("VirtualBackgroundSettingsCarousel__navigation","VirtualBackgroundSettingsCarousel__navigation--prev"),onClick:f},r.createElement(l.ChevronLeftIcon,null))),r.createElement(c.Fade,{open:m},r.createElement("div",{className:(0,o.classNames)("VirtualBackgroundSettingsCarousel__navigation","VirtualBackgroundSettingsCarousel__navigation--next"),onClick:p},r.createElement(s.ChevronRightIcon,null))))}))},654063:(e,t,n)=>{"use strict";var r;n.d(t,{EDirection:()=>r}),function(e){e[e.FORWARD=1]="FORWARD",e[e.BACKWARD=-1]="BACKWARD"}(r||(r={}))},635191:(e,t,n)=>{"use strict";n.d(t,{useCarouselControls:()=>i});var r=n(570655),a=n(667294),o=n(654063),i=function(){var e=(0,a.useRef)(null),t=(0,a.useRef)(null),n=(0,r.__read)((0,a.useState)({isPrev:!1,isNext:!1}),2),i=n[0],l=i.isPrev,s=i.isNext,c=n[1],u=(0,a.useRef)(0),d=(0,a.useRef)(null),p=(0,a.useCallback)((function(n){if(e.current&&t.current){var r=e.current,a=t.current,o=r.offsetWidth,i=a.offsetWidth,l=o<i;c({isPrev:l&&n>0,isNext:l&&n+o<i})}}),[]),f=(0,a.useCallback)((function(n){if(e.current&&t.current){var r=e.current,a=t.current,o=Math.floor(a.offsetWidth/a.childElementCount),i=Math.floor(r.offsetWidth/o),l=(Math.floor(r.scrollLeft/o)+n*i)*o;r.scrollTo({left:l,behavior:"smooth"})}}),[]),m=(0,a.useCallback)((function(){f(o.EDirection.FORWARD)}),[f]),_=(0,a.useCallback)((function(){f(o.EDirection.BACKWARD)}),[f]),g=(0,a.useCallback)((function(t,n){u.current&&cancelAnimationFrame(u.current);var r=function(){e.current&&p(e.current.scrollLeft)};n?r():u.current=requestAnimationFrame(r)}),[]);return(0,a.useEffect)((function(){var n;return"MutationObserver"in window&&(d.current=new MutationObserver((function(e){var t,n;try{for(var a=(0,r.__values)(e),o=a.next();!o.done;o=a.next()){"childList"===o.value.type&&g()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}})),t.current&&d.current.observe(t.current,{childList:!0})),null===(n=e.current)||void 0===n||n.addEventListener("scroll",g),g(null,!0),function(){var t,n;null===(t=e.current)||void 0===t||t.removeEventListener("scroll",g),null===(n=d.current)||void 0===n||n.disconnect(),d.current=null}}),[]),{$viewport:e,$carouselLayer:t,goNext:m,goPrev:_,isNext:s,isPrev:l}}},288540:(e,t,n)=>{"use strict";n.d(t,{VirtualBackgroundSettingsModal:()=>l});var r=n(667294),a=n(7692),o=n(881150),i=n(662208),l=function(e){var t=e.onClose,n=e.onSubmit,l=e.children,s=(0,r.useContext)(i.LangContext).getLang;return r.createElement(a.default,{onClose:t,title:s("calls_virtual_background"),appearance:"blue",actionButtons:r.createElement(r.Fragment,null,r.createElement(o.default,{onClick:t,appearance:"tertiary"},s("calls_cancel")),r.createElement(o.default,{onClick:n},s("calls_save"))),className:"VirtualBackgroundSettingsModal"},l)}},449587:(e,t,n)=>{"use strict";n.d(t,{VolumeMeterAnimation:()=>o});var r=n(667294),a=n(911099),o=function(){var e=(0,a.classNames)("VolumeMeterAnimation","VolumeMeterAnimation--withAnimation");return r.createElement("div",{className:e})}},100741:(e,t,n)=>{"use strict";n.d(t,{WaitingHall:()=>o});var r=n(667294),a=n(75794),o=function(e){var t=e.id,n=e.name,o=e.letter,i=e.hasAudio,l=e.hasVideo,s=e.stream,c=e.wasConnected;return r.createElement("div",{className:"WaitingHall"},r.createElement("main",{className:"WaitingHall__main"},r.createElement(a.Participant,{id:t,hasVideo:l,hasAudio:i,isSharingScreen:!1,stream:s,isMe:!0,name:n,letter:o,allowContain:!0,wasConnected:c,networkStatus:1})))}},51443:(e,t,n)=>{"use strict";n.d(t,{WaitingHallInfo:()=>a});var r=n(667294),a=function(e){var t=e.text;return r.createElement("div",{className:"WaitingHallInfo"},r.createElement("div",{className:"WaitingHallInfo__text"},t))}},428990:(e,t,n)=>{"use strict";n.d(t,{WaitingHallList:()=>d});var r=n(667294),a=n(295886),o=n(662208),i=n(248586),l=n(279060),s=n(750598),c=n(881150),u=n(670546),d=function(e){var t=e.members,n=void 0===t?[]:t,d=e.totalCount,p=void 0===d?0:d,f=e.navigateToProfile,m=e.onPromote,_=e.onForbid,g=r.useContext(o.LangContext).getLang;return 0===n.length?r.createElement(r.Fragment,null):r.createElement(r.Fragment,null,r.createElement(a.ListHeader,{extra:p||""},g("calls_waiting_hall_list_header")),r.createElement(u.default,{border:!1,className:"CallParticipantList__list CallParticipantList__list--waitingList"},n.map((function(e){return r.createElement(s.default,{selectable:!1,border:!1,key:e.peerId,aside:r.createElement(r.Fragment,null,r.createElement(c.default,{onClick:function(){return _(e.peerId)},appearance:"secondary"},g("calls_waiting_hall_forbid")),r.createElement(c.default,{onClick:function(){return m(e.peerId)}},g("calls_waiting_hall_join")))},r.createElement(i.default,{onLinkClick:f,photo:r.createElement(l.CallPhoto,{id:e.peerId,photo:e.photo,alt:e.name||""}),title:e.name,href:e.link,target:"_blank"}))}))))}},782605:(e,t,n)=>{"use strict";n.d(t,{AddParticipantContainer:()=>A});var r,a=n(570655),o=n(667294),i=n(50533),l=n(121255),s=n(587551),c=n(697483),u=n(389953),d=n(431469),p=n(152205),f=n(662208),m=n(788822),_=n(820717),g=n(745284),h=function(e){return e?(0,m.escape)(e.replace(/\t/g,"\n")):""},v=!1,A=function(e){var t=e.onChange,n=e.onClickCallAll,u=e.groupId,m=(0,i.useSelector)((function(e){return e})),A=o.useContext(f.LangContext).getLang,w=(0,i.useDispatch)(),b=(0,a.__read)((0,o.useState)(""),2),T=b[0],I=b[1],k=(0,a.__read)((0,o.useState)({}),2),N=k[0],P=k[1],D=(0,a.__read)((0,o.useState)(!1),2),M=D[0],L=D[1],O=(0,a.__read)((0,o.useState)(!1),2),R=O[0],x=O[1],B=(0,a.__read)((0,o.useState)(!1),2),H=B[0],U=B[1],F=(0,a.__read)((0,o.useState)(E(m.chatMembers,u?[]:m.friends)),1)[0],G=(0,a.__read)((0,o.useState)(C(m.chatMembers,F,m.groupMembers)),2),V=G[0],W=G[1],z=(0,a.__read)((0,o.useState)(E(m.chatMembers,m.groupMembers)),2),j=z[0],Y=z[1],K=(m.preselectedIds||[]).filter((function(e){return!(0,c.isParticipantAnonym)(e)&&V[e]})),Q=(0,a.__read)((0,o.useState)(K),2),q=Q[0],J=Q[1],X=(0,a.__read)((0,o.useState)(!1),2),Z=X[0],$=X[1],ee=(0,o.useCallback)((function(e){return e.name}),[]),te=(0,o.useCallback)((function(e){return e.peerId}),[]),ne=(0,d.useIndexer)((0,a.__spreadArray)((0,a.__spreadArray)((0,a.__spreadArray)([],(0,a.__read)(m.chatMembers)),(0,a.__read)(F)),(0,a.__read)(j)),ee,te),re=m.groupMembersCount>l.COUNT_OF_GROUP_MEMBERS_TO_LOAD,ae=(0,o.useCallback)((function(e){if(e){var t=ne.search(e);if(v){var n={};return t.forEach((function(e){n[e.id]=e})),Object.values(n)}return t}return function(e,t,n,r,o,i,s,c,u){var d=5,p=10,f=10,m={type:l.SearchResultType.MEMBERS_MORE,text:u("calls_show_all_members")},_={type:l.SearchResultType.FRIENDS_MORE,text:u("calls_show_all_friends")},g={type:l.SearchResultType.GROUP_MEMBERS_MORE,text:u("calls_show_all_group_members")},h={type:l.SearchResultType.HEADER,text:u("calls_chat_members"),count:e.length},v={type:l.SearchResultType.HEADER,text:u("calls_chat_group_members"),count:s},A={type:l.SearchResultType.HEADER,text:u("calls_friends")},E={type:l.SearchResultType.CALL_ALL_IN_CHAT,text:u("calls_call_all")},C=[];if(e.length>0)if(C.push(h),e.length<=c&&C.push(E),r||e.length<=d)C.push.apply(C,(0,a.__spreadArray)([],(0,a.__read)(e)));else{for(var y=0;y<d;y++)C.push(e[y]);C.push(m)}if(t.length>0)if(C.push(A),o||t.length<=p)C.push.apply(C,(0,a.__spreadArray)([],(0,a.__read)(t)));else{for(y=0;y<p;y++)C.push(t[y]);C.push(_)}if(n.length>0)if(C.push(v),i||n.length<=f)C.push.apply(C,(0,a.__spreadArray)([],(0,a.__read)(n)));else{for(y=0;y<f;y++)C.push(n[y]);C.push(g)}return C}(m.chatMembers,F,j,M,R,H,m.groupMembersCount,m.participantLimit,A)}),[m,M,R,H]),oe=(0,a.__read)((0,o.useState)(ae(T)),2),ie=oe[0],le=oe[1],se=function(e){J(e),t(e)},ce=(0,o.useCallback)((function(e){return se((0,a.__spreadArray)((0,a.__spreadArray)([],(0,a.__read)(q)),[+e]))}),[q]),ue=(0,o.useCallback)((function(e){return se(q.filter((function(t){return t!==+e})))}),[q]),de=(0,c.getActiveParticipants)(m,!0).map((function(e){return{id:e.peerId.toString(),text:h(e.name),locked:!0}})).concat(q.map((function(e){return{text:h(V[e].name),id:e.toString(),locked:!1}})));(0,o.useEffect)((function(){P(q.reduce((function(e,t){return e[t]=!0,e}),{}))}),[]),(0,o.useEffect)((function(){le(ae(T))}),[q,M,R,H]),(0,o.useEffect)((function(){var e=T;return re&&(e.length>=3&&!Z?r=setTimeout((function(){(0,_.serverSearchGroupMembers)(-m.groupId,e,m,w).then((function(t){if($(!1),t.length>0){v=!0;var n=(0,a.__spreadArray)((0,a.__spreadArray)([],(0,a.__read)(j)),(0,a.__read)(t));Y(E(m.chatMembers,n)),W(C(m.chatMembers,F,n)),t.forEach((function(e){ne.add(e)})),le(ae(e))}}))}),1e3):r&&($(!1),clearTimeout(r))),function(){clearTimeout(r)}}),[T]);var pe=(0,o.useCallback)((function(e){I(e.target.value),le(ae(e.target.value))}),[]),fe=(0,o.useCallback)((function(e){var t;return ue(e),P((0,a.__assign)((0,a.__assign)({},N),((t={})[e]=!1,t))),Promise.resolve()}),[N]),me=(0,o.useCallback)((function(e){var t,n;return y(e,m,N)?(ue(e),P((0,a.__assign)((0,a.__assign)({},N),((t={})[e]=!1,t)))):S(V[e],m,de,N,(0,g.isAuthedByGroupId)(m))||(ce(e),P((0,a.__assign)((0,a.__assign)({},N),((n={})[e]=!0,n))),I(""),le(ae(""))),Promise.resolve()}),[q,m,N]),_e=(0,o.useCallback)((function(){var e=(0,c.getActiveParticipants)(m,!0).reduce((function(e,t){return e[t.peerId]=!0,e}),{}),t=m.chatMembers.reduce((function(t,n){var r=n.peerId;return e[r]||S(n,m,de,N,(0,g.isAuthedByGroupId)(m))||t.push(r),t}),[]);n(t)}),[m,q,N]),ge=(0,o.useCallback)((function(e,t){if(!("type"in e))return t;switch(e.type){case l.SearchResultType.CALL_ALL_IN_CHAT:return function(){return _e()};case l.SearchResultType.MEMBERS_MORE:return function(){return L(!0)};case l.SearchResultType.FRIENDS_MORE:return function(){return x(!0)};case l.SearchResultType.GROUP_MEMBERS_MORE:return function(){return U(!0)};default:return function(){}}}),[_e]);return o.createElement(s.CallsMultiSelect,{tokens:de,onRemoveToken:fe,value:T,onChange:pe,onSelect:me,renderSuggest:function(e,t){return function(e,t){var n="peerId"in e?e.peerId:0;return o.createElement(p.CallsSearchResult,{data:e,onClick:ge(e,t),selected:y(n,m,N),disabled:S(V[n],m,de,N,(0,g.isAuthedByGroupId)(m)),key:n||"text"in e&&e.text||void 0})}(e,t)},data:ie})};function E(e,t){var n=e.reduce((function(e,t){return e[t.id]=!0,e}),{});return t.filter((function(e){return!n[e.id]}))}function C(e,t,n){return[].concat(t,e,n).reduce((function(e,t){return e[t.id]=t,e}),{})}function y(e,t,n){return n&&n[e]||(0,c.isParticipantInCall)(t,e)}function S(e,t,n,r,a){void 0===a&&(a=!1);var o=(null==e?void 0:e.peerId)||0;if((0,c.isParticipantInCall)(t,o))return!0;if(y(o,t,r))return!1;if(a){if((0,c.isParticipantUnavailableToCallFromGroup)(t,o))return!0}else if(!(null==e?void 0:e.canCall))return!0;return n.length>=t.participantLimit||!(0,u.isUserPeer)(o)}},358898:(e,t,n)=>{"use strict";n.d(t,{AdminPinUnmuteRequestContainer:()=>d});var r=n(667294),a=n(50533),o=n(881150),i=n(121255),l=n(662208),s=n(169610),c=n(734273),u=n(464380),d=function(e){var t=e.SDK,n=(0,a.useDispatch)(),d=r.useContext(l.LangContext).getLang,p=(0,a.useSelector)((function(e){return e})),f=p.participants[p.me].mediaSettings||{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},m=function(){n({type:i.TOGGLE_POPUP})};return r.createElement(c.AdminPinUnmuteRequestModal,{onClose:m,title:d("calls_admin_pin_dialog_title"),description:d("calls_admin_pin_dialog_description"),actionButtons:[r.createElement(o.default,{onClick:m,appearance:"secondary",key:"cancel"},d("calls_admin_pin_dialog_cancel")),r.createElement(o.default,{onClick:function(){(f.isAudioEnabled?Promise.resolve():(0,s.checkPermissions)(t,[u.MediaOption.AUDIO])).then((function(){var e;(null===(e=p.notification)||void 0===e?void 0:e.type)===i.NotificationType.SPEAKING_ON_MUTE&&n({type:i.CALL_NOTIFICATION,notification:null}),t.toggleLocalAudio(!0).catch(console.log)})).then((function(){return m()}))},key:"mic"},d("calls_admin_pin_dialog_action"))]})}},262891:(e,t,n)=>{"use strict";n.d(t,{App:()=>z});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(536559),s=n(410531),c=n(923947),u=n(108519),d=n(187252),p=n(48755),f=n(165999),m=n(139230),_=n(656504),g=n(599648),h=n(94303),v=n(431469),A=n(474803),E=n(963532),C=n(325496),y=n(927229),S=n(353506),w=n(706885),b=n(485525),T=n(537817),I=n(410038),k=n(978335),N=n(358898),P=n(152532),D=n(350594),M=n(989819),L=n(379981),O=n(450273),R=n(858101),x=n(174635),B=n(241715),H=n(637880),U=n(955150),F=n(464380),G=n(745284),V=n(262409),W=n(465127),z=function(e){var t,n,z,j,Y=e.SDK,K=e.bridge,Q=e.onBeforeCallStart,q=e.onAfterCallFinish,J=e.tabIsMaster,X=e.navigateToConvo,Z=e.callSounds,$=e.navigateToProfile,ee=e.onHandCountChanged,te=e.onSuccessFeedback,ne=e.okPublicKey,re=e.config,ae=e.streamUrlExtractor,oe=re.allowAddMembers,ie=re.incomingCall,le=re.showFeedbackScreen,se=(0,o.useSelector)((function(e){return e})),ce=(0,o.useDispatch)(),ue=a.useCallback((function(){ce({type:i.CHANGE_MODE,mode:i.Mode.READY})}),[]),de=(0,r.__read)(a.useState(null),2),pe=de[0],fe=de[1],me=a.useCallback((function(e){ce({type:i.ERROR,text:e})}),[]),_e=a.useCallback((function(){return ce({type:i.CHANGE_MODE,mode:i.Mode.READY})}),[]);a.useEffect((function(){return se.mode===i.Mode.CALL?((0,G.increaseCallsCount)(),(0,b.wakeLockRequest)(),function(){(0,b.wakeLockRelease)()}):function(){}}),[se.mode]),(0,v.useFullScreen)(se.uiMode===i.UIMode.FULLSCREEN&&se.mode===i.Mode.CALL,(function(){var e;window.FastChat&&(fe(window.FastChat.getFullScreenState()),window.FastChat.toggleFullScreenState(!0)),(null===(e=null===window||void 0===window?void 0:window.reforgedME)||void 0===e?void 0:e.setCollapsed)&&window.reforgedME.setCollapsed(!0,"call")}),(function(){var e;se.uiMode===i.UIMode.FULLSCREEN&&ce({type:i.CHANGE_UI_MODE,mode:i.UIMode.DEFAULT}),window.FastChat&&(window.FastChat.toggleFullScreenState(pe),fe(null)),(null===(e=null===window||void 0===window?void 0:window.reforgedME)||void 0===e?void 0:e.setCollapsed)&&window.reforgedME.setCollapsed(!1,"call")}),[se.uiMode,se.mode]),(0,A.usePriorities)(Y,se),a.useEffect((function(){if(se.mode===i.Mode.CALL&&((0,G.increaseCallsCount)(),se.callsCount%3==0)){var e=setTimeout((function(){return ce({type:i.SET_SHOW_DESKTOP_NOTIFICATION,data:!0})}),1e3);return function(){return clearTimeout(e)}}}),[se.mode]);var ge=(0,a.useMemo)((function(){return re.enableVirtualBackground&&(0,W.isSupported)()}),[re.enableVirtualBackground]);return a.createElement(f.CallsErrorBoundary,{SDK:Y,mode:se.mode,onReset:_e},a.createElement(a.Fragment,null,(ie||J())&&a.createElement(u.AudioContainer,{onBeforeCallStart:Q,onAfterCallFinish:q,callSounds:Z}),se.localStatus!==F.ParticipantStatus.WAITING_HALL&&se.mode===i.Mode.CALL&&se.uiMode!==i.UIMode.COLLAPSED&&a.createElement(s.CallContainer,{SDK:Y,isVirtualBackgroundSupported:ge,navigateToConvo:X,navigateToProfile:$,onHandCountChanged:ee}),se.localStatus===F.ParticipantStatus.WAITING_HALL&&se.mode===i.Mode.CALL&&se.uiMode!==i.UIMode.COLLAPSED&&a.createElement(H.WaitingHallContainer,{SDK:Y,navigateToConvo:X,navigateToProfile:$}),se.mode===i.Mode.INCOMING&&se.uiMode!==i.UIMode.COLLAPSED&&a.createElement(l.IncomingCallContainer,{SDK:Y,bridge:K}),se.localStatus!==F.ParticipantStatus.WAITING_HALL&&se.mode!==i.Mode.READY&&se.uiMode===i.UIMode.COLLAPSED&&a.createElement(c.CollapsedCallContainer,{SDK:Y}),se.localStatus===F.ParticipantStatus.WAITING_HALL&&se.mode!==i.Mode.READY&&se.uiMode===i.UIMode.COLLAPSED&&a.createElement(B.CollapsedWaitingHallContainer,{SDK:Y}),se.mode===i.Mode.START&&se.uiMode!==i.UIMode.COLLAPSED&&a.createElement(R.StartCallContainer,null),le&&se.mode===i.Mode.FEEDBACK&&a.createElement(L.FeedbackContainer,{onSuccessFeedback:te}),se.mode===i.Mode.CALL_BY&&a.createElement(x.CallByNameContainer,{bridge:K}),se.mode===i.Mode.JOIN&&a.createElement(_.JoinScreenContainer,(0,r.__assign)({},se.join,{bridge:K,withPopup:!0,onClose:ue,onError:me,okPublicKey:ne})),se.mode===i.Mode.CREATE_CALL&&a.createElement(V.CreateCallByLinkContainer,{bridge:K}),se.errorShown&&a.createElement(g.ErrorContainer,{title:null===(t=se.error)||void 0===t?void 0:t.title,text:null===(n=se.error)||void 0===n?void 0:n.text,handleType:null===(z=se.error)||void 0===z?void 0:z.handleType,callId:null===(j=se.error)||void 0===j?void 0:j.callId,bridge:K,onCloseFatal:ue}),se.cautionShown&&a.createElement(E.CautionContainer,{isIncoming:se.isIncoming}),se.groupCallSetup&&a.createElement(d.GroupCallSetupContainer,{bridge:K,SDK:Y}),se.isManagementOpen&&a.createElement(m.CallManagementContainer,{bridge:K,SDK:Y,navigateToProfile:$,navigateToConvo:X,allowAddMembers:oe}),se.popup===i.POPUP_SETTINGS&&a.createElement(p.SettingsContainer,{SDK:Y}),se.popup===i.POPUP_TRANSLATION&&a.createElement(T.TranslationContainer,null),se.popup===i.POPUP_TRANSLATION_START_COUNTDOWN&&a.createElement(D.TranslationStartCountdownContainer,null),se.popup===i.POPUP_TRANSLATION_STOP&&a.createElement(I.TranslationStopContainer,null),se.popup===i.POPUP_TRANSLATION_SHARE&&a.createElement(k.TranslationShareContainer,{link:se.translation.link,linkExtractor:ae}),se.popup===i.POPUP_EXIT&&a.createElement(h.CallExitContainer,{SDK:Y}),se.popup===i.POPUP_TRANSFER_ADMIN_RIGHTS&&a.createElement(P.TransferAdminRightsContainer,{SDK:Y}),se.popup===i.POPUP_UNMUTE_REQUEST&&a.createElement(y.UnmuteRequestContainer,{SDK:Y}),se.popup===i.POPUP_ADMIN_PIN_UNMUTE_REQUEST&&a.createElement(N.AdminPinUnmuteRequestContainer,{SDK:Y}),ge&&a.createElement(U.VirtualBackgroundSettingsContainer,{SDK:Y}),se.participantKick&&a.createElement(M.KickParticipantContainer,{SDK:Y}),se.membersUnban&&a.createElement(O.UnbanParticipantContainer,{SDK:Y}),se.participantsManagement&&a.createElement(C.MuteParticipantContainer,{SDK:Y}),se.adminAssignment&&a.createElement(S.AssignAdminContainer,{SDK:Y}),se.isLoaderVisible&&a.createElement(w.default,null)))}},353506:(e,t,n)=>{"use strict";n.d(t,{AssignAdminContainer:()=>_});var r=n(570655),a=n(667294),o=n(50533),i=n(881150),l=n(121255),s=n(697483),c=n(662208),u=n(329538),d=n(908651),p=n(614914),f=n(745284),m=n(464380),_=function(e){var t=e.SDK,n=(0,o.useSelector)((function(e){return e.adminAssignment?e.participants[e.adminAssignment.participant.peerId]:void 0})),_=(0,o.useSelector)((function(e){return e})),g=(0,o.useDispatch)(),h=(0,r.__read)((0,a.useState)(!0),2),v=h[0],A=h[1],E=(0,r.__read)((0,a.useState)(""),2),C=E[0],y=E[1],S=a.useContext(c.LangContext).getLang;(0,a.useEffect)((function(){g({type:l.SHOW_LOADER,isLoaderVisible:!0}),new Promise((function(e,t){n&&n.peerId<0?(0,u.getGroupById)(-n.peerId).then((function(t){var n,r=t.groups;e(r&&r.length>0?null===(n=r[0])||void 0===n?void 0:n.name:"")})).catch((function(e){return t(e)})):(0,u.loadUsers)({user_ids:n&&String(n.peerId),name_case:"dat"}).then((function(t){var n=(0,r.__read)(t,1)[0];e((null==n?void 0:n.first_name)+" "+(null==n?void 0:n.last_name))})).catch((function(e){return t(e)}))})).then((function(e){y(e),A(!1),g({type:l.SHOW_LOADER,isLoaderVisible:!1})})).catch(console.log)}),[n]);var w=(0,a.useCallback)((function(){g({type:l.TOGGLE_ADMIN_ASSIGNMENT})}),[]),b=(0,a.useCallback)((function(){var e=(0,s.getParticipantExternalId)(n);e?(t.grantRoles(e,[m.UserRole.ADMIN],!1).then((function(){n&&g({type:l.CHANGE_PARTICIPANT_ROLES,participantId:n.peerId,data:n.roles?(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(n.roles)),[m.UserRole.ADMIN]):[m.UserRole.ADMIN]})})).catch(console.log),p.callStats.logEvent({call_event_type:l.CallActionEventType.ASSIGN_ADMIN,session_id:_.callData.callId,peer_id:_.peer,is_group_call:(0,f.isGroupCallByPeer)(_.peer)}),w()):w()}),[]);return v?null:a.createElement(d.AssignAdminModal,{onClose:w,title:S("calls_dialog_assign_admin_role_title"),description:S("calls_dialog_assign_admin_role_description").replace("{name}",C),actionButtons:[a.createElement(i.default,{onClick:w,appearance:"secondary",key:"cancel"},S("calls_dialog_assign_admin_role_action_later")),a.createElement(i.default,{onClick:b,key:"primary"},S("calls_dialog_assign_admin_role_action_primary"))]})}},108519:(e,t,n)=>{"use strict";n.d(t,{AudioContainer:()=>_});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(483379),s=n(745284),c=n(464380),u="incoming",d="outgoing",p="connecting",f="connected",m="end";function _(e){var t,n=e.onBeforeCallStart,_=e.onAfterCallFinish,g=e.callSounds,h=(0,o.useSelector)((function(e){return e})),v=(0,a.useRef)(),A=((t={}).incoming=(0,a.useRef)(null),t.outgoing=(0,a.useRef)(null),t.connecting=(0,a.useRef)(null),t.connected=(0,a.useRef)(null),t.end=(0,a.useRef)(null),t),E={controls:!1,preload:"auto"},C=(0,a.useCallback)((function(e){var t=A[e].current;t&&t.paused&&t.play().catch((function(){}))}),[]),y=(0,a.useCallback)((function(e){var t=A[e].current;t&&!t.paused&&(t.pause(),t.currentTime=0)}),[]),S=(0,a.useCallback)((function(){Object.keys(A).forEach(y)}),[]),w=(0,a.useCallback)((function(e){var t=A[e].current;if(t){var n=t.volume;t.volume=0,t.play().catch((function(){})),t.pause(),t.currentTime=0,t.volume=n}}),[]),b=(0,a.useCallback)((function(){n&&n()}),[n]),T=(0,a.useCallback)((function(){_&&_()}),[_]);return(0,a.useEffect)((function(){return l.browser.safari&&document.body.addEventListener("mousedown",(function e(){Object.keys(A).forEach(w),document.body.removeEventListener("mousedown",e)})),function(){S(),T()}}),[]),(0,a.useEffect)((function(){var e,t,n=v.current||h,a=h;n.mode!==a.mode&&(n.mode!==i.Mode.READY||a.mode!==i.Mode.INCOMING&&a.mode!==i.Mode.CALL||b(),n.mode===i.Mode.INCOMING&&y(u),a.mode===i.Mode.INCOMING&&C(u),a.mode!==i.Mode.READY||n.mode!==i.Mode.INCOMING&&n.mode!==i.Mode.CALL||(S(),C(m),T()));var o=a.me,l=n.participants,_=a.participants,g=null===(e=l[o])||void 0===e?void 0:e.status,A=null===(t=_[o])||void 0===t?void 0:t.status;g!==A&&(g===c.ParticipantStatus.CONNECTING&&y(p),A===c.ParticipantStatus.CONNECTING&&C(p));var E=Object.keys(_).some((function(e){return l[e]&&l[e].status===c.ParticipantStatus.CONNECTED})),w=Object.keys(_).some((function(e){var t=l[e],n=_[e];return t&&t.status!==n.status&&n.status===c.ParticipantStatus.CONNECTED}));!E&&w&&C(f),a.mode===i.Mode.CALL&&(!function(e,t,n,a){var o,i,l=!1;try{for(var s=(0,r.__values)(Object.values(e)),u=s.next();!u.done;u=s.next()){var d=u.value;if(d.peerId!==t){if(d.status===c.ParticipantStatus.CONNECTED)return!1;d.status===c.ParticipantStatus.WAITING&&(!a||n.has(d.peerId))&&(l=!0)}}}catch(e){o={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return l}(_,o,a.participantsAddedByMe,(0,s.isGroupCallByPeer)(h.peer))?y(d):C(d)),v.current=h}),[h]),a.createElement(a.Fragment,null,a.createElement("audio",(0,r.__assign)({src:g.incoming,ref:A.incoming,loop:!0},E)),a.createElement("audio",(0,r.__assign)({src:g.outgoing,ref:A.outgoing,loop:!0},E)),a.createElement("audio",(0,r.__assign)({src:g.connected,ref:A.connected,loop:!1},E)),a.createElement("audio",(0,r.__assign)({src:g.connecting,ref:A.connecting,loop:!0},E)),a.createElement("audio",(0,r.__assign)({src:g.end,ref:A.end,loop:!1},E)))}},174635:(e,t,n)=>{"use strict";n.d(t,{CallByNameContainer:()=>m});var r=n(570655),a=n(667294),o=n(790281),i=n(662208),l=n(50533),s=n(121255),c=n(329538),u=n(881150),d=n(706885),p=n(431469),f=n(788822),m=function(e){var t=e.bridge,n=(0,l.useSelector)((function(e){return e})),m=(0,l.useDispatch)(),_=(0,r.__read)((0,a.useState)([]),2),g=_[0],h=_[1],v=(0,r.__read)((0,a.useState)(n.me),2),A=v[0],E=v[1],C=a.useContext(i.LangContext).getLang,y=(0,r.__read)((0,a.useState)(""),2),S=y[0],w=y[1],b=(0,a.useCallback)((function(e){return e.name}),[]),T=(0,a.useCallback)((function(e){return e.id}),[]),I=(0,p.useIndexer)([],b,T),k=n.participants[n.me],N=S?I.search(S):g,P=(0,a.useCallback)((function(e){w(e.target.value)}),[]),D=function(e,t){void 0===t&&(t=!1);var n="id"in e?e.id:e.peerId,r="screen_name"in e?"/"+e.screen_name:e.link,a="photo_100"in e?e.photo_100:e.photo;return{id:t?n:-n,name:(0,f.escape)(e.name),link:r,photo:a}};(0,a.useEffect)((function(){var e=[D(k,!0)];(0,c.getGroupsForCall)().then((function(t){t.count>0&&t.items.forEach((function(t){e.push(D(t))}))})).finally((function(){h(e),e.forEach((function(e){return I.add(e)}))}))}),[]);var M=(0,a.useCallback)((function(e){if(n.callByName){var r=n.callByName,a=r.peerId,o=r.entryPoint,i=r.joinLink;i?t.joinCallByLink(i,void 0,e,o,A>0?0:A):a?t.call(a,e,void 0,o,A>0?0:A):t.startCall(e,o,!0,A>0?0:A)}}),[A]);if(!g.length)return a.createElement(d.default,null);var L=[a.createElement(u.default,{onClick:function(){return M(!1)},key:"callByNameByAudio",appearance:"secondary"},C("calls_call_by_name_audio_button")),a.createElement(u.default,{onClick:function(){return M(!0)},key:"callByNameByVideo"},C("calls_call_by_name_video_button"))];return a.createElement(o.CallByNameModal,{items:N,actionButtons:L,selectedId:A,onListItemClick:function(e){E(e)},onClose:function(){m({type:s.CHANGE_MODE,mode:s.Mode.READY})},participantMe:k,onSearchChange:P})}},410531:(e,t,n)=>{"use strict";n.d(t,{CallContainer:()=>H});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(242422),s=n(492512),c=n(362542),u=n(548237),d=n(269481),p=n(75794),f=n(884143),m=n(279060),_=n(169610),g=n(690015),h=n(745284),v=n(697483),A=n(614914),E=n(561235),C=n(662208),y=n(498110),S=n(774351),w=n(464380),b=n(139230),T=n(613335),I=n(674543),k=n(659397),N=n(768606),P=n(290514),D=n(147853),M=n(259684),L=n(662727),O=n(766610),R=n(707604),x=n(820717),B=n(233194);function H(e){var t,n,T,H,F,G,V,W=e.SDK,z=e.navigateToConvo,j=e.navigateToProfile,Y=e.onHandCountChanged,K=e.isVirtualBackgroundSupported,Q=(0,o.useSelector)((function(e){return e})),q=(0,o.useDispatch)(),J=(0,a.useContext)(C.LangContext).getLang,X=(0,a.useContext)(y.ConfigContext),Z=X.isModalView,$=X.debugLog,ee=X.enableScreenTrack,te=X.enableProducerScreenTrack,ne=X.allowPushToTalk,re=X.enableVirtualBackground,ae=Q.peer,oe=(0,a.useMemo)((function(){var e,t,n,r;return(0,h.isGroupCallByPeer)(ae)||(null===(t=null===(e=Q.participants[Q.me])||void 0===e?void 0:e.mediaSettings)||void 0===t?void 0:t.isScreenSharingEnabled)||(null===(r=null===(n=Q.participants[ae])||void 0===n?void 0:n.mediaSettings)||void 0===r?void 0:r.isScreenSharingEnabled)}),[Q.peer,Q.participants]),ie=oe?Q.callData.conversation:Q.participants[ae],le=Q.participants[Q.me],se=le.mediaSettings||{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},ce=le.permissions,ue=(0,a.useMemo)((function(){return(0,v.getActiveParticipantsCount)(Q)}),[Q.participants]),de=ue>1,pe=de||(0,v.isParticipantWithVideo)(le),fe=(0,v.getNonAnonymousConnectParticipantsCount)(Q),me=oe&&((0,v.isAdmin)(le)||(0,v.isCreator)(le))&&fe>1&&1===(0,v.getConnectedAdminsCount)(Q),_e=oe||ue>2,ge=_e&&pe&&!Q.isOratorMode,he=_e&&pe&&Q.isOratorMode,ve=null!==Q.adminPinnedParticipant,Ae=!ve&&null!==Q.pinnedParticipant,Ee=!Ae&&null!==Q.screenSharingPinnedParticipant,Ce=Q.uiMode===i.UIMode.FULLSCREEN,ye=(0,a.useMemo)((function(){return W.browser.isScreenCapturingSupported()}),[]),Se=(null===(t=Q.callData)||void 0===t?void 0:t.canFinishCall)||oe&&0===ae&&(0,v.participantIsAdmin)(le),we=!!Q.translation.deferredId&&!Q.translation.isOn,be=(0,r.__read)((0,a.useState)(!1),2),Te=be[0],Ie=be[1],ke=(0,r.__read)((0,a.useState)(!1),2),Ne=ke[0],Pe=ke[1],De=(0,r.__read)((0,a.useState)(0),2),Me=De[0],Le=De[1],Oe=(0,a.useMemo)((function(){return(0,v.getActiveParticipants)(Q)}),[Q.participants,Q.me,Q.groupId,Q.meGroup,Q.adminPinnedParticipant,Q.screenSharingPinnedParticipant,Q.pinnedParticipant,Q.speakers,Q.gridScrollPosition,Q.gridScrollFirstVisible,Q.oratorScrollPosition,Q.oratorScrollFirstVisible,Q.isOratorMode,Q.uiMode]),Re=(0,a.useMemo)((function(){return(0,v.getActiveParticipants)(Q,!0)}),[Q.participants,Q.me,Q.groupId,Q.meGroup,Q.adminPinnedParticipant,Q.screenSharingPinnedParticipant,Q.pinnedParticipant]),xe=(0,a.useCallback)((function(e,t){var n=Q.pinnedParticipant===t?null:t;Q.screenSharingPinnedParticipant===t&&(n=null),Q.screenSharingPinnedParticipant&&q({type:i.SET_SCREEN_SHARING_PINNED_PARTICIPANT,screenSharingPinnedParticipant:null}),q({type:i.SET_PINNED_PARTICIPANT,pinnedParticipant:n})}),[Q.pinnedParticipant,Q.screenSharingPinnedParticipant]),Be=(0,a.useCallback)((function(e,t){Q.isOratorMode||q({type:i.TOGGLE_ORATOR_MODE,isOratorMode:!0}),Q.pinnedParticipant!==t&&q({type:i.SET_PINNED_PARTICIPANT,pinnedParticipant:t})}),[Q.isOratorMode,Q.pinnedParticipant]),He=(0,a.useMemo)((function(){return Oe.map((function(e){var t,n,r,o,i,l,s,c,u,d,f=e.mediaSettings||{},m=f.isAudioEnabled,_=f.isScreenSharingEnabled,g=e.peerId===Q.me,h=g?J("calls_own_label"):e.shortName?e.shortName:e.name;if(!e.visible)return a.createElement(R.ParticipantLite,{id:e.peerId,key:e.peerId,isInfoShown:!0,isMe:g,isHandRaised:e.wasConnected&&(null===(n=null===(t=e.statusData)||void 0===t?void 0:t.hand)||void 0===n?void 0:n.state),hasAudio:!!m,photo:e.photo,name:h,letter:null!==(o=null===(r=null==e?void 0:e.name)||void 0===r?void 0:r[0])&&void 0!==o?o:"",wasConnected:e.wasConnected,onClickParticipant:xe,isPinned:Q.isOratorMode&&(Number(e.peerId)===Number(Q.pinnedParticipant)||Number(e.peerId)===Number(Q.screenSharingPinnedParticipant)),isPinnedByAdmin:Q.isOratorMode&&e.peerId===Number(Q.adminPinnedParticipant)});var A=Q.isOratorMode&&(ee||te),E=(0,v.getStream)(e,A&&(null===(i=e.mediaSettings)||void 0===i?void 0:i.isVideoEnabled)),C=!(A&&(null===(l=e.mediaSettings)||void 0===l?void 0:l.isVideoEnabled))&&_,y=(0,v.isParticipantWithVideo)(e),S=Q.localStatus===w.ParticipantStatus.CONNECTED?e.status:w.ParticipantStatus.CONNECTED,b=(0,v.getParticipantActions)(Q,W,q,e,!0,J,z,j,!1);return a.createElement(p.Participant,{id:e.peerId,key:e.peerId,isVisible:e.visible,isInfoShown:!0,isMe:g,isHandRaised:null===(c=null===(s=e.statusData)||void 0===s?void 0:s.hand)||void 0===c?void 0:c.state,hasVideo:!!y,hasAudio:!!m,isSharingScreen:!!C,isSpeaking:m&&Q.speakers[e.peerId]&&e.visible,stream:E,photo:e.photo,name:h,letter:null!==(d=null===(u=null==e?void 0:e.name)||void 0===u?void 0:u[0])&&void 0!==d?d:"",status:S,allowContain:!1,wasConnected:e.wasConnected,networkStatus:e.networkStatus,onClickParticipant:Q.isOratorMode?xe:void 0,onDblClickParticipant:Q.isOratorMode?void 0:Be,actions:b,isPinned:Q.isOratorMode&&(Number(e.peerId)===Number(Q.pinnedParticipant)||Number(e.peerId)===Number(Q.screenSharingPinnedParticipant)),isPinnedByAdmin:Q.isOratorMode&&e.peerId===Number(Q.adminPinnedParticipant)})}))}),[Oe,Re]),Ue=function(e){return q({type:i.CHANGE_UI_MODE,mode:e})},Fe=function(){(0,_.checkPermissions)(W,[w.MediaOption.AUDIO,w.MediaOption.VIDEO]).then((function(){q({type:i.TOGGLE_POPUP,data:i.POPUP_SETTINGS})}))},Ge=function(){q({type:i.TOGGLE_POPUP,data:i.POPUP_TRANSLATION})},Ve=(0,a.useCallback)((function(){Z&&(Q.uiMode===i.UIMode.FULLSCREEN?((0,S.pause)(.3,null).then((function(){Ue(i.UIMode.COLLAPSED)})),Ue(i.UIMode.DEFAULT)):Ue(i.UIMode.COLLAPSED))}),[Q.uiMode]),We=(0,a.useCallback)((function(){q({type:i.TOGGLE_ORATOR_MODE,isOratorMode:!Q.isOratorMode})}),[Q.isOratorMode]),ze=(0,a.useCallback)((function(){q({type:i.TOGGLE_PARTICIPANTS_ASIDE,isShownParticipantsAside:!Q.isShownParticipantsAside})}),[Q.isShownParticipantsAside]),je=(0,a.useCallback)((function(){q({type:i.MANAGEMENT,isOpen:!0})}),[]),Ye=(0,a.useCallback)((function(){q({type:i.MANAGEMENT,isOpen:!0,managementView:b.ManagementViews.CALL_LINK})}),[]),Ke=(0,a.useCallback)((function(){if(!Ne){var e=!se.isVideoEnabled||se.isScreenSharingEnabled&&!ee;(e?(0,_.checkPermissions)(W,[w.MediaOption.VIDEO]):Promise.resolve()).then((function(){Pe(!0),ee||se.isScreenSharingEnabled&&W.captureScreen(!1),W.toggleLocalVideo(e).finally((function(){Pe(!1)}))})),A.callStats.logEvent({call_event_type:e?i.CallActionEventType.VIDEO_ENABLED:i.CallActionEventType.VIDEO_DISABLED,session_id:Q.callData.callId,peer_id:Q.peer,is_group_call:(0,h.isGroupCallByPeer)(Q.peer),reason:e?void 0:"manual"})}}),[se,Ne]),Qe=(0,a.useCallback)((function(){W.captureScreen(!se.isScreenSharingEnabled).catch((function(e){var t=(0,B.getBrowserInfo)().name;i.MediaError.SCREEN_PERMISSION==e&&(null==t?void 0:t.toLowerCase())!==B.BROWSER.FIREFOX||q({type:i.ERROR,text:J("calls_error_disabled_screen_sharing")})})),A.callStats.logEvent({call_event_type:se.isScreenSharingEnabled?i.CallActionEventType.SCREEN_SHARING_STOPPED:i.CallActionEventType.SCREEN_SHARING_STARTED,session_id:Q.callData.callId,peer_id:Q.peer,is_group_call:(0,h.isGroupCallByPeer)(Q.peer)})}),[se.isScreenSharingEnabled,Q.screenSharers,Q.callData.callId,Q.peer]),qe=(0,a.useCallback)((function(){Ve(),z(Q.peer)}),[Q.peer,Q.uiMode]),Je=(0,a.useCallback)((function(){if(!Te){var e=!se.isAudioEnabled;(e?(0,_.checkPermissions)(W,[w.MediaOption.AUDIO]):Promise.resolve()).then((function(){var t;Ie(!0),(null===(t=Q.notification)||void 0===t?void 0:t.type)===i.NotificationType.SPEAKING_ON_MUTE&&q({type:i.CALL_NOTIFICATION,notification:null}),W.toggleLocalAudio(e).finally((function(){Ie(!1)}))}))}}),[se,Te]),Xe=(0,a.useCallback)((function(){var e,t,n,a,o=!(null===(t=null===(e=le.statusData)||void 0===e?void 0:e.hand)||void 0===t?void 0:t.state);W.changeParticipantState({hand:o?i.SdkHandType.RAISED:i.SdkHandType.LOWERED}),q({type:i.CHANGE_PARTICIPANT_STATE,participantId:le.peerId,data:(0,r.__assign)((0,r.__assign)({},le.statusData),{hand:{state:!(null===(a=null===(n=le.statusData)||void 0===n?void 0:n.hand)||void 0===a?void 0:a.state),ts:Date.now()}})}),A.callStats.logEvent({call_event_type:o?i.CallActionEventType.HAND_RAISED:i.CallActionEventType.HAND_LOWERED,session_id:Q.callData.callId,peer_id:Q.peer,is_group_call:(0,h.isGroupCallByPeer)(Q.peer)})}),[null===(T=null===(n=le.statusData)||void 0===n?void 0:n.hand)||void 0===T?void 0:T.state]),Ze=(0,a.useCallback)((function(){q({type:i.TOGGLE_POPUP,data:i.POPUP_EXIT})}),[]),$e=(0,a.useCallback)((function(){q({type:i.TOGGLE_POPUP,data:i.POPUP_TRANSFER_ADMIN_RIGHTS})}),[]),et=(0,a.useCallback)((function(){W.hangup(),A.callStats.logEvent({call_event_type:i.CallActionEventType.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:Q.callData.callId,peer_id:Q.peer,is_group_call:(0,h.isGroupCallByPeer)(Q.peer),reason:"none",group_call_users_count:ue})}),[Q.callData.callId,Q.peer,ue]),tt=(0,a.useCallback)((function(){q({type:i.CHANGE_UI_MODE,mode:Ce?i.UIMode.DEFAULT:i.UIMode.FULLSCREEN}),q({type:i.SET_TOOLTIP,tooltips:null})}),[Q.uiMode]),nt=(0,a.useCallback)((function(e,t){var n;q({type:i.SET_TOOLTIP,tooltips:(n={},n[e]=t,n)})}),[]),rt=(0,a.useCallback)((function(){q({type:i.SET_TOOLTIP,tooltips:null})}),[]);(0,a.useEffect)((function(){we&&nt("streaming",!0)}),[we]);(0,a.useEffect)((function(){Q.isOratorMode||function(e){for(var t,n=(null===(t=document.querySelectorAll('[data-calls-id="grid-item"]')[0])||void 0===t?void 0:t.offsetWidth)||1/0,r=6*Math.floor(e/n),a=0;a<Re.length;a++){var o=a>=r&&a<r+30;Re[a].visible!==o&&(0,N.throttleAccumulateDispatchParticipant)(q,Re[a].peerId,{visible:o})}}(Q.gridScrollPosition)}),[Q.isOratorMode,Q.uiMode,Q.gridScrollPosition,Re]),(0,a.useEffect)((function(){Q.isOratorMode&&function(e){for(var t,n=(null===(t=document.querySelectorAll('[data-calls-id="content"]')[0])||void 0===t?void 0:t.offsetHeight)||0,r=Math.floor(e/148)-1,a=Math.min(Q.config.videoSlotsCount,n/148+3),o=0;o<Re.length;o++){var i=o>=r&&o<r+a;Re[o].visible!==i&&(0,N.throttleAccumulateDispatchParticipant)(q,Re[o].peerId,{visible:i})}}(Q.oratorScrollPosition)}),[Q.isOratorMode,Q.uiMode,Q.oratorScrollPosition,Re]);var at=(0,a.useCallback)((0,k.debounce)((function(e){var t,n=(null===(t=document.querySelectorAll('[data-calls-id="grid-item"]')[0])||void 0===t?void 0:t.offsetWidth)||1/0,r=6*Math.floor(e/n);q({type:i.SET_GRID_SCROLL_POSITION,position:e,firstVisible:r})}),200),[]),ot=(0,a.useCallback)((0,k.throttle)((function(e){var t,n=document.querySelectorAll('[data-calls-id="participant"]')[0],r=n?n.offsetWidth+8:1/0,a=(null===(t=document.querySelectorAll('[data-calls-id="content"]')[0])||void 0===t?void 0:t.offsetHeight)||0,o=Math.floor(e/r)-1,l=Math.min(Q.config.videoSlotsCount,a/r+3);q({type:i.SET_ORATOR_SCROLL_POSITION,position:e,firstVisible:o,numberOfVisible:l})}),100),[Q.config]),it=(0,a.useMemo)((function(){var e,t=[{text:J("calls_call_menu_settings"),key:"settings",onClick:Fe,disabled:!1}];Q.config.streaming&&!(0,v.isParticipantAnonym)(Q.me)&&t.push({text:J("calls_call_menu_translation"),key:"translation",onClick:Ge,disabled:!!(null===(e=Q.translation)||void 0===e?void 0:e.isOn)&&(0,I.canStopTranslation)(Q)}),(0,v.canMuteParticipants)(le)&&oe&&t.push({text:J("calls_call_menu_mute_audio_video_all"),key:"muteAll",onClick:function(){q({type:i.TOGGLE_PARTICIPANTS_MANAGEMENT,data:{mode:i.ParticipantsManagementMode.ALL}})}}),(0,v.canMuteParticipants)(le)&&oe&&de&&t.push({text:J("calls_call_menu_enable_media_request"),key:"unmuteRequest",onClick:function(){W.unmuteRequest(void 0,[w.MediaOption.AUDIO,w.MediaOption.VIDEO,w.MediaOption.SCREEN_SHARING]).catch(console.log),A.callStats.logEvent({call_event_type:i.CallActionEventType.ASK_ALL_TO_UNMUTE,session_id:Q.callData.callId,peer_id:Q.peer,is_group_call:(0,h.isGroupCallByPeer)(Q.peer)})}});return $&&t.push({text:J("calls_call_menu_debug"),key:"debugLog",onClick:function(){window.__VKCallsSDKLogs__()},disabled:!1}),re&&K&&(t.push({separator:!0}),t.push({text:J("calls_virtual_background"),key:i.POPUP_VIRUTAL_BACKGROUND,onClick:function(){q({type:i.TOGGLE_POPUP,data:i.POPUP_VIRUTAL_BACKGROUND})}}),t.push({separator:!0})),t}),[Q.config.streaming,Q.me,null===(H=Q.translation)||void 0===H?void 0:H.isOn,Q.participants[Q.me],Q.conversationOptions]);(0,a.useEffect)((function(){return function(){q({type:i.SET_TOOLTIP,tooltips:null})}}),[]);var lt=(0,a.useCallback)((function(){ve&&(0,v.canPinParticipants)(le)?(W.pinParticipant(Q.adminPinnedParticipant,!0).then((function(){q({type:i.SET_ADMIN_PINNED_PARTICIPANT,data:null})})).catch(console.log),A.callStats.logEvent({call_event_type:i.CallActionEventType.ADMIN_UNPIN,session_id:Q.callData.callId,peer_id:Q.peer,is_group_call:(0,h.isGroupCallByPeer)(Q.peer)})):(q({type:i.SET_SCREEN_SHARING_PINNED_PARTICIPANT,screenSharingPinnedParticipant:null}),q({type:i.SET_PINNED_PARTICIPANT,pinnedParticipant:null}))}),[Q.adminPinnedParticipant,Q.participants[Q.me].roles,Q.peer,Q.callData.callId]),st=(0,a.useCallback)((function(e){ce.audio>0&&(0,D.onPushToTalkHandler)(e,se.isAudioEnabled,q,Q)}),[ce.audio,se.isAudioEnabled,Q.notification]);(0,a.useEffect)((function(){ne&&ce.audio>0&&(0,D.pushToTalkToggleAudio)(Q.pushToTalkEnabled,se,!0)}),[]),(0,a.useEffect)((function(){return ne&&!(0,M.isCollapsedLayout)(Q)&&Q.pushToTalkEnabled?((0,D.pushToTalkActivate)(st),function(){(0,D.pushToTalkDeactivate)(st)}):function(){}}),[Q.uiMode,Q.pushToTalkEnabled,st]);var ct=(0,a.useMemo)((function(){var e;return a.createElement(g.CallNotificationContainer,{dispatch:q,notification:Q.notification,participant:Q.participants[null===(e=Q.notification)||void 0===e?void 0:e.data]})}),[Q.notification,Q.participants[null===(F=Q.notification)||void 0===F?void 0:F.data]]),ut=(0,a.useMemo)((function(){return a.createElement(P.NotificationWithButtonContainer,null)}),[Q.waitingHall,Q.shouldShowDesktopAppNotification]);return(0,a.useEffect)((function(){if(!Q.callData.localTimeStamp&&!(0,h.isGroupCallByPeer)(Q.peer)&&!(0,L.getHangupStatus)(Q,J)){var e=Q.participants[Q.peer];e&&e.status===w.ParticipantStatus.CONNECTED&&q({type:i.LOCAL_TIME_START,data:Date.now()})}}),[Q]),(0,a.useEffect)((function(){oe&&Le(ue)}),[ue]),(0,a.useEffect)((function(){var e,t,n,a,o=[],i=function(e){return!Q.participants[e]||!Q.participants[e].mediaSettings||!Q.participants[e].name};try{for(var l=(0,r.__values)(Oe),s=l.next();!s.done;s=l.next()){var c=s.value;i(p=Number(c.peerId))&&o.push(p)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}try{for(var u=(0,r.__values)(Q.speakersInHeader),d=u.next();!d.done;d=u.next()){var p=d.value;i(Number(p))&&o.push(Number(p))}}catch(e){n={error:e}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}if(window.Calls&&o.length>0){var f=Q.callData.callId||"",m={withConversation:!Q.callData.conversation,awaitImages:!1};(0,x.loadCallParticipants)(Q,q,window.Calls,f,o,m).catch((function(e){var t,n;(null===(t=window.Calls)||void 0===t?void 0:t.eventHandlers.onError)&&e&&(null===(n=window.Calls)||void 0===n||n.eventHandlers.onError(e)),(0,w.debugMessage)(w.DebugMessageType.ERROR,e),console.error(e)}))}}),[Q.peer,Q.speakersInHeader,Oe]),a.createElement(d.CallModal,{onClose:me?$e:et,isCautionBoxShown:!me,onBackdropClick:Ve},a.createElement(s.Call,{info:a.createElement(E.CallHeaderContainer,{onHandCountChanged:Y}),callMenuActions:it,isVideoAllowed:se.isVideoEnabled||ce.video>0,isAudioAllowed:se.isAudioEnabled||ce.audio>0,isVideoEnabled:ee?se.isVideoEnabled:se.isVideoEnabled&&!se.isScreenSharingEnabled,isAudioEnabled:se.isAudioEnabled,isScreenSharingEnabled:se.isScreenSharingEnabled,isOratorMode:Q.isOratorMode,isFullScreen:Ce,onToggleVideo:Ke,onToggleAudio:Je,onToggleScreenShare:Qe,onLeaveCall:me?$e:Se?Ze:et,onCollapseCall:Z?Ve:null,onToggleOratorMode:We,onFullScreenToggle:tt,onTooltipChange:nt,onHidePanel:rt,onChat:qe,onHandClick:Xe,isParticipantControlActive:Q.isManagementOpen,isLayoutSwitchShown:oe&&de,isHandRaised:null===(V=null===(G=le.statusData)||void 0===G?void 0:G.hand)||void 0===V?void 0:V.state,isHandControlShown:oe,isChatControlShown:!!ae&&!Q.groupId,isScreenShareControlShown:ce.screenSharing>0&&ye,isStreamingControlShown:we,isChainControlShown:!(0,v.isParticipantAnonym)(le.peerId),onDeferredStreamStart:function(){if(Q.translation.deferredId){var e={isOn:!1,startStreamParams:{upcomingStreamParams:{ovId:Q.translation.deferredId}}};q({type:i.SET_TRANSLATION,data:e}),q({type:i.TOGGLE_POPUP,data:i.POPUP_TRANSLATION_START_COUNTDOWN})}},onParticipantsClick:je,chatUnreadCount:Q.chatUnreadCount,notification:ct,tooltips:Q.tooltips,amISpeaking:!!Q.speakers[Q.me],onChainClick:Ye,notificationWithButton:ut,participantCount:Me,isPopupOrModalOpen:!(!Q.popup&&!Q.isManagementOpen)},a.createElement(a.Fragment,null,!_e&&a.createElement(l.OneToOne,(0,r.__assign)({},function(e,t,n,r){var a,o=e[t]||{},i=e[n]||{},l=o.mediaSettings,s=i&&i.mediaSettings?i.mediaSettings:{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},c=(0,v.isParticipantWithVideo)(o),u=(0,v.getStream)(o),d=(0,v.isParticipantWithVideo)(i),p=(0,v.getStream)(i);return{hasAudio:!!(null==l?void 0:l.isAudioEnabled),hasVideo:c,isSharingScreen:!!(null==l?void 0:l.isScreenSharingEnabled),stream:u,id:t,name:r("calls_own_label"),letter:null===(a=o.name)||void 0===a?void 0:a.slice(0,1),wasConnected:!!o.wasConnected,networkStatus:o.networkStatus,opponentHasAudio:!!(null==s?void 0:s.isAudioEnabled),opponentHasVideo:d,opponentIsSharingScreen:!!(null==s?void 0:s.isScreenSharingEnabled),opponentStream:p,opponentPhoto:i.photo,opponentId:n,opponentName:i.name||n.toString(),opponentWasConnected:!!i.wasConnected,opponentNetworkStatus:i.networkStatus}}(Q.participants,Q.me,Q.peer,J))),ge&&a.createElement(c.CallGridNew,{onScroll:at,scrollPosition:Q.gridScrollPosition,participantsCount:ue,participantsShiftCount:Q.gridScrollFirstVisible<60?0:Q.gridScrollFirstVisible-60},He),he&&a.createElement(u.CallOrator,{orator:U(Q,J,Qe),oratorTitle:a.createElement(O.OratorTitle,{orator:(0,v.getOrator)(Q),me:Q.me,isPinned:Ae,isPinnedByAdmin:ve,isPinnedByShareScreen:Ee,isUnpinAllowed:(0,v.canPinParticipants)(le)||!ve,onUnpin:lt,tooltips:Q.tooltips,onTooltipChange:nt}),onToggleParticipantsAside:ze,isShownParticipantsAside:Q.isShownParticipantsAside,onScroll:ot,scrollPosition:Q.oratorScrollPosition,participantsAsideCount:ue,participantsAsideShift:Q.oratorScrollFirstVisible<30?0:148*(Q.oratorScrollFirstVisible-30)-8},He),_e&&!pe&&a.createElement(f.default,null,a.createElement(m.CallPhoto,{id:ae,photo:ie&&ie.photo||"",waves:!0,alt:ie&&ie.tab||"",className:"CallPhoto--orator"})))))}function U(e,t,n){var r,o=null!==(r=e.participants[e.adminPinnedParticipant||e.screenSharingPinnedParticipant||e.pinnedParticipant||e.orator||e.me])&&void 0!==r?r:{},i=o.mediaSettings||{},l=i.isAudioEnabled,s=i.isScreenSharingEnabled,c=o.peerId===e.me;c&&e.groupId&&e.meGroup&&(o=(0,T.mergeGroupToParticipant)(e.meGroup,o));var u=(0,v.isParticipantWithVideo)(o),d=(0,v.getStream)(o);return a.createElement(p.Participant,{id:o.peerId,key:o.peerId,isOrator:!0,isInfoShown:!0,isMe:c,hasVideo:!!u,hasAudio:!!l,isSharingScreen:!!s,stream:d,photo:o.photo,name:c?t("calls_own_label"):o.name,status:o.status,wasConnected:o.wasConnected,networkStatus:o.networkStatus,allowContain:!0,onStopScreenShare:n})}},94303:(e,t,n)=>{"use strict";n.d(t,{CallExitContainer:()=>f});var r=n(667294),a=n(50533),o=n(225652),i=n(881150),l=n(121255),s=n(444083),c=n(614914),u=n(745284),d=n(697483),p=n(662208),f=function(e){var t=e.SDK,n=(0,a.useSelector)((function(e){return e})),f=(0,a.useDispatch)(),m=r.useContext(p.LangContext).getLang,_=function(){return c.callStats.logEvent({call_event_type:l.CallActionEventType.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:n.callData.callId,peer_id:n.peer,is_group_call:(0,u.isGroupCallByPeer)(n.peer),reason:"none",group_call_users_count:(0,d.getActiveParticipantsCount)(n)})},g=(0,r.useCallback)((function(){f({type:l.TOGGLE_POPUP})}),[]);return r.createElement(o.CallExitModal,{onClose:g,actionButtons:[r.createElement(i.default,{onClick:function(){f({type:l.TOGGLE_POPUP}),_(),(0,s.onForceCallFinish)(t,n,f,m)},key:"forceCallFinish",appearance:"secondary"},m("calls_force_call_finish")),r.createElement(i.default,{onClick:function(){return f({type:l.TOGGLE_POPUP}),_(),t.hangup()},key:"leave"},m("calls_leave_call"))]})}},561235:(e,t,n)=>{"use strict";n.d(t,{CallHeaderContainer:()=>f});var r=n(570655),a=n(667294),o=n(50533),i=n(910472),l=n(745284),s=n(503592),c=n(697483),u=n(298811),d=n(662208),p=n(662727);function f(e){var t,n,f=e.onHandCountChanged,m=(0,o.useSelector)((function(e){return e})),_=(0,l.isGroupCallByPeer)(m.peer),g=(0,a.useContext)(d.LangContext),h=g.getLang,v=g.langNumeric,A=(0,r.__read)((0,a.useState)(null),2),E=A[0],C=A[1],y=(0,r.__read)((0,a.useState)(0),2),S=y[0],w=y[1],b=(0,r.__read)((0,a.useState)(null),2),T=b[0],I=b[1],k=(0,r.__read)((0,a.useState)(""),2),N=k[0],P=k[1];return a.useEffect((function(){var e=(0,l.isGroupCallByPeer)(m.peer)?m.callData.ts:m.callData.localTimeStamp;I((0,p.getCallTimer)(e));var t=setInterval((function(){return I((0,p.getCallTimer)(e))}),1e3);return function(){return clearInterval(t)}}),[m.peer,m.callData.localTimeStamp,m.callData.ts]),(0,a.useEffect)((function(){var e=(0,c.getRaisedHands)(m);e!==S&&(w(e),f&&f(e))}),[m.participants]),(0,a.useEffect)((function(){if(_){var e=m.speakersInHeader.reduce((function(e,t){return m.participants[t]&&(m.participants[t].shortName||m.participants[t].name)&&e.push(m.participants[t]),e}),[]);if(e.length>0){var t=h("calls_participants_speak",e.length).split(" ");C(a.createElement(a.Fragment,null,a.createElement("span",{className:"CallHeader__speak"},t[0]," "),(0,u.getParticipantsListLabel)(e,e.slice(0,2),(function(e){return e.shortName||e.name}),h,v,0,2)))}else C(null)}}),[m.participants,m.speakersInHeader]),(0,a.useEffect)((function(){var e="";m.translation.isOn&&(e=a.createElement(i.TranslationStatusContainer,null)),P(e)}),[m.translation.isOn]),a.createElement(s.CallHeader,{translation:N,speakers:_?E:null,hands:S,time:T,network:null!==(n=null===(t=m.participants[m.me])||void 0===t?void 0:t.networkStatus)&&void 0!==n?n:1,networkTooltipText:h("calls_status_bad_internet_connection")})}},139230:(e,t,n)=>{"use strict";n.d(t,{ManagementViews:()=>r,CallManagementContainer:()=>b});var r,a=n(570655),o=n(667294),i=n(50533),l=n(121255),s=n(186983),c=n(445586),u=n(177774),d=n(154463),p=n(881150),f=n(187252),m=n(820717),_=n(444083),g=n(389953),h=n(662208),v=n(697483),A=n(562192),E=n(58600),C=n(745284),y=n(498110),S=n(719481),w=n(564840);!function(e){e[e.MAIN=0]="MAIN",e[e.CALL_LINK=1]="CALL_LINK",e[e.ADD_PARTICIPANTS=2]="ADD_PARTICIPANTS",e[e.WAITING_HALL=3]="WAITING_HALL"}(r||(r={}));var b=function(e){var t,n,b=e.bridge,T=e.SDK,I=e.navigateToConvo,k=e.navigateToProfile,N=e.allowAddMembers,P=void 0!==N&&N,D=(0,i.useSelector)((function(e){return e})),M=(0,i.useDispatch)(),L=(0,o.useContext)(y.ConfigContext).allowWaitingHall,O=(0,a.__read)((0,o.useState)(D.callData.callUrlLink||""),2),R=O[0],x=O[1],B=D.managementView||r.MAIN,H=(0,a.__read)((0,o.useState)(B),2),U=H[0],F=H[1],G=(0,a.__read)((0,o.useState)(!1),2),V=G[0],W=G[1],z=(0,a.__read)((0,o.useState)(!1),2),j=z[0],Y=z[1],K=(0,a.__read)((0,o.useState)(!1),2),Q=K[0],q=K[1],J=(0,a.__read)((0,o.useState)(!1),2),X=J[0],Z=J[1],$=(0,a.__read)((0,o.useState)(!1),2),ee=$[0],te=$[1],ne=P||!!(null===(t=D.callData.conversation)||void 0===t?void 0:t.canAddMembers),re=null===(n=D.callData)||void 0===n?void 0:n.canFinishCall,ae=o.useContext(h.LangContext).getLang,oe=(0,C.isRequireAuthToJoin)(D),ie=(0,C.isWaitingHallEnabled)(D),le=(0,o.useCallback)((function(){M({type:l.MANAGEMENT,isOpen:!1})}),[]),se=(0,o.useCallback)((function(){F(r.MAIN)}),[]),ce=function(e){var t=D.callData.callId||"";return W(!0),(0,m.loadCallUrlLink)(M,t,e,(0,C.isAuthedByGroupId)(D)?D.groupId:0).then((function(e){x(e),W(!1)})).catch((function(e){console.error(e),W(!1),M({type:l.ERROR,text:ae("calls_get_url_link_error_text")})}))},ue=(0,o.useCallback)((function(){F(r.CALL_LINK),R||ce(!1).catch((function(){F(r.MAIN)}))}),[D.callData.callId,R]),de=(0,o.useCallback)((function(){M({type:l.SHOW_LOADER,isLoaderVisible:!0});var e=[(0,m.loadFriendsAction)(b,D,M)].concat((0,g.isChatPeer)(D.peer)?[(0,m.loadChatMembersAction)(D,M,D.peer,D.callData.conversation)]:[]).concat(b.authorizedGroupId?[(0,m.loadAllowedToCallGroupMembersAction)(b,D,M)]:[]);return Promise.all(e).then((function(){M({type:l.SHOW_LOADER,isLoaderVisible:!1}),F(r.ADD_PARTICIPANTS)})).catch((function(e){console.error(e),M({type:l.SHOW_LOADER,isLoaderVisible:!1})}))}),[D.peer,D.callData,D.friends,D.groupMembers]),pe=(0,o.useCallback)((function(){M({type:l.SHOW_LOADER,isLoaderVisible:!0});var e=[(0,S.loadAdditionalWaitingHall)(D,M)];return Promise.all(e).then((function(){M({type:l.SHOW_LOADER,isLoaderVisible:!1}),F(r.WAITING_HALL)})).catch((function(e){console.error(e),M({type:l.SHOW_LOADER,isLoaderVisible:!1})}))}),[D.waitingHall]),fe=(0,o.useCallback)((function(){M({type:l.TOGGLE_POPUP}),(0,_.onForceCallFinish)(T,D,M,ae)}),[D.callData.callId,D.imHash]);(0,o.useEffect)((function(){B===r.CALL_LINK&&ue()}),[]),(0,o.useEffect)((function(){var e=D.participants[D.me],t=(0,v.participantIsAdmin)(e),n=t;q(t),Z(n),te(L&&t)}),[D.participants[D.me]]);var me=(0,o.useCallback)((function(e){(0,m.setAnonymousJoin)(e)}),[]),_e=(0,o.useCallback)((function(e){(0,m.setWaitingHall)(e)}),[]),ge=(0,o.useCallback)((function(){return Y(!0)}),[]),he=(0,o.useCallback)((function(){return Y(!1)}),[]),ve=(0,o.useCallback)((function(){ce(!0).catch((function(){F(r.MAIN)}))}),[D.callData.callId,R]);return o.createElement(o.Fragment,null,U===r.MAIN&&o.createElement(s.CallManagementModal,{title:ae("calls_management_participants"),actionButtons:(re?[o.createElement(p.default,{onClick:fe,key:"forceCallFinish",appearance:"secondary"},ae("calls_force_call_finish"))]:[]).concat([o.createElement(p.default,{onClick:T.hangup,key:"leave"},ae("calls_leave_call"))]),onCloseModal:le},o.createElement(c.CallManagementMenu,{isLinkBlockShown:ne,linkBlockTitle:ae("calls_menu_link"),onLinkBlockClick:ue,callUrlLink:R}),o.createElement(d.CallParticipantListContainer,{SDK:T,onAddClick:de,onShowMoreWaitingHall:pe,navigateToProfile:k,navigateToConvo:I})),U===r.CALL_LINK&&o.createElement(s.CallManagementModal,{title:ae("calls_management_link"),hint:oe?ae("calls_management_link_anonymous_disallowed_hint"):"",onCloseModal:le,isWithBackButton:B!==r.CALL_LINK,onBackClick:se,actionButtons:(X?[o.createElement(p.default,{key:"invalidate-link",appearance:"tertiary",onClick:ve},ae("calls_link_invalidate"))]:[]).concat([o.createElement(E.CopyText,{key:"copy-link",text:R},o.createElement(p.default,{className:"CallManagementModal__copyTextButton",disabled:V,onClick:ge},ae("calls_link_copy")))])},o.createElement(u.CallLink,{link:R,isLinkLoading:V,isCopied:j,hideCopiedText:he}),Q&&o.createElement(A.CallLinkSettings,{onRequireAuthToJoinChanged:me,requireAuthToJoin:oe,isWaitingHallBlockShown:ee,onWaitingHallEnabledChanged:_e,isWaitingHallEnabled:ie})),U===r.ADD_PARTICIPANTS&&o.createElement(f.GroupCallSetupContainer,{bridge:b,SDK:T,isWithBackButton:!0,onBackClick:se}),U===r.WAITING_HALL&&o.createElement(w.WaitingHallListContainer,{isModal:!0,isWithBackButton:!0,onBackClick:se,navigateToProfile:k}))}},690015:(e,t,n)=>{"use strict";n.d(t,{CallNotificationContainer:()=>g});var r=n(570655),a=n(667294),o=n(121255),i=n(80125),l=n(662208),s=n(925082),c=n(112877),u=n(818114),d=n(911099),p=n(50533),f=n(745284),m=n(662727),_=n(697483),g=function(e){var t=e.dispatch,n=e.notification,g=e.participant,h=a.useContext(l.LangContext),v=h.getLang,A=h.langSex,E=(0,p.useSelector)((function(e){return e})),C=(0,a.useMemo)((function(){return function(e,t,n,r){void 0===r&&(r={name:"",sex:"0",shortName:""});if(!e)return null;switch(e.type){case o.NotificationType.SPEAKING_ON_MUTE:return t("calls_notification_mic_is_mute");case o.NotificationType.SCREEN_SHARING_STARTED:if(!r||!r.name)return a.createElement("span",null,t("calls_notification_screen_sharing_started"));var l=n(r.sex,"calls_notification_user_started_screen_sharing",t("calls_notification_user_started_screen_sharing",!0));return a.createElement("span",null,l.replace("{user}",r.name));case o.NotificationType.RAISED_HAND:if(!r||!r.name)return null;l=n(r.sex,"calls_notification_raised_hand",t("calls_notification_raised_hand",!0));return a.createElement("span",null,l.replace("{user}",r.name));case o.NotificationType.BAD_NETWORK_CONNECTION:return a.createElement("span",null,t("calls_notification_bad_network_connection"));case o.NotificationType.BAD_NETWORK_CONNECTION_DISABLE_CAMERA:return[a.createElement(i.DisabledVideoIconS,{key:"icon"}),a.createElement("span",{key:"text"},t("calls_notification_bad_network_connection_disable_camera"))];case o.NotificationType.ADMIN_MUTE:return a.createElement("span",{key:"text"},t("calls_notification_admin_mute"));case o.NotificationType.ADMIN_MUTE_PERMANENT:return a.createElement("span",{key:"text"},t("calls_notification_admin_permanent_mute"));case o.NotificationType.ADMIN_ROLE_GRANTED:return a.createElement("span",{key:"text"},t("calls_notification_admin_role_granted"));case o.NotificationType.USER_GRANTED_WITH_ADMIN_ROLE:var s=t("calls_notification_user_granted_with_admin_role").replace("{name}",r.shortName||r.name);return a.createElement("span",{key:"text"},s);case o.NotificationType.PINNED_BY_ADMIN:return a.createElement("span",{key:"text"},t("calls_notification_admin_pinned_self"));case o.NotificationType.USER_PINNED_BY_ADMIN:s=t("calls_notification_admin_pinned_user").replace("{name}",r.shortName||r.name);return a.createElement("span",{key:"text"},s);case o.NotificationType.PUSH_TO_TALK:s=t("calls_notification_push_to_talk_enabled");return[e.data?a.createElement(c.MicIconWithSpeakingIndicator,{key:"icon"}):a.createElement(u.MicIcon,{key:"icon"}),a.createElement("div",{key:"text",className:"CallNotification__pushToTalkText"},s)];case o.NotificationType.LINK_COPIED_TO_CLIPBOARD:s=t("calls_create_call_by_link_copied");return a.createElement("span",{key:"text"},s);default:return null}}(n,v,A,g)}),[n]),y=(0,a.useRef)(0);(0,a.useEffect)((function(){return y.current&&window.clearTimeout(y.current),n&&0!==n.timer&&(y.current=window.setTimeout((function(){t({type:o.CALL_NOTIFICATION,notification:null}),y.current=0}),n.timer||o.defaultNotificationLifeSpan)),function(){y.current&&window.clearTimeout(y.current)}}),[n]);var S=(0,a.useMemo)((function(){return(0,_.getActiveParticipants)(E,!0)}),[E.participants,E.me,E.groupId,E.meGroup]),w=(0,a.useMemo)((function(){return(0,f.isGroupCallByPeer)(E.peer)}),[E.peer]),b=S.length>1,T=w||S.length>2,I=b||(0,_.isParticipantWithVideo)(E.participants[E.me]),k=T&&I&&E.isOratorMode,N=(0,d.classNames)("",{CallNotification__pushToTalk:(null==n?void 0:n.type)===o.NotificationType.PUSH_TO_TALK,CallNotification__orator:k&&E.isShownParticipantsAside}),P=E.peer,D=(0,f.isGroupCallByPeer)(P)?E.callData.conversation:E.participants[P],M=(0,r.__read)(a.useState(),2),L=M[0],O=M[1],R=(0,r.__read)(a.useState(""),2),x=R[0],B=R[1];return(null==D?void 0:D.status)!==L&&(B((0,m.getCallStatus)(E,v)),O(null==D?void 0:D.status)),a.useEffect((function(){B((0,m.getCallStatus)(E,v))}),[E]),n||x?a.createElement(s.CallNotification,{className:N},x||C):null}},154463:(e,t,n)=>{"use strict";n.d(t,{CallParticipantListContainer:()=>C});var r=n(570655),a=n(667294),o=n(50533),i=n(813245),l=n(750598),s=n(248586),c=n(884143),u=n(431469),d=n(279060),p=n(310765),f=n(51247),m=n(916972),_=n(697483),g=n(662208),h=n(613335),v=n(564840),A=n(464380),E=n(956462),C=function(e){var t=e.SDK,n=e.onAddClick,C=e.navigateToProfile,y=e.navigateToConvo,S=e.onShowMoreWaitingHall,w=(0,o.useSelector)((function(e){return e})),b=a.useContext(g.LangContext).getLang,T=(0,r.__read)(function(e){var t=!!e.groupId;return Object.values(e.participants).reduce((function(n,r){var a=r,o=!1;return r.peerId===e.me?(t&&(null==e?void 0:e.meGroup)&&(a=(0,h.mergeGroupToParticipant)(e.meGroup,r)),o=!0):r.status&&(o=!0),o&&(n[0].push(a),a.name&&n[1].push(a)),n}),[[],[]])}(w),2),I=T[0],k=T[1],N=(0,r.__read)((0,a.useState)(""),2),P=N[0],D=N[1],M=(0,r.__read)((0,a.useState)(100),2),L=M[0],O=M[1],R=(0,a.useCallback)((function(e){return e.name}),[]),x=(0,a.useCallback)((function(e){return e.peerId}),[]),B=(0,u.useIndexer)(k,R,x),H=(0,_.canMuteParticipants)(w.participants[w.me]),U=P?B.search(P):I,F=(0,a.useCallback)((function(e){D(e.target.value)}),[]),G=!(0,_.isParticipantAnonym)(w.me);return a.createElement(i.CallParticipantList,{searchQuery:P,onSearchChange:F,length:U.length,waitingHallList:w.waitingHall&&a.createElement(v.WaitingHallListContainer,{isModal:!1,navigateToProfile:C,onMore:S})},!P&&G&&a.createElement(l.default,{selectable:!1,border:!1,key:"add"},a.createElement(m.ListAddControl,{onClick:n},b("calls_add_participants"))),U.length>0&&U.slice(0,L).map((function(e){var n,r,o,i,c=e.peerId!==w.me&&e.status===A.ParticipantStatus.WAITING,u=!c&&!(null===(n=e.mediaSettings)||void 0===n?void 0:n.isAudioEnabled),m=!c&&!(null===(r=e.mediaSettings)||void 0===r?void 0:r.isVideoEnabled),g=!c&&!!(null===(i=null===(o=e.statusData)||void 0===o?void 0:o.hand)||void 0===i?void 0:i.state),h=!!w.speakers[e.peerId],v=c||u||g||h,E=e.peerId===w.me,S=!c&&(u||m)&&H&&!E;return a.createElement(l.default,{selectable:!1,border:!1,key:e.peerId,aside:a.createElement(a.Fragment,null,v&&a.createElement(f.ParticipantIndicators,{showSpeaking:h,showRaisedHand:g,showAudioDisabled:u,showConnecting:c,showRaisedHandTooltip:S,onRaisedHandClick:S?function(){return function(e){var n=w.participants[e],r=(0,_.getParticipantExternalId)(n);r&&t.unmuteRequest(r,[A.MediaOption.AUDIO,A.MediaOption.VIDEO,A.MediaOption.SCREEN_SHARING]).catch(console.log)}(e.peerId)}:void 0,key:"indicators"}),a.createElement(p.ParticipantMenuContainer,{SDK:t,participant:e,key:"menu",navigateToConvo:y,navigateToProfile:C}))},a.createElement(s.default,{onLinkClick:C,photo:a.createElement(d.CallPhoto,{id:e.peerId,photo:e.photo,alt:e.name||"",showCreatorBadge:(0,_.isCreator)(e),showAdminBadge:(0,_.isAdmin)(e)}),title:e.name,href:e.link,target:"_blank"}))})),U.length>L&&a.createElement(l.default,{key:"limit"},a.createElement(E.ListMore,{className:"CallParticipantList__more",onClick:function(){O(L+100)}},b("calls_participants_show_more").replace("{n}","100"))),P&&0===U.length&&a.createElement(c.default,null,b("calls_participants_not_found")))}},165999:(e,t,n)=>{"use strict";n.d(t,{CallsErrorBoundary:()=>i});var r=n(570655),a=n(667294),o=n(121255),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasError:!1},n}return(0,r.__extends)(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}},t.prototype.componentDidCatch=function(e){switch(this.props.mode){case o.Mode.CALL:this.props.SDK.hangup();break;case o.Mode.INCOMING:this.props.SDK.declineCall()}this.props.onReset(),this.setState({hasError:!1}),console.error("Calls crashed:",e,e)},t.prototype.render=function(){return this.state.hasError?null:this.props.children},t}(a.Component)},963532:(e,t,n)=>{"use strict";n.d(t,{CautionContainer:()=>f});var r=n(667294),a=n(50533),o=n(881150),i=n(121255),l=n(464380),s=n(614914),c=n(745284),u=n(697483),d=n(662208),p=n(440896),f=function(e){var t=e.isIncoming,n=void 0!==t&&t,f=(0,a.useSelector)((function(e){return e})),m=(0,a.useDispatch)(),_=(0,r.useContext)(d.LangContext).getLang,g=_(n?"calls_reject_title":"calls_hangup_description"),h=_(n?"calls_reject_description":"calls_hangup_description"),v=(0,r.useCallback)((function(){m({type:i.SHOW_CAUTION_BOX,isOpen:!1})}),[]),A=function(){v(),n?(0,l.declineCall)().catch((function(){})):((0,l.hangup)().catch((function(){})),s.callStats.logEvent({call_event_type:i.CallActionEventType.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:f.callData.callId,peer_id:f.peer,is_group_call:(0,c.isGroupCallByPeer)(f.peer),reason:"none",group_call_users_count:(0,u.getActiveParticipantsCount)(f)}))},E=r.createElement(r.Fragment,null,r.createElement(o.default,{appearance:"secondary",onClick:v},_("calls_cancel_reject")),r.createElement(o.default,{onClick:A},_("calls_reject"))),C=r.createElement(r.Fragment,null,r.createElement(o.default,{onClick:A},_("calls_yes")),r.createElement(o.default,{onClick:v},_("calls_no")));return r.createElement(p.CallError,{title:g,onClose:v,actionButtons:n?E:C,text:r.createElement("span",{dangerouslySetInnerHTML:{__html:h}})})}},923947:(e,t,n)=>{"use strict";n.d(t,{CollapsedCallContainer:()=>g});var r=n(570655),a=n(667294),o=n(50533),i=n(275109),l=n(400412),s=n(180474),c=n(121255),u=n(298811),d=n(745284),p=n(697483),f=n(662208),m=n(464380),_=n(147853),g=function(e){var t,n,g,h,v=e.SDK,A=(0,o.useSelector)((function(e){return e})),E=(0,o.useDispatch)(),C=a.useContext(f.LangContext).getLang,y=A.peer,S=(0,u.isAnyoneWithVideo)(A),w=(0,d.isGroupCallByPeer)(y)?A.callData.conversation:A.participants[y],b=A.participants[A.me],T=(0,p.getCallVisibleParticipant)(A,S),I=(0,p.isParticipantWithVideo)(b)&&T&&T.peerId!==A.me,k=(0,a.useCallback)((function(){E({type:c.CHANGE_UI_MODE,mode:c.UIMode.DEFAULT}),(0,_.setNeedPushToTalkToggleAudio)(!1)}),[]),N=(null===(t=null==b?void 0:b.mediaSettings)||void 0===t?void 0:t.isAudioEnabled)||(null===(n=b.permissions)||void 0===n?void 0:n.audio)>0,P=(0,a.useCallback)((function(){var e;v.toggleLocalAudio(!(null===(e=b.mediaSettings)||void 0===e?void 0:e.isAudioEnabled))}),[A]);return a.createElement(i.CollapsedCall,null,A.mode===c.Mode.INCOMING&&a.createElement(l.CallWidget,{id:y,title:(null==w?void 0:w.tab)||"",photo:(null==w?void 0:w.photo)||"",status:C("calls_incoming_collapsed"),isIncoming:!0,onClick:k}),A.mode!==c.Mode.INCOMING&&a.createElement(s.CallVideoWidget,(0,r.__assign)({localVideoStream:I?(0,p.getStream)(b):void 0,isLocalAudioEnabled:!!(null===(g=b.mediaSettings)||void 0===g?void 0:g.isAudioEnabled),isLocalAudioAllowed:N,isLocalScreenSharing:!!(null===(h=b.mediaSettings)||void 0===h?void 0:h.isScreenSharingEnabled)},function(e,t,n){var r,a;return e?{participantId:e.peerId,isMe:e.peerId===n,isWithVideo:(0,p.isParticipantWithVideo)(e),isWithAudio:!!(null===(r=e.mediaSettings)||void 0===r?void 0:r.isAudioEnabled),isScreenSharing:!!(null===(a=e.mediaSettings)||void 0===a?void 0:a.isScreenSharingEnabled),stream:(0,p.getStream)(e),photo:e.photo,name:e.name,status:e.status,networkStatus:e.networkStatus}:{participantId:t&&t.peerId||0,isMe:!1,isWithVideo:!1,isWithAudio:!1,isScreenSharing:!1,stream:void 0,photo:t&&t.photo||"",name:t&&t.tab||"",status:t&&t.status||m.ParticipantStatus.CONNECTED,networkStatus:1}}(T,w,A.me),{onRestoreCall:k,onToggleAudio:P})))}},241715:(e,t,n)=>{"use strict";n.d(t,{CollapsedWaitingHallContainer:()=>u});var r=n(570655),a=n(667294),o=n(50533),i=n(275109),l=n(180474),s=n(121255),c=n(697483),u=function(e){var t,n=e.SDK,u=(0,o.useSelector)((function(e){return e})),d=(0,o.useDispatch)(),p=u.participants[u.me],f=(0,a.useCallback)((function(){d({type:s.CHANGE_UI_MODE,mode:s.UIMode.DEFAULT})}),[]),m=(0,a.useCallback)((function(){var e;n.toggleLocalAudio(!(null===(e=p.mediaSettings)||void 0===e?void 0:e.isAudioEnabled))}),[u]);return a.createElement(i.CollapsedCall,null,a.createElement(l.CallVideoWidget,(0,r.__assign)({},function(e){var t,n;return{participantId:e.peerId,isMe:!0,isWithVideo:(0,c.isParticipantWithVideo)(e),isWithAudio:!!(null===(t=e.mediaSettings)||void 0===t?void 0:t.isAudioEnabled),isScreenSharing:!!(null===(n=e.mediaSettings)||void 0===n?void 0:n.isScreenSharingEnabled),stream:(0,c.getStream)(e),photo:e.photo,name:e.name,status:e.status,networkStatus:e.networkStatus}}(p),{onRestoreCall:f,isMe:!0,isLocalAudioEnabled:!!(null===(t=p.mediaSettings)||void 0===t?void 0:t.isAudioEnabled),isLocalAudioAllowed:!0,isLocalScreenSharing:!1,onToggleAudio:m})))}},262409:(e,t,n)=>{"use strict";n.d(t,{CreateCallByLinkContainer:()=>f});var r=n(570655),a=n(667294),o=n(662208),i=n(50533),l=n(121255),s=n(881150),c=n(614183),u=n(613335),d=n(329538),p=n(464380),f=function(e){var t=e.bridge,n=(0,i.useSelector)((function(e){return e})),f=(0,i.useDispatch)(),m=a.useContext(o.LangContext).getLang,_=(0,u.getMe)(n),g=(0,r.__read)((0,a.useState)(_.peerId),2),h=g[0],v=g[1],A=(0,r.__read)((0,a.useState)([{value:_.peerId,label:_.name}]),2),E=A[0],C=A[1],y=(0,r.__read)((0,a.useState)(!1),2),S=y[0],w=y[1],b=(0,r.__read)((0,a.useState)(!0),2),T=b[0],I=b[1];(0,a.useEffect)((function(){(0,d.getGroupsForCall)().then((function(e){var t=(0,r.__spreadArray)([],(0,r.__read)(E));e.count>0&&(e.items.forEach((function(e){t.push({value:-e.id,label:e.name})})),C(t))}))}),[]);var k=(0,a.useCallback)((function(e){v(Number(e.selected.value))}),[]),N=(0,a.useCallback)((function(e){void 0!==e&&(e.preventDefault(),w(!S))}),[S]),P=(0,a.useCallback)((function(e){void 0!==e&&(e.preventDefault(),I(!T))}),[T]),D=(0,a.useCallback)((function(){f({type:l.CHANGE_MODE,mode:l.Mode.READY})}),[]),M=(0,a.useCallback)((function(){var e,r={};T||(r[p.ConversationOption.REQUIRE_AUTH_TO_JOIN]=!0),S&&(r[p.ConversationOption.WAITING_HALL]=!0),t.startCall(!1,null!==(e=n.entryPoint)&&void 0!==e?e:l.CallStatSource.HISTORY_CREATE,!1,h>0?0:h,{conversationOptions:r,createLink:!0})}),[h,S,T]),L=[a.createElement(s.default,{key:"cancel",onClick:D,appearance:"tertiary"},m("calls_cancel")),a.createElement(s.default,{key:"call",onClick:M},m("calls_create_call_by_link"))];return a.createElement(c.CreateCallByLinkModal,{actionButtons:L,onClose:D,ownerOptions:E,selectedOwnerId:h,waitingHall:S,allowAnon:T,onGroupSelectChange:k,onChangeWaitingHall:N,onChangeAllowAnon:P})}},631183:(e,t,n)=>{"use strict";n.d(t,{DeleteCallContainer:()=>p});var r=n(667294),a=n(121255),o=n(881150),i=n(662208),l=n(50533),s=n(487318),c=n(171659),u=n(329538),d=n(464380),p=function(){var e=(0,l.useDispatch)(),t=r.useContext(i.LangContext),n=t.getLang,p=t.langShortDateTime,f=(0,l.useSelector)((function(e){return e})),m=f.deleteCallId,_=f.historyCalls,g=f.profiles,h=f.currentCalls,v=m in _?_[m]:null,A=(0,r.useCallback)((function(){e({type:a.HistoryScreenDispatchEvents.DELETE_CALL,data:-1})}),[]),E=(0,r.useCallback)((function(){if((null==v?void 0:v.type)&&"merged"===(null==v?void 0:v.type)&&(null==v?void 0:v.items)){var t=v.items.reduce((function(e,t){return(null==t?void 0:t.id)&&e.push(t.id),e}),[]);t.length>0&&(0,d.removeHistoryRecords)(t)}else(null==v?void 0:v.id)&&(0,d.removeHistoryRecords)([v.id]);_.splice(m,1),e({type:a.HistoryScreenDispatchEvents.SET_HISTORY_CALLS,data:_}),A()}),[v]),C=(0,r.useCallback)((function(){if(null==v?void 0:v.call_id){(0,u.forceCallFinish)(v.call_id);var t=h.filter((function(e){return e.call_id!==v.call_id}));e({type:a.HistoryScreenDispatchEvents.SET_CURRENT_CALLS,data:t})}E()}),[v]),y=[];if((null==v?void 0:v.can_finish_call)&&(y=y.concat([r.createElement(o.default,{onClick:function(){C()},key:"finishAndDeleteCall",appearance:"secondary"},n("calls_history_delete_and_finish_call_button"))])),y=y.concat([r.createElement(o.default,{onClick:function(){E()},key:"deleteCall"},n("calls_history_delete_call_button"))]),!v)return r.createElement(r.Fragment,null);var S=(0,c.getHistoryItemOwner)(v,g),w=S.member,b=S.chat;if(!w&&!b)return r.createElement(r.Fragment,null);var T="";if(b)T=n("calls_history_delete_group_call").replace("%name",b.title);else{if(!w)return r.createElement(r.Fragment,null);var I=v.is_missed,k=v.is_inbound;T=n(I&&k?"calls_history_delete_missed_call":!I&&k?"calls_history_delete_inbound_call":I&&!k?"calls_history_delete_declined_call":"calls_history_delete_outbound_call"),T=String(T).replace("%name",String(w.nameGen))}var N=(null==v?void 0:v.finished_at)?p(v.finished_at):"";return T=T.replace("%date",N),r.createElement(s.DeleteCallModal,{onClose:A,actionButtons:y,text:T})}},599648:(e,t,n)=>{"use strict";n.d(t,{ErrorContainer:()=>u});var r=n(667294),a=n(50533),o=n(881150),i=n(121255),l=n(662208),s=n(464380),c=n(440896),u=function(e){var t=e.title,n=e.text,u=e.onCloseFatal,d=e.handleType,p=e.callId,f=e.bridge,m=(0,a.useDispatch)(),_=r.useContext(l.LangContext).getLang,g=function(){switch(m({type:i.ERROR,isClosed:!0}),d){case i.ErrorHandleType.FATAL:u();break;case i.ErrorHandleType.DECLINE:(0,s.declineCall)().catch((function(){}));break;case i.ErrorHandleType.PROCESS:(0,s.processPush)(p||"").then((function(){(0,s.declineCall)().catch((function(){}))})).catch((function(e){f.debug&&console.error("Delayed by error push process error",e)}))}},h=n||_("calls_error"),v=h.match(/<\s?[a-zA-Z0-9]+\s?\/?>/)?r.createElement("span",{dangerouslySetInnerHTML:{__html:h}}):h;return r.createElement(c.CallError,{title:t||_("calls_oops"),onClose:g,actionButtons:r.createElement(o.default,{onClick:g},_("calls_close")),text:v})}},379981:(e,t,n)=>{"use strict";n.d(t,{FeedbackContainer:()=>v});var r,a=n(570655),o=n(667294),i=n(50533),l=n(269481),s=n(121255),c=n(25947),u=n(662208),d=n(614914),p=n(745284),f=n(950890),m=n(659397),_=n(254060),g=n(731585),h=n(244809);!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ADVANCE=1]="ADVANCE"}(r||(r={}));var v=function(e){var t=e.onSuccessFeedback,n=(0,i.useDispatch)(),v=(0,i.useSelector)((function(e){return e})),A=o.useContext(u.LangContext).getLang,E=(0,a.__read)((0,o.useState)(r.DEFAULT),2),C=E[0],y=E[1],S=(0,a.__read)((0,o.useState)(!0),2),w=S[0],b=S[1],T=(0,a.__read)((0,o.useState)(!1),2),I=T[0],k=T[1],N=new Map([["DID_NOT_HEAR_INTERLOCUTOR",A("calls_feedback_reason_did_not_hear_interlocutor")],["DID_NOT_SEE_INTERLOCUTOR",A("calls_feedback_reason_did_not_see_interlocutor")],["BAD_VIDEO_QUALITY",A("calls_feedback_reason_bad_video_quality")],["VIDEO_FREEZES",A("calls_feedback_reason_video_freezes")],["VERY_QUIET_SOUND",A("calls_feedback_reason_very_quiet_sound")],["BAD_SOUND_QUALITY",A("calls_feedback_reason_bad_sound_quality")],["SOUND_DID_NOT_MATCH_THE_VIDEO",A("calls_feedback_reason_sound_did_not_match_the_video")],["FAILED_TO_TURN_ON_CAMERA_OR_MICROPHONE",A("calls_feedback_reason_failed_to_turn_on_camera_or_microphone")]]),P=(0,a.__read)((0,o.useState)({user_response:0,feedback:[],custom_feedback:void 0}),2),D=P[0],M=P[1],L=(0,a.__read)((0,o.useState)(Array.from(N,(function(e){return{name:(0,a.__read)(e,1)[0],checked:!1}}))),1)[0],O=function(){n({type:s.CHANGE_MODE,mode:s.Mode.READY})},R=function(e){var t=e.target.getAttribute("data-response");if(t){var n=parseInt(t,10);n<=3&&y(r.ADVANCE),M((0,a.__assign)((0,a.__assign)({},D),{user_response:n})),b(!1)}},x=function(e,t){L.forEach((function(n){n.name===e&&(n.checked=t)})),M((function(e){return(0,a.__assign)((0,a.__assign)({},e),{feedback:L.filter((function(e){return e.checked})).map((function(e){return e.name}))})}))},B=function(e,t){k(t)},H=function(e){M((0,a.__assign)((0,a.__assign)({},D),{custom_feedback:e.currentTarget.value}))};return o.createElement(l.CallModal,{onClose:O,onBackdropClick:O},o.createElement("section",{className:"Call"},o.createElement(c.FeedbackScreen,{title:C===r.DEFAULT?A("calls_feedback_default_title"):A("calls_feedback_advance_title"),sendButtonClick:function(){var e=v.lastCallData?v.lastCallData.peerId:0;d.callStats.logEvent({call_event_type:s.CallActionEventType.USER_FEEDBACK_RECEIVED,session_id:v.lastCallData?v.lastCallData.callId:"",peer_id:e,is_group_call:(0,p.isGroupCallByPeer)(e),user_response:D.user_response,feedback:D.feedback,custom_feedback:I&&D.custom_feedback?D.custom_feedback:void 0}),n({type:s.CHANGE_MODE,mode:s.Mode.READY}),t&&t()},skipButtonClick:O,sendButtonDisabled:w},C===r.DEFAULT?o.createElement("div",{className:"FeedbackScreen__stars",onClick:R},[1,2,3,4,5].map((function(e,t){return o.createElement("div",{className:(0,m.classNames)("FeedbackScreen__star",{"FeedbackScreen__star--active":e<=D.user_response}),"data-response":e,key:t},o.createElement(f.StarOutline,{className:"FeedbackScreen__starIcon FeedbackScreen__starIcon--outline"}),o.createElement(_.StarFilled,{className:"FeedbackScreen__starIcon FeedbackScreen__starIcon--filled"}))}))):o.createElement("div",{className:"FeedbackScreen__voting"},Array.from(N,(function(e){var t=(0,a.__read)(e,2),n=t[0],r=t[1];return o.createElement("div",{className:"FeedbackScreen__votingItem",key:n},o.createElement(g.default,{name:n,className:"FeedbackScreen__votingItemCheckbox",onChange:x},r))})),o.createElement("div",{className:"FeedbackScreen__votingItem FeedbackScreen__votingItem--custom"},o.createElement(g.default,{name:"CUSTOM_FEEDBACK",className:"FeedbackScreen__votingItemCheckbox",onChange:B}),o.createElement(h.default,{className:"FeedbackScreen__votingItemTextArea",placeholder:A("calls_feedback_custom_reason_placeholder"),grow:!1,disabled:!I,onChange:H}))))))}},187252:(e,t,n)=>{"use strict";n.d(t,{GroupCallSetupContainer:()=>_});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(881150),s=n(186983),c=n(782605),u=n(298811),d=n(614914),p=n(745284),f=n(697483),m=n(662208),_=function(e){var t=e.SDK,n=e.bridge,_=e.isWithBackButton,h=e.onBackClick,v=(0,o.useSelector)((function(e){return e})),A=(0,o.useDispatch)(),E=a.useContext(m.LangContext).getLang,C=(0,r.__read)((0,a.useState)(v.preselectedIds||[]),2),y=C[0],S=C[1],w=(0,r.__read)((0,a.useState)((0,f.getActiveParticipantsCount)(v)),1)[0]+y.length,b=function(){A({type:i.GROUP_CALL_SETUP,open:!1,preselectedIds:null}),A({type:i.MANAGEMENT,isOpen:!1})},T=0===y.length,I=function(e){b(),A({type:i.MANUAL_ADD_PARTICIPANTS,participants:e});var n=e.map((function(e){return new Promise((function(n){t.addParticipant(String(e)).then(n).catch((function(t){"auth.banned"===t.message?n(e):"vk-participant-is-rejected-error"===t.message?A({type:i.ERROR,text:E("calls_error_cant_add_because_of_privacy")}):n(null)}))}))}));Promise.all(n).then((function(e){if((e=e.filter((function(e){return void 0!==e}))).length){var t=function(e,t){var n=(0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(e.friends)),(0,r.__read)(e.chatMembers)),(0,r.__read)(e.groupMembers)),a=[];return n.filter((function(e){var n=e.id;return!(!t.includes(n)||a.includes(n))&&(a.push(n),!0)}))}(v,e);A({type:i.UNBAN_PARTICIPANTS,data:{members:t}})}}));var a=(0,r.__read)((0,u.convertClientData)(function(e,t){var n=e.chatData||e.callData.conversation,a=t.reduce((function(t,n){return e.participants[n]||t.set(n,!0),t}),new Map);if(0===a.size)return[n,[]];var o=e.chatMembers.length<e.friends.length?e.chatMembers:e.friends,i=e.chatMembers.length<e.friends.length?e.friends:e.chatMembers,l=o.reduce((function(e,t){return a.get(t.id)&&(e.smallerListData.push(t),e.smallerListMap.set(t.id,!0)),e}),{smallerListData:[],smallerListMap:new Map}),s=l.smallerListData,c=l.smallerListMap;if(s.length===a.size)return[n,s];var u=i.filter((function(e){return!c.get(e.id)&&a.get(e.id)}));return[n,(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(s)),(0,r.__read)(u))]}(v,e)),2),o=a[0],l=a[1];A({type:i.LOAD_PEERS,conversation:o,members:l}),d.callStats.logEvent({call_event_type:i.CallActionEventType.OUTGOING_CALL_ADD_PARTICIPANTS_SENT,session_id:v.callData.callId,peer_id:v.peer.toString(),is_group_call:(0,p.isGroupCallByPeer)(v.peer),group_call_users_count:y.length})},k=(0,a.useCallback)((function(){I(y)}),[y]);return a.createElement(s.CallManagementModal,{title:E("calls_add_participants_to_call"),onCloseModal:b,actionButtons:a.createElement(l.default,{key:"add",disabled:T,onClick:k},E("calls_add")),hint:g(w,v.participantLimit,E),isWithBackButton:_,onBackClick:_?h:function(){}},a.createElement(c.AddParticipantContainer,{groupId:n.authorizedGroupId||0,onChange:S,onClickCallAll:function(e){I(e)}}))};function g(e,t,n){return e<2?n("calls_management_add_warning"):n("calls_selected").replace("{selected}",""+e).replace("{limit}",""+t)}},908484:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(667294),a=n(50533),o=n(631183),i=n(328931),l=n(923469);const s=function(e){var t=e.SDK,n=e.bridge,s=e.navigateToConvo,c=(0,a.useSelector)((function(e){return e})),u=c.deleteCallId,d=c.error;return r.createElement(r.Fragment,null,r.createElement(i.HistoryScreenContainer,{SDK:t,bridge:n,navigateToConvo:s}),u>=0&&r.createElement(o.DeleteCallContainer,{bridge:n}),null!==d&&r.createElement(l.HistoryScreenErrorContainer,null))}},328931:(e,t,n)=>{"use strict";n.d(t,{HistoryScreenContainer:()=>g});var r=n(667294),a=n(121255),o=n(328962),i=n(256480),l=n(662208),s=n(410326),c=n(410133),u=n(988121),d=n(749399),p=n(464578),f=n(124198),m=n(638178),_=n(50533),g=function(e){var t=e.SDK,n=e.bridge,g=e.navigateToConvo,h=(0,r.useContext)(l.LangContext).getLang,v=(0,_.useSelector)((function(e){return e})).showCreateCall,A=(0,s.useHistoryScreenLocation)(window.location),E=A.section,C=A.setSection,y=(0,c.useHistoryScreenBridgeActions)(n).onCreateCallClick,S=(0,u.useHistoryScreenLoading)(),w=S.loading,b=S.setLoading,T=(0,r.useMemo)((function(){return[{id:"",label:h("calls_page_menu_all_calls"),href:"calls",ref:(0,r.createRef)()},{id:"missed",label:h("calls_page_menu_miss_calls"),href:"calls?section=missed",ref:(0,r.createRef)()},{id:"sep",separator:!0},{id:"current",label:h("calls_page_menu_current_calls"),href:"calls?section=current",ref:(0,r.createRef)()},{id:"friends",label:h("calls_page_menu_friends_calls"),href:"calls?section=friends",ref:(0,r.createRef)()}]}),[]),I=(0,r.useCallback)((function(e,t){return(0,i.changeQuery)(t),C(e),b(!0),Promise.resolve()}),[]),k=(0,r.useMemo)((function(){return E===a.HistoryScreenSections.MISS?r.createElement(d.HistoryScreenSectionMissedCallsContainer,{SDK:t,bridge:n,navigateToConvo:g}):E===a.HistoryScreenSections.FRIENDS?r.createElement(p.HistoryScreenSectionFriendsContainer,{SDK:t,bridge:n,navigateToConvo:g}):E===a.HistoryScreenSections.CURRENT?r.createElement(f.HistoryScreenSectionCurrentCallsContainer,{bridge:n}):r.createElement(m.HistoryScreenSectionAllCallsContainer,{SDK:t,bridge:n,navigateToConvo:g,onMenuItemClick:I})}),[E]);return r.createElement(o.CallHistoryScreen,{showCreateCall:v,onCreateCallClick:y,activeMenuItem:E,menuItems:T,onMenuItemClick:I,loading:w},k)}},923469:(e,t,n)=>{"use strict";n.d(t,{HistoryScreenErrorContainer:()=>c});var r=n(667294),a=n(50533),o=n(881150),i=n(121255),l=n(662208),s=n(440896),c=function(){var e=(0,a.useDispatch)(),t=(0,a.useSelector)((function(e){return e})).error,n=(0,r.useContext)(l.LangContext).getLang,c=function(){e({type:i.HistoryScreenDispatchEvents.ERROR,data:null})};return r.createElement(s.CallError,{title:r.createElement(r.Fragment,null,(null==t?void 0:t.title)||n("calls_oops")," "),onClose:c,actionButtons:r.createElement(o.default,{onClick:c},n("calls_close")),text:r.createElement(r.Fragment,null,null==t?void 0:t.text)})}},638178:(e,t,n)=>{"use strict";n.d(t,{HistoryScreenSectionAllCallsContainer:()=>k});var r=n(570655),a=n(667294),o=n(121255),i=n(50533),l=n(662208),s=n(343035),c=n(20845),u=n(744499),d=n(150364),p=n(409364),f=n(115706),m=n(410133),_=n(462176),g=n(856612),h=n(329538),v=n(539503),A=n(253312),E=n(164904),C=n(613335),y=n(581685),S=n(539052),w=n(295886),b=n(659397),T=n(148434),I=n(884143),k=function(e){var t=e.SDK,n=e.bridge,k=e.navigateToConvo,N=e.onMenuItemClick,P=(0,i.useStore)(),D=(0,i.useDispatch)(),M=(0,a.useContext)(l.LangContext).getLang,L=(0,i.useSelector)((function(e){return e})),O=L.joinLinks,R=L.profiles,x=L.historyCalls,B=(0,p.useHistoryScreenLoadActions)("all"),H=B.onShowMoreHistory,U=B.loading,F=B.showMoreHistory,G=B.loadHistory,V=(0,d.useHistoryScreenContextActions)(n,k).onHistoryAction,W=(0,m.useHistoryScreenBridgeActions)(n),z=W.onCreateCallClick,j=W.onJoin,Y=(0,r.__read)((0,a.useState)(0),2),K=Y[0],Q=Y[1],q=(0,r.__read)((0,a.useState)([]),2),J=q[0],X=q[1],Z=(0,E.useHistoryScreenCurrentCallsLoadActions)(),$=Z.currentCallsBlockLoading,ee=Z.currentCalls,te=(0,r.__read)((0,a.useState)(!1),2),ne=te[0],re=te[1],ae=(0,r.__read)((0,a.useState)(!1),2),oe=ae[0],ie=ae[1],le=(0,r.__read)((0,a.useState)([]),2),se=le[0],ce=le[1],ue=(0,r.__read)((0,a.useState)(!1),2),de=ue[0],pe=ue[1];(0,a.useEffect)((function(){ie(!0),(0,h.getFriends)(7).then((function(e){var t=e.items.map(C.normalizeUser);ce(t)})).finally((function(){ie(!1)}))}),[]),(0,a.useEffect)((function(){J.length||(0,h.getGroupsForCall)().then((function(e){var t=e.count,n=e.items,r=[{value:0,label:M("calls_history_list_personal_option")}];t>0&&(n.forEach((function(e){var t=e.id,n=e.name;r.push({value:-t,label:n})})),X(r))}))}),[]);var fe=(0,a.useCallback)((function(e){var r=Number(e.selected.value);re(!0),Q(r),G(0,r,[],!0).then((function(e){re(!1),e&&(0,A.checkAuthByGroupId)(t,n,P,r,D,!0)}))}),[R,O,x]),me=(0,a.useCallback)((function(e,t,n){e.preventDefault(),N(t,n)}),[]),_e=(0,a.useMemo)((function(){return M(0===K?"calls_history_list_stub":"calls_history_list_groups_stub")}),[K]),ge=(0,a.useMemo)((function(){return J.length>1?a.createElement(v.default,{className:"CallHistoryScreen--listHeaderSelector",options:J,value:K,onChange:fe}):a.createElement(a.Fragment,null)}),[J]),he=(0,a.useCallback)((function(e,t){return!(!e.ctrlKey&&!e.metaKey)||(e.preventDefault(),j("",t,o.CallStatSource.HISTORY_FRIENDS_LIST),!1)}),[]);return(0,a.useEffect)((function(){if(!U){var e=!($||ee.length||U||x.length||0!==K);pe(e),D({type:o.HistoryScreenDispatchEvents.SET_SHOW_CREATE_BUTTON,data:!e})}return function(){D({type:o.HistoryScreenDispatchEvents.SET_SHOW_CREATE_BUTTON,data:!0})}}),[$,ee.length,U,x.length,K]),a.createElement("div",{className:"CallHistoryScreen--content"},de&&a.createElement(u.default,{className:(0,b.classNames)({"CallHistoryScreenLanding--pageBlock":!oe&&0===se.length})},a.createElement(f.CallHistoryScreenLanding,{onCreateCallClick:z})),oe&&a.createElement(u.default,null,a.createElement(c.DivBlockSkeleton,{height:147})),!oe&&se.length>0&&a.createElement(u.default,null,a.createElement(w.ListHeader,{className:"CallHistoryScreen--listHeader",right:a.createElement(g.default,{href:"/calls?section=friends",onClick:function(){return me(event,"friends","calls?section=friends")},className:"CallHistoryScreen--moreLink"},M("calls_history_show_all_friends_header_link"))},M("calls_history_friends_block_header")),a.createElement("ul",{className:"CallHistoryScreen--friendsList"},se.map((function(e){return a.createElement("li",{key:e.id,className:"CallHistoryScreen--friendsListItem"},a.createElement("a",{href:e.link,onClick:function(){return he(event,e.peerId)}},a.createElement("div",{className:"CallHistoryScreen--friendsListItemContent"},a.createElement(y.default,{className:"CallHistoryScreen--friendsListItemPhoto",photo:e.photo,title:e.name}),a.createElement("div",{className:"CallHistoryScreen--friendsListItemPhotoHoverIcon"},a.createElement(S.default,{fill:"white"})),a.createElement("div",{className:"CallHistoryScreen--friendsListItemName"},e.firstName))))})))),$&&a.createElement(u.default,null,a.createElement(c.DivBlockSkeleton,{height:300})),!$&&ee.length>0&&a.createElement(u.default,{className:"CallHistoryScreen--currentCalls"},a.createElement(w.ListHeader,{className:"CallHistoryScreen--listHeader",extra:ee.length,right:ee.length?a.createElement(g.default,{onClick:function(){return me(event,"current","calls?section=current")},href:"/calls?section=current",className:"CallHistoryScreen--moreLink"},M("calls_history_show_all_header_link")):""},M("calls_history_current_list_header")),a.createElement(_.CurrentCallsList,{currentCalls:ee.slice(0,5),profiles:R,onJoin:j})),U&&a.createElement(c.DivBlockSkeleton,{height:500}),!U&&(x.length>0||K<0||0===K&&ne)&&a.createElement(u.default,null,a.createElement(w.ListHeader,{className:"CallHistoryScreen--listHeader",right:ge},M("calls_history_list_header")),ne&&a.createElement(I.default,null,a.createElement(T.default,null)),!ne&&a.createElement(s.CallHistoryList,{selectedOwnerId:K,calls:x,onMenuItemClick:V,stubText:_e,hasMore:F,onLoadMore:H})))}},124198:(e,t,n)=>{"use strict";n.d(t,{HistoryScreenSectionCurrentCallsContainer:()=>p});var r=n(667294),a=n(662208),o=n(20845),i=n(744499),l=n(410133),s=n(462176),c=n(884143),u=n(164904),d=n(988121),p=function(e){var t=e.bridge,n=(0,r.useContext)(a.LangContext).getLang,p=(0,l.useHistoryScreenBridgeActions)(t).onJoin,f=(0,u.useHistoryScreenCurrentCallsLoadActions)(),m=f.currentCallsBlockLoading,_=f.currentCalls,g=f.profiles,h=(0,d.useHistoryScreenLoading)().setLoading,v=(0,r.useMemo)((function(){return m?r.createElement(i.default,null,r.createElement(o.DivBlockSkeleton,{height:300})):r.createElement(i.default,{title:n("calls_history_current_list_header"),className:"CallHistoryScreen--content CallHistoryScreen--currentCalls"},r.createElement(s.CurrentCallsList,{currentCalls:_,profiles:g,onJoin:p}),0===_.length&&r.createElement(c.default,{className:"CallHistoryList--stub"},n("calls_history_current_calls_list_stub")))}),[m]);return(0,r.useEffect)((function(){h(m)}),[m]),r.createElement(r.Fragment,null,v)}},464578:(e,t,n)=>{"use strict";n.d(t,{HistoryScreenSectionFriendsContainer:()=>w});var r=n(570655),a=n(667294),o=n(121255),i=n(662208),l=n(20845),s=n(744499),c=n(988121),u=n(329538),d=n(613335),p=n(658861),f=n(670546),m=n(884143),_=n(750598),g=n(248586),h=n(581685),v=n(735144),A=n(250516),E=n(736434),C=n(431469),y=n(50533),S=100;var w=function(e){var t=e.bridge,n=(0,a.useContext)(i.LangContext),w=n.getLang,b=n.langShortDate,T=n.langNumeric,I=n.langSex,k=(0,y.useSelector)((function(e){return e})).meId,N=(0,c.useHistoryScreenLoading)(),P=N.setLoading,D=N.loading,M=(0,r.__read)((0,a.useState)([]),2),L=M[0],O=M[1],R=(0,r.__read)((0,a.useState)(!1),2),x=R[0],B=R[1],H=(0,r.__read)((0,a.useState)(0),2),U=H[0],F=H[1],G=(0,r.__read)((0,a.useState)(0),2),V=G[0],W=G[1],z=(0,r.__read)((0,a.useState)(""),2),j=z[0],Y=z[1],K=(0,r.__read)((0,a.useState)(!1),2),Q=K[0],q=K[1],J=(0,a.useRef)(null);(0,a.useEffect)((function(){P(!0);(0,u.getFriends)(100,U).then((function(e){var t=e.count,n=e.items;W(t);B(100<t),F(100);var r=n.map(d.normalizeUser);O(r)})).finally((function(){P(!1)}))}),[]);var X=(0,a.useMemo)((function(){return V>S}),[V]);(0,a.useEffect)((function(){var e=j;if(X){if(e.length>=1&&!Q)return J.current&&clearTimeout(J.current),J.current=setTimeout((function(){q(!0),(0,u.friendsSearch)(k,e,50).then((function(e){var t=e.count,n=e.items;B(50<t),F(50);var r=n.map(d.normalizeUser);O(r)})).finally((function(){q(!1)}))}),1e3),function(){clearTimeout(J.current)};0===e.length&&(0,u.getFriends)(S,0).then((function(e){var t=e.count,n=e.items;B(100<t),F(100);var r=n.map(d.normalizeUser);O(r)}))}}),[j]);var Z=(0,a.useCallback)((function(e,n){t.call(e,n,void 0,o.CallStatSource.HISTORY_FRIENDS_LIST)}),[]),$=(0,a.useCallback)((function(e){return e.name}),[]),ee=(0,a.useCallback)((function(e){return e.peerId}),[]),te=(0,C.useIndexer)(L,$,ee),ne=j&&!X?te.search(j):L,re=(0,a.useCallback)((function(e){Y(e.target.value)}),[]),ae=function(e,t){var n,r,o,i,l,s,c,u="";return(null===(n=e.onlineInfo)||void 0===n?void 0:n.is_online)?u="Online":(null===(r=e.onlineInfo)||void 0===r?void 0:r.last_seen)?u=function(e,t,n,r){var a=Math.floor((Date.now()-r)/1e3);return a<60?e("global_just_now"):a<3600?t(Math.floor(a/60),"global_mins_ago",e("global_mins_ago",!0)):a<21600?t(Math.floor(a/3600),"global_hours_ago",e("global_hours_ago",!0)):n(r,!1)}(w,T,b,1e3*(null===(o=e.onlineInfo)||void 0===o?void 0:o.last_seen)):(null===(i=e.onlineInfo)||void 0===i?void 0:i.status)&&(u="recently"===(null===(l=e.onlineInfo)||void 0===l?void 0:l.status)?I(e.sex,"global_online_was_recently",w("global_online_was_recently",!0)):"last_week"===(null===(s=e.onlineInfo)||void 0===s?void 0:s.status)?I(e.sex,"global_online_was_week",w("global_online_was_week",!0)):I(e.sex,"global_online_long_ago",w("global_online_long_ago",!0))),a.createElement(_.default,{key:t,selectable:!1,canBeHovered:!1,aside:a.createElement("div",{className:"CallHistoryScreen--friendsIcons"},a.createElement(v.default,{className:"CallHistoryScreen--friendsIcon CallHistoryScreen--friendsIconsPhone",onClick:function(){return Z(e.peerId,!1)}}),a.createElement(A.default,{className:"CallHistoryScreen--friendsIcon",onClick:function(){return Z(e.peerId,!0)}}))},a.createElement(g.default,{size:"34",photo:a.createElement(h.default,{id:t,photo:e.photo,title:e.name,isOnline:null===(c=e.onlineInfo)||void 0===c?void 0:c.is_online}),title:e.name,href:e.link,description:u,target:"_blank"}))};return D?a.createElement(s.default,null,a.createElement(l.DivBlockSkeleton,{height:500})):a.createElement(s.default,{title:w("calls_page_menu_friends_calls"),className:"CallHistoryScreen--content"},a.createElement(E.BlockSearchInput,{value:j,placeholder:w("global_search"),onChange:re,onInput:re,onPaste:re,className:"CallParticipantList__input"}),a.createElement(p.default,{useWindowScroll:!0,hasMore:x,loadMore:function(){return j&&X?(0,u.friendsSearch)(k,j,50,U).then((function(e){var t=e.count,n=e.items,a=U+50;B(a<t),F(a);var o=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(L)),(0,r.__read)(n.map(d.normalizeUser)));return O(o),!0})):(0,u.getFriends)(S,U).then((function(e){var t=e.items,n=U+S;B(n<V),F(n);var a=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(L)),(0,r.__read)(t.map(d.normalizeUser)));return O(a),!0}))}},a.createElement(f.default,{className:"CallHistoryList",border:!1},ne.map((function(e,t){return ae(e,t)})),0===ne.length&&a.createElement(m.default,{className:"CallHistoryList--stub"},w("calls_page_friends_not_found")))))}},749399:(e,t,n)=>{"use strict";n.d(t,{HistoryScreenSectionMissedCallsContainer:()=>d});var r=n(667294),a=n(50533),o=n(662208),i=n(343035),l=n(20845),s=n(744499),c=n(150364),u=n(409364),d=function(e){var t=e.bridge,n=e.navigateToConvo,d=(0,a.useSelector)((function(e){return e})).historyCalls,p=(0,r.useContext)(o.LangContext).getLang,f=(0,u.useHistoryScreenLoadActions)("missed"),m=f.onShowMoreHistory,_=f.loading,g=f.showMoreHistory,h=(0,c.useHistoryScreenContextActions)(t,n).onHistoryAction;return _?r.createElement(s.default,null,r.createElement(l.DivBlockSkeleton,{height:500})):r.createElement(s.default,{title:p("calls_history_missed_list_header"),className:"CallHistoryScreen--content"},r.createElement(i.CallHistoryList,{calls:d,onMenuItemClick:h,stubText:p("calls_history_missed_list_stub"),hasMore:g,onLoadMore:m}))}},536559:(e,t,n)=>{"use strict";n.d(t,{IncomingCallContainer:()=>_});var r=n(667294),a=n(50533),o=n(309605),i=n(826988),l=n(995420),s=n(44781),c=n(789241),u=n(269481),d=n(745284),p=n(121255),f=n(614914),m=n(662208);function _(e){var t=e.SDK,n=e.bridge,_=(0,a.useSelector)((function(e){return e})),g=_.peer,h=_.callData,v=_.participants,A=_.caller,E=(0,a.useDispatch)(),C=r.useContext(m.LangContext).getLang,y=A;y||(y=(0,d.isGroupCallByPeer)(g)?h.conversation:v[g]);var S=h.type===p.CallType.VIDEO,w=C(S?"calls_incoming_videocall":"calls_incoming_audiocall"),b=C(S?"calls_reply_with_audio":"calls_reply"),T=C(S?"calls_reject_call":"calls_reject"),I=function(){t.declineCall(),f.callStats.logEvent({call_event_type:p.CallActionEventType.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:h.callId,peer_id:g,is_group_call:(0,d.isGroupCallByPeer)(g),reason:"none"})};return r.createElement(u.CallModal,{onClose:I,isIncoming:!0,isCautionBoxShown:!0},r.createElement(c.IncomingCall,{id:g,title:(null==y?void 0:y.tab)||"",description:w,photo:(null==y?void 0:y.photo)||"",onCollapseCall:function(){E({type:p.CHANGE_UI_MODE,mode:p.UIMode.COLLAPSED})}},r.createElement(r.Fragment,null,S&&r.createElement(o.CallButton,{text:C("calls_reply_with_video"),type:o.CallButtonTypes.POSITIVE,icon:r.createElement(i.VideoIcon,null),onClick:function(){return n.acceptCall(!0,!0)}}),r.createElement(o.CallButton,{text:b,type:S?o.CallButtonTypes.REGULAR:o.CallButtonTypes.POSITIVE,icon:r.createElement(l.PhoneIcon,null),onClick:function(){return n.acceptCall(!1,!0)}}),r.createElement(o.CallButton,{text:T,type:o.CallButtonTypes.NEGATIVE,icon:r.createElement(s.RejectIcon,null),onClick:I}))))}},656504:(e,t,n)=>{"use strict";n.d(t,{JoinScreenContainer:()=>g});var r=n(570655),a=n(667294),o=n(991390),i=n(138671),l=n(838480),s=n(121255),c=n(298811),u=n(788822),d=n(329538),p=n(662208),f=n(253312),m=n(498110),_=n(697483),g=function(e){var t=e.isAnonym,n=e.joinLink,g=e.vkJoinLink,v=e.title,A=e.members,E=e.membersCount,C=e.conversationData,y=e.withPopup,S=e.onBeforeCallStart,w=e.onAfterCallFinish,b=e.onClose,T=e.bridge,I=e.entryPoint,k=e.tabIsMaster,N=e.tabIsIdle,P=e.onError,D=e.isDev,M=e.okPublicKey,L=a.useContext(p.LangContext),O=L.getLang,R=L.langNumeric,x=(0,r.__read)((0,a.useState)(""),2),B=x[0],H=x[1],U=(0,r.__read)((0,a.useState)(null),2),F=U[0],G=U[1],V=(0,r.__read)((0,a.useState)(!1),2),W=V[0],z=V[1],j=!1,Y=a.useContext(m.ConfigContext),K=Y.allowCallByName,Q=Y.nativeAppJoin,q=A?A.slice(0,3).map((function(e){var t=e.firstName||e.shortName||e.name||"";return e.photo_100?{src:e.photo_100,alt:t,key:e.peerId}:{id:e.peerId,text:t.slice(0,1)}})):[],J=(0,a.useCallback)((function(e){H(e.target.value)}),[]),X=(0,a.useCallback)((function(e){if(t)return j?Promise.resolve():(j=!0,function(e,t,n,r,a,o){if(e)return Promise.resolve(e);return(0,d.getJoinLinkDetails)(n,!0).then((function(e){var i=e.secret,l=void 0===i?"":i,c=e.user_id,u=void 0===c?0:c,p=e.preview;return(0,d.getAnonymCallToken)(n,u,r,l).then((function(e){var n=e.token,i=e.secret,l=void 0===i?"":i,c={is_dev:h(o),key:a,token:n,ok_user:u,secret:l,is_anonym:!0,me:{canAddMembers:!1,firstName:r,peerId:u,id:u,sex:"0",shortName:r,name:r,lastName:"",link:"",photo:"",photo_100:""}},d={callPreview:{tab:p.title,photo:p.photo.photo_200},callsCredentials:c,participantLimit:128,callsOkStaging:h(o),callsLogging:!1,CallsIncomingCall:!1,callsAllowBanParticipant:!1,callsFeedbackScreenEnabled:!1,callsVideoSlotsEnabled:!0,videoSlotsCount:s.VIDEO_SLOTS_COUNT,callsAllowCallByName:!1,callsNativeApp:!1,callsNativeAppJoin:!1,callsEnableScreenTrack:!0,callsEnableProducerScreenTrack:!0,callsAllowWaitingHall:!1,callsAllowPushToTalk:!1,callsBadNetwork:!1,callsBadNetworkP2P:!1,callsDesktopAppNotification:!1};return t(d),d}))}))}(F,G,g,B,M,D).then((function(e){return function(e){var t=e.bridge,n=e.inited,r=e.setInited,a=e.data,o=e.onBeforeCallStart,i=e.onAfterCallFinish,l=e.tabIsMaster,s=e.tabIsIdle,c=e.langUtils;if(n)return Promise.resolve();var u=a.callPreview,d=a.callsCredentials,p=a.participantLimit,f=a.callsOkStaging,m=a.callsLogging,_=a.CallsIncomingCall,g=a.callsAllowBanParticipant,h=a.callsFeedbackScreenEnabled,v=a.callsVideoSlotsEnabled,A=a.videoSlotsCount,E=a.callsAllowCallByName,C=a.callsNativeApp,y=a.callsNativeAppJoin,S=a.callsEnableScreenTrack,w=a.callsEnableProducerScreenTrack,b=a.callsAllowWaitingHall,T=a.callsAllowPushToTalk,I=a.callsBadNetwork,k=a.callsBadNetworkP2P,N=a.callsDesktopAppNotification;return t.init({callPreview:u,callsCredentials:d,imHash:"",participantLimit:p,callsOkStaging:f,onBeforeCallStart:o,onAfterCallFinish:i,tabIsMaster:l,tabIsIdle:s,langUtils:c,toggles:{debugLog:m,incomingCall:_,allowBanParticipant:g,showFeedbackScreen:h,enableVideoSlots:v,videoSlotsCount:A,allowCallByName:E,nativeApp:C,nativeAppJoin:y,enableScreenTrack:S,enableProducerScreenTrack:w,allowWaitingHall:b,allowPushToTalk:T,badNetwork:I,badNetworkP2P:k,desktopAppNotification:N}}).then((function(){return r(!0)}))}({bridge:T,inited:W,setInited:z,data:e,onBeforeCallStart:S,onAfterCallFinish:w,tabIsMaster:k,tabIsIdle:N,langUtils:L})})).then((function(){return T.joinCallByLink(n,null,e,I)})).catch((function(e){T.eventHandlers.onError&&e&&T.eventHandlers.onError(e);var t="";t="string"==typeof e?e:e&&e.error&&e.error.error_code?(0,c.getTextForApiErrorByCode)(e.error.error_code,!0,O):(0,f.getCallStartErrorText)(e,!0,O)||O("calls_unknown_error"),P&&P(t)})).finally((function(){j=!1})));if(b&&b(),!C)throw Error("no peer_id to join");return T.joinCallByLink(n,[C,A],e,I).catch((function(e){var t="";t="string"==typeof e?e:e&&e.error&&e.error.error_code?(0,c.getTextForApiErrorByCode)(e.error.error_code,!0,O):O("calls_unknown_error"),P&&P(t)})),Promise.resolve()}),[n,b,B,F,W,M]),Z=(0,a.useCallback)((function(){b&&b()}),[b]),$=(0,a.useMemo)((function(){return(0,u.escape)((0,u.decodeHTMLEntities)(v))}),[v]),ee=(0,a.useCallback)((function(){T.showCallByNamePopup(null,I,n)}),[]),te=(0,a.useCallback)((function(){T.showStartCallModal(null,n)}),[]),ne=a.createElement(o.JoinScreen,{isAnonym:t,name:B,onChangeName:J,namePlaceholder:O("calls_name_placeholder"),title:$,label:(0,c.getParticipantsListLabel)(A||[],q,(function(e){return(0,_.isParticipantGroup)(e.peerId)?e.name:e.firstName}),O,R,E),items:q,joinWithVideoText:O("calls_join_with_video"),joinWithAudioText:O("calls_join_with_audio"),onJoinWithVideo:function(){return X(!0)},onJoinWithAudio:function(){return X(!1)},disabled:t&&!/^[A-Za-zА-Яа-яЁё0-9_\- ]{2,25}$/.test(B),inputDisabled:!!F,callByNameShow:K&&!t,callByNameTitle:O("calls_call_by_name_join_by"),callByNameDescription:"",onCallByNameClick:ee,callViaNativeAppShow:Q&&!t,callViaNativeAppTitle:O("calls_call_via_native_app_join"),onCallViaNativeAppClick:te});return y?a.createElement(i.default,{onClose:Z},a.createElement(l.ModalHeader,{title:O("calls_invite"),onClose:Z}),ne):ne},h=function(e){return void 0!==e?e:!(!window.vk||void 0===window.vk.isCallsDevEnv)&&window.vk.isCallsDevEnv}},989819:(e,t,n)=>{"use strict";n.d(t,{KickParticipantContainer:()=>p});var r=n(570655),a=n(667294),o=n(50533),i=n(881150),l=n(121255),s=n(662208),c=n(963985),u=n(697483),d=n(719481),p=function(){var e,t,n,p=(0,o.useDispatch)(),f=a.useContext(s.LangContext),m=f.getLang,_=f.langSex,g=(0,o.useSelector)((function(e){return e})),h=null===(e=g.participantKick)||void 0===e?void 0:e.participant,v=(null===(t=g.participantKick)||void 0===t?void 0:t.type)===l.KickParticipantType.CALL,A=(0,r.__read)((0,a.useState)(!0),2),E=A[0],C=A[1],y=!!h&&(!(0,u.participantIsAdmin)(h)&&!(0,u.participantIsChatAdmin)(h,g.callData.conversation)),S=(0,a.useCallback)((function(){p({type:l.TOGGLE_PARTICIPANTS_KICK})}),[]),w=(0,a.useCallback)((function(){(0,u.kickParticipant)(h,!E).then((function(){!v&&g.waitingHall&&(null==h?void 0:h.peerId)&&(0,d.removeUserFromWaitingHall)(null==h?void 0:h.peerId,g.waitingHall,p)})),S()}),[g.participantKick,E]),b=(0,a.useCallback)((function(e){C(e)}),[]),T=v?"calls_kick_participant_text":"calls_kick_participant_from_waiting_hall_text",I=_(null==h?void 0:h.sex,T,m(T,!0)).replace("{user}",null!==(n=null==h?void 0:h.name)&&void 0!==n?n:""),k=m(v?"calls_kick_participant_kick_button_text":"calls_kick_participant_from_waiting_hall_button_text"),N=m(v?"calls_kick_participant_with_ban_setting":"calls_kick_participant_from_waiting_hall_with_ban_setting");return a.createElement(c.KickParticipantModal,{onClose:S,onAllowReconnectChange:b,description:I,allowBan:y,banText:N,actionButtons:[a.createElement(i.default,{onClick:S,appearance:"secondary",key:"cancel"},m("calls_cancel")),a.createElement(i.default,{onClick:w,key:"stop"},k)]})}},325496:(e,t,n)=>{"use strict";n.d(t,{MuteParticipantContainer:()=>_});var r=n(570655),a=n(667294),o=n(50533),i=n(881150),l=n(467667),s=n(121255),c=n(697483),u=n(662208),d=n(614914),p=n(745284),f=n(329538),m=n(464380),_=function(e){var t,n,_,g=e.SDK,h=(0,o.useSelector)((function(e){return e})),v=(0,r.__read)((0,a.useState)(!0),2),A=v[0],E=v[1],C=(0,r.__read)((0,a.useState)(""),2),y=C[0],S=C[1],w=(0,r.__read)((0,a.useState)(!0),2),b=w[0],T=w[1],I=(0,o.useDispatch)(),k=a.useContext(u.LangContext).getLang,N=null===(t=h.participantsManagement)||void 0===t?void 0:t.mode,P=null===(n=h.participantsManagement)||void 0===n?void 0:n.participant,D=N===s.ParticipantsManagementMode.SINGLE&&((0,c.isAdmin)(P)||(0,c.isCreator)(P));(0,a.useEffect)((function(){var e;if(N!==s.ParticipantsManagementMode.SINGLE||(0,c.isParticipantAnonym)((null==P?void 0:P.peerId)||0))E(!1);else{I({type:s.SHOW_LOADER,isLoaderVisible:!0});var t=null===(e=h.participantsManagement)||void 0===e?void 0:e.participant;new Promise((function(e,n){t&&t.peerId<0?(0,f.getGroupById)(-t.peerId).then((function(t){var n,r=t.groups;e(r&&r.length>0?null===(n=r[0])||void 0===n?void 0:n.name:"")})).catch((function(e){return n(e)})):(0,f.loadUsers)({user_ids:t&&String(t.peerId),name_case:"acc"}).then((function(t){var n=(0,r.__read)(t,1)[0];e(null==n?void 0:n.first_name)})).catch((function(e){return n(e)}))})).then((function(e){S(e),E(!1),I({type:s.SHOW_LOADER,isLoaderVisible:!1})})).catch(console.log)}}),[N,null===(_=h.participantsManagement)||void 0===_?void 0:_.participant]);var M=(0,a.useCallback)((function(){I({type:s.TOGGLE_PARTICIPANTS_MANAGEMENT})}),[]),L=(0,a.useCallback)((function(){if(N===s.ParticipantsManagementMode.SINGLE){var e=(0,c.getParticipantExternalId)(P);g.muteParticipant(e,[m.MediaOption.AUDIO,m.MediaOption.VIDEO,m.MediaOption.SCREEN_SHARING],!b).catch(console.log).finally(M),d.callStats.logEvent({call_event_type:s.CallActionEventType.USER_MICS_AND_VIDEO_DISABLED,session_id:h.callData.callId,peer_id:h.peer,is_group_call:(0,p.isGroupCallByPeer)(h.peer),mute_permanent:b?s.CallStatMuteType.ONCE:s.CallStatMuteType.PERMANENT})}else N===s.ParticipantsManagementMode.ALL&&(g.muteParticipant(void 0,[m.MediaOption.AUDIO,m.MediaOption.VIDEO,m.MediaOption.SCREEN_SHARING],!b).catch(console.log).finally(M),d.callStats.logEvent({call_event_type:s.CallActionEventType.ALL_MICS_AND_VIDEO_DISABLED,session_id:h.callData.callId,peer_id:h.peer,is_group_call:(0,p.isGroupCallByPeer)(h.peer),mute_permanent:b?s.CallStatMuteType.ONCE:s.CallStatMuteType.PERMANENT}))}),[b]);return N===s.ParticipantsManagementMode.SINGLE&&A?null:a.createElement(l.MuteParticipantModal,{onClose:M,allowUnmute:b,unmuteToggleDisabled:D,onUnmuteToggle:function(e,t){return T(t)},title:N===s.ParticipantsManagementMode.SINGLE?k("calls_mute_participant_dialog_title").replace("{name}",null!=y?y:null==P?void 0:P.name):k("calls_mute_all_participants_dialog_title"),description:N===s.ParticipantsManagementMode.SINGLE?k("calls_mute_participant_dialog_description").replace("{name}",null!=y?y:null==P?void 0:P.name):k("calls_mute_all_participants_dialog_description"),toggleSign:N===s.ParticipantsManagementMode.SINGLE?k("calls_mute_participant_dialog_permanent_toggle"):k("calls_mute_all_participants_dialog_permanent_toggle"),actionButtons:[a.createElement(i.default,{onClick:M,appearance:"secondary",key:"cancel"},k("calls_cancel")),a.createElement(i.default,{onClick:L,key:"disable"},k("calls_mute_participant_dialog_action"))]})}},290514:(e,t,n)=>{"use strict";n.d(t,{NotificationWithButtonContainer:()=>_});var r=n(667294),a=n(121255),o=n(662208),i=n(50533),l=n(881150),s=n(298811),c=n(719481),u=n(139230),d=n(700881),p=n(170181),f=n(498110),m=n(827244),_=function(){var e,t,n,_=(0,i.useSelector)((function(e){return e})),g=(0,i.useDispatch)(),h=r.useContext(o.LangContext),v=h.getLang,A=h.langNumeric,E=(0,r.useContext)(f.ConfigContext).desktopAppNotification,C=(0,r.useCallback)((function(e){var t,n=null===(t=_.waitingHall)||void 0===t?void 0:t.members.get(e);n&&g({type:a.TOGGLE_PARTICIPANTS_KICK,data:{type:a.KickParticipantType.WAITING_HALL,participant:n}})}),[null===(e=_.waitingHall)||void 0===e?void 0:e.members]),y=(0,r.useCallback)((function(){var e=[(0,c.loadAdditionalWaitingHall)(_,g)];return Promise.all(e).then((function(){g({type:a.MANAGEMENT,isOpen:!0,managementView:u.ManagementViews.WAITING_HALL})}))}),[_.waitingHall]),S=(0,r.useCallback)((function(e){_.waitingHall&&(0,c.promoteUserAndRemoveFromWaitingHall)(e,_.waitingHall,g)}),[null===(t=_.waitingHall)||void 0===t?void 0:t.members]),w=(0,r.useCallback)((function(){(0,c.resetWaitingHallNew)(_.waitingHall,g)}),[null===(n=_.waitingHall)||void 0===n?void 0:n.hasNew]);if(_.waitingHall&&0!==_.waitingHall.members.size&&_.waitingHall.hasNew){var b=Array.from(_.waitingHall.members.values()),T=v("calls_notification_users_in_waiting_hall_notification",_.waitingHall.totalCount).replace("{names}",(0,s.getParticipantsListLabel)(b,b.slice(0,3),(function(e){return e.shortName||e.name}),v,A,_.waitingHall.totalCount)),I=null;if(1===b.length){var k=b[0];I=r.createElement(r.Fragment,null,r.createElement(l.default,{onClick:function(){return S(k.peerId)},appearance:"overlay_primary"},v("calls_waiting_hall_join")),r.createElement(l.default,{onClick:function(){return C(k.peerId)},appearance:"overlay_secondary"},v("calls_waiting_hall_forbid")))}else I=r.createElement(l.default,{onClick:function(){return y()},appearance:"overlay_primary"},v("calls_waiting_show_participants"));return r.createElement(p.NotificationWithButton,null,r.createElement("div",null,r.createElement(d.default,{className:"NotificationWithButton--close",onClick:w}),r.createElement("span",null,T),r.createElement("div",{className:"NotificationWithButton--buttons"},I)))}if(E&&_.shouldShowDesktopAppNotification){return r.createElement(m.NotificationDesktopApp,{onClose:function(){g({type:a.SET_SHOW_DESKTOP_NOTIFICATION,data:!1})}})}return null}},310765:(e,t,n)=>{"use strict";n.d(t,{ParticipantMenuContainer:()=>s});var r=n(667294),a=n(50533),o=n(697483),i=n(662208),l=n(95939),s=function(e){var t=e.SDK,n=e.participant,s=e.navigateToConvo,c=e.navigateToProfile,u=(0,a.useSelector)((function(e){return e})),d=(0,a.useDispatch)(),p=r.useContext(i.LangContext).getLang,f=(0,o.getParticipantActions)(u,t,d,n,!1,p,s,c,!0);return f.length>0?r.createElement(l.ParticipantMenu,{position:"b",align:"right",trigger:"hover",marginTop:-8,marginLeft:1,actions:f}):null}},670778:(e,t,n)=>{"use strict";n.d(t,{ParticipantStatusContainer:()=>l});var r=n(667294),a=n(580248),o=n(662208),i=n(464380),l=function(e){var t=e.status,n=r.useContext(o.LangContext).getLang;switch(t){case i.ParticipantStatus.WAITING:return r.createElement(a.default,null,n("calls_status_waiting"));case i.ParticipantStatus.CONNECTING:case i.ParticipantStatus.RECONNECT:return r.createElement(a.default,null,n("calls_status_connecting"));case i.ParticipantStatus.ERROR:return n("calls_error");case i.ParticipantStatus.HANGUP:return r.createElement(a.default,null,n("calls_status_hangup"));case i.ParticipantStatus.PERMISSIONS:return n("calls_status_no_permissions");case i.ParticipantStatus.CONNECTED:default:return null}}},48755:(e,t,n)=>{"use strict";n.d(t,{SettingsContainer:()=>m});var r=n(570655),a=n(667294),o=n(659397),i=n(50533),l=n(471304),s=n(555700),c=n(121255),u=n(662208),d=n(498110),p=n(147853),f=a.useState;function m(e){var t=e.SDK,n=a.useContext(u.LangContext).getLang,m=a.useContext(d.ConfigContext).fullHD,_=[{label:n("calls_noise_neural"),value:c.NoiseCancellationTypes.NEURAL,data:{denoise:!0,denoiseAnn:!0}},{label:n("calls_noise_simple"),value:c.NoiseCancellationTypes.SIMPLE,data:{denoise:!0,denoiseAnn:!1}},{label:n("calls_noise_none"),value:c.NoiseCancellationTypes.NONE,data:{denoise:!1,denoiseAnn:!1}}],g=[{label:n("calls_video_resolution_sd"),value:c.VideoResolutionTypes.SD},{label:n("calls_video_resolution_hd"),value:c.VideoResolutionTypes.HD}];m&&g.push({label:n("calls_video_resolution_fhd"),value:c.VideoResolutionTypes.FHD});var h=(0,i.useSelector)((function(e){return e})),v=(0,r.__read)((0,i.useSelector)((function(e){var t;return[e.mode,null===(t=e.participants[e.me].mediaSettings)||void 0===t?void 0:t.isVideoEnabled]})),2),A=v[0],E=v[1],C=(0,i.useDispatch)(),y=t.browser.getCameras(),S=t.browser.getMicrophones(),w=t.browser.hasCamera()&&t.browser.hasCameraPermission(),b=t.browser.hasMicrophone()&&t.browser.hasMicrophonePermission(),T=t.browser.getSavedCamera(),I=t.browser.getSavedMicrophone(),k=w&&(T&&T.deviceId||y[0].deviceId),N=b&&(I&&I.deviceId||S[0].deviceId),P=(0,r.__read)(f(!1===k?void 0:k),2),D=P[0],M=P[1],L=(0,r.__read)(f(!1===N?void 0:N),2),O=L[0],R=L[1],x=(0,r.__read)(f(h.noiseCancellation),2),B=x[0],H=x[1],U=o.localStorage.getItem(c.VIDEO_RESOLUTION_STORAGE_KEY),F=(0,r.__read)(f(U===c.VideoResolutionTypes.FHD?c.VideoResolutionTypes.FHD:U===c.VideoResolutionTypes.HD?c.VideoResolutionTypes.HD:c.VideoResolutionTypes.SD),2),G=F[0],V=F[1],W=(0,r.__read)(f(h.pushToTalkEnabled),2),z=W[0],j=W[1];return a.createElement(s.CallSettingsModal,{onClose:function(){C({type:c.TOGGLE_POPUP})},onSubmit:function(){var e,n=[Promise.resolve()];if(!T&&k===D&&A!==c.Mode.READY&&!E||!D||T&&T.deviceId===D||n.push(t.changeDevice("videoinput",D)),!O||I&&I.deviceId===O||n.push(t.changeDevice("audioinput",O)),h.noiseCancellation!==B&&n.push(t.setMediaModifiers((null===(e=_.find((function(e){return e.value===B})))||void 0===e?void 0:e.data)||{denoise:!0,denoiseAnn:!0}).then((function(){C({type:c.SET_NOISE_CANCELLATION,data:B})}))),h.localVideoResolution!==G&&(console.debug("set resolution from -> to: ",h.localVideoResolution,G,c.VideoWidth[G],c.VideoHeight[G]),n.push(t.setLocalResolution(c.VideoWidth[G],c.VideoHeight[G]).catch((function(e){console.error(e)})).finally((function(){o.localStorage.setItem(c.VIDEO_RESOLUTION_STORAGE_KEY,G),C({type:c.CHANGE_LOCAL_VIDEO_RESOLUTION,data:G})})))),h.pushToTalkEnabled!==z){var r=h.participants[h.me];r.permissions.audio>0&&(0,p.pushToTalkToggleAudio)(z,r.mediaSettings),C({type:c.SET_PUSH_TO_TALK_ENABLE,data:z})}Promise.all(n).then((function(){C({type:c.TOGGLE_POPUP})})).catch((function(e){console.error("Device change failed",e),C({type:c.TOGGLE_POPUP})}))}},a.createElement(l.CallSettings,{mics:S,cameras:y,noiseCancellationOptions:_,videoResolutionOptions:g,currentCamId:D,currentMicId:O,currentNoiseCancellation:B,currentVideoResolution:G,isCamAvailable:w,isMicAvailable:b,onCameraChange:function(e){return M(e)},onMicChange:function(e){return R(e)},onNoiseCancellationChange:function(e){return H(e)},onVideoResolutionChange:function(e){return V(e)},pushToTalkEnabled:z,onPushToTalkChange:function(){j(!z)}}))}},858101:(e,t,n)=>{"use strict";n.d(t,{StartCallContainer:()=>h});var r=n(570655),a=n(667294),o=n(659397),i=n(86894),l=n(835849),s=n(443774),c=n(121255),u=n(662208),d=n(394886),p=n(767497),f=n(50533),m=n(269481),_=n(153907),g=n(30081);function h(){var e,t=(0,f.useSelector)((function(e){return e})),n=(0,f.useDispatch)(),h=a.useContext(u.LangContext).getLang,v=!(null===(e=t.join)||void 0===e?void 0:e.joinLink),A=(0,r.__read)((0,a.useState)(null!==o.localStorage.getItem(c.LOCALSTORAGE_IS_CALLS_APP_DOWNLOADED)),2),E=A[0],C=A[1],y=(0,r.__read)((0,a.useState)(!E),2),S=y[0],w=y[1],b=(0,a.useRef)((0,_.getPlatformUrl)()),T=null!==b.current,I=(0,r.__read)((0,a.useState)(!E),2),k=I[0],N=I[1],P=function(){o.localStorage.setItem(c.LOCALSTORAGE_IS_CALLS_APP_DOWNLOADED,"true")},D=function(){var e,n;return(null===(e=t.join)||void 0===e?void 0:e.joinLink)?(0,d.openDesktopDeepLink)((0,p.generateJoinCallsDeepLink)({joinLink:null===(n=t.join)||void 0===n?void 0:n.joinLink,userId:window.vk.id})):(0,d.openDesktopDeepLink)((0,p.generateStartCallsDeepLink)({peerId:t.peer,userId:window.vk.id}))};(0,a.useEffect)((function(){D().then((function(){w(!1)})).catch((function(){w(!1)}))}),[E]);var M=function(){n({type:c.CHANGE_MODE,mode:c.Mode.READY})};return a.createElement(m.CallModal,{onClose:M,onBackdropClick:M},a.createElement(i.ModalCard,{nav:"StartCallModal",header:a.createElement(g.default,null,h(S&&T?"calls_download_started":E?"calls_app_title":v?"calls_start_call_after_install_app":"calls_join_call_after_install_app")),subheader:k?h("calls_download_and_install_app_for_pc"):E?h(v?"calls_try_manual_start_lesson":"calls_try_manual_join_lesson"):S?h("calls_wait_until_app_downloaded"):"",className:"StartCallModal"},S&&T&&b.current?a.createElement(a.Fragment,null,a.createElement(i.Spinner,{size:"large",className:"StartCallModal__action"}),a.createElement("div",{className:"StartCallModal__text"},h("calls_downloading_file").replace("{file}",b.current.filename))):k?b.current&&T?a.createElement(i.Button,{size:"l",before:a.createElement(l.default,null),onClick:function(){return e=b.current.url,t=b.current.filename,P(),(0,_.download)(e,t),w(!0),void setTimeout((function(){C(!0),w(!1),N(!1)}),3e3);var e,t},className:"StartCallModal__action"},h("calls_download_app")):a.createElement(i.Button,{size:"l",before:a.createElement(l.default,null),href:c.DESKTOP_CALLS_DOWNLOAD_PAGE,target:"_blank",onClick:function(){P(),N(!1)},className:"StartCallModal__action"},h("calls_download_app")):a.createElement(i.Button,{mode:"secondary",size:"l",before:a.createElement(s.default,null),onClick:D,className:"StartCallModal__action"},h(v?"calls_start_in_app":"calls_join_call_in_app")),!k&&a.createElement(i.Subhead,{weight:"regular",className:"StartCallModal__text"},a.createElement("div",null,h("calls_apps_for_all_platform")),a.createElement(i.Link,{href:c.DESKTOP_CALLS_DOWNLOAD_PAGE,target:"_blank"},h("calls_open_app_list"))),a.createElement(i.Subhead,{weight:"regular",className:"StartCallModal__text"},h("calls_calls_troubles_with_app"),a.createElement("br",null),a.createElement(i.Link,{onClick:function(){var e,n,r,a,o=t.peer;if(window.Calls)if(null===(e=t.join)||void 0===e?void 0:e.joinLink){var i=null!==(n=t.entryPoint)&&void 0!==n?n:c.CallStatSource.CONVO_JOIN_SNIPPET;window.Calls.joinCallByLink(null===(r=t.join)||void 0===r?void 0:r.joinLink,void 0,!1,i)}else{var l=null!==(a=t.entryPoint)&&void 0!==a?a:c.CallStatSource.CONVO_LIST;if(o)o>2e9?window.Calls.startGroupCall(o,void 0,null,!1,l):window.Calls.call(o,!1,void 0,l);else window.Calls.startCall(!1,l)}}},h(v?"calls_calls_start_lesson_in_browser":"calls_join_call_in_browser")))))}},152532:(e,t,n)=>{"use strict";n.d(t,{TransferAdminRightsContainer:()=>_});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(431469),s=n(338374),c=n(662208),u=n(614914),d=n(745284),p=n(697483),f=n(444083),m=n(464380),_=function(e){var t=e.SDK,n=(0,o.useDispatch)(),_=(0,o.useSelector)((function(e){return e})),g=a.useContext(c.LangContext).getLang,h=(0,r.__read)((0,a.useState)(Object.values(_.participants).filter((function(e){return e.peerId===_.me||e.status===m.ParticipantStatus.CONNECTED&&!(0,p.isParticipantAnonym)(e.peerId)}))),2),v=h[0],A=h[1],E=(0,r.__read)((0,a.useState)(null),2),C=E[0],y=E[1],S=(0,a.useCallback)((function(e){return e.name}),[]),w=(0,a.useCallback)((function(e){return e.peerId}),[]),b=(0,l.useIndexer)(v,S,w),T=(0,a.useMemo)((function(){return(0,p.getActiveParticipantsCount)(_)}),[_.participants]),I=function(){return u.callStats.logEvent({call_event_type:i.CallActionEventType.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:_.callData.callId,peer_id:_.peer,is_group_call:(0,d.isGroupCallByPeer)(_.peer),reason:"none",group_call_users_count:T})},k=(0,a.useCallback)((function(e){A(e?b.search(e):b.list),y(null)}),[_]),N=function(){n({type:i.TOGGLE_POPUP})},P=function(){n({type:i.TOGGLE_POPUP}),I(),t.hangup().catch(console.log)},D=(0,a.useCallback)((function(e){y(null===e?null:e.peerId)}),[]);return(0,a.useEffect)((function(){C&&!v.find((function(e){return e.peerId===C}))&&y(null)}),[C]),a.createElement(s.TransferAdminRightsModal,{participants:v,onClose:N,onSelect:D,selected:C,onCallForceFinish:function(){n({type:i.TOGGLE_POPUP}),I(),t.hangup(),(0,f.onForceCallFinish)(t,_,n,g)},onRightsTransfer:function(){if(null!==C){var e=(0,p.getParticipantExternalId)(_.participants[C]);e&&(t.grantRoles(e,[m.UserRole.ADMIN],!1).then((function(){return P()})).catch(console.log),N())}else P()},onSearch:k})}},537817:(e,t,n)=>{"use strict";n.d(t,{TranslationContainer:()=>f});var r=n(667294),a=n(958713),o=n(121255),i=n(50533),l=n(881150),s=n(186983),c=n(445586),u=n(662208),d=n(820717),p=n(674543);function f(){var e,t=(0,i.useSelector)((function(e){return e})),n=(0,i.useDispatch)(),f=r.useContext(u.LangContext).getLang,m=(0,r.useCallback)((function(){n({type:o.TOGGLE_POPUP})}),[]),_=(0,p.canStopTranslation)(t),g=(0,r.useCallback)((function(){n({type:o.TOGGLE_POPUP,data:o.POPUP_TRANSLATION_STOP})}),[]),h=(0,r.useCallback)((function(e){if(null==e?void 0:e.upcomingStreamParams){var t=e.upcomingStreamParams,r=t.startTime,a=t.ovId;if(r&&r>Date.now()/1e3+4)return(0,d.startUpcomingStream)(a).finally(m)}var i={isOn:!1,startStreamParams:e};return n({type:o.SET_TRANSLATION,data:i}),n({type:o.TOGGLE_POPUP,data:o.POPUP_TRANSLATION_START_COUNTDOWN}),Promise.resolve()}),[]),v=(0,r.useCallback)((function(){n({type:o.TOGGLE_POPUP,data:o.POPUP_TRANSLATION_SHARE})}),[]);return(null===(e=t.translation)||void 0===e?void 0:e.isOn)?r.createElement(s.CallManagementModal,{title:f("calls_translation_menu_title"),actionButtons:_?[r.createElement(l.default,{onClick:g,appearance:"negative",key:"stop"},f("calls_translation_menu_stop"))]:[],onCloseModal:m},r.createElement(c.CallManagementMenu,{isLinkBlockShown:!0,linkBlockTitle:f("calls_translation_menu_link"),onLinkBlockClick:v,callUrlLink:t.translation.link})):r.createElement(a.TranslationCreateForm,{onSubmit:h,onClose:m})}},978335:(e,t,n)=>{"use strict";n.d(t,{TranslationShareContainer:()=>c});var r=n(667294),a=n(50533),o=n(121255),i=n(662208),l=n(186983),s=n(162144),c=function(e){var t,n=e.onBack,c=e.link,u=e.linkExtractor,d=(0,a.useDispatch)(),p=r.useContext(i.LangContext).getLang,f=(0,a.useSelector)((function(e){return e.translation})),m=(0,r.useCallback)((function(){d({type:o.TOGGLE_POPUP})}),[]);return r.createElement(l.CallManagementModal,{title:p("calls_translation_link"),onCloseModal:m,isWithBackButton:!!n,onBackClick:n},r.createElement(s.TranslationLink,{link:null!==(t=null==u?void 0:u(f))&&void 0!==t?t:c}))}},350594:(e,t,n)=>{"use strict";n.d(t,{TranslationStartCountdownContainer:()=>d});var r=n(570655),a=n(667294),o=n(121255),i=n(50533),l=n(979414),s=n(874023),c=n(820717),u=n(329538);function d(){var e=(0,i.useDispatch)(),t=(0,i.useSelector)((function(e){return e})),n=(0,r.__read)((0,a.useState)(3),2),d=n[0],p=n[1],f=(0,a.useCallback)((function(){e({type:o.TOGGLE_POPUP})}),[]),m=(0,a.useCallback)((function(){var e,n=null===(e=t.translation)||void 0===e?void 0:e.startTime;n&&n>=Date.now()&&(0,u.stopVideoStream)(),f()}),[]);return(0,a.useEffect)((function(){var e=setInterval((function(){return p(d-1)}),s.SECOND_JS);return function(){return clearInterval(e)}}),[d]),(0,a.useEffect)((function(){var e;if(d<=0){var n=null===(e=t.translation)||void 0===e?void 0:e.startStreamParams;(null==n?void 0:n.streamParams)?(0,c.startCallStream)(n.streamParams):(null==n?void 0:n.upcomingStreamParams)&&(0,c.startUpcomingStream)(n.upcomingStreamParams.ovId),f()}}),[d]),a.createElement(l.TranslationStartCountdownModal,{onCloseModal:f,counter:d,onStopTranslation:m})}},910472:(e,t,n)=>{"use strict";n.d(t,{TranslationStatusContainer:()=>g});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(880076),s=n(52777),c=n(659397),u=n(462480),d=n(923522),p=n(662208),f=n(874023),m=n(329538),_=n(674543);function g(){var e=(0,a.useContext)(p.LangContext),t=e.getLang,n=e.langNumeric,s=(0,o.useSelector)((function(e){return e})),c=(0,o.useDispatch)(),g=(0,r.__read)((0,a.useState)(null),2),y=g[0],S=g[1],w=(0,r.__read)((0,a.useState)(!1),2),b=w[0],T=w[1],I=(0,r.__read)((0,a.useState)(""),2),k=I[0],N=I[1],P=(0,r.__read)((0,a.useState)(0),2),D=P[0],M=P[1],L=(0,r.__read)((0,a.useState)([]),2),O=L[0],R=L[1],x=(0,r.__read)((0,a.useState)(C(s.translation.startTime)),2),B=x[0],H=x[1],U=(0,r.__read)((0,a.useState)(E(B)),2),F=U[0],G=U[1],V=(0,r.__read)((0,a.useState)(""),2),W=V[0],z=V[1],j=(0,r.__read)((0,a.useState)(!1),2),Y=j[0],K=j[1];return(0,a.useEffect)((function(){var e=(0,_.canStopTranslation)(s);T(e)}),[s.translation,s.participants[s.me]]),(0,a.useEffect)((function(){var e,t;if(null===(e=s.translation.host)||void 0===e?void 0:e.id){var n=s.participants[null===(t=s.translation.host)||void 0===t?void 0:t.id],r=(null==n?void 0:n.shortName)||(null==n?void 0:n.name);r!==y&&S(r)}else y&&S(null)}),[s.translation,s.participants]),(0,a.useEffect)((function(){var e=[];if(b){if(F){var n={text:a.createElement("div",{className:"TranslationStatus__dropdownItemWillStartSoon"},t("calls_info_translation_will_start_soon"))};e.push(n)}e.push(h(a.createElement(u.ShareIcon,null),t("calls_info_translation_share_menu_item"),(function(){return c({type:i.TOGGLE_POPUP,data:i.POPUP_TRANSLATION_SHARE})}))),e.push(h(a.createElement(d.CancelIcon,null),t("calls_translation_stop_menu_item"),(function(){return c({type:i.TOGGLE_POPUP,data:i.POPUP_TRANSLATION_STOP})})))}R(e)}),[b,F]),(0,a.useEffect)((function(){var e=E(B);e&&B>-4&&b&&!Y&&(K(!0),c({type:i.TOGGLE_POPUP,data:i.POPUP_TRANSLATION_START_COUNTDOWN})),G(e)}),[B]),(0,a.useEffect)((function(){var e=C(s.translation.startTime);H(e);var t=setInterval((function(){return H(C(s.translation.startTime))}),f.SECOND_JS);return function(){return clearInterval(t)}}),[s.translation.startTime]),(0,a.useEffect)((function(){var e="";if(F){var r=Math.abs(B);if(r>f.DAY){var a=Math.floor(r/f.DAY);e=n(a,"calls_translation_upcoming_time_more_day_short",t("calls_translation_upcoming_time_more_day_short",a)).replace("%s",a)}else e=v("-"+A(r))}else e=v(A(B));N(e)}),[B,F]),(0,a.useEffect)((function(){var e,t=s.translation,n=t.ownerId,r=t.videoId;if(n&&r&&!F){var a=function(){var e={owner_id:n,video_id:r};(0,m.videoLiveGetSpectators)(e).then((function(e){var t;M(null===(t=e.spectators)||void 0===t?void 0:t.count)}))};a(),e=setInterval(a,15*f.SECOND_JS)}return function(){return clearInterval(e)}}),[F,s.translation.ownerId,s.translation.videoId]),(0,a.useEffect)((function(){if(!b){var e="";e=F?t("calls_info_translation_will_start_soon"):y?t("calls_translation_host_info").replace("{name}",y):t("calls_translation_host_info_unknown"),z(e)}}),[F,y,b]),a.createElement(l.TranslationStatus,{translationTimer:k,viewersCount:D,isLiveIndicatorOff:F,actions:O,tooltipText:W})}function h(e,t,n){return{text:a.createElement("div",{className:"TranslationStatus__dropdownItem"},e,a.createElement("div",{className:"TranslationStatus__dropdownItemText"},t)),onClick:n}}function v(e){return a.createElement(s.CallTimer,{duration:e})}function A(e){return 0===e?"00:00":e<=599?"0"+(0,c.formatDuration)(e):(0,c.formatDuration)(e)}function E(e){return e<0}function C(e){var t=Date.now();return Math.floor((t-e)/1e3)}},410038:(e,t,n)=>{"use strict";n.d(t,{TranslationStopContainer:()=>u});var r=n(667294),a=n(50533),o=n(881150),i=n(121255),l=n(662208),s=n(389809),c=n(329538),u=function(){var e=(0,a.useDispatch)(),t=r.useContext(l.LangContext).getLang,n=(0,r.useCallback)((function(){e({type:i.TOGGLE_POPUP})}),[]);return r.createElement(s.TranslationStopModal,{onClose:n,actionButtons:[r.createElement(o.default,{onClick:n,appearance:"secondary",key:"cancel"},t("calls_cancel")),r.createElement(o.default,{onClick:function(){(0,c.stopVideoStream)().then((function(){e({type:i.TOGGLE_POPUP})}))},key:"stop"},t("calls_translation_stop"))]})}},450273:(e,t,n)=>{"use strict";n.d(t,{UnbanParticipantContainer:()=>d});var r=n(667294),a=n(50533),o=n(881150),i=n(121255),l=n(662208),s=n(697483),c=n(613335),u=n(904992),d=function(e){var t,n=e.SDK,d=(0,a.useDispatch)(),p=r.useContext(l.LangContext),f=p.getLang,m=p.langNumeric,_=p.langSex,g=(0,a.useSelector)((function(e){return e})),h=g.participants[g.me],v=(0,s.participantIsAdmin)(h),A=null===(t=g.membersUnban)||void 0===t?void 0:t.members,E=(0,r.useCallback)((function(){d({type:i.UNBAN_PARTICIPANTS})}),[]),C=(0,r.useCallback)((function(){null==A||A.forEach((function(e){n.addParticipant(String(e.id),{unban:!0})})),E()}),[g.membersUnban]);if(!A||0===A.length)return r.createElement(r.Fragment,null);var y=null==A?void 0:A.length,S=m(y,"calls_unban_participant_text",f("calls_unban_participant_text",!0)),w="",b=[];if(1===y){var T=A[0];w=_(T.sex,"calls_unban_participant_description_text_one_person",f("calls_unban_participant_description_text_one_person",!0)).replace("{user}",T.name),b.push((0,c.getMemberForUserStack)(T))}else{var I=[A[0].name,A[1].name];b=A.slice(0,2).map((function(e){return(0,c.getMemberForUserStack)(e)}));if(y<=3)3===y&&(I.push(A[2].name),b.push((0,c.getMemberForUserStack)(A[2]))),w=f("calls_unban_participant_description_text_two_persons").replace("{users}",I.join(", "));else{var k=y-2;w=m(k,"calls_unban_participant_description_text_more_persons",f("calls_unban_participant_description_text_more_persons",!0)).replace("{users}",I.join(", ")).replace("{users_count}",k),b.push({id:k,text:"+"+k})}}var N=v?[r.createElement(o.default,{onClick:E,appearance:"secondary",key:"cancel"},f("calls_unban_participant_cancel_button_text")),r.createElement(o.default,{onClick:C,key:"stop"},f("calls_unban_participant_ok_button_text"))]:[r.createElement(o.default,{onClick:E,key:"cancel"},f("calls_unban_participant_disallowed_button_text"))];return r.createElement(u.UnbanMembersModal,{onClose:E,description:S,subDescription:w,actionButtons:N,avatarsItems:b})}},927229:(e,t,n)=>{"use strict";n.d(t,{UnmuteRequestContainer:()=>d});var r=n(667294),a=n(50533),o=n(881150),i=n(121255),l=n(662208),s=n(860925),c=n(169610),u=n(464380),d=function(e){var t=e.SDK,n=(0,a.useDispatch)(),d=r.useContext(l.LangContext).getLang,p=(0,a.useSelector)((function(e){return e})),f=p.participants[p.me],m=f.mediaSettings||{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},_=function(){n({type:i.TOGGLE_POPUP})},g=function(){var e=f.mediaSettings;(null==e?void 0:e.isAudioEnabled)||(m.isAudioEnabled?Promise.resolve():(0,c.checkPermissions)(t,[u.MediaOption.AUDIO])).then((function(){var e;(null===(e=p.notification)||void 0===e?void 0:e.type)===i.NotificationType.SPEAKING_ON_MUTE&&n({type:i.CALL_NOTIFICATION,notification:null}),t.toggleLocalAudio(!0).catch(console.log)}))};return r.createElement(s.UnmuteRequestModal,{onClose:_,title:d("calls_dialog_unmute_request_title"),description:d("calls_dialog_unmute_request_description"),actionButtons:[r.createElement(o.default,{onClick:function(){g(),_()},appearance:"secondary",key:"mic"},d("calls_dialog_unmute_request_mic_only_action")),r.createElement(o.default,{onClick:function(){var e;g(),(null==(e=f.mediaSettings)?void 0:e.isVideoEnabled)||(null==e?void 0:e.isScreenSharingEnabled)||(!m.isVideoEnabled||m.isScreenSharingEnabled?(0,c.checkPermissions)(t,[u.MediaOption.VIDEO]):Promise.resolve()).then((function(){t.toggleLocalVideo(!0).catch(console.log)})),_()},key:"all"},d("calls_dialog_unmute_request_action"))]})}},731388:(e,t,n)=>{"use strict";n.d(t,{UploadBackgroundErrorContainer:()=>s});var r=n(667294),a=n(50533),o=n(983179),i=n(662208),l=n(121255),s=function(){var e=(0,a.useDispatch)(),t=(0,r.useContext)(i.LangContext).getLang,n=(0,r.useCallback)((function(){e({type:l.TOGGLE_POPUP,data:l.POPUP_VIRUTAL_BACKGROUND})}),[]),s=(0,r.useCallback)((function(){e({type:l.TOGGLE_POPUP,data:l.POPUP_UPLOAD_BACKGROUND_PHOTO})}),[]);return r.createElement(o.UploadBackgroundErrorModal,{onClose:n,onSubmit:s},t("calls_error_upload_background_image"))}},67057:(e,t,n)=>{"use strict";n.d(t,{UploadBackgroundPhotoContainer:()=>s});var r=n(667294),a=n(50533),o=n(654837),i=n(860228),l=n(121255),s=function(e){var t=e.onAddBackground,n=e.loading,s=(0,a.useDispatch)(),c=(0,r.useCallback)((function(){s({type:l.TOGGLE_POPUP,data:l.POPUP_VIRUTAL_BACKGROUND})}),[]),u=(0,r.useCallback)((function(e){t(e).then(c).catch((function(){s({type:l.TOGGLE_POPUP,data:l.POPUP_UPLOAD_BACKGROUND_ERROR})}))}),[c]);return r.createElement(o.UploadBackgroundPhotoModal,{onClose:c},r.createElement(i.UploadBackgroundPhoto,{loading:n,onSubmit:u}))}},955150:(e,t,n)=>{"use strict";n.d(t,{VirtualBackgroundSettingsContainer:()=>A});var r=n(570655),a=n(667294),o=n(50533),i=n(288540),l=n(536228),s=n(116930),c=n(20832),u=n(363220),d=n(591172),p=n(121255),f=n(993663),m=n(524384),_=n(915622),g=n(731388),h=n(67057),v=n(32491),A=(0,a.memo)((function(e){var t=e.SDK,n=(0,r.__read)((0,a.useState)(!1),2),A=n[0],E=n[1],C=(0,o.useSelector)((function(e){return e.popup})),y=(0,o.useSelector)((function(e){return e.virtualBackgroundSettings.photos})),S=(0,f.useClosePopup)().onClose,w=(0,m.useCurrentUserStream)().userStream,b=(0,s.useSettingsItems)({photos:y}),T=b.chosen,I=b.setChosen,k=b.onClick,N=b.onSuccessPhotoUpload,P=(0,_.useUserBackgrounds)({photos:y,onSuccessPhotoUpload:N}),D=P.onCancelSettings,M=P.loadingUpload,L=P.onAddBackground,O=P.onDeleteBackground,R=P.onSaveSettings,x=(0,c.useBackgroundEffects)({SDK:t}).onSettingsChange;(0,u.useInitialBackgroundEffect)({onSettingsChange:x,userStream:w});var B=(0,d.useSavedSettings)({chosen:T,onSettingsChange:x,settingsOpened:A,setChosen:I,photos:y}),H=B.onRestoreSettings,U=B.onApplySettings,F=(0,v.useVideoOptions)(),G=F.videoOptions,V=F.onRestoreSettings,W=F.onSaveSettings,z=F.onChangeVideoOption;(0,a.useEffect)((function(){C!==p.POPUP_VIRUTAL_BACKGROUND||A||E(!0)}),[C]);var j=(0,a.useCallback)((function(){R(),S(),E(!1),U(),W()}),[R,S,U,W]),Y=(0,a.useCallback)((function(){D(),S(),E(!1),H(),V()}),[D,S,H,V]);return a.createElement(a.Fragment,null,C===p.POPUP_VIRUTAL_BACKGROUND&&a.createElement(i.VirtualBackgroundSettingsModal,{onClose:Y,onSubmit:j},a.createElement(l.VirtualBackgroundSettings,{chosen:T,backgroundList:y,onDeleteBackground:O,onChooseBackground:k,videoOptions:G,onChangeVideoOption:z})),C===p.POPUP_UPLOAD_BACKGROUND_PHOTO&&a.createElement(h.UploadBackgroundPhotoContainer,{onAddBackground:L,loading:M}),C===p.POPUP_UPLOAD_BACKGROUND_ERROR&&a.createElement(g.UploadBackgroundErrorContainer,null))}))},699637:(e,t,n)=>{"use strict";n.d(t,{WaitingContainer:()=>i});var r=n(667294),a=n(50533),o=n(706885);function i(){return(0,a.useSelector)((function(e){return e})).isLoaderVisible?r.createElement(o.default,null):null}},637880:(e,t,n)=>{"use strict";n.d(t,{WaitingHallContainer:()=>v});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(492512),s=n(269481),c=n(169610),u=n(690015),d=n(697483),p=n(662208),f=n(498110),m=n(774351),_=n(100741),g=n(464380),h=n(51443);function v(e){var t,n=e.SDK,v=e.navigateToConvo,A=(0,o.useSelector)((function(e){return e})),E=(0,o.useDispatch)(),C=(0,a.useContext)(p.LangContext).getLang,y=(0,a.useContext)(f.ConfigContext),S=y.isModalView,w=y.enableScreenTrack,b=A.peer,T=A.participants[A.me].mediaSettings||{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},I=(0,a.useMemo)((function(){return(0,d.getActiveParticipants)(A)}),[A.participants,A.me,A.groupId,A.meGroup]),k=A.uiMode===i.UIMode.FULLSCREEN,N=(0,r.__read)((0,a.useState)(!1),2),P=N[0],D=N[1],M=(0,r.__read)((0,a.useState)(!1),2),L=M[0],O=M[1],R=function(e){return E({type:i.CHANGE_UI_MODE,mode:e})},x=(0,a.useCallback)((function(){S&&(A.uiMode===i.UIMode.FULLSCREEN?((0,m.pause)(.3,null).then((function(){R(i.UIMode.COLLAPSED)})),R(i.UIMode.DEFAULT)):R(i.UIMode.COLLAPSED))}),[A.uiMode]),B=(0,a.useCallback)((function(){if(!P){var e=!T.isAudioEnabled;(e?(0,c.checkPermissions)(n,[g.MediaOption.AUDIO]):Promise.resolve()).then((function(){var t;D(!0),(null===(t=A.notification)||void 0===t?void 0:t.type)===i.NotificationType.SPEAKING_ON_MUTE&&E({type:i.CALL_NOTIFICATION,notification:null}),n.toggleLocalAudio(e).finally((function(){D(!1)}))}))}}),[T,P]),H=(0,a.useCallback)((function(){if(!L){var e=!T.isVideoEnabled||T.isScreenSharingEnabled&&!w;(e?(0,c.checkPermissions)(n,[g.MediaOption.VIDEO]):Promise.resolve()).then((function(){O(!0),w||T.isScreenSharingEnabled&&n.captureScreen(!1),n.toggleLocalVideo(e).finally((function(){O(!1)}))}))}}),[T,L]),U=(0,a.useCallback)((function(){x(),v(A.peer)}),[A.peer,A.uiMode]),F=(0,a.useCallback)((function(){n.hangup()}),[A.callData.callId,A.peer,I]),G=(0,a.useCallback)((function(){E({type:i.CHANGE_UI_MODE,mode:k?i.UIMode.DEFAULT:i.UIMode.FULLSCREEN}),E({type:i.SET_TOOLTIP,tooltips:null})}),[A.uiMode]),V=(0,a.useCallback)((function(e,t){var n;E({type:i.SET_TOOLTIP,tooltips:(n={},n[e]=t,n)})}),[]),W=(0,a.useCallback)((function(){E({type:i.SET_TOOLTIP,tooltips:null})}),[]);(0,a.useEffect)((function(){return function(){E({type:i.SET_TOOLTIP,tooltips:null})}}),[]);var z=(0,a.useMemo)((function(){var e;return a.createElement(u.CallNotificationContainer,{dispatch:E,notification:A.notification,participant:A.participants[null===(e=A.notification)||void 0===e?void 0:e.data]})}),[A.notification,A.participants[null===(t=A.notification)||void 0===t?void 0:t.data]]),j=A.hangupType===i.HANGUP_TYPE_REMOVED?C("calls_waiting_hall_removed"):C("calls_waiting_hall_info");return a.createElement(s.CallModal,{onClose:F,onBackdropClick:x},a.createElement(l.Call,{info:null,isVideoAllowed:!0,isAudioAllowed:!0,isVideoEnabled:T.isVideoEnabled,isAudioEnabled:T.isAudioEnabled,isFullScreen:k,onToggleAudio:B,onToggleVideo:H,onLeaveCall:F,onCollapseCall:S?x:null,onFullScreenToggle:G,onTooltipChange:V,onHidePanel:W,onChat:U,isChatControlShown:!!b&&!A.groupId,chatUnreadCount:A.chatUnreadCount,notification:z,tooltips:A.tooltips,amISpeaking:!!A.speakers[A.me],notificationWithButton:null,withoutPadding:!0},a.createElement(a.Fragment,null,T.isVideoEnabled&&a.createElement(_.WaitingHall,(0,r.__assign)({},function(e,t){var n,r=e[t],a=r.mediaSettings,o=(0,d.isParticipantWithVideo)(r),i=(0,d.getStream)(r);return{id:t,name:"",letter:null===(n=r.name)||void 0===n?void 0:n.slice(0,1),hasAudio:!!(null==a?void 0:a.isAudioEnabled),hasVideo:o,stream:i,wasConnected:!!r.wasConnected}}(A.participants,A.me))),a.createElement(h.WaitingHallInfo,{text:j}))))}},564840:(e,t,n)=>{"use strict";n.d(t,{WaitingHallListContainer:()=>_});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(662208),s=n(428990),c=n(956462),u=n(719481),d=n(186983),p=n(736434),f=n(431469),m=n(884143),_=function(e){var t,n,_,h,v,A=e.isModal,E=e.onMore,C=e.navigateToProfile,y=e.isWithBackButton,S=e.onBackClick,w=y?S:function(){},b=(0,o.useSelector)((function(e){return e})),T=(0,o.useDispatch)(),I=a.useContext(l.LangContext).getLang,k=(0,r.__read)((0,a.useState)(g(b,A)),2),N=k[0],P=k[1],D=(0,r.__read)((0,a.useState)(""),2),M=D[0],L=D[1],O=b.waitingHall?Array.from(null===(t=b.waitingHall)||void 0===t?void 0:t.members.values()):[],R=(0,a.useCallback)((function(e){return e.name}),[]),x=(0,a.useCallback)((function(e){return e.peerId}),[]),B=(0,f.useIndexer)(A?O:[],R,x),H=(0,a.useCallback)((function(e){L(e.target.value)}),[]),U=A?O:O.slice(0,5);M&&(U=B.search(M)),(0,a.useEffect)((function(){P(g(b,A))}),[null===(n=b.waitingHall)||void 0===n?void 0:n.totalCount]);var F=(0,a.useCallback)((function(e){var t,n=null===(t=b.waitingHall)||void 0===t?void 0:t.members.get(e);n&&T({type:i.TOGGLE_PARTICIPANTS_KICK,data:{type:i.KickParticipantType.WAITING_HALL,participant:n}})}),[null===(_=b.waitingHall)||void 0===_?void 0:_.members]),G=(0,a.useCallback)((function(e){b.waitingHall&&(0,u.promoteUserAndRemoveFromWaitingHall)(e,b.waitingHall,T)}),[null===(h=b.waitingHall)||void 0===h?void 0:h.members]),V=(0,a.useCallback)((function(){E&&E()}),[b.waitingHall]),W=a.createElement(a.Fragment,null,a.createElement(s.WaitingHallList,{members:U,totalCount:null===(v=b.waitingHall)||void 0===v?void 0:v.totalCount,navigateToProfile:C,onPromote:G,onForbid:F}),N&&a.createElement(c.ListMore,{onClick:V},I("calls_waiting_hall_more_text")));return A?a.createElement(d.CallManagementModal,{title:I("calls_waiting_hall_title"),onCloseModal:function(){T({type:i.GROUP_CALL_SETUP,open:!1,preselectedIds:null}),T({type:i.MANAGEMENT,isOpen:!1})},isWithBackButton:y,onBackClick:w},a.createElement("div",{className:"CallParticipantList"},O.length>0&&a.createElement(a.Fragment,null,a.createElement(p.BlockSearchInput,{value:M,placeholder:I("calls_search_participants_placeholder"),onChange:H,onInput:H,onPaste:H,className:"CallParticipantList__input"}),W,M&&0===U.length&&a.createElement(m.default,null,I("calls_participants_not_found"))),0===O.length&&a.createElement(m.default,null,I("calls_waiting_hall_not_users")))):W};function g(e,t){if(t)return!1;var n=e.waitingHall;return!!n&&n.totalCount>5}},498110:(e,t,n)=>{"use strict";n.d(t,{ConfigContext:()=>o});var r=n(667294),a=n(121255),o=r.createContext({isModalView:!0,withAnimation:!0,allowAddMembers:!1,debugLog:!1,incomingCall:!1,streaming:!0,streamingPrivacy:!0,fullHD:!1,anonymPhoto:!0,allowBanParticipant:!1,showFeedbackScreen:!1,enableVideoSlots:!1,videoSlotsCount:a.VIDEO_SLOTS_COUNT,allowCallByName:!1,nativeApp:!1,nativeAppJoin:!1,enableScreenTrack:!1,enableProducerScreenTrack:!1,allowWaitingHall:!1,allowPushToTalk:!1,badNetwork:!1,badNetworkP2P:!1,desktopAppNotification:!1,sferum:!1,enableVirtualBackground:!1})},662208:(e,t,n)=>{"use strict";n.d(t,{LangContext:()=>r});var r=n(667294).createContext({getLang:function(e){return e},langSex:function(e,t){return t},langNumeric:function(e,t){return""+t},langShortDateTime:function(e){return""+e},langShortDate:function(e){return""+e}})},641196:(e,t,n)=>{"use strict";n.d(t,{setApiWrappers:()=>o,getApiWrapper:()=>i});var r=null,a=null,o=function(e,t){r=e,a=t},i=function(e){return void 0===e&&(e=!0),e?r:a}},483379:(e,t,n)=>{"use strict";n.d(t,{browser:()=>a});var r=navigator.userAgent.toLowerCase(),a={version:(r.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:!/chrome/i.test(r)&&/webkit|safari|khtml/i.test(r)}},745284:(e,t,n)=>{"use strict";n.d(t,{isGroupCallByPeer:()=>l,isActiveGroupCallMessage:()=>s,isRequireAuthToJoin:()=>c,isWaitingHallEnabled:()=>u,getDefaultConversation:()=>d,isAuthedByGroupId:()=>p,getMediaOptions:()=>f,isIAmSpeaking:()=>m,getCallsCount:()=>_,increaseCallsCount:()=>g});var r=n(389953),a=n(121255),o=n(464380),i=n(659397),l=function(e){return 0===e||(0,r.isChatPeer)(e)||null===e};function s(e){return e&&e.attaches&&e.attaches[0]&&"group_call_in_progress"===e.attaches[0].type}function c(e){return e.conversationOptions.includes(o.ConversationOption.REQUIRE_AUTH_TO_JOIN)}function u(e){return e.conversationOptions.includes(o.ConversationOption.WAITING_HALL)}function d(e){return{peerId:0,canAddMembers:!0,tab:e("calls_new_call_title"),photo:a.DEFAULT_GROUP_CALL_PHOTO}}function p(e){return!!e.groupId}function f(e){var t=e.audio,n=e.video,r=[];return t&&r.push(o.MediaOption.AUDIO),n&&r.push(o.MediaOption.VIDEO),r}function m(e){return!!e.speakers[e.me]}function _(){var e;return Number(null!==(e=i.localStorage.getItem(a.CALLS_DESKTOP_APP_NOTIFICATION))&&void 0!==e?e:0)}function g(){var e,t=Number(null!==(e=i.localStorage.getItem(a.CALLS_DESKTOP_APP_NOTIFICATION))&&void 0!==e?e:0)+1;i.localStorage.setItem(a.CALLS_DESKTOP_APP_NOTIFICATION,String(t))}},874023:(e,t,n)=>{"use strict";n.d(t,{DAY:()=>r,WEEK:()=>a,SECOND_JS:()=>o});var r=86400,a=7*r,o=1e3},767497:(e,t,n)=>{"use strict";n.d(t,{generateStartCallsDeepLink:()=>a,generateJoinCallsDeepLink:()=>o});var r=n(121255),a=function(e){var t=e.peerId,n=e.userId,a=""+r.DESKTOP_CALLS_SCHEME+r.DESKTOP_CALLS_HOST+"/start?peerId="+t+"&userId="+n;return console.log("deeplink: ",a),a},o=function(e){var t=e.joinLink,n=e.userId;return""+r.DESKTOP_CALLS_SCHEME+r.DESKTOP_CALLS_HOST+"/join?joinLink="+t+"&userId="+n}},307915:(e,t,n)=>{"use strict";n.d(t,{getPermissionsErrorMessage:()=>a,getMediaErrorMessage:()=>o,createInvokeErrorWrapper:()=>i});var r=n(121255);function a(e,t,n){void 0===t&&(t=!0);var r="";return e&&t?r=n("calls_error_no_cam_and_mic"):e?r=n("calls_error_no_cam"):t&&(r=n("calls_error_no_mic")),r}function o(e,t){var n;return((n={})[r.MediaError.CAMERA_PERMISSION]=t("calls_error_no_cam"),n[r.MediaError.MIC_PERMISSION]=t("calls_error_no_mic"),n[r.MediaError.CAMERA_ACCESS]=t("calls_error_cameralock"),n[r.MediaError.MIC_ACCESS]=t("calls_error_miclock"),n[r.MediaError.MIC_NOT_FOUND]=t("calls_error_nomic"),n[r.MediaError.SCREEN_PERMISSION]=t("calls_error_screenpermission"),n[r.MediaError.SCREEN_ACCESS]=t("calls_error_screenlock"),n)[e]}function i(e,t){return function(n){e&&e({msg:n}),(null==t?void 0:t.onError)&&t.onError(new Error(n)),console.error(n)}}},153907:(e,t,n)=>{"use strict";n.d(t,{download:()=>o,getPlatformUrl:()=>i});var r=n(233194),a=n(121255),o=function(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),n.remove()};function i(){var e=null;return r.Platform.OS===r.OS.MAC?e={url:a.DESKTOP_CALLS_DOWNLOAD[r.OS.MAC],filename:a.DESKTOP_CALLS_FILENAME[r.OS.MAC]}:r.Platform.OS===r.OS.WINDOWS?e={url:a.DESKTOP_CALLS_DOWNLOAD[r.OS.WINDOWS],filename:a.DESKTOP_CALLS_FILENAME[r.OS.WINDOWS]}:r.Platform.OS===r.OS.LINUX&&(e={url:a.DESKTOP_CALLS_DOWNLOAD[r.OS.LINUX].deb[r.ARCH.X64],filename:a.DESKTOP_CALLS_FILENAME[r.OS.LINUX].deb[r.ARCH.X64]}),e}},296951:(e,t,n)=>{"use strict";n.d(t,{get:()=>a});var r=n(659397),a=function(e,t){if((0,r.isString)(e)||(0,r.isArray)(e))for(var n=(0,r.isArray)(e)?e:e.split(".").filter(Boolean),a=n.length-1,o=t,i=0;i<n.length;i+=1){if(!(0,r.isObjectLike)(o))return;var l=o[n[i]];if(!l)return;if(i===a)return l;o=l}}},298811:(e,t,n)=>{"use strict";n.d(t,{fetchUserShortName:()=>m,convertClientData:()=>_,convertServerData:()=>g,convertCallerFromLongpoll:()=>h,convertChatFromLongpoll:()=>v,getPeerIdFromLongpoll:()=>A,isGroupCallEvent:()=>E,isAnyoneWithVideo:()=>C,calculateCallDuration:()=>y,getTextForApiErrorByCode:()=>S,getTextForServerError:()=>w,getTextForClientError:()=>b,createPayload:()=>T,isInReconnect:()=>I,compose:()=>k,exponentialRetry:()=>N,startCallRetryWrapper:()=>P,getParticipantsListLabel:()=>D,unpackState:()=>M,normalizePreviewData:()=>L});var r=n(570655),a=n(389953),o=n(745284),i=n(121255),l=n(774351),s=n(659397),c=n(788822),u=n(613335),d=n(464380),p=n(697483);function f(e){var t,n=e.shortName,a=e.firstName;e.lastName;return n&&a||(n=m(a=(t=(0,r.__read)(e.name.split(" "),2))[0],t[1],e.name)),(0,r.__assign)((0,r.__assign)({},e),{peerId:+e.id,tab:e.name,shortName:n,firstName:a})}function m(e,t,n){if(e){var r=t?t.length>2?t.substring(0,1)+".":t:"";return r?e+" "+r:e}return n}function _(e){var t=(0,r.__read)(e,2),n=t[0],a=t[1],o=n&&function(e){var t=e.callInProgress,n=void 0!==t&&t,a=(0,r.__rest)(e,["callInProgress"]);return!a.call_in_progress&&n&&(a.call_in_progress=n),a}(n);return[o&&("peerId"in o?o:f(o)),a?a.map(f):[]]}function g(e){var t,n=e.items,o=e.profiles,i=(0,r.__read)(n,1)[0],l=function(e){if(e.chat_settings){var t={peerId:e.peer.id,tab:e.chat_settings.title,name:e.chat_settings.title,canAddMembers:e.chat_settings.acl.can_invite,adminIds:e.chat_settings.admin_ids,ownerId:e.chat_settings.owner_id||-1};return e.chat_settings.photo&&(t.photo=e.chat_settings.photo.photo_100),t}return{canAddMembers:!0,peerId:e.peer.id}}(i),s=function(e){return e.map(u.normalizeUser)}(o);return[(0,r.__assign)((0,r.__assign)({},l),{tab:l.name}),(0,a.isUserPeer)(null!==(t=l.peerId)&&void 0!==t?t:0)?[(0,r.__assign)((0,r.__assign)({},s&&s.filter((function(e){return e.peerId===l.peerId}))[0]),l)]:s,i]}function h(e){var t=e.caller_info,n=t.first_name+" "+t.last_name;return{peerId:+t.user_id,name:n,tab:n,photo:t.photo_400||t.photo_200,firstName:t.first_name,lastName:t.last_name,shortName:m(t.first_name,t.last_name,n)}}function v(e){var t=e.chat_info;return{peerId:2e9+t.chat_id,tab:t.title,name:t.title,photo:t.photo_400||t.photo_200}}function A(e){var t=e.caller_info,n=e.chat_info;return n?2e9+n.chat_id:t.user_id}function E(e){return!!e.payload.chat_info}function C(e){return!!Object.values(e.participants).find((function(t){return(t.peerId===e.me||t.wasConnected)&&t.mediaSettings&&(0,p.isParticipantWithVideo)(t)}))}function y(e){var t=Date.now(),n=Math.max(0,Math.floor((t-e)/1e3));return 0===n?"00:00":n<=599?"0"+(0,s.formatDuration)(n):(0,s.formatDuration)(n)}function S(e,t,n){switch(+e){case i.SERVER_ERROR_MESSAGES_CALL_JOIN_NOT_ALLOWED:return n("calls_join_error_require_access");case i.SERVER_ERROR_MESSAGES_CALL_NOT_FOUND:return n("calls_join_error_text");case i.SERVER_ERROR_PRIVACY:return n("calls_privacy_error");case i.SERVER_ERROR_BUSY:return n(t?"calls_chat_busy_error":"calls_busy_error");case i.SERVER_ERROR_FLOOD_CONTROL:return n("calls_flood_error");case i.SERVER_ERROR_REQUIRE_AUTH:return n("calls_join_error_require_auth");case i.SERVER_ERROR_UNKNOWN:case i.SERVER_ERROR_INVALID_REQUEST:case i.SERVER_ERROR_INTERNAL:case i.SERVER_ERROR_OLD_RECEIVER_APP:default:return n("calls_start_error")}}function w(e,t,n){var r,a,o=0===e.search("EXTERNAL_API_ERROR"),l=e.match(/\d+/g),s=l?Number(null===(r=e.match(/\d+/g))||void 0===r?void 0:r[1]):i.CLIENT_ERROR_UNKNOWN,c=l?Number(null===(a=e.match(/\d+/g))||void 0===a?void 0:a[0]):i.CLIENT_ERROR_UNKNOWN;if(!o||Number.isNaN(s)){switch(c){case i.SDK_ERROR_AUTH:return n("calls_start_error_auth")}return function(e,t,n){switch(!0){case-1!==e.search("error.webrtc.auth.required"):return n("calls_join_error_require_auth");case-1!==e.search("error.webrtc.auth.banned"):case-1!==e.search("error.webrtc.participant.check.privacy"):return n("calls_join_error_banned");case-1!==e.search("error.webrtc.participant.check.killed_call"):return n("calls_join_error_killed_call");case-1!==e.search("not.found.webrtc.conversation"):return n("calls_join_error_not_found_conversation");default:return n("calls_start_error")}}(e,0,n)}switch(e){case d.HangupType.CANCELED:return n("calls_hangup_error_canceled");case d.HangupType.REJECTED:return n("calls_hangup_error_rejected");case d.HangupType.REMOVED:return n("calls_hangup_error_removed");case d.HangupType.HUNGUP:return n("calls_hangup_error_hangup");case d.HangupType.MISSED:return n("calls_hangup_error_missed");case d.HangupType.BUSY:return n("calls_hangup_error_busy");case d.HangupType.FAILED:return n("calls_hangup_error_failed");case d.HangupType.NETWORK_ERROR:return n("calls_hangup_error_network_error");case d.HangupType.CALLER_IS_BLOCKED:return n("calls_hangup_error_caller_is_blocked");case d.HangupType.NOT_FRIENDS:return n("calls_hangup_error_not_friends");case d.HangupType.CALLEE_IS_OFFLINE:return n("calls_hangup_error_callee_is_offline");case d.HangupType.UNKNOWN_ERROR:return n("calls_hangup_error_unknown_error");case d.HangupType.UNSUPPORTED:return n("calls_hangup_error_unsupported");case d.HangupType.OLD_VERSION:return n("calls_hangup_error_old_version");case d.HangupType.SERVICE_DISABLED:return n("calls_hangup_error_service_disabled");case d.HangupType.EXTERNAL_API_ERROR:return n("calls_hangup_error_external_api_error");case d.HangupType.SOCKET_CLOSED:return n("calls_hangup_error_socket_closed")}return S(+s,t,n)}function b(e,t,n){return n("calls_sorry_error")}function T(e,t){return JSON.stringify({is_video:t.includes(d.MediaOption.VIDEO),chat_id:(0,a.isChatPeer)(e)?e-2e9:void 0,with_join_link:(0,o.isGroupCallByPeer)(e),join_by_link:(0,o.isGroupCallByPeer)(e)})}function I(e){return!!Object.values(e.participants).find((function(e){return e.status===d.ParticipantStatus.RECONNECT}))}var k=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return t.reduce((function(e,t){return t(e)}),e).apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(n)))}};function N(e,t){return void 0===t&&(t={attempts:10,timeout:0}),function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return t.attempts>0?(0,l.pause)(t.timeout,null).then((function(){return e.apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(n)))})).catch((function(a){return!t.timeout&&(t.timeout=1),t.attempts=a.type===i.SdkErrorType.API?0:t.attempts-1,t.timeout=Math.min(2*t.timeout,300),N(e,t).apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(n)))})):Promise.reject(i.CallErrorType.CANT_REACH_API)}}var P=function(e,t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return t.apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(n))).catch((function(a){if(a.error===i.FatalError.AUTH)return e().then((function(){return t.apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(n)))}));throw a}))}};function D(e,t,n,r,a,o,i){void 0===o&&(o=0),void 0===i&&(i=3);var l=function(e){return(0,c.decodeHTMLEntities)(n(e)||"")};if(0===o&&e.length>0&&(o=e.length),o>t.length){var s=o-t.length,u=e.slice(0,i).map(l).join(", ");return a(s,"calls_members_list_label",r("calls_members_list_label",s)).replace("{name}",u)}if(t.length>1){var d=t.length>2?e.slice(0,2).map(l).join(", "):l(e[0]),p=l(e[t.length-1]);return r("calls_and").replace("{before}",d).replace("{after}",p)}return 1===t.length?l(e[0]):""}function M(e){return"current"in e?e.current:e}function L(e,t){var n=t.join_link,a=t.preview,o=t.profiles,i=t.anonyms,l=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(i)),(0,r.__read)(o)).map(u.normalizeUser);return{joinLink:n,title:a.title,membersCount:a.members_count,photo_100:a.photo.photo_100,photo_200:a.photo.photo_200,members:l,conversationData:{peerId:0,canAddMembers:!0,tab:e("calls_new_call_title"),photo:"https://vk.com/images/call_convo_stub.png"}}}},171659:(e,t,n)=>{"use strict";n.d(t,{getHistoryCallPeerId:()=>a,getCurrentCallPeerId:()=>o,getCurrentCallOwner:()=>i,getHistoryItemOwner:()=>l});var r=n(121255);function a(e){var t,n=e.chat,a=e.user_ids,o=e.items,i=0;return n?n.id&&(i=r.CHAT_PEER_ID_OFFSET+n.id):a.length?i=a[0]:(null==o?void 0:o.length)&&(null===(t=o[0])||void 0===t?void 0:t.chat)&&o[0].chat.id&&(i=r.CHAT_PEER_ID_OFFSET+o[0].chat.id),i}function o(e){var t=0;return(null==e?void 0:e.chat)?t=r.CHAT_PEER_ID_OFFSET+e.chat.id:e.user_ids.length&&(t=e.user_ids[0]),t}function i(e,t){var n=e.chat,r=e.user_ids,a=void 0;if(!n&&r.length){var o=r[0];o in t&&(a=t[o])}return{member:a,chat:n}}function l(e,t){var n,r,a=e.chat,o=e.user_ids,i=e.items,l=void 0;if(!a)if(o.length){var s=o[0];s in t&&(l=t[s])}else(null==i?void 0:i.length)&&(null===(n=i[0])||void 0===n?void 0:n.chat)&&(a=null===(r=i[0])||void 0===r?void 0:r.chat);return{member:l,chat:a}}},223724:(e,t,n)=>{"use strict";n.d(t,{videoOptionsStorage:()=>o});var r=n(570655),a=n(121255),o={queryOption:function(e){return o.getOptions()[e]},getOptions:function(){try{var e=localStorage.getItem(a.LS_KEYS.VIDEO_OPTIONS);if("string"!=typeof e)throw new Error("no value stored");return JSON.parse(e)}catch(e){return o.getDefaultOptions()}},saveOption:function(e,t){var n,i=(0,r.__assign)((0,r.__assign)({},o.getOptions()),((n={})[e]=t,n));return localStorage.setItem(a.LS_KEYS.VIDEO_OPTIONS,JSON.stringify(i)),i},saveOptions:function(e){return localStorage.setItem(a.LS_KEYS.VIDEO_OPTIONS,JSON.stringify(e)),e},getDefaultOptions:function(){return{calls_is_video_mirrored:!0}}}},697483:(e,t,n)=>{"use strict";n.d(t,{isParticipantAnonym:()=>c,isParticipantGroup:()=>u,getParticipantExternalId:()=>d,getParticipantActions:()=>f,isParticipantInCall:()=>m,isParticipantUnavailableToCallFromGroup:()=>_,getCallVisibleParticipant:()=>g,getActiveParticipants:()=>v,getActiveParticipantsCount:()=>A,getNonAnonymousConnectParticipantsCount:()=>E,getConnectedAdminsCount:()=>C,canPinParticipants:()=>b,isAdmin:()=>T,isCreator:()=>I,canMuteParticipants:()=>k,getRaisedHands:()=>P,kickParticipant:()=>D,participantIsChatAdmin:()=>M,participantIsAdmin:()=>L,isMutedPermanently:()=>O,getMeId:()=>R,getStream:()=>x,isParticipantWithVideo:()=>B,getOrator:()=>H});var r=n(570655),a=n(121255),o=n(745284),i=n(464380),l=n(614914),s=n(613335),c=function(e){return e>-19e8&&e<-189e7},u=function(e){return e<0&&e>-1e9},d=function(e){return(null==e?void 0:e.peerId)?c(e.peerId)?e.peerId.toString():{id:e.peerId.toString(),type:i.ExternalIdType.USER}:null},p={},f=function(e,t,n,r,s,f,m,_,g){void 0===g&&(g=!1);var h=r.peerId===e.me,v=c(r.peerId),A=(0,o.isGroupCallByPeer)(e.peer),E=e.participants[e.me],C=!!e.groupId,y=[],S=[],P=e.config.isModalView,D=u(r.peerId);if(h||!s||v||void 0===_||y.push({text:f(D?"calls_go_to_community":"calls_go_to_profile"),onClick:function(e){_(e,r.link)}}),h||v||c(e.me)||void 0===m||C||y.push({text:f(D?"calls_go_to_chat_with_community":"calls_go_to_chat_with_participant"),onClick:function(){P&&n({type:a.CHANGE_UI_MODE,mode:a.UIMode.COLLAPSED}),n({type:a.MANAGEMENT,isOpen:!1}),m(r.peerId)}}),!h&&A&&!c(e.me)&&function(e){return L(e)}(E)&&!I(r)){var M={negative:!0,text:f("calls_participant_menu_kick"),onClick:function(){n({type:a.TOGGLE_PARTICIPANTS_KICK,data:{type:a.KickParticipantType.CALL,participant:r}})}};g?S.push(M):y.push(M)}if(!h&&A&&!c(e.me)&&k(E)&&y.push({text:f("calls_participant_menu_mute_audio_video"),onClick:function(){n({type:a.TOGGLE_PARTICIPANTS_MANAGEMENT,data:{mode:a.ParticipantsManagementMode.SINGLE,participant:r}})}}),h||A||c(e.me)||!k(E)||y.push({text:f("calls_participant_menu_mute"),onClick:function(){var e=d(r);e&&t.muteParticipant(e,[i.MediaOption.AUDIO],!1).catch(console.log)}}),h||!A||c(e.me)||!k(e.participants[e.me])||function(e){if(!e.mediaSettings)return!1;var t=e.mediaSettings,n=t.isAudioEnabled,r=t.isVideoEnabled,a=t.isScreenSharingEnabled;return n&&(r||a)}(r)||y.push({text:f("calls_participant_menu_enable_media_request"),onClick:function(){t.unmuteRequest(d(r),[i.MediaOption.AUDIO,i.MediaOption.VIDEO,i.MediaOption.SCREEN_SHARING]).catch(console.log),l.callStats.logEvent({call_event_type:a.CallActionEventType.ASK_USER_TO_UNMUTE,session_id:e.callData.callId,peer_id:e.peer,is_group_call:(0,o.isGroupCallByPeer)(e.peer)})}}),h||!A||c(e.me)||c(r.peerId)||!N(e.participants[e.me])||T(r)||I(r)||r.status!==i.ParticipantStatus.CONNECTED||y.push({text:f("calls_participant_menu_assign_admin_role"),onClick:function(){n({type:a.TOGGLE_ADMIN_ASSIGNMENT,data:{participant:r}})}}),!h&&A&&!c(e.me)&&N(e.participants[e.me])&&T(r)&&y.push({text:f("calls_participant_menu_revoke_admin_role"),onClick:function(){var s=d(r);s&&(t.grantRoles(s,[i.UserRole.ADMIN],!0).then((function(){n({type:a.CHANGE_PARTICIPANT_ROLES,participantId:r.peerId,data:r.roles.filter((function(e){return e!==i.UserRole.ADMIN}))})})).catch(console.log),l.callStats.logEvent({call_event_type:a.CallActionEventType.RETRIEVE_ADMIN,session_id:e.callData.callId,peer_id:e.peer,is_group_call:(0,o.isGroupCallByPeer)(e.peer)}))}}),A&&!c(e.me)&&b(e.participants[e.me])&&!w(e,r)&&y.push({text:f("calls_participant_menu_pin"),onClick:function(){var i=d(r);i&&(t.pinParticipant(i,!1).then((function(){n({type:a.SET_ADMIN_PINNED_PARTICIPANT,data:r.peerId}),n({type:a.TOGGLE_ORATOR_MODE,isOratorMode:!0})})).catch(console.log),l.callStats.logEvent({call_event_type:a.CallActionEventType.ADMIN_PIN,session_id:e.callData.callId,peer_id:e.peer,is_group_call:(0,o.isGroupCallByPeer)(e.peer)}))}}),A&&!c(e.me)&&b(e.participants[e.me])&&w(e,r)&&y.push({text:f("calls_participant_menu_pin_cancel"),onClick:function(){var i=d(r);i&&(t.pinParticipant(i,!0).then((function(){n({type:a.SET_ADMIN_PINNED_PARTICIPANT,data:null})})).catch(console.log),l.callStats.logEvent({call_event_type:a.CallActionEventType.ADMIN_UNPIN,session_id:e.callData.callId,peer_id:e.peer,is_group_call:(0,o.isGroupCallByPeer)(e.peer)}))}}),g&&S.length>0&&(y.push({separator:!0}),y=y.concat(S)),p[r.peerId]){var O=y.length===p[r.peerId].length;if(O)for(var R=0;R<y.length;R++)y[R].text!==p[r.peerId][R].text&&(O=!1);O?y=p[r.peerId]:p[r.peerId]=y}else p[r.peerId]=y;return y},m=function(e,t){var n=e.participants[t];return n&&(n.peerId===e.me||!!n.status)},_=function(e,t){return!!e.unableToCallGroupMembersIds&&e.unableToCallGroupMembersIds.indexOf(t)>-1};function g(e,t){var n,a,i=(0,o.isGroupCallByPeer)(e.peer)?e.adminPinnedParticipant||e.screenSharingPinnedParticipant||e.pinnedParticipant||e.orator:e.peer;if(i)return e.participants[i];var l=e.participants[e.me];try{for(var s=(0,r.__values)(Object.values(e.participants)),c=s.next();!c.done;c=s.next()){var u=c.value;if(u.peerId!==e.me&&u.wasConnected&&(l||(l=u),!t||B(u)))return u}}catch(e){n={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return null!=l?l:e.participants[e.me]}var h=[];function v(e,t){var n,a,o,i,l,c,u=e.participants,d=e.me,p=e.groupId,f=e.meGroup,m=e.adminPinnedParticipant,_=e.isOratorMode?e.oratorScrollFirstVisible:e.gridScrollFirstVisible,g=e.isOratorMode?e.oratorScrollNumberOfVisible:30,v=e.isOratorMode?30:60,A=[],E=[],C=[],y=[],S=[],w=[];try{for(var b=(0,r.__values)(Object.values(u)),T=b.next();!T.done;T=b.next()){var I=T.value;I.status&&((null===(i=null===(o=I.statusData)||void 0===o?void 0:o.hand)||void 0===i?void 0:i.state)?A.push(I):I.peerId===m?E.push(I):I.peerId===d?C.push(p&&f?(0,s.mergeGroupToParticipant)(f,u[d]):u[d]):(null===(l=I.mediaSettings)||void 0===l?void 0:l.isScreenSharingEnabled)?y.push(I):(null===(c=I.mediaSettings)||void 0===c?void 0:c.isVideoEnabled)?S.push(I):w.push(I))}}catch(e){n={error:e}}finally{try{T&&!T.done&&(a=b.return)&&a.call(b)}finally{if(n)throw n.error}}var k=(0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(A.sort((function(e,t){var n,r,a,o,i,l;return(null!==(a=null===(r=null===(n=e.statusData)||void 0===n?void 0:n.hand)||void 0===r?void 0:r.ts)&&void 0!==a?a:0)-(null!==(l=null===(i=null===(o=null==t?void 0:t.statusData)||void 0===o?void 0:o.hand)||void 0===i?void 0:i.ts)&&void 0!==l?l:0)})))),(0,r.__read)(E)),(0,r.__read)(C)),(0,r.__read)(y)),(0,r.__read)(S)),(0,r.__read)(w));if(k.length!==h.length)h=k;else for(var N=0;N<k.length;N++)if(k[N]!==h[N]){h=k;break}return t?h:h.slice(_<v?0:_-v,_+g+v>=h.length?h.length:_+g+v)}function A(e){var t=e.participants,n=0;for(var r in t)t.hasOwnProperty(r)&&S(e,t[r])&&n++;return n}function E(e){return y(e).filter((function(e){return!c(e.peerId)})).length}function C(e){return y(e).filter((function(e){return T(e)||I(e)})).length}function y(e){return Object.values(e.participants).filter((function(e){return e.status===i.ParticipantStatus.CONNECTED})).concat(e.participants[e.me])}function S(e,t){return t.peerId===e.me||t.status}function w(e,t){return e.adminPinnedParticipant===t.peerId}function b(e){return T(e)||I(e)}function T(e){return!!(null==e?void 0:e.roles)&&e.roles.some((function(e){return e===i.UserRole.ADMIN}))}function I(e){return!!(null==e?void 0:e.roles)&&e.roles.some((function(e){return e===i.UserRole.CREATOR}))}function k(e){return!!e.roles&&(I(e)||T(e))}function N(e){return!!e.roles&&(I(e)||T(e))}function P(e){var t,n,r,a=e.participants,o=0;for(var i in a)a.hasOwnProperty(i)&&S(e,a[i])&&(null===(r=null===(n=null===(t=a[i])||void 0===t?void 0:t.statusData)||void 0===n?void 0:n.hand)||void 0===r?void 0:r.state)&&o++;return o}function D(e,t){void 0===t&&(t=!1);var n=d(e);return n?(0,i.removeParticipant)(n,t):Promise.resolve()}function M(e,t){if(!t)return!1;var n=null==e?void 0:e.peerId;return!!n&&(n===t.ownerId||!!t.adminIds&&t.adminIds.includes(n))}function L(e){return T(e)||I(e)}function O(e){var t=e.permissions||{};return[t.audio,t.video,t.screenSharing].some((function(e){return e===a.MediaPermissionType.DENY}))}function R(e){return(0,o.isAuthedByGroupId)(e)?e.groupId:e.me}function x(e,t){return void 0===t&&(t=!1),t?e.stream:e.screenSharingStream?e.screenSharingStream:e.stream}function B(e){var t;return!!(null===(t=e.mediaSettings)||void 0===t?void 0:t.isVideoEnabled)||function(e){var t;return!!(null===(t=e.mediaSettings)||void 0===t?void 0:t.isScreenSharingEnabled)&&!!e.screenSharingStream}(e)}function H(e){var t;return null!==(t=e.participants[e.adminPinnedParticipant||e.screenSharingPinnedParticipant||e.pinnedParticipant||e.orator||e.me])&&void 0!==t?t:{}}},757054:(e,t,n)=>{"use strict";n.d(t,{getParticipantLayout:()=>c,getParticipantsLayoutDiff:()=>u});var r,a=n(121255),o=n(298811),i=n(464380),l=n(697483),s=n(745284);!function(e){e.CONTAIN="cn",e.COVER="cv"}(r||(r={}));function c(e,t,n){return(0,s.isGroupCallByPeer)(e.peer)?e.uiMode===a.UIMode.COLLAPSED?function(e){var t=(0,o.isAnyoneWithVideo)(e),n=(0,l.getCallVisibleParticipant)(e,t),r=(0,l.getActiveParticipants)(e,!0),a=e.config,s=a.enableScreenTrack,c=a.enableProducerScreenTrack;return r.reduce((function(t,r){var a=r.peerId,o=r.mediaSettings;if(a===e.me)return t;if(s||c){var l=Boolean(null==o?void 0:o.isScreenSharingEnabled),u=Boolean(null==o?void 0:o.isVideoEnabled),d=a===(null==n?void 0:n.peerId);d&&l&&(t.set(v(a,i.MediaType.SCREEN),f(n,i.MediaType.SCREEN)),t.set(v(a,i.MediaType.CAMERA),p(r,i.MediaType.CAMERA))),d&&!l&&u&&(t.set(v(a,i.MediaType.CAMERA),f(n,i.MediaType.CAMERA)),t.set(v(a,i.MediaType.SCREEN),p(r,i.MediaType.SCREEN))),d&&(l||u)||(t.set(v(a,i.MediaType.SCREEN),p(r,i.MediaType.SCREEN)),t.set(v(a,i.MediaType.CAMERA),p(r,i.MediaType.CAMERA)))}else a===(null==n?void 0:n.peerId)&&h(o)?t.set(a,f(n)):t.set(a,p(r));return t}),new Map)}(e):e.isOratorMode?function(e,t,n){var r,o,s,c,u=e.adminPinnedParticipant||e.screenSharingPinnedParticipant||e.pinnedParticipant||e.orator||e.me,d=(0,l.getActiveParticipants)(e,!0),f=0,m=e.config,A=m.enableScreenTrack,E=m.enableProducerScreenTrack;if(A||E){var C=new Map,y=Boolean(null===(o=null===(r=e.participants[u])||void 0===r?void 0:r.mediaSettings)||void 0===o?void 0:o.isScreenSharingEnabled),S=Boolean(null===(c=null===(s=e.participants[u])||void 0===s?void 0:s.mediaSettings)||void 0===c?void 0:c.isVideoEnabled),w=e.uiMode===a.UIMode.FULLSCREEN,b=u!==e.me;return y&&b&&(f++,C.set(v(u,i.MediaType.SCREEN),_(e.participants[u],w,!1,t,n,i.MediaType.SCREEN))),y&&S&&b&&(f++,C.set(v(u,i.MediaType.CAMERA),g(e.participants[u],i.MediaType.CAMERA))),y&&!S&&b&&C.set(v(u,i.MediaType.CAMERA),p(e.participants[u],i.MediaType.CAMERA)),!y&&S&&b&&(f++,C.set(v(u,i.MediaType.CAMERA),_(e.participants[u],w,!1,t,n,i.MediaType.CAMERA)),C.set(v(u,i.MediaType.SCREEN),p(e.participants[u],i.MediaType.SCREEN))),y||S||!b||(C.set(v(u,i.MediaType.CAMERA),p(e.participants[u],i.MediaType.CAMERA)),C.set(v(u,i.MediaType.SCREEN),p(e.participants[u],i.MediaType.SCREEN))),d.reduce((function(t,n){var r=n.peerId,a=n.mediaSettings;if(r===e.me||r===u)return t;var o=Boolean(null==a?void 0:a.isScreenSharingEnabled),l=Boolean(null==a?void 0:a.isVideoEnabled),s=n.visible&&f<=e.config.videoSlotsCount;return s&&l&&(f++,t.set(v(r,i.MediaType.CAMERA),g(n,i.MediaType.CAMERA)),t.set(v(r,i.MediaType.SCREEN),p(n,i.MediaType.SCREEN))),s&&!l&&o&&(f++,t.set(v(r,i.MediaType.SCREEN),g(n,i.MediaType.SCREEN)),t.set(v(r,i.MediaType.CAMERA),p(n,i.MediaType.CAMERA))),s&&(l||o)||(t.set(v(r,i.MediaType.SCREEN),p(n,i.MediaType.SCREEN)),t.set(v(r,i.MediaType.CAMERA),p(n,i.MediaType.CAMERA))),t}),C),C}return d.reduce((function(r,o){var i=o.peerId,l=o.mediaSettings;if(i===e.me)return r;if(u===i&&h(l)){var s=_(o,e.uiMode===a.UIMode.FULLSCREEN,!1,t,n);r.set(o.peerId,s)}else h(l)&&o.visible&&f<=e.config.videoSlotsCount?(f++,r.set(o.peerId,g(o))):r.set(o.peerId,p(o));return r}),new Map)}(e,t,n):function(e,t,n){var r=e.uiMode===a.UIMode.FULLSCREEN,o=r?t:900,s=r?n:504,c=(0,l.getActiveParticipants)(e,!0),u=function(e,t,n){switch(n){case 1:return t;case 2:return Math.round(e/2);case 3:return Math.round(e/3);case 4:case 5:case 6:return Math.round(t/2);case 7:case 8:return Math.round(e/4);case 9:case 10:return Math.round(e/5);case 11:case 12:case 13:case 14:case 15:return Math.round(t/3);default:return Math.round(e/6)}}(o,s,c.length),d=u<200?1:2,f=0,_=e.config,g=_.enableScreenTrack,A=_.enableProducerScreenTrack;return c.reduce((function(t,n){if(!(0,l.getParticipantExternalId)(n)||n.peerId===e.me)return t;var r=n.peerId,a=n.mediaSettings;if(g||A){var o=Boolean(null==a?void 0:a.isScreenSharingEnabled),s=Boolean(null==a?void 0:a.isVideoEnabled),c=n.visible&&f<=e.config.videoSlotsCount;return c&&o&&(f++,t.set(v(r,i.MediaType.SCREEN),m(n,u,d,i.MediaType.SCREEN)),t.set(v(r,i.MediaType.CAMERA),p(n,i.MediaType.CAMERA))),c&&!o&&s&&(f++,t.set(v(r,i.MediaType.CAMERA),m(n,u,d,i.MediaType.CAMERA)),t.set(v(r,i.MediaType.SCREEN),p(n,i.MediaType.SCREEN))),c&&(o||s)||(t.set(v(r,i.MediaType.CAMERA),p(n,i.MediaType.CAMERA)),t.set(v(r,i.MediaType.SCREEN),p(n,i.MediaType.SCREEN))),t}return h(a)&&n.visible&&f<=e.config.videoSlotsCount?(t.set(n.peerId,m(n,u,d)),f++):t.set(n.peerId,p(n)),t}),new Map)}(e,t,n):function(e,t,n){var r=new Map,o=e.participants[e.peer];if(!o)return r;var l=e.config,s=l.enableScreenTrack,c=l.enableProducerScreenTrack,u=e.uiMode===a.UIMode.FULLSCREEN,d=e.uiMode===a.UIMode.COLLAPSED,f=o.peerId,m=o.mediaSettings;if(f===e.me)return r;if(s||c){var A=Boolean(null==m?void 0:m.isScreenSharingEnabled),E=Boolean(null==m?void 0:m.isVideoEnabled);if(A&&E&&(r.set(v(f,i.MediaType.SCREEN),_(o,u,d,t,n,i.MediaType.SCREEN)),r.set(v(f,i.MediaType.CAMERA),g(o,i.MediaType.CAMERA))),A!==E){var C=A?i.MediaType.SCREEN:i.MediaType.CAMERA,y=A?i.MediaType.CAMERA:i.MediaType.SCREEN;r.set(v(f,C),_(o,u,d,t,n,C)),r.set(v(f,y),p(o,y))}return A||E||(r.set(v(f,i.MediaType.SCREEN),p(o,i.MediaType.SCREEN)),r.set(v(f,i.MediaType.CAMERA),p(o,i.MediaType.CAMERA))),r}return r.set(o.peerId,h(m)?_(o,u,d,t,n):p(o)),r}(e,t,n)}function u(e,t){var n=[];return t.forEach((function(t,r){var a=e.get(r);(d(a)||d(t))&&(a&&function(e,t){var n=e,r=t;if(!0===n.stopStream&&!0===r.stopStream)return!0;if(!0===n.stopStream||!0===r.stopStream)return!1;var a=e,o=t;return a.fit===o.fit&&a.width===o.width&&a.height===o.height&&a.priority===o.priority}(a,t)||n.push(t))})),n}function d(e){return e&&!e.stopStream}function p(e,t){return void 0===t&&(t=null),{stopStream:!0,uid:(0,l.getParticipantExternalId)(e)||"",mediaType:t}}function f(e,t){void 0===t&&(t=null);var n=(0,l.getParticipantExternalId)(e);return{fit:r.CONTAIN,width:265,height:200,priority:2,uid:n||"",keyFrame:!1,mediaType:t}}function m(e,t,n,a){void 0===a&&(a=null);var o=(0,l.getParticipantExternalId)(e);return{fit:r.COVER,width:t,height:t,priority:n,uid:o||"",keyFrame:!1,mediaType:a}}function _(e,t,n,a,o,i){void 0===i&&(i=null);var s=(0,l.getParticipantExternalId)(e);return{fit:r.CONTAIN,width:t?a:n?265:900,height:t?o:n?200:504,priority:3,uid:s||"",keyFrame:!1,mediaType:i}}function g(e,t){void 0===t&&(t=null);var n=e.mediaSettings,a=(0,l.getParticipantExternalId)(e);return{fit:(null==n?void 0:n.isScreenSharingEnabled)?r.CONTAIN:r.COVER,width:140,height:140,priority:1,uid:a||"",keyFrame:!1,mediaType:t}}function h(e){var t;return null!==(t=!!(null==e?void 0:e.isVideoEnabled)||!!(null==e?void 0:e.isScreenSharingEnabled))&&void 0!==t&&t}function v(e,t){return void 0===t&&(t=null),t?e+":"+t:e}},768606:(e,t,n)=>{"use strict";n.d(t,{throttleAccumulateDispatchParticipant:()=>l,applyParticipantsBatch:()=>s});var r=n(570655),a=n(121255),o=n(464380),i={acc:{},timer:0,tasks:0};function l(e,t,n,o){!function(e,t,n,a,o){void 0===a&&(a=100);o.acc[e]=o.acc[e]&&"object"==typeof o.acc[e]?(0,r.__assign)((0,r.__assign)({},o.acc[e]),t):t,o.tasks++,o.timer&&clearTimeout(o.timer);o.timer=window.setTimeout((function(){o.tasks>0&&(n(o.acc),o.acc={},o.tasks=0),o.timer=0}),a)}(t,n,(function(t){e({type:a.UPDATE_PARTICIPANTS_BATCH,data:t})}),o,i)}function s(e,t){var n,a=(0,r.__assign)((0,r.__assign)({},e),{participants:(0,r.__assign)({},e.participants)});for(var i in t)if(t.hasOwnProperty(i))if(void 0===(null===(n=e.participants[i])||void 0===n?void 0:n.status)&&t[i].status===o.ParticipantStatus.HANGUP)delete a.participants[i];else{var l=e.participants[i]||{},s=t[i],c=s.statusData?(0,r.__assign)((0,r.__assign)({},l.statusData),s.statusData):l.statusData,u=l.wasConnected||s.status===o.ParticipantStatus.CONNECTED;a.participants[i]=(0,r.__assign)((0,r.__assign)((0,r.__assign)({peerId:i},e.participants[i]),t[i]),{statusData:c,wasConnected:u})}return a}},674543:(e,t,n)=>{"use strict";n.d(t,{canStopTranslation:()=>o});var r=n(697483),a=n(613335);function o(e){var t,n,o,i,l=(0,a.getMe)(e);return!(!(0,r.isAdmin)(l)&&!(0,r.isCreator)(l))||!!(null===(n=null===(t=e.translation)||void 0===t?void 0:t.host)||void 0===n?void 0:n.id)&&+(null===(i=null===(o=e.translation)||void 0===o?void 0:o.host)||void 0===i?void 0:i.id)===(0,r.getMeId)(e)}},613335:(e,t,n)=>{"use strict";n.d(t,{normalizeUser:()=>s,normalizeGroup:()=>c,createFriendsCache:()=>u,getMe:()=>d,mergeGroupToParticipant:()=>p,getExternalIdByUserId:()=>f,getMemberForUserStack:()=>m});var r=n(570655),a=n(298811),o=n(788822),i=n(697483),l=n(464380),s=function(e){var t=e.id,n=e.sex,r=e.first_name,l=e.last_name,s=e.screen_name,c=e.first_name_gen,u=e.name,d=e.photo_400,p=e.photo_200,f=e.can_call,m=e.online_info;return(0,i.isParticipantGroup)(+t)&&(r=(0,o.escape)(r)),{id:+t,peerId:+t,name:u||r+" "+l,firstName:r,shortName:(0,a.fetchUserShortName)(r,l,u),shortNameGen:(0,a.fetchUserShortName)(c,l,u),link:s&&"/"+s,sex:n,canCall:f,photo:d||p,onlineInfo:m||null}},c=function(e){var t=e.id,n=e.name,r=e.screen_name,a=e.photo_400,i=e.photo_200,l=e.photo_100;return{id:-t,peerId:-t,name:(0,o.escape)(n),firstName:"",lastName:"",shortName:"",shortNameGen:"",link:r&&"/"+r,photo:a||i||l,photo_100:l}};function u(e){return e.reduce((function(e,t){return e[t.id]=!0,e}),{})}function d(e){return e.participants[e.me]}function p(e,t){var n=(0,r.__assign)({},t);return e.photo&&(n.photo=e.photo),e.name&&(n.name=e.name),e.link&&(n.link=e.link),n}function f(e){var t=l.ExternalIdType.USER;return(0,i.isParticipantGroup)(e)&&(t=l.ExternalIdType.GROUP),{id:e.toString(),type:t}}function m(e){var t=e.name||"";return e.photo?{src:e.photo,alt:t,key:e.peerId}:{id:e.peerId,text:t.slice(0,1)}}},604233:(e,t,n)=>{"use strict";function r(e,t){return"/video"+e+"_"+t}function a(e){var t=document.createElement("video"),n=function(){t.classList.add("Video--visible"),t.removeEventListener("loadeddata",n)};return t.addEventListener("loadeddata",n),t.autoplay=!0,t.controls=!1,t.crossOrigin="anonymous",t.playsInline=!0,t.preload="metadata",t.srcObject=e,t.volume=0,t}n.d(t,{getShortVideoUrl:()=>r,createVideoTag:()=>a})},993663:(e,t,n)=>{"use strict";n.d(t,{useClosePopup:()=>i});var r=n(667294),a=n(50533),o=n(121255),i=function(){var e=(0,a.useDispatch)();return{onClose:(0,r.useCallback)((function(){e({type:o.TOGGLE_POPUP,data:null})}),[])}}},524384:(e,t,n)=>{"use strict";n.d(t,{useCurrentUserStream:()=>a});var r=n(50533),a=function(){var e=(0,r.useSelector)((function(e){return e.me}));return{userStream:(0,r.useSelector)((function(t){var n;return null===(n=t.participants[e])||void 0===n?void 0:n.stream}))}}},410133:(e,t,n)=>{"use strict";n.d(t,{useHistoryScreenBridgeActions:()=>a});var r=n(667294),a=function(e){return{onCreateCallClick:(0,r.useCallback)((function(t){e.showCreateCallByLinkPopup(t)}),[e]),onJoin:(0,r.useCallback)((function(t,n,r){void 0===n&&(n=0),e.showStartCallModal(n,t,r)}),[e])}}},150364:(e,t,n)=>{"use strict";n.d(t,{useHistoryScreenContextActions:()=>c});var r=n(667294),a=n(121255),o=n(374327),i=n(171659),l=n(745284),s=n(50533),c=function(e,t){var n=(0,s.useSelector)((function(e){return e})),c=n.joinLinks,u=n.profiles,d=(0,s.useDispatch)();return{onHistoryAction:(0,r.useCallback)((function(n,r,s,p){var f;void 0===p&&(p=0);var m=(0,i.getHistoryCallPeerId)(n);if(r===o.HistoryCallMenuActionsEnum.AUDIO||r===o.HistoryCallMenuActionsEnum.VIDEO){if(e.isInActiveCall)return;var _=r===o.HistoryCallMenuActionsEnum.VIDEO;if((0,l.isGroupCallByPeer)(m))if(m in c)e.joinCallByLink(c[m],void 0,_,a.CallStatSource.HISTORY,p);else{var g=(0,i.getHistoryItemOwner)(n,u).chat;(null==g?void 0:g.call_in_progress)&&(null===(f=null==g?void 0:g.call_in_progress)||void 0===f?void 0:f.join_link)?e.joinCallByLink(g.call_in_progress.join_link,void 0,_,a.CallStatSource.HISTORY,p):e.call(m,_,void 0,a.CallStatSource.HISTORY,p)}else e.call(m,_,void 0,a.CallStatSource.HISTORY,p)}else r===o.HistoryCallMenuActionsEnum.MESSAGE?t(m):d({type:a.HistoryScreenDispatchEvents.DELETE_CALL,data:s})}),[c,u,e])}}},164904:(e,t,n)=>{"use strict";n.d(t,{useHistoryScreenCurrentCallsLoadActions:()=>l});var r=n(570655),a=n(667294),o=n(256480),i=n(50533),l=function(){var e=(0,i.useSelector)((function(e){return e})),t=e.profiles,n=e.currentCalls,l=(0,i.useDispatch)(),s=(0,r.__read)((0,a.useState)(!0),2),c=s[0],u=s[1];(0,a.useEffect)((function(){(0,o.loadCurrentCalls)(l).then((function(e){(0,o.updateProfilesAndUrls)(l,[e])})).finally((function(){u(!1)}))}),[]);var d=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(!c)return null===d.current&&(d.current=setInterval((function(){(0,o.loadCurrentCalls)(l).then((function(e){(0,o.updateProfilesAndUrls)(l,[e])}))}),3e4)),function(){clearInterval(d.current)}}),[c]),{currentCallsBlockLoading:c,currentCalls:n,profiles:t}}},409364:(e,t,n)=>{"use strict";n.d(t,{useHistoryScreenLoadActions:()=>s});var r=n(570655),a=n(667294),o=n(256480),i=n(988121),l=n(50533),s=function(e){void 0===e&&(e="all");var t=(0,l.useSelector)((function(e){return e})).historyCalls,n=(0,l.useDispatch)(),s=(0,i.useHistoryScreenLoading)(),c=s.setLoading,u=s.loading,d=(0,r.__read)((0,a.useState)(!1),2),p=d[0],f=d[1],m=(0,r.__read)((0,a.useState)(0),2),_=m[0],g=m[1],h=(0,r.__read)((0,a.useState)(!1),2),v=h[0],A=h[1];(0,a.useEffect)((function(){c(!0),(0,o.loadHistoryCalls)(n,25,_,0,e).then((function(e){var t,n;return f(null!==(t=e.has_more)&&void 0!==t&&t),g(null!==(n=e.next_from)&&void 0!==n?n:0),e})).then((function(e){(0,o.updateProfilesAndUrls)(n,[e]).then((function(e){A(!e)}))})).finally((function(){c(!1)}))}),[]);var E=function(t,r,a,i){return void 0===a&&(a=[]),void 0===i&&(i=!1),(0,o.loadHistoryCalls)(n,25,t,r,e,a,i).then((function(e){var t,n;return f(null!==(t=e.has_more)&&void 0!==t&&t),g(null!==(n=e.next_from)&&void 0!==n?n:0),e})).then((function(e){return(0,o.updateProfilesAndUrls)(n,[e])}))};return{onShowMoreHistory:function(){return E(_,0,t)},loadHistory:E,loading:u,showMoreHistory:p,showLanding:v,setLoading:c}}},988121:(e,t,n)=>{"use strict";n.d(t,{useHistoryScreenLoading:()=>i});var r=n(667294),a=n(121255),o=n(50533),i=function(){var e=(0,o.useSelector)((function(e){return e})).loading,t=(0,o.useDispatch)();return{loading:e,setLoading:(0,r.useCallback)((function(e){t({type:a.HistoryScreenDispatchEvents.SET_LOADING,data:e})}),[])}}},410326:(e,t,n)=>{"use strict";n.d(t,{useHistoryScreenLocation:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,a.useMemo)((function(){return{urlSection:new URLSearchParams(e.search).get("section")||""}}),[e]).urlSection,n=(0,r.__read)((0,a.useState)(t),2);return{section:n[0],setSection:n[1]}}},190103:(e,t,n)=>{"use strict";n.d(t,{useIsMounted:()=>a});var r=n(667294),a=function(){var e=(0,r.useRef)(!0),t=(0,r.useCallback)((function(){return e.current}),[]);return(0,r.useEffect)((function(){return function(){e.current=!1}}),[]),t}},474803:(e,t,n)=>{"use strict";n.d(t,{usePriorities:()=>l});var r=n(570655),a=n(667294),o=n(757054),i=n(121255),l=function(e,t){var n=(0,r.__read)((0,a.useState)([0,0]),2),l=(0,r.__read)(n[0],2),s=l[0],c=l[1],u=n[1],d=(0,a.useRef)(new Map);(0,a.useEffect)((function(){var e=function(){return u([window.innerWidth,window.innerHeight])};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((function(){if(t.mode===i.Mode.CALL){var n=(0,o.getParticipantLayout)(t,s,c),r=(0,o.getParticipantsLayoutDiff)(d.current,n);r.length>0&&(d.current=n,e.updateDisplayLayout(r))}else d.current=new Map}),[s,c,t.participants,t.mode,t.uiMode,t.isOratorMode,t.orator,t.pinnedParticipant,t.adminPinnedParticipant,t.screenSharingPinnedParticipant,t.translation])}},637534:(e,t,n)=>{"use strict";n.d(t,{useSendStatsData:()=>c,ECallActionEventType:()=>s.CallActionEventType});var r=n(570655),a=n(667294),o=n(50533),i=n(745284),l=n(614914),s=n(765446),c=function(){var e=(0,o.useSelector)((function(e){return e.callData.callId})),t=(0,o.useSelector)((function(e){return e.peer})),n=(0,a.useMemo)((function(){return(0,i.isGroupCallByPeer)(t)}),[t]);return{sendStatsData:(0,a.useCallback)((function(a,o){void 0===o&&(o={}),l.callStats.logEvent((0,r.__assign)({call_event_type:a,session_id:e,peer_id:t,is_group_call:n},o))}),[e,t,n])}}},915622:(e,t,n)=>{"use strict";n.d(t,{useUserBackgrounds:()=>c});var r=n(570655),a=n(667294),o=n(50533),i=n(329538),l=n(121255),s=n(637534),c=function(e){var t=e.photos,n=e.onSuccessPhotoUpload,c=(0,o.useDispatch)(),d=(0,s.useSendStatsData)().sendStatsData,p=(0,a.useRef)([]),f=(0,r.__read)((0,a.useState)(!1),2),m=f[0],_=f[1];(0,a.useEffect)((function(){t.length||(0,i.photosGetAllImages)().then((function(e){c({type:l.VB_SET_USER_PHOTOS,photos:u(e.items)})}))}),[]);var g=(0,a.useCallback)((function(e){var n=t.find((function(t){return t.id===e}));n&&(p.current.push(n),c({type:l.VB_REMOVE_USER_PHOTO,photoId:e}))}),[t]),h=(0,a.useCallback)((function(){var e=p.current;return p.current=[],function(e,t){var n=e.map((function(e){return(0,i.photosDelete)({photo_id:e.id})}));return Promise.allSettled(n).then((function(n){n.forEach((function(n,r){"fulfilled"===n.status&&t(s.ECallActionEventType.CUSTOM_VIRTUAL_BACKGROUND_DELETED,{background_id:e[r].id})}))}))}(e,d)}),[d]),v=(0,a.useCallback)((function(){var e=p.current;p.current=[];var n=t.concat(e);c({type:l.VB_SET_USER_PHOTOS,photos:u(n)})}),[t]),A=(0,a.useCallback)((function(e){return _(!0),(0,i.photosSaveBackgroundPhoto)(e).then((function(e){var t=e[0];if(!t)throw new Error("Something wrong with uploaded photo");return c({type:l.VB_ADD_USER_PHOTO,photo:t}),n(t),d(s.ECallActionEventType.CUSTOM_VIRTUAL_BACKGROUND_ADDED,{background_id:t.id}),t})).finally((function(){_(!1)}))}),[n,d]);return{photos:t,onAddBackground:A,onDeleteBackground:g,onSaveSettings:h,onCancelSettings:v,loadingUpload:m}};function u(e){return e.sort((function(e,t){return e.date<t.date?1:-1}))}},551974:(e,t,n)=>{"use strict";n.d(t,{useUserMediaStream:()=>l});var r=n(570655),a=n(667294),o=n(190103),i=function(e){e.getTracks().forEach((function(e){return e.stop()}))},l=function(e){var t=(0,r.__read)((0,a.useState)(null),2),n=t[0],l=t[1],s=(0,r.__read)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(!1),p=(0,o.useIsMounted)(),f=(0,a.useCallback)((function(){d.current||(u(!1),d.current=!0,navigator.mediaDevices.getUserMedia(e).then((function(e){p()?l(e):i(e)})).catch((function(e){l(null),u(e)})).finally((function(){d.current=!1})))}),[e]);return(0,a.useEffect)((function(){f();var e=function(){f()};return navigator.mediaDevices.addEventListener("devicechange",e),function(){navigator.mediaDevices.removeEventListener("devicechange",e)}}),[f]),(0,a.useEffect)((function(){return function(){n&&i(n)}}),[n]),{userStream:n,error:c,updateUserMediaStream:f}}},32491:(e,t,n)=>{"use strict";n.d(t,{useVideoOptions:()=>c,EVideoOptionType:()=>i.EVideoOptionType});var r=n(570655),a=n(667294),o=n(50533),i=n(121255),l=n(223724),s=n(659397),c=function(){var e=(0,o.useSelector)((function(e){return e.virtualBackgroundSettings.videoOptions})),t=(0,o.useDispatch)(),n=(0,r.__read)((0,a.useState)(l.videoOptionsStorage.getOptions),2),c=n[0],u=n[1],d=(0,a.useCallback)((function(){u(l.videoOptionsStorage.getOptions())}),[]),p=(0,a.useCallback)((function(){l.videoOptionsStorage.saveOptions(c),t({type:i.VB_SET_VIDEO_OPTIONS,videoOptions:c})}),[c]),f=(0,a.useCallback)((function(e,t){u((function(n){var a;return(0,r.__assign)((0,r.__assign)({},n),((a={})[e]=t,a))}))}),[]);return(0,a.useEffect)((function(){(0,s.isEqual)(e,c)||t({type:i.VB_SET_VIDEO_OPTIONS,videoOptions:c})}),[]),{videoOptions:c,storedVideoOptions:e,setVideoOptions:u,onRestoreSettings:d,onSaveSettings:p,onChangeVideoOption:f}}},945873:(e,t,n)=>{"use strict";n.d(t,{AddImageIcon:()=>a});var r=n(667294),a=function(){return r.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 11V2C11 1.44772 11.4477 1 12 1C12.5523 1 13 1.44772 13 2V11H22C22.5523 11 23 11.4477 23 12C23 12.5523 22.5523 13 22 13H13V22C13 22.5523 12.5523 23 12 23C11.4477 23 11 22.5523 11 22V13H2C1.44772 13 1 12.5523 1 12C1 11.4477 1.44772 11 2 11H11Z",fill:"#8FADC8"}))}},865203:(e,t,n)=>{"use strict";n.d(t,{AngleIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.21967 2.96967C4.51256 2.67678 4.98744 2.67678 5.28033 2.96967L8.28033 5.96967C8.57322 6.26256 8.57322 6.73744 8.28033 7.03033L5.28033 10.0303C4.98744 10.3232 4.51256 10.3232 4.21967 10.0303C3.92678 9.73744 3.92678 9.26256 4.21967 8.96967L6.68934 6.5L4.21967 4.03033C3.92678 3.73744 3.92678 3.26256 4.21967 2.96967Z",fill:"white",fillOpacity:"0.64"}))}},594504:(e,t,n)=>{"use strict";n.d(t,{AnonymousIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"28",height:"28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#paint0_linear)"}),a.createElement("path",{d:"M6.746 14.391c-.165-1.078-.204-1.206-.493-1.614-.363-.513-.415-1.1.38-1.255 2.042-.397 4.252-.1 6.265.268a5.546 5.546 0 002.204 0c2.013-.368 4.223-.665 6.264-.268.796.154.744.742.38 1.255-.288.408-.327.536-.492 1.614-.248 1.617-1.607 2.275-3.29 2.276-1.85 0-2.465-1.055-3.04-2.494-.557-1.398-1.29-1.398-1.849 0-.574 1.439-1.19 2.494-3.038 2.494-1.684 0-3.043-.66-3.29-2.276z",fill:"#fff"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"paint0_linear",x1:"0",y1:"0",x2:"28.733",y2:".773",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#99A2AD"}),a.createElement("stop",{offset:"1",stopColor:"#99A2AD"}))))}},923522:(e,t,n)=>{"use strict";n.d(t,{CancelIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"20",height:"20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.72 4.72a.75.75 0 011.06 0L10 8.94l4.22-4.22a.75.75 0 111.06 1.06L11.06 10l4.22 4.22a.75.75 0 11-1.06 1.06L10 11.06l-4.22 4.22a.75.75 0 01-1.06-1.06L8.94 10 4.72 5.78a.75.75 0 010-1.06z",fill:"#99A2AD"}))}},968125:(e,t,n)=>{"use strict";n.d(t,{ChainIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.49 4.293a4.402 4.402 0 116.225 6.225l-1.072 1.072a.9.9 0 01-1.273-1.273l1.071-1.072a2.601 2.601 0 10-3.678-3.678l-3.537 3.537a2.601 2.601 0 000 3.678.9.9 0 01-1.274 1.273 4.402 4.402 0 010-6.225l3.537-3.537zm-.708 5.66a.9.9 0 011.273 0 4.402 4.402 0 010 6.225l-3.537 3.537a4.402 4.402 0 11-6.225-6.226l1.122-1.121a.9.9 0 111.273 1.273l-1.121 1.122a2.601 2.601 0 103.678 3.678l3.537-3.537a2.601 2.601 0 000-3.678.9.9 0 010-1.274z",fill:"#fff"}))}},261859:(e,t,n)=>{"use strict";n.d(t,{ChevronLeftIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"7",height:"10",viewBox:"0 0 7 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.20711 1.70711C6.59763 1.31658 6.59763 0.683418 6.20711 0.292893C5.81658 -0.0976311 5.18342 -0.0976311 4.79289 0.292893L0.792893 4.29289C0.402369 4.68342 0.402369 5.31658 0.792893 5.70711L4.79289 9.70711C5.18342 10.0976 5.81658 10.0976 6.20711 9.70711C6.59763 9.31658 6.59763 8.68342 6.20711 8.29289L2.91421 5L6.20711 1.70711Z",fill:"#99A2AD"}))}},308242:(e,t,n)=>{"use strict";n.d(t,{ChevronRightIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"7",height:"10",viewBox:"0 0 7 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.792893 1.70711C0.402369 1.31658 0.402369 0.683418 0.792893 0.292893C1.18342 -0.0976311 1.81658 -0.0976311 2.20711 0.292893L6.20711 4.29289C6.59763 4.68342 6.59763 5.31658 6.20711 5.70711L2.20711 9.70711C1.81658 10.0976 1.18342 10.0976 0.792893 9.70711C0.402369 9.31658 0.402369 8.68342 0.792893 8.29289L4.08579 5L0.792893 1.70711Z",fill:"#99A2AD"}))}},460851:(e,t,n)=>{"use strict";n.d(t,{CreateCallAnonymousIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#CreateCallAnonymousIconGradient)"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m9.52 10.906.503-2.328A2 2 0 0 1 11.978 7h4.044a2 2 0 0 1 1.955 1.578l.503 2.328a.916.916 0 0 1 .015.094H20a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h1.505a.902.902 0 0 1 .015-.094Zm3.447 7a2.5 2.5 0 1 1-.217-1.497 4.984 4.984 0 0 1 2.5 0 2.5 2.5 0 1 1-.217 1.498 3.488 3.488 0 0 0-2.066 0Z",fill:"#fff"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"CreateCallAnonymousIconGradient",x1:"0",y1:"0",x2:"28.733",y2:".773",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#99A2AD"}),a.createElement("stop",{offset:"1",stopColor:"#99A2AD"}))))}},797847:(e,t,n)=>{"use strict";n.d(t,{CreateCallIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("rect",{width:"28",height:"28",rx:"14",fill:"url(#CreateCallIconGradientA)"}),a.createElement("rect",{x:".25",y:".25",width:"27.5",height:"27.5",rx:"13.75",stroke:"#000",strokeOpacity:".08",strokeWidth:".5",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("rect",{width:"28",height:"28",rx:"14",fill:"url(#CreateCallIconGradientB)"}),a.createElement("rect",{x:".25",y:".25",width:"27.5",height:"27.5",rx:"13.75",stroke:"#000",strokeOpacity:".08",strokeWidth:".5"}),a.createElement("path",{d:"M9.622 9.405c-1.704 1.875-.794 4.775 1.708 7.288 2.449 2.46 5.48 3.38 7.274 1.71.981-.912.836-2.53-.376-3.61-1.096-.931-2.819-1.092-3.917-.062-.37-.311-.684-.679-1.023-1.023.949-.995.946-2.727-.032-3.896-1.1-1.313-2.767-1.36-3.634-.407Zm2.83 1.08c.617.738.7 1.914-.029 2.602-.367.33-.725.525.602 1.874 1.432 1.456 1.61.945 1.983.555.586-.589 1.733-.643 2.522.06.872.777.778 1.671.36 2.06-1.295 1.204-3.773.37-5.817-1.682-2.043-2.053-2.95-4.44-1.675-5.843.296-.326 1.224-.617 2.054.374ZM17.792 8.167c.29 0 .525.235.525.525v.991h.991a.525.525 0 1 1 0 1.05h-.991v.992a.525.525 0 0 1-1.05 0v-.992h-.992a.525.525 0 1 1 0-1.05h.992v-.991c0-.29.235-.525.525-.525Z",fill:"#fff"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"CreateCallIconGradientA",x1:"-14",y1:"14",x2:"14",y2:"42",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#FFB73D"}),a.createElement("stop",{offset:"1",stopColor:"#FFA000"})),a.createElement("linearGradient",{id:"CreateCallIconGradientB",x1:"-14",y1:"14",x2:"14",y2:"42",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#70B2FF"}),a.createElement("stop",{offset:"1",stopColor:"#5C9CE6"}))))}},625920:(e,t,n)=>{"use strict";n.d(t,{CreateCallUserIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#CreateCallUserIconGradient)"}),a.createElement("path",{d:"M17.25 10.25a3.25 3.25 0 1 0-6.5 0 3.25 3.25 0 1 0 6.5 0ZM7.5 18.462v.7c0 .463.375.838.838.838h11.325a.838.838 0 0 0 .837-.837v-.701C20.5 15.769 16.17 15 14 15s-6.5.77-6.5 3.462Z",fill:"#fff"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"CreateCallUserIconGradient",x1:"0",y1:"0",x2:"28.733",y2:".773",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#70B2FF"}),a.createElement("stop",{offset:"1",stopColor:"#5C9CE6"}))))}},599318:(e,t,n)=>{"use strict";n.d(t,{CreateCallWaitingHallIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#CreateCallWaitingHallIconGradient)"}),a.createElement("path",{d:"M13.85 6.85h1.072c1.529 0 2.095.127 2.657.428.493.263.88.65 1.143 1.143.3.562.428 1.129.428 2.657v5.842c0 1.528-.127 2.098-.428 2.66a2.74 2.74 0 0 1-1.143 1.14c-.562.3-1.128.43-2.657.43H13.85",stroke:"#fff",strokeWidth:"1.7",strokeLinecap:"round"}),a.createElement("path",{d:"M10.85 10.85 14 14l-3.15 3.15M6.85 14h6.6",stroke:"#fff",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"CreateCallWaitingHallIconGradient",x1:"0",y1:"0",x2:"28.733",y2:".773",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#50C750"}),a.createElement("stop",{offset:"1",stopColor:"#32B332"}))))}},827491:(e,t,n)=>{"use strict";n.d(t,{DeleteBackgroundIcon:()=>o});var r=n(570655),a=n(667294),o=(0,a.forwardRef)((function(e,t){var n=(0,r.__rest)(e,[]);return a.createElement("div",(0,r.__assign)({},n,{ref:t,style:{width:18,height:18}}),a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"18",height:"18",rx:"2",fill:"black",fillOpacity:"0.4"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.10202 5L5 6.10202L7.89798 9L5 11.898L6.10202 13L9 10.102L11.898 13L13 11.898L10.102 9L13 6.10202L11.898 5L9.10108 7.7969L9 7.89798L6.10202 5Z",fill:"white",fillOpacity:"0.72"})))}))},610781:(e,t,n)=>{"use strict";n.d(t,{DesktopAppIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"56",height:"56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M36.587 0C52.267 0 56 3.733 56 19.413v17.174C56 52.267 52.267 56 36.587 56H19.413C3.733 56 0 52.267 0 36.587V19.413C0 3.733 3.733 0 19.413 0h17.174Z",fill:"url(#a)"}),a.createElement("path",{d:"M55.75 42.571a32.585 32.585 0 0 1-11.884 2.23 32.514 32.514 0 0 1-17.04-4.791 1.491 1.491 0 0 0-1.384-.087c-3.084 1.37-6.552 2.091-10.434 2.403-1.071.086-1.793-1.048-1.333-2.02 1.533-3.243 2.537-6.178 3.148-9.098a1.402 1.402 0 0 0-.212-1.06 32.514 32.514 0 0 1-5.412-18.015c0-4.192.79-8.2 2.23-11.883C15.196.075 17.183 0 19.411 0h17.174c15.68 0 19.413 3.733 19.413 19.413v17.174c0 2.228-.075 4.215-.25 5.984Z",fill:"url(#b)"}),a.createElement("path",{d:"M43.867 49.467c3.768 0 7.411-.56 10.847-1.602.502-1.499.835-3.251 1.036-5.294A32.583 32.583 0 0 1 43.867 44.8a32.514 32.514 0 0 1-17.04-4.79 1.491 1.491 0 0 0-1.384-.088c-2.257 1.004-4.72 1.659-7.4 2.06l-.021.003c-.203.03-.406.06-.611.087-.783.104-1.583.188-2.402.254-1.072.086-1.793-1.048-1.334-2.02a50.648 50.648 0 0 0 1.16-2.643l.003-.006c.9-2.23 1.545-4.344 1.986-6.45a1.403 1.403 0 0 0-.212-1.06A32.515 32.515 0 0 1 11.2 12.134c0-4.192.79-8.2 2.229-11.883-2.043.201-3.795.534-5.294 1.036a37.33 37.33 0 0 0-1.602 10.847 37.18 37.18 0 0 0 5.427 19.394c-.54 2.118-1.34 4.322-2.504 6.785-1.847 3.908.944 9.065 5.926 8.665 3.642-.292 7.143-.93 10.424-2.163a37.185 37.185 0 0 0 18.06 4.653Z",fill:"#fff"}),a.createElement("path",{d:"M28.902 11.332c-.723-1.445-1.974-2.684-3.48-2.507a3.524 3.524 0 0 0-2.14 1.042c-1.554 1.554-1.803 4.285-.836 7.47.964 3.175 3.123 6.749 6.296 9.921 3.172 3.172 6.746 5.332 9.92 6.296 3.186.967 5.917.718 7.471-.836a3.525 3.525 0 0 0 1.042-2.14c.177-1.506-1.062-2.757-2.507-3.48l-1.621-.81a3.967 3.967 0 0 0-5.191 1.532.585.585 0 0 1-.829.192 32.7 32.7 0 0 1-4.963-4.076 32.696 32.696 0 0 1-4.076-4.963.585.585 0 0 1 .192-.829 3.967 3.967 0 0 0 1.533-5.19l-.81-1.622Z",fill:"#fff"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"a",x1:"0",y1:"0",x2:"56",y2:"56",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:".208",stopColor:"#2B72F6"}),a.createElement("stop",{offset:".599",stopColor:"#1657D0"}),a.createElement("stop",{offset:"1",stopColor:"#0040B8"})),a.createElement("linearGradient",{id:"b",x1:"15.635",y1:"0",x2:"55.999",y2:"40.364",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:".214",stopColor:"#8FC3FF"}),a.createElement("stop",{offset:".771",stopColor:"#3E92F2"}),a.createElement("stop",{offset:"1",stopColor:"#1E7EED"}))))}},701683:(e,t,n)=>{"use strict";n.d(t,{DisabledVideoIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"16",width:"22",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M1.514.242A.9.9 0 00.286 1.558l1.092 1.02C1.13 3.053 1 3.548 1 4.846v6.308c0 1.338.14 1.822.4 2.311.262.49.646.873 1.135 1.134.489.262.974.401 2.31.401h7.31c1.207 0 1.72-.114 2.168-.328l1.163 1.086a.9.9 0 001.228-1.316L1.514.242zM15.999 11.346L4.924 1h7.23c1.338 0 1.822.14 2.311.4.49.262.873.646 1.134 1.135.262.489.401.974.401 2.31 0 2.167.023 4.335-.001 6.501zM22 4.497v7.006c0 .815-.964 1.277-1.6.8l-2.2-1.653a.5.5 0 01-.2-.4v-4.5a.5.5 0 01.2-.4l2.2-1.652c.651-.49 1.6.003 1.6.8z"}))}},80125:(e,t,n)=>{"use strict";n.d(t,{DisabledVideoIconS:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"14",height:"12",fill:"currentColor"},t,{xmlns:"http://www.w3.org/2000/svg"}),a.createElement("path",{d:"M9.574 11.13a.751.751 0 001.061-1.06L1.48.92A.75.75 0 10.42 1.98l.82.82c-.153.282-.24.606-.24.95v4.5a2 2 0 002 2h5a2 2 0 00.601-.092l.973.972zM13.897 3.664A.454.454 0 0114 3.95v4.075c0 .415-.392.602-.825.382-.475-.24-1.572-.789-1.572-.789a.233.233 0 01-.103-.19v-2.88c0-.075.038-.146.103-.19 0 0 1.378-.694 1.572-.79.193-.094.55-.115.722.096zM10 7.425V3.75a2 2 0 00-2-2H4.32L10 7.425z"}))}},815155:(e,t,n)=>{"use strict";n.d(t,{EndCallIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"24",height:"24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M4.3 4.3a1 1 0 011.4 0l6.3 6.29 6.3-6.3a1 1 0 111.4 1.42L13.42 12l6.3 6.3a1 1 0 01-1.42 1.4L12 13.42l-6.3 6.3a1 1 0 01-1.4-1.42L10.58 12l-6.3-6.3a1 1 0 010-1.4z"}))}},172397:(e,t,n)=>{"use strict";n.d(t,{FullScreenIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M6.5 15a1 1 0 01-1 1H1a1 1 0 01-1-1v-4.5a1 1 0 012 0v2.071l3.363-3.364a1 1 0 011.414 0l.016.016a1 1 0 010 1.414L3.428 14H5.5a1 1 0 011 1zM14 3.428l-3.363 3.365a1 1 0 01-1.414 0l-.016-.016a1 1 0 010-1.414L12.571 2H10.5a1 1 0 010-2H15a1 1 0 011 1v4.5a1 1 0 01-2 0z"}))}},167903:(e,t,n)=>{"use strict";n.d(t,{FullScreenOffIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M6.1 9a.9.9 0 01.9.9v4.2a.9.9 0 11-1.8 0v-2.027l-3.664 3.663a.9.9 0 11-1.272-1.272L3.927 10.8H1.9a.9.9 0 110-1.8zM15.736.264a.9.9 0 010 1.272L12.073 5.2h2.025a.9.9 0 010 1.8H9.9a.9.9 0 01-.9-.9V1.9a.9.9 0 111.8 0v2.027L14.464.264a.9.9 0 011.272 0z"}))}},801513:(e,t,n)=>{"use strict";n.d(t,{LiveIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"28px",height:"10px",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 28 10"},t),a.createElement("path",{fill:"#F2F3F5",fillRule:"evenodd",d:"M1 0a1 1 0 00-1 1v8a1 1 0 001 1h4a1 1 0 100-2H2V1a1 1 0 00-1-1zm7 1a1 1 0 112 0v8a1 1 0 11-2 0V1zm15-1a1 1 0 00-1 1v8a1 1 0 001 1h4a1 1 0 100-2h-3V6h3a1 1 0 100-2h-3V2h3a1 1 0 100-2h-4zm-8.325 9.31l-2.55-7.824a.993.993 0 01-.117-.363L12 1.1h.005A1 1 0 1113.995.9L14 .9l2 6.4 2-6.4h.005a1 1 0 011.99.2H20l-.008.023a.993.993 0 01-.118.363l-2.55 7.824a1 1 0 01-.95.69h-.748a1 1 0 01-.95-.69z",clipRule:"evenodd"}))}},818114:(e,t,n)=>{"use strict";n.d(t,{MicIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"20",width:"16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M8 0a4 4 0 00-4 4v5a4 4 0 008 0V4a4 4 0 00-4-4z"}),a.createElement("path",{d:"M1.1 10c-.551 0-.982.486-.843 1.02A8.007 8.007 0 007.1 16.95v2.15a.9.9 0 101.8 0v-2.15a8.007 8.007 0 006.843-5.93c.139-.534-.292-1.02-.843-1.02-.45 0-.826.329-.953.76a6.203 6.203 0 01-11.894 0C1.926 10.33 1.55 10 1.1 10z"}))}},830810:(e,t,n)=>{"use strict";n.d(t,{MoreIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"12",height:"20",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M4 3a2 2 0 104 0 2 2 0 00-4 0zm0 7a2 2 0 104 0 2 2 0 00-4 0zm2 9a2 2 0 110-4 2 2 0 010 4z",fill:"currentColor"}))}},747212:(e,t,n)=>{"use strict";n.d(t,{MutedMicIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"20",width:"16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M1.721 2.307L4 4.586v-.002l7.029 7.029 4.693 4.695a1 1 0 01-1.414 1.414l-1.938-1.937A8.482 8.482 0 019 16.941V19a1 1 0 01-1.993.117L7.001 19v-2.06c-3.234-.384-5.995-2.611-6.955-5.646a.995.995 0 01.681-1.25 1.035 1.035 0 011.287.662C2.808 13.216 5.257 15 7.999 15c1.03 0 2.016-.25 2.89-.695l-1.538-1.539A4 4 0 014 9V7.414L.307 3.721a1 1 0 011.414-1.414zm13.55 7.737c.544.162.85.72.684 1.249a7.825 7.825 0 01-.75 1.666l-1.51-1.51c.113-.239.21-.487.29-.742a1.035 1.035 0 011.287-.663zM8 0a4 4 0 014 4v5c0 .237-.02.468-.06.694L4.433 2.188A4 4 0 018 0z"}))}},942775:(e,t,n)=>{"use strict";n.d(t,{MutedMicIconS:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"13",width:"12",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 13",fill:"currentColor"},t),a.createElement("path",{d:"M3.497 5.06v.44a2.501 2.501 0 002.91 2.467l1.199 1.198a4.005 4.005 0 01-5.521-2.822.75.75 0 00-1.469.314A5.508 5.508 0 005.25 10.95v1.301a.75.75 0 001.501 0v-1.3a5.472 5.472 0 001.973-.669l1.25 1.25a.751.751 0 001.062-1.061L1.88 1.32A.75.75 0 10.82 2.38l2.677 2.68zM9.672 7.097l1.117 1.117a5.463 5.463 0 00.594-1.557.75.75 0 10-1.468-.314 3.963 3.963 0 01-.243.754zM3.827 1.258l4.644 4.64c.02-.13.031-.263.031-.398v-3a2.502 2.502 0 00-4.675-1.242z"}))}},494549:(e,t,n)=>{"use strict";n.d(t,{ParticipantsIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M17 12.5c2.294 0 6.5.857 6.5 4.286 0 1.5-.382 1.714-1.147 1.714h-6.09c.158-.488.237-1.062.237-1.714 0-1.723-.631-3.067-1.672-4.062.783-.16 1.548-.224 2.172-.224zm-9 0c2.294 0 6.5.857 6.5 4.286 0 1.5-.382 1.714-1.147 1.714H2.647c-.765 0-1.147-.214-1.147-1.714C1.5 13.357 5.706 12.5 8 12.5zM8 5a3 3 0 110 6 3 3 0 110-6zm9 0a3 3 0 110 6 3 3 0 110-6z"}))}},995420:(e,t,n)=>{"use strict";n.d(t,{PhoneIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"18",width:"18",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M11.112 12.259c1.354-1.354 3.486-1.48 4.903-.287l1.025.863c1.168.983 1.287 2.757.263 3.96a3.318 3.318 0 01-2.195 1.133c-3.273.44-6.707-1.137-10.303-4.733C1.21 9.6-.369 6.165.072 2.892a3.25 3.25 0 01.159-.752c.19-.56.527-1.058.974-1.443C2.41-.327 4.181-.21 5.165.96l.862 1.024c1.194 1.416 1.07 3.55-.284 4.903l-.736.735a.712.712 0 00-.164.748c.267.732.95 1.645 2.046 2.74 1.096 1.097 2.01 1.78 2.74 2.048.26.095.553.03.749-.166z"}))}},780573:(e,t,n)=>{"use strict";n.d(t,{PhoneIconS:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"16",height:"16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M9.3 9.99c.93-.93 2.32-.75 3.63.35.94.79.82 2.85-1.18 3.12s-4.11-.7-6.32-2.9c-2.2-2.2-3.1-4.1-2.9-6.3a1.8 1.8 0 013.12-1.18c1.06 1.25 1.38 2.6.36 3.62-.48.48-.67.6-.56.91.41 1.1 2.19 2.65 2.94 2.93.35.13.46-.1.9-.55z"}))}},711034:(e,t,n)=>{"use strict";n.d(t,{PinDotIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"25",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M10 8a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"}),a.createElement("path",{d:"M6.558 10a.024.024 0 00-.017.04l3.254 3.255-2.947 2.948a1 1 0 001.414 1.414l2.948-2.948 3.25 3.25c.015.015.04.005.04-.017v-2.114c0-1.81.72-3.547 2-4.828l1.658-.414a.2.2 0 00.093-.336l-4-4a.2.2 0 00-.336.093L13.5 8a6.828 6.828 0 01-4.829 2H6.558z"}))}},748972:(e,t,n)=>{"use strict";n.d(t,{RaiseHandIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M6 5.18c.65 0 1 .54 1 1.2v5.48c0 .22.26.4.47.4.23 0 .52-.18.52-.4V4c0-.66.33-1.2.99-1.2.65 0 1.02.54 1.02 1.2v7.08c0 .22.29.4.5.4.22 0 .5-.18.5-.4V3.19c0-.66.31-1.2.97-1.2.66 0 1.04.54 1.04 1.2v7.88c0 .22.24.4.46.4.22 0 .52-.18.52-.4V4.79c0-.67.32-1.18.98-1.18.66 0 1.02.51 1.02 1.17v10.73l2.29-2.67c.33-.45 1-.68 1.65-.26.34.2.86.81.2 1.68 0 0-2.45 3.09-3.81 4.74-1.3 1.65-3.81 2.5-5.51 2.5C5.25 21.5 5 17.71 5 16.43V6.37c0-.65.33-1.19 1-1.19z"}))}},595285:(e,t,n)=>{"use strict";n.d(t,{RaisedHandContourIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 24"},t),a.createElement("path",{d:"M21.442 10.058c.513.77.588 1.831.192 2.663l-2.679 5.625C17.435 21.538 13.54 24 9.998 24H9c-4.422 0-8-3.58-8-8.009V8.128a2.746 2.746 0 013.5-2.642v-.732a2.75 2.75 0 013.571-2.629A2.749 2.749 0 0110.75 0c1.47 0 2.67 1.15 2.746 2.604A2.748 2.748 0 0117 5.254v4.264c1.299-1.278 3.357-1.087 4.442.54zM3.75 7.383a.746.746 0 00-.75.745v7.863A5.998 5.998 0 009 22h.998c2.773 0 5.964-2.02 7.152-4.514l2.678-5.625a.787.787 0 00-.05-.694c-.428-.642-1.123-.65-1.55-.01l-2.177 3.267c-.576.864-1.051.726-1.051-.323V5.255a.748.748 0 00-.75-.755.746.746 0 00-.75.747v5.757c0 .55-.448.996-1 .996-.556 0-1-.446-1-.995V2.752a.75.75 0 10-1.5 0v8.253c0 .54-.448.995-1 .995-.556 0-1-.446-1-.997v-6.25A.756.756 0 007.25 4a.75.75 0 00-.75.754v6.738c0 .551-.448 1.008-1 1.008-.556 0-1-.447-1-.999V8.138a.751.751 0 00-.75-.755z"}))}},135063:(e,t,n)=>{"use strict";n.d(t,{RaisedHandIconS:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"15",height:"15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M2.75 3a.75.75 0 01.75.75V7.5a.5.5 0 001 0V2A.75.75 0 016 2v4.75a.5.5 0 001 0v-5.5a.75.75 0 011.5 0v5.5a.5.5 0 001 0V2.5a.75.75 0 011.5 0v7.25l1.614-1.796a.9.9 0 011.36 1.177c-.73.873-2.044 2.449-2.809 3.367C9.913 14 8.08 14.5 6.701 14.5 2.2 14.5 2 11.47 2 10.444V3.75A.75.75 0 012.75 3z"}))}},796726:(e,t,n)=>{"use strict";n.d(t,{RaisedHandIconXs:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"10px",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 10 11"},t),a.createElement("path",{fill:"#F5F5F5",d:"M.5 2.5A.5.5 0 011 3v2.5a.5.5 0 001 0v-4a.5.5 0 011 0V5a.5.5 0 001 0V1a.5.5 0 011 0v4.063a.5.5 0 001 0V1.938a.5.5 0 011 0V7.5l-.28-.032L8.494 5.57a.67.67 0 01.995.9 232.32 232.32 0 00-2.615 3.029C5.935 10.624 4.56 11 3.526 11 .15 11 0 8.727 0 7.958V3a.5.5 0 01.5-.5z"}))}},44781:(e,t,n)=>{"use strict";n.d(t,{RejectIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"14",width:"14",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M13.3.7a.99.99 0 00-1.4 0L7 5.6 2.1.7A.99.99 0 00.7 2.1L5.6 7 .7 11.9a.99.99 0 001.4 1.4L7 8.4l4.9 4.9a.99.99 0 001.4-1.4L8.4 7l4.9-4.9a.99.99 0 000-1.4z"}))}},462480:(e,t,n)=>{"use strict";n.d(t,{ShareIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"20",height:"20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M9.978 3.423a1.792 1.792 0 00-1.645 1.785v1.765l-.1.021a8.254 8.254 0 00-6.44 8.917.75.75 0 001.343.379l.175-.22a7.577 7.577 0 015.022-2.721v2.08a1.792 1.792 0 002.897 1.41l6.52-5.11a1.792 1.792 0 000-2.82l-6.52-5.11a1.791 1.791 0 00-1.105-.382l-.147.006zm.147 1.494c.065 0 .129.021.18.062l6.52 5.11a.292.292 0 010 .459l-6.52 5.11a.292.292 0 01-.472-.23v-2.873a.75.75 0 00-.767-.75l-.215.005-.305.016a9.065 9.065 0 00-5.162 2.056l-.037.032.004-.027a6.752 6.752 0 015.823-5.533.75.75 0 00.659-.744V5.208c0-.16.13-.291.292-.291z",fill:"#99A2AD"}))}},122317:(e,t,n)=>{"use strict";n.d(t,{ShareScreenBigIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"56",height:"56",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M28.5 37.5A1.5 1.5 0 0030 36V22.622l4.94 4.939a1.5 1.5 0 002.007.103l.114-.103a1.5 1.5 0 000-2.122l-7.5-7.5a1.5 1.5 0 00-2.122 0l-7.5 7.5a1.5 1.5 0 002.122 2.122l4.938-4.939L27 36a1.5 1.5 0 001.355 1.493l.145.007z"}),a.createElement("path",{d:"M19.883 8c-5.019 0-7.117.465-9.244 1.603a10.924 10.924 0 00-4.536 4.536C4.965 16.266 4.5 18.364 4.5 23.383v9.234c0 5.019.465 7.117 1.603 9.244a10.924 10.924 0 004.536 4.536C12.766 47.535 14.864 48 19.883 48h17.234c5.019 0 7.117-.465 9.244-1.603a10.924 10.924 0 004.536-4.536c1.138-2.127 1.603-4.225 1.603-9.244v-9.234c0-5.019-.465-7.117-1.603-9.244a10.924 10.924 0 00-4.536-4.536C44.234 8.465 42.136 8 37.117 8H19.883zm-7.83 4.248c1.486-.794 3-1.248 7.83-1.248h17.234c4.83 0 6.344.454 7.83 1.248a7.925 7.925 0 013.305 3.306c.794 1.485 1.248 3 1.248 7.83v9.233c0 4.83-.454 6.344-1.248 7.83a7.925 7.925 0 01-3.306 3.305c-1.485.794-3 1.248-7.83 1.248H19.884c-4.83 0-6.344-.454-7.83-1.248a7.925 7.925 0 01-3.305-3.306c-.794-1.485-1.248-3-1.248-7.83v-9.233c0-4.83.454-6.344 1.248-7.83a7.925 7.925 0 013.306-3.305z"}))}},156482:(e,t,n)=>{"use strict";n.d(t,{ShareScreenIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"24",height:"24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M20.465 4.4c-.489-.26-.974-.4-2.31-.4H5.844c-1.336 0-1.821.14-2.31.4A2.726 2.726 0 002.4 5.536C2.139 6.024 2 6.509 2 7.845v8.31c0 1.336.14 1.821.4 2.31.262.49.646.873 1.135 1.134.489.262.974.401 2.31.401h12.31c1.336 0 1.821-.14 2.31-.4a2.726 2.726 0 001.134-1.135c.262-.489.401-.974.401-2.31v-8.31c0-1.336-.14-1.821-.4-2.31A2.726 2.726 0 0020.464 4.4zm-11.81 5.728l2.97-2.978c.207-.2.543-.2.75 0l2.97 2.978c.33.318.077.872-.376.872H13v4.979c0 .564-.442 1.021-1 1.021s-1-.457-1-1.021V11H9.031c-.44 0-.715-.545-.375-.872z"}))}},254060:(e,t,n)=>{"use strict";n.d(t,{StarFilled:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"28",width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M14 21.5l-4.6 2.9A2.2 2.2 0 016 22l1.2-5.3L3.2 13a2.2 2.2 0 011.2-3.8l5.5-.5 2-5a2.2 2.2 0 014.1 0l2.1 5 5.5.5a2.2 2.2 0 011.2 3.8l-4.1 3.6 1.2 5.3a2.2 2.2 0 01-3.3 2.4L14 21.5z"}))}},995811:(e,t,n)=>{"use strict";n.d(t,{StarIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"10",height:"10",viewBox:"0 0 10 10",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M6.80486 3.06621L9.19457 3.30079C10.0261 3.38241 10.2811 4.21346 9.63901 4.75944L7.76813 6.35033L8.46267 8.94201C8.69075 9.79313 7.98312 10.3084 7.27435 9.79614L5.0011 8.15325L2.72785 9.79614C2.02194 10.3063 1.31141 9.79324 1.53953 8.94201L2.23406 6.35033L0.363183 4.75944C-0.281598 4.21116 -0.0275869 3.38278 0.807493 3.30079L3.19677 3.06621L4.24943 0.583062C4.57908 -0.194562 5.42332 -0.194173 5.75269 0.583142L6.80486 3.06621Z"}))}},950890:(e,t,n)=>{"use strict";n.d(t,{StarOutline:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"28",width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M14 19.2l5.7 3.5a.2.2 0 00.3-.3L18.4 16l5.1-4.3a.2.2 0 00-.1-.4l-6.7-.5-2.5-6.1a.2.2 0 00-.4 0l-2.5 6.1-6.7.5a.2.2 0 00-.1.4l5 4.3L8 22.4a.2.2 0 00.3.3zm0 2.3l-4.6 2.9A2.2 2.2 0 016 22l1.2-5.3L3.2 13a2.2 2.2 0 011.2-3.8l5.5-.5 2-5a2.2 2.2 0 014.1 0l2.1 5 5.5.5a2.2 2.2 0 011.2 3.8l-4.1 3.6 1.2 5.3a2.2 2.2 0 01-3.3 2.4z"}))}},607910:(e,t,n)=>{"use strict";n.d(t,{TranslationStatusChevronIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"4",viewBox:"0 0 10 5",fill:"currentColor","aria-hidden":"true"},t),a.createElement("path",{d:"M5 4.8c-.2 0-.3 0-.4-.1l-4.3-3.2c-.3-.3-.4-.8-.2-1.1.2-.3.7-.4 1-.2l3.9 2.9 3.8-2.9c.3-.3.8-.2 1 .1.3.3.2.8-.1 1.1l-4.2 3.2c-.2.1-.3.2-.5.2z"}))}},826988:(e,t,n)=>{"use strict";n.d(t,{VideoIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({height:"14",width:"21",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),a.createElement("path",{d:"M11.154 0c1.337 0 1.822.14 2.311.4.49.262.873.646 1.134 1.135.262.489.401.974.401 2.31v6.31c0 1.336-.14 1.821-.4 2.31a2.726 2.726 0 01-1.135 1.134c-.489.262-.974.401-2.31.401h-7.31c-1.336 0-1.821-.14-2.31-.4A2.726 2.726 0 01.4 12.464C.139 11.976 0 11.491 0 10.155v-6.31c0-1.336.14-1.821.4-2.31A2.726 2.726 0 011.536.4C2.024.139 2.509 0 3.845 0zM20.8 2.897a1 1 0 01.2.6v7.006a1 1 0 01-1.6.8L17.2 9.65a.5.5 0 01-.2-.4v-4.5a.5.5 0 01.2-.4l2.2-1.652a1 1 0 011.4.199z"}))}},168634:(e,t,n)=>{"use strict";n.d(t,{VideoIconS:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"16",height:"16",fill:"currentColor"},t,{xmlns:"http://www.w3.org/2000/svg"}),a.createElement("path",{d:"M3.14 3C1.96 3 1 3.96 1 5.14v5.72C1 12.04 1.96 13 3.14 13h5.72c1.18 0 2.14-.96 2.14-2.14V5.14C11 3.96 10.04 3 8.86 3H3.14zM14.95 4.87c.23-.17.55 0 .55.28v5.7c0 .28-.32.45-.55.28L12 9.01V6.99l2.95-2.12z"}))}},30933:(e,t,n)=>{"use strict";n.d(t,{ViewersCountIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"16",height:"10",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 0C4.546 0 1.596 2.073.4 5c1.196 2.927 4.146 5 7.6 5 3.455 0 6.405-2.073 7.6-5-1.195-2.927-4.145-5-7.6-5zm3.5 5a3.5 3.5 0 11-7 0 3.5 3.5 0 017 0zM8 7a2 2 0 100-4 2 2 0 000 4z",fill:"#F5F5F5"}))}},294757:(e,t,n)=>{"use strict";n.d(t,{init:()=>I});var r=n(570655),a=n(667294),o=n(973935),i=n(659397),l=n(262891),s=n(656504),c=n(641196),u=n(89085),d=n(253312),p=n(464380),f=n(662208),m=n(498110),_=n(170794),g=n(614914),h=n(699637),v=n(14890),A=n(989189),E=n(815615),C=n(50533),y=n(121255),S=n(613335),w=n(307915),b=n(567354),T=n(908484);n(329538);function I(e){var t=e.actionStatCollector,n=e.saveStatlogEvents,I=e.langUtils,N=e.navigateToConvo,P=e.navigateToProfile,D=e.apiWrapperWithAuth,M=e.apiWrapper,L=e.callSounds,O=e.config,R=void 0===O?{isModalView:!0,withAnimation:!0,allowAddMembers:!1,debugLog:!1,streaming:!0,streamingPrivacy:!0,fullHD:!1,anonymPhoto:!0,incomingCall:!1,allowBanParticipant:!1,showFeedbackScreen:!1,enableVideoSlots:!1,videoSlotsCount:y.VIDEO_SLOTS_COUNT,allowCallByName:!1,nativeApp:!1,nativeAppJoin:!1,enableScreenTrack:!1,enableProducerScreenTrack:!1,allowWaitingHall:!1,allowPushToTalk:!1,badNetwork:!1,badNetworkP2P:!1,desktopAppNotification:!1,sferum:!1,enableVirtualBackground:!1}:O,x=e.eventHandlers,B=e.streamUrlExtractor;return(0,c.setApiWrappers)(D,M),{initialized:!1,initializing:!1,eventHandlers:null!=x?x:{},init:function(e){var s,c=this,w=e.callPreview,b=e.callsCredentials,T=e.imHash,D=e.participantLimit,M=e.callsOkStaging,O=e.tabIsMaster,H=e.onBeforeCallStart,U=e.onAfterCallFinish,F=e.onError,G=e.toggles,V=void 0===G?{}:G,W=e.friends,z=e.isFriend,j=e.getFriends,Y=e.pushToTalkEnabled;if(!(null==b?void 0:b.me))return console.log("Calls were not initialized as there are no callsCredentials.me"),!1;this.initialized=!0,this.isFriend=z,this.getFriends=j;var K=(0,r.__assign)((0,r.__assign)({},R),V);if(!p.browser.isBrowserSupported()){var Q=function(){var e=I.getLang("calls_unsupported_browser_error");return F&&F({msg:e}),(null==x?void 0:x.onError)&&x.onError(new Error(e)),console.error(e),Promise.resolve()};return this.call=Q,this.startGroupCall=Q,this.startCall=Q,this.acceptCall=Q,this.joinCallByLink=Q,this.showJoinPopup=Q,this.showCallByNamePopup=Q,void(this.showCreateCallByLinkPopup=Q)}this.id=window.vk&&window.vk.id||b.me.peerId;var q=O||function(){return!0},J=null!==(s=i.localStorage.getItem(y.VIDEO_RESOLUTION_STORAGE_KEY))&&void 0!==s?s:y.VideoResolutionTypes.SD,X=(0,v.createStore)(E.callsReducer,(0,A.getInitialState)(b.me,T,w,{participantLimit:D,isDev:!!b.is_dev,token:b.secret,config:K,localVideoResolution:K.fullHD?J:J===y.VideoResolutionTypes.HD?y.VideoResolutionTypes.HD:y.VideoResolutionTypes.SD,friends:W||[],friendsCache:(0,S.createFriendsCache)(W||[]),ipSettingEnabled:b.ip_setting_enabled,privacySettings:b.privacySettings,pushToTalkEnabled:Y}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());return this.collapseCall=function(){X.dispatch({type:y.MANAGEMENT,isOpen:!1}),X.dispatch({type:y.CHANGE_UI_MODE,mode:y.UIMode.COLLAPSED})},this.restoreCall=function(){X.dispatch({type:y.CHANGE_UI_MODE,mode:y.UIMode.DEFAULT})},this.showStartCallModal=function(e,t,n){c.isInActiveCall||X.dispatch({type:y.CHANGE_MODE,mode:y.Mode.START,peerId:e,joinLink:t,entryPoint:n})},n&&(0,_.setStatlogEventsHandler)(n),t&&g.callStats.setActionStatCollector(t),o.render(a.createElement(C.Provider,{store:X},a.createElement(f.LangContext.Provider,{value:I},a.createElement(m.ConfigContext.Provider,{value:K},a.createElement(h.WaitingContainer,null)))),k("calls")),this.initializing=(0,d.sdkService)(this,p,b,X,I.getLang,M).finally((function(){(0,u.longpollService)(c,p,I.getLang,X);var e=k("calls");o.unmountComponentAtNode(e),o.render(a.createElement(C.Provider,{store:X},a.createElement(f.LangContext.Provider,{value:I},a.createElement(m.ConfigContext.Provider,{value:K},a.createElement(l.App,{bridge:c,SDK:p,tabIsMaster:q,onBeforeCallStart:H,onAfterCallFinish:U,callSounds:L,navigateToConvo:N,onHandCountChanged:null==x?void 0:x.onHandCountChanged,onSuccessFeedback:null==x?void 0:x.onSuccessFeedback,navigateToProfile:P,okPublicKey:b.key,config:K,streamUrlExtractor:B})))),e)})),this.initializing.catch((function(e){if(null==x?void 0:x.onError){var t=e?e.message||e.msg:"sdk did not send the reasons for the error",n=e?e.error:"";[401].includes(n)||x.onError(new Error("Could not init calls. "+t+": "+n))}console.error("Could not init calls",e.error,e)}))},showJoinScreen:function(e,i,l,c,u){var d=(0,w.createInvokeErrorWrapper)(c,x);if(!p.browser.isBrowserSupported())return d(I.getLang("calls_unsupported_browser_error"));(0,_.setStatlogEventsHandler)(n),g.callStats.setActionStatCollector(t);var h=e.callsAllowCallByName,v=e.callsAllowWaitingHall,A=document.querySelector(i),E=(0,r.__assign)((0,r.__assign)({},R),{allowCallByName:h,allowWaitingHall:v});o.render(a.createElement(f.LangContext.Provider,{value:I},a.createElement(m.ConfigContext.Provider,{value:E},a.createElement(s.JoinScreenContainer,(0,r.__assign)({},e,{withPopup:!1,bridge:this,entryPoint:l,onError:d,okPublicKey:u})))),A)},showHistoryScreen:function(e,t,r){var i,l;void 0===t&&(t={}),void 0===r&&(r=!0);var s=(0,w.createInvokeErrorWrapper)(void 0,x);if(!p.browser.isBrowserSupported())return s(I.getLang("calls_unsupported_browser_error"));(0,_.setStatlogEventsHandler)(n);var c=(0,v.createStore)(b.historyScreenReducer,(0,A.getHistoryScreenInitialState)(t)),u=document.querySelector(e);if(o.render(a.createElement(C.Provider,{store:c},a.createElement(f.LangContext.Provider,{value:I},a.createElement(m.ConfigContext.Provider,{value:R},a.createElement(T.default,{SDK:p,bridge:this,navigateToConvo:N})))),u),r){var d=document.querySelector("#l_ca");d&&d.classList.contains("AppLeftMenuWithNotify")&&d.classList.remove("AppLeftMenuWithNotify"),d&&d.classList.contains("AppLeftMenuWithNotifyBlueDot")&&d.classList.remove("AppLeftMenuWithNotifyBlueDot")}null===(l=null===(i=window.cur)||void 0===i?void 0:i.destroy)||void 0===l||l.push((function(){u&&o.unmountComponentAtNode(u)}))},debug:!1,setDebug:function(e){this.debug=e,p.debug(e)}}}function k(e){var t=document.getElementById(e);if(t)return t;var n=document.createElement("section");return n.setAttribute("id",e),document.body.appendChild(n),n}},169610:(e,t,n)=>{"use strict";n.d(t,{checkPermissions:()=>a});var r=n(464380);function a(e,t){var n=e.browser.hasMicrophonePermission(),a=e.browser.hasCameraPermission(),o=t.includes(r.MediaOption.AUDIO)&&!n,i=t.includes(r.MediaOption.VIDEO)&&!a;return(o||i)&&function(e,t,n){e.browser.getUserMedia(t,n).then((function(e){e.getTracks().forEach((function(e){return e.stop()}))}))}(e,i,o),Promise.resolve()}},567354:(e,t,n)=>{"use strict";n.d(t,{historyScreenReducer:()=>o});var r=n(570655),a=n(121255);function o(e,t){switch(t.type){case a.HistoryScreenDispatchEvents.DELETE_CALL:return(0,r.__assign)((0,r.__assign)({},e),{deleteCallId:t.data});case a.HistoryScreenDispatchEvents.SET_CURRENT_CALLS:return(0,r.__assign)((0,r.__assign)({},e),{currentCalls:t.data});case a.HistoryScreenDispatchEvents.SET_HISTORY_CALLS:return(0,r.__assign)((0,r.__assign)({},e),{historyCalls:t.data});case a.HistoryScreenDispatchEvents.SET_PROFILES:return(0,r.__assign)((0,r.__assign)({},e),{profiles:(0,r.__assign)((0,r.__assign)({},e.profiles),t.data)});case a.HistoryScreenDispatchEvents.SET_URLS:return(0,r.__assign)((0,r.__assign)({},e),{joinLinks:(0,r.__assign)((0,r.__assign)({},e.joinLinks),t.data)});case a.HistoryScreenDispatchEvents.ERROR:return(0,r.__assign)((0,r.__assign)({},e),{error:t.data});case a.HistoryScreenDispatchEvents.SET_LOADING:return(0,r.__assign)((0,r.__assign)({},e),{loading:t.data});case a.HistoryScreenDispatchEvents.SET_SHOW_CREATE_BUTTON:return(0,r.__assign)((0,r.__assign)({},e),{showCreateCall:t.data})}return e}},989189:(e,t,n)=>{"use strict";n.d(t,{getInitialState:()=>l,getHistoryScreenInitialState:()=>s});var r=n(570655),a=n(121255),o=n(464380),i=n(745284),l=function(e,t,n,l){var s,c=l.participantLimit,u=void 0===c?128:c,d=l.isDev,p=void 0!==d&&d,f=l.token,m=l.config,_=void 0===m?{isModalView:!0,withAnimation:!0,allowAddMembers:!1,debugLog:!1,incomingCall:!1,streaming:!0,streamingPrivacy:!0,fullHD:!1,anonymPhoto:!0,allowBanParticipant:!1,showFeedbackScreen:!1,enableVideoSlots:!1,videoSlotsCount:a.VIDEO_SLOTS_COUNT,allowCallByName:!1,nativeApp:!1,nativeAppJoin:!1,enableScreenTrack:!1,enableProducerScreenTrack:!1,allowWaitingHall:!1,allowPushToTalk:!1,badNetwork:!1,badNetworkP2P:!1,desktopAppNotification:!1,sferum:!1,enableVirtualBackground:!1}:m,g=l.localVideoResolution,h=void 0===g?a.VideoResolutionTypes.SD:g,v=l.friends,A=void 0===v?[]:v,E=l.friendsCache,C=l.privacySettings,y=l.ipSettingEnabled,S=l.pushToTalkEnabled,w=void 0!==S&&S,b=window.vk&&window.vk.id||e.peerId;return{anonymSecret:f,me:b,groupId:0,mode:a.Mode.READY,peer:0,participants:(s={},s[b]=(0,r.__assign)((0,r.__assign)({},e),{mediaSettings:{isAudioEnabled:!0,isVideoEnabled:!1,isScreenSharingEnabled:!1},statusData:{hand:{state:!1,ts:Date.now()}},networkStatus:1,roles:[],permissions:{audio:a.MediaPermissionType.ALLOW,video:a.MediaPermissionType.ALLOW,screenSharing:a.MediaPermissionType.ALLOW}}),s),callData:{type:null,ts:null,localTimeStamp:null,conversation:n},imHash:t,participantLimit:u,isDev:p,popup:null,uiMode:a.UIMode.DEFAULT,orator:null,adminPinnedParticipant:null,screenSharingPinnedParticipant:null,screenSharingNeedDisableOratorModeAfterStop:!0,screenSharingOldPinnedParticipant:null,pinnedParticipant:null,screenSharers:{},isShownParticipantsAside:!0,isOratorMode:!0,chatMembers:[],groupMembers:[],groupMembersCount:0,preselectedIds:null,friends:A,speakers:{},speakersInHeader:[],chatUnreadCount:0,chatUpToMsgId:null,tooltips:{chat:!1,hand:!1,screenShare:!1,layout:!1,collapse:!1,fullscreen:!1},participantsAddedByMe:new Set,groupCallSetup:!1,isManagementOpen:!1,notification:null,errorShown:!1,cautionShown:!1,isLoaderVisible:!1,translation:{deferredId:null,isOn:!1},participantsManagement:null,adminAssignment:null,participantKick:null,membersUnban:null,noiseCancellation:a.NoiseCancellationTypes.NEURAL,config:_,localVideoResolution:h,conversationOptions:[],privacySettings:{callsIp:(null==C?void 0:C.callsIp)||"friends"},friendsCache:E||{},groupMembersCache:{},unableToCallGroupMembersIds:[],ipSettingEnabled:y||!1,localStatus:o.ParticipantStatus.WAITING,isIncoming:!1,pushToTalkEnabled:w,gridScrollPosition:0,gridScrollFirstVisible:0,oratorScrollPosition:0,oratorScrollFirstVisible:0,oratorScrollNumberOfVisible:5,callsCount:(0,i.getCallsCount)(),shouldShowDesktopAppNotification:!1,virtualBackgroundSettings:{photos:[],videoOptions:{}}}},s=function(e){var t,n;return{meId:null!==(t=e.meId)&&void 0!==t?t:0,currentCalls:[],historyCalls:[],deleteCallId:-1,profiles:{},joinLinks:{},isDev:null!==(n=e.isDev)&&void 0!==n&&n,error:null,loading:!0,showCreateCall:!0}}},815615:(e,t,n)=>{"use strict";n.d(t,{callsReducer:()=>c});var r=n(570655),a=n(121255),o=n(989189),i=n(768606),l=n(613335),s=!0;function c(e,t){var n,c,p,f;switch(t.type){case a.LOAD_PEERS:var m=t.conversation||e.callData.conversation,_=t.members;return(0,r.__assign)((0,r.__assign)({},e),{participants:(0,r.__assign)((0,r.__assign)({},e.participants),_.reduce((function(t,n){return n&&n.peerId&&(t[n.peerId]=(0,r.__assign)((0,r.__assign)({mediaSettings:{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1}},e.participants[n.peerId]||{}),n)),t}),{})),callData:(0,r.__assign)((0,r.__assign)({},e.callData),{conversation:m}),peer:"peerId"in t?t.peerId:e.peer,caller:"caller"in t?t.caller:e.caller});case a.CHANGE_MODE:var g=t.mode!==a.Mode.READY&&t.data&&t.data.type?t.data.type:null;if(t.mode===a.Mode.READY||t.mode===a.Mode.FEEDBACK){m=e.callData&&e.callData.conversation;var h=(0,o.getInitialState)(e.participants[e.me],e.imHash,m,{participantLimit:e.participantLimit,token:e.anonymSecret,config:e.config,localVideoResolution:e.localVideoResolution,friends:e.friends,privacySettings:e.privacySettings,friendsCache:e.friendsCache,ipSettingEnabled:e.ipSettingEnabled,isDev:e.isDev});return t.mode===a.Mode.FEEDBACK&&(h.mode=a.Mode.FEEDBACK,h.lastCallData={callId:null!==(p=null===(c=e.callData)||void 0===c?void 0:c.callId)&&void 0!==p?p:"",peerId:null!==(f=e.peer)&&void 0!==f?f:0}),h.virtualBackgroundSettings=e.virtualBackgroundSettings,h}return(0,r.__assign)((0,r.__assign)({},e),{mode:t.mode,peer:"peerId"in t?t.peerId:e.peer,callData:(0,r.__assign)((0,r.__assign)({},e.callData),{type:g,ts:t.ts||e.callData.ts||null}),hangupType:e.hangupType,join:t.joinLink?{joinLink:t.joinLink}:e.join,entryPoint:t.entryPoint||e.entryPoint});case a.HANGUP:return(0,r.__assign)((0,r.__assign)({},e),{hangupType:t.data});case a.TIME_START:return(0,r.__assign)((0,r.__assign)({},e),{callData:(0,r.__assign)((0,r.__assign)({},e.callData),{ts:t.data})});case a.LOCAL_TIME_START:return(0,r.__assign)((0,r.__assign)({},e),{callData:(0,r.__assign)((0,r.__assign)({},e.callData),{localTimeStamp:t.data})});case a.REMOVE_USER:var v=u(e,t.participantId,{status:void 0,statusData:void 0,wasConnected:void 0});if(e.screenSharers[t.participantId]&&delete v.screenSharers[t.participantId],e.orator===t.participantId&&(v.orator=null),e.pinnedParticipant===t.participantId&&(v.pinnedParticipant=null),e.adminPinnedParticipant===t.participantId&&(v.adminPinnedParticipant=null),e.screenSharingPinnedParticipant===t.participantId&&(v.screenSharingPinnedParticipant=null),e.participantsAddedByMe.has(t.participantId)){var A=new Set(e.participantsAddedByMe);A.delete(t.participantId),v.participantsAddedByMe=A}return v;case a.SET_CHAT_INFO:return(0,r.__assign)((0,r.__assign)({},e),{chatMembers:t.data,chatData:t.conversation});case a.GROUP_CALL_SETUP:return(0,r.__assign)((0,r.__assign)({},e),{groupCallSetup:t.open,peer:t.peerId||e.peer||0,preselectedIds:t.preselectedIds});case a.TOGGLE_POPUP:return(0,r.__assign)((0,r.__assign)({},e),{popup:t.data||null});case a.UPDATE_HASH:return(0,r.__assign)((0,r.__assign)({},e),{imHash:t.hash});case a.CHANGE_UI_MODE:return(0,r.__assign)((0,r.__assign)({},e),{uiMode:t.mode||a.UIMode.DEFAULT});case a.TOGGLE_ORATOR_MODE:return(0,r.__assign)((0,r.__assign)({},e),{isOratorMode:t.isOratorMode});case a.TOGGLE_PARTICIPANTS_ASIDE:return(0,r.__assign)((0,r.__assign)({},e),{isShownParticipantsAside:t.isShownParticipantsAside});case a.SET_ORATOR:return(0,r.__assign)((0,r.__assign)({},e),{orator:t.orator||null});case a.SET_PINNED_PARTICIPANT:return(0,r.__assign)((0,r.__assign)({},e),{pinnedParticipant:t.pinnedParticipant});case a.SET_ADMIN_PINNED_PARTICIPANT:return(0,r.__assign)((0,r.__assign)({},e),{adminPinnedParticipant:t.data});case a.SET_SCREEN_SHARING_PINNED_PARTICIPANT:return(0,r.__assign)((0,r.__assign)({},e),{screenSharingPinnedParticipant:t.screenSharingPinnedParticipant,screenSharingNeedDisableOratorModeAfterStop:t.screenSharingNeedDisableOratorModeAfterStop,screenSharingOldPinnedParticipant:t.screenSharingOldPinnedParticipant});case a.MANAGEMENT:return(0,r.__assign)((0,r.__assign)({},e),{isManagementOpen:t.isOpen,managementView:t.managementView});case a.CALL_STATE:return(0,r.__assign)((0,r.__assign)({},e),{callData:(0,r.__assign)((0,r.__assign)({},e.callData),t.callData)});case a.CALL_NOTIFICATION:return(0,r.__assign)((0,r.__assign)({},e),{notification:t.notification});case a.JOIN:return(0,r.__assign)((0,r.__assign)({},e),{mode:a.Mode.JOIN,join:t.data});case a.CALL_BY_NAME:return(0,r.__assign)((0,r.__assign)({},e),{mode:a.Mode.CALL_BY,callByName:t.data});case a.ERROR:return(0,r.__assign)((0,r.__assign)({},e),{mode:t.handleType===a.ErrorHandleType.FATAL?a.Mode.ERROR:e.mode,errorShown:!t.isClosed,error:{title:t.title,text:t.text,handleType:t.handleType,callId:t.callId}});case a.CHANGE_PARTICIPANT_STATE:var E=e.participants[t.participantId].statusData;return u(e,t.participantId,{statusData:(0,r.__assign)((0,r.__assign)({},E),t.data)});case a.CHANGE_PARTICIPANT_ROLES:return u(e,t.participantId,{roles:t.data});case a.CHANGE_PARTICIPANT_PERMISSIONS:var C=e.participants[t.participantId];return u(e,t.participantId,{permissions:(0,r.__assign)((0,r.__assign)({},C.permissions),t.data)});case a.SET_SCREEN_SHARER:return(0,r.__assign)((0,r.__assign)({},e),{screenSharers:(0,r.__assign)((0,r.__assign)({},e.screenSharers),(n={},n[t.participantId]=t.isScreenSharingEnabled,n))});case a.SET_FRIENDS:return(0,r.__assign)((0,r.__assign)({},e),{friends:t.data,friendsCache:(0,l.createFriendsCache)(t.data)});case a.SET_GROUP_MEMBERS:return(0,r.__assign)((0,r.__assign)({},e),{groupMembersCount:t.groupMembersCount,groupMembers:t.groupMembers,unableToCallGroupMembersIds:t.unableToCallGroupMembersIds,groupMembersCache:(0,l.createFriendsCache)(t.groupMembers)});case a.SET_SPEAKERS:var y=t.data,S=y.speakers,w=y.speakersInHeader;return s?(e.speakers=S||e.speakers,e.speakersInHeader=w||e.speakersInHeader):e=(0,r.__assign)((0,r.__assign)({},e),{speakers:S||e.speakers,speakersInHeader:w||e.speakersInHeader}),s=!s,e;case a.UPDATE_PARTICIPANTS_BATCH:return(0,i.applyParticipantsBatch)(e,t.data);case a.SET_UNREAD_COUNT:return(0,r.__assign)((0,r.__assign)({},e),{chatUnreadCount:t.chatUnreadCount,chatUpToMsgId:"chatUpToMsgId"in t?t.chatUpToMsgId:e.chatUpToMsgId});case a.SHOW_CAUTION_BOX:return(0,r.__assign)((0,r.__assign)({},e),{cautionShown:t.isOpen,isIncoming:t.isIncoming});case a.SHOW_LOADER:return(0,r.__assign)((0,r.__assign)({},e),{isLoaderVisible:t.isLoaderVisible});case a.SET_TOOLTIP:var b=t.tooltips?t.tooltips:Object.keys(e.tooltips).reduce((function(e,t){return e[t]=!1,e}),{});return(0,r.__assign)((0,r.__assign)({},e),{tooltips:(0,r.__assign)((0,r.__assign)({},e.tooltips),b)});case a.MANUAL_ADD_PARTICIPANTS:return(0,r.__assign)((0,r.__assign)({},e),{participantsAddedByMe:(t.participants||[]).reduce((function(e,t){return e.add(t)}),new Set(e.participantsAddedByMe))});case a.SET_TRANSLATION:return(0,r.__assign)((0,r.__assign)({},e),{translation:(0,r.__assign)((0,r.__assign)({},e.translation),t.data)});case a.UPDATE_ANON_SECRET:return(0,r.__assign)((0,r.__assign)({},e),{anonymSecret:t.secret});case a.TOGGLE_PARTICIPANTS_KICK:return(0,r.__assign)((0,r.__assign)({},e),{participantKick:t.data?{participant:t.data.participant,type:t.data.type}:null});case a.UNBAN_PARTICIPANTS:return(0,r.__assign)((0,r.__assign)({},e),{membersUnban:t.data?{members:t.data.members}:null});case a.TOGGLE_PARTICIPANTS_MANAGEMENT:return(0,r.__assign)((0,r.__assign)({},e),{participantsManagement:t.data?{mode:t.data.mode,participant:t.data.participant}:null});case a.TOGGLE_ADMIN_ASSIGNMENT:return(0,r.__assign)((0,r.__assign)({},e),{adminAssignment:t.data?{participant:t.data.participant}:null});case a.SET_NOISE_CANCELLATION:return(0,r.__assign)((0,r.__assign)({},e),{noiseCancellation:t.data});case a.CHANGE_LOCAL_VIDEO_RESOLUTION:return(0,r.__assign)((0,r.__assign)({},e),{localVideoResolution:t.data});case a.SET_CONVERSATION_OPTIONS:return(0,r.__assign)((0,r.__assign)({},e),{conversationOptions:t.data});case a.SET_PRIVACY_SETTINGS:return(0,r.__assign)((0,r.__assign)({},e),{privacySettings:t.data});case a.SET_GROUP:return(0,r.__assign)((0,r.__assign)({},e),{groupId:t.groupId,meGroup:t.meGroup});case a.SET_WAITING_HALL:return(0,r.__assign)((0,r.__assign)({},e),{waitingHall:t.data});case a.SET_LOCAL_STATUS:return(0,r.__assign)((0,r.__assign)({},e),{localStatus:t.data});case a.SET_PUSH_TO_TALK_ENABLE:return(0,r.__assign)((0,r.__assign)({},e),{pushToTalkEnabled:t.data});case a.SET_GRID_SCROLL_POSITION:return(0,r.__assign)((0,r.__assign)({},e),{gridScrollPosition:t.position,gridScrollFirstVisible:t.firstVisible});case a.SET_ORATOR_SCROLL_POSITION:return(0,r.__assign)((0,r.__assign)({},e),{oratorScrollPosition:t.position,oratorScrollFirstVisible:t.firstVisible,oratorScrollNumberOfVisible:t.numberOfVisible});case a.SET_SHOW_DESKTOP_NOTIFICATION:return(0,r.__assign)((0,r.__assign)({},e),{shouldShowDesktopAppNotification:t.data});case a.SET_START_OPTIONS:return(0,r.__assign)((0,r.__assign)({},e),{startOptions:t.data});case a.VB_SET_USER_PHOTOS:return d(e,{photos:(0,r.__spreadArray)([],(0,r.__read)(t.photos))});case a.VB_ADD_USER_PHOTO:return d(e,{photos:(0,r.__spreadArray)([t.photo],(0,r.__read)(e.virtualBackgroundSettings.photos))});case a.VB_REMOVE_USER_PHOTO:return d(e,{photos:e.virtualBackgroundSettings.photos.filter((function(e){return e.id!==t.photoId}))});case a.VB_SET_VIDEO_OPTIONS:return d(e,{videoOptions:t.videoOptions})}return e}function u(e,t,n){var a;return(0,r.__assign)((0,r.__assign)({},e),{participants:(0,r.__assign)((0,r.__assign)({},e.participants),(a={},a[t]=(0,r.__assign)((0,r.__assign)({},e.participants[t]),n),a))})}function d(e,t){return(0,r.__assign)((0,r.__assign)({},e),{virtualBackgroundSettings:(0,r.__assign)((0,r.__assign)({},e.virtualBackgroundSettings),t)})}},329538:(e,t,n)=>{"use strict";n.d(t,{loadCallPeers:()=>d,retryLoadCallPeers:()=>_,loadChatMembers:()=>g,getCallAuthToken:()=>h,getCallUrlLink:()=>v,getJoinLinkDetails:()=>A,loadFriends:()=>E,forceCallFinish:()=>C,getConversationsByCall:()=>y,getAnonymCallToken:()=>S,getCallParticipants:()=>w,videoStartStreaming:()=>b,getGroupById:()=>T,getUpcomingLives:()=>I,getVideos:()=>k,sendVideoEdit:()=>N,loadUsers:()=>P,logCallReceived:()=>D,videoLiveGetSpectators:()=>M,stopVideoStream:()=>L,loadPrivacySettings:()=>O,getGroupsForCall:()=>R,getGroupMembers:()=>x,searchGroupMembers:()=>B,getCallParticipantsApiCall:()=>H,getGroupsForStreaming:()=>U,getCurrentCalls:()=>F,getCallsHistory:()=>G,photosGetAllImages:()=>V,photosSaveBackgroundPhoto:()=>z,photosDelete:()=>j,getFriends:()=>Y,friendsSearch:()=>K});var r=n(570655),a=n(298811),o=n(641196),i=n(464380),l=n(296951),s=["photo_200","sex","screen_name","first_name_gen"].join(","),c=["photo_200","sex","screen_name","first_name_gen"].join(","),u=["name","photo_100","photo_200","can_upload_video"].join(","),d=function(e){return(0,o.getApiWrapper)()()("messages.getConversationsById",{peer_ids:[e],extended:1,fields:c})},p=0,f=[],m=[],_=(0,a.exponentialRetry)((function(e,t){return void 0===t&&(t=50),f.push(e),new Promise((function(e){m.push(e),p||(p=window.setTimeout((function(){(function(e){return(0,o.getApiWrapper)()()("messages.getConversationsById",{peer_ids:e,extended:1,fields:c})})(f).then((function(e){m.forEach((function(t){t(e)})),m=[]})),f=[],p=0}),t))}))})),g=function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.getConversationMembers",data:{peerId:e}}),(0,o.getApiWrapper)()()("messages.getConversationMembers",{peer_id:e,fields:s.concat(",can_call")}).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.getConversationMembers",data:e}),e}))},h=function(e,t){return void 0===t&&(t=0),(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallToken",data:{isDev:e,groupId:t}}),(0,o.getApiWrapper)()()("messages.getCallToken",{env:e?"development":"production",group_id:t},{version:"5.149"}).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.getCallToken",data:e}),e}))},v=((0,a.exponentialRetry)(h),function(e,t,n){void 0===n&&(n=0);var r={call_id:e,invalidate:t?1:0,group_id:n};return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallToken",data:r}),(0,o.getApiWrapper)()()("messages.getJoinLink",r).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.getJoinLink",data:e}),e}))}),A=function(e,t){return void 0===t&&(t=!1),(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallPreview",data:{link:e,fields:c,device_id:"anyId"}}),(0,o.getApiWrapper)(!t)()("messages.getCallPreview",{link:e,fields:c,device_id:"anyId"}).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.getCallPreview",data:e}),e}))},E=function(){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"friends.get",data:{fields:s,order:"hints"}}),(0,o.getApiWrapper)()()("friends.get",{fields:s.concat(",can_call"),order:"hints"}).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"friends.get",data:e}),e}))},C=function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.forceCallFinish",data:{call_id:e}}),(0,o.getApiWrapper)()()("messages.forceCallFinish",{call_id:e}).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.forceCallFinish",data:e}),e}))},y=function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.getConversationsByCall",data:{call_ids:e,fields:c}}),(0,o.getApiWrapper)()()("messages.getConversationsByCall",{call_ids:e,fields:c}).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.getConversationsByCall",data:e}),e}))},S=function(e,t,n,r){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.getAnonymCallToken",data:{link:e,user_id:t,name:n,secret:r,device_id:"anyId"}}),(0,o.getApiWrapper)(!1)()("messages.getAnonymCallToken",{link:e,user_id:t,name:n,secret:r,device_id:"anyId"}).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.getAnonymCallToken",data:e}),e}))},w=function(e,t,n,r,i){void 0===r&&(r=!1);for(var l=[],s=Array.from(new Set(t));s.length;)s.length>1e3?(l.push(s.slice(0,1e3)),s=s.slice(1e3)):(l.push(s),s=[]);var u=(0,a.exponentialRetry)((function(t,a){var i=r?{call_id:e,peer_ids:a.join(","),fields:c,device_id:"anyId",secret:t.secret,user_id:n}:{call_id:e,peer_ids:a.join(","),fields:c};return(0,o.getApiWrapper)(!r)()("messages.getCallParticipants",i,{version:"5.149"}).then((function(e){return{count:e.count+t.count,secret:e.secret,profiles:(t.profiles||[]).concat(e.profiles||[]),anonyms:(t.anonyms||[]).concat(e.anonyms||[]),groups:(t.groups||[]).concat(e.groups||[])}}))})),d=Promise.resolve({secret:i,count:0});return l.reduce((function(e,t){return e.then((function(e){return u(e,t)}))}),d)},b=function(e){return(0,o.getApiWrapper)()()("video.startStreaming",e)},T=function(e){return(0,o.getApiWrapper)()()("groups.getById",{group_id:e,fields:u},{version:"5.149"})},I=function(e){return(0,o.getApiWrapper)()()("video.getUpcomingLives",{owner_ids:e})},k=function(e,t,n){return(0,o.getApiWrapper)()()("video.get",{owner_id:e,videos:t,need_privacy:n})},N=function(e,t,n,r,a){return(0,o.getApiWrapper)()()("video.edit",{owner_id:e,video_id:t,name:n,desc:r,privacy_view:a})},P=function(e){return(0,o.getApiWrapper)()()("users.get",e)},D=function(e){return(0,o.getApiWrapper)()()("messages.callReceived",{call_id:e})},M=function(e){return(0,o.getApiWrapper)()()("video.liveGetSpectators",{owner_id:e.owner_id,video_id:e.video_id})},L=function(){return(0,i.stopStream)()},O=function(e){return(0,o.getApiWrapper)()()("account.getPrivacySettings",e)},R=function(){return(0,o.getApiWrapper)()()("messages.getGroupsForCall",{count:200})},x=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=10);var r={fields:s.concat(",can_call_from_group"),group_id:e,offset:t,count:n,sort:"time_asc"};return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"groups.getMembers",params:r}),(0,o.getApiWrapper)()()("groups.getMembers",r).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"groups.getMembers",data:e}),e}))},B=function(e,t){return void 0===t&&(t=""),(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"users.search",data:{groupId:e,q:t}}),(0,o.getApiWrapper)()()("users.search",{fields:s.concat(",can_call_from_group"),group_id:e,q:t}).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"users.search",data:e}),e}))};function H(e,t,n,a,l){void 0===n&&(n=!1),void 0===a&&(a=""),void 0===l&&(l=0);var s={call_id:e,peer_ids:t.join(","),fields:c};return n&&(s=(0,r.__assign)((0,r.__assign)({},s),{device_id:"anyId",secret:a,user_id:l})),(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallParticipants",data:s}),(0,o.getApiWrapper)(!n)()("messages.getCallParticipants",s,{version:"5.149"}).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.getCallParticipant",response:e}),e}))}function U(){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"video.getGroupsForStreaming"}),(0,o.getApiWrapper)()()("video.getGroupsForStreaming",null).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"video.getGroupsForStreaming",response:e}),e}))}function F(e){void 0===e&&(e=s);var t={fields:e};return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.getCurrentCalls",data:t}),(0,o.getApiWrapper)()()("messages.getCurrentCalls",t).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.getCurrentCalls",response:e}),e}))}function G(e,t,n,r){void 0===e&&(e=5),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r="all");var a={count:e,start_from:t,fields:s+",last_name_gen",filter:r,group_id:n};return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallHistory",data:a}),(0,o.getApiWrapper)()()("messages.getCallHistory",a).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"messages.getCallHistory",response:e}),e}))}var V=function(e){void 0===e&&(e={});var t=(0,o.getApiWrapper)(!0)();return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"photos.get",params:e}),t("photos.get",(0,r.__assign)({album_id:"-166"},e)).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"photos.get",response:e}),e}))},W=function(e){return["error_msg","error_code"].some((function(t){return(0,l.get)(t,e)}))?Promise.reject(e):Promise.resolve(e)},z=function(e){var t=(0,o.getApiWrapper)(!0)(),n=(0,o.getApiWrapper)(!0)();return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"photos.getCallBackgroundsPhotoUploadServer"}),t("photos.getCallBackgroundsPhotoUploadServer",{}).then(W).then((function(t){(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"photos.getCallBackgroundsPhotoUploadServer",response:t});var n=new FormData;return n.append("file1",e,e.name),(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"[photoUploadUrl] "+t.upload_url,formData:n}),fetch(t.upload_url,{method:"POST",body:n}).then((function(e){return e.json()})).then(W)})).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"[photoUploadUrl]",json:e}),(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"photos.saveBackgroundPhoto",json:e}),n("photos.saveBackgroundPhoto",{response_json:JSON.stringify(e)})})).then(W)},j=function(e){var t=(0,o.getApiWrapper)(!0)();return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"photos.delete",params:e}),t("photos.delete",e).then(W)},Y=function(e,t,n){void 0===e&&(e=10),void 0===t&&(t=0),void 0===n&&(n="hints");var r={fields:s.concat(",can_call,online_info"),count:e,offset:t,order:n};return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"friends.get",data:r}),(0,o.getApiWrapper)()()("friends.get",r).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"friends.get",data:e}),e}))},K=function(e,t,n,r){void 0===t&&(t=""),void 0===n&&(n=10),void 0===r&&(r=0);var a={user_id:e,q:t,fields:s.concat(",can_call,online_info"),count:n,offset:r};return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"request",method:"friends.search",data:a}),(0,o.getApiWrapper)()()("friends.search",a).then((function(e){return(0,i.debugMessage)(i.DebugMessageType.DEBUG,{type:"response",method:"friends.search",data:e}),e}))}},394886:(e,t,n)=>{"use strict";n.d(t,{openDesktopDeepLink:()=>a});var r=n(233194);function a(e){return new Promise((function(t,n){if(r.Platform.isMobile)n("is_mobile");else if(document.body.focus(),"hidden"===document.visibilityState||document.hidden)n("hidden_page");else{var a,o=function(){a&&clearTimeout(a),window.removeEventListener("blur",o),t(!0)};if(window.addEventListener("blur",o),a=setTimeout((function(){window.removeEventListener("blur",o),n("timed_out")}),3e3),r.Platform.BROWSER===r.BROWSER.SAFARI||r.Platform.BROWSER===r.BROWSER.FIREFOX){var i=document.createElement("iframe");i.style.display="none",document.body.appendChild(i);var l=i.contentWindow;l?(l.location.href=e,setTimeout((function(){i.parentNode&&i.parentNode.removeChild(i)}),100)):window.location.href=e}else window.location.href=e}}))}},834735:(e,t,n)=>{"use strict";function r(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.onload=t,r.onerror=n}))}function a(e){return Promise.resolve(e)}n.d(t,{preloadImage:()=>r,preloadImagesFromResponse:()=>a})},431469:(e,t,n)=>{"use strict";n.d(t,{useIndexer:()=>i,usePseudoLayer:()=>l,useFullScreen:()=>s});var r=n(570655),a=n(667294),o=n(337057),i=function(e,t,n){var i=(0,a.useRef)(null);i.current=i.current?i.current:new o.VkIndexer(e,t);var l=i.current,s=(0,a.useCallback)((function(e){return e.reduce((function(e,t){return e[n(t)]=!0,e}),{})}),[]),c=(0,r.__read)((0,a.useState)(e),2),u=c[0],d=c[1],p=(0,r.__read)((0,a.useState)(s(e)),2),f=p[0],m=p[1];return(0,a.useEffect)((function(){var t=s(e),r=e.filter((function(e){return!f[n(e)]})),a=u.filter((function(e){return!t[n(e)]}));(r.length||a.length)&&(r.forEach((function(e){l.add(e)})),a.forEach((function(e){l.remove(e)})),d(e),m(t))}),[e]),l};function l(){(0,a.useEffect)((function(){return document.body.classList.add("layers_shown"),function(){document.body.classList.remove("layers_shown")}}),[])}var s=function(e,t,n,r){void 0===r&&(r=[]);var o=window.document,i=o.documentElement,l=i.requestFullscreen||i.webkitRequestFullscreen;if(l){var s=!i.requestFullscreen,c=s?o.webkitExitFullscreen:o.exitFullscreen,u=s?"webkitfullscreenchange":"fullscreenchange",d=s?"webkitFullscreenElement":"fullscreenElement";(0,a.useEffect)((function(){var e=function(){o.fullscreenElement?t&&t():n&&n()};return o.addEventListener(u,e),function(){return o.removeEventListener(u,e)}}),[]),(0,a.useEffect)((function(){e&&!o[d]?l.call(o.documentElement):!e&&o[d]&&c.call(o)}),r)}}},259684:(e,t,n)=>{"use strict";n.d(t,{isCollapsedLayout:()=>a});var r=n(121255);function a(e){return e.uiMode===r.UIMode.COLLAPSED}},89085:(e,t,n)=>{"use strict";n.d(t,{longpollService:()=>m});var r=n(570655),a=n(121255),o=n(298811),i=n(788822),l=n(834735),s=n(862191),c=n(614914),u=n(389953),d=n(745284),p=n(820717),f=n(329538);function m(e,t,n,l){var m=l.dispatch,h=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];h.forEach((function(e){e.type===a.INCOMING_CALL&&(0,f.logCallReceived)(e.payload.call_id)}));var A=l.getState();_(A,m,e,h,n).then((function(){h.forEach((function(n){switch(n.type){case a.INCOMING_CALL:if(g(A,n))l.getState().ipSettingEnabled&&t.forceRelayPolicy(!n.payload.p2p_allowed),t.processPush(n.payload.call_id).then((function(){var e=JSON.parse((0,i.decodeHTMLEntities)(n.payload.payload)),t=e.is_video?a.CallType.VIDEO:a.CallType.AUDIO,l=(0,o.getPeerIdFromLongpoll)(n.payload),u=(0,o.isGroupCallEvent)(n);l<0&&(u=e.with_join_link),m({type:a.CHANGE_MODE,mode:a.Mode.INCOMING,peerId:l<0&&u?0:l,data:(0,r.__assign)((0,r.__assign)({},n.payload),{type:t,payload:e})}),s.callStatDataStorage.set({timeStart:Date.now(),startType:t}),c.callStats.logEvent({call_event_type:a.CallActionEventType.INCOMING_CALL_RECEIVED,session_id:n.payload.call_id,peer_id:l,is_group_call:u,reason:e.is_video?a.CallType.VIDEO:a.CallType.AUDIO})})).catch((function(t){if(e.eventHandlers.onError&&t&&e.eventHandlers.onError(t),e.debug)if("object"==typeof t){var n=t.hangup,r=t.message;console.error("Push process error",n,r)}else console.error("Push process error",t)}));else if(n.type===a.INCOMING_CALL){var f=function(t){e.eventHandlers.onError&&t&&e.eventHandlers.onError(new Error(t)),e.debug&&console.warn("Incoming push skipped:",t,n)};switch(!0){case!n.payload.call_id:f("old lib call");break;case A.mode===a.Mode.CALL||A.mode===a.Mode.INCOMING:f("already in a call"),t.processPush(n.payload.call_id).then((function(){e.eventHandlers.onError&&e.eventHandlers.onError(new Error("processPush was incorrect accepted with call_id: "+n.payload.call_id)),e.debug&&console.warn("processPush was incorrect accepted",n.payload.call_id)})).catch((function(t){e.eventHandlers.onError&&t&&e.eventHandlers.onError(t),e.debug&&console.warn("processPush rejected:",t,n.payload.call_id)}));break;default:f("reason of decline is unknown")}}break;case a.ADD_MESSAGE:var _=l.getState(),h=(0,u.isChatPeer)(_.peer),v=_.callData.callId;if(_.peer!==n.peerId||n.flags&a.FLAG_OUTBOUND||_.me===n.userId||m({type:a.SET_UNREAD_COUNT,chatUnreadCount:_.chatUnreadCount?_.chatUnreadCount+1:1}),h||!(0,d.isActiveGroupCallMessage)(n))return;var E=n.peerId;if(v===n.kludges.attach1_call_id)return(0,p.loadCallPeersWithWaitingImagesAction)(l.getState(),m,E);break;case a.READ_INBOUND:null!==n.chatUnreadCount&&l.getState().peer===n.peerId&&m({type:a.SET_UNREAD_COUNT,chatUnreadCount:n.unread,chatUpToMsgId:n.upToId});break;case a.SET_FLAGS:(_=l.getState()).peer===n.peerId&&null!==_.chatUpToMsgId&&n.messageId>_.chatUpToMsgId&&!(n.flags&a.FLAG_OUTBOUND)&&(n.flags&a.FLAG_DELETED||n.flags&a.FLAG_SPAM)&&m({type:a.SET_UNREAD_COUNT,chatUnreadCount:_.chatUnreadCount?_.chatUnreadCount-1:0});break;case a.DELETE_DIALOG:l.getState().peer===n.peerId&&m({type:a.SET_UNREAD_COUNT,chatUnreadCount:0,chatUpToMsgId:null});break;case a.EDIT_MESSAGE:case a.REPLACE_MESSAGE:(_=l.getState()).peer===n.peerId&&null!==_.chatUpToMsgId&&n.messageId>_.chatUpToMsgId&&n.kludges.is_expired&&m({type:a.SET_UNREAD_COUNT,chatUnreadCount:_.chatUnreadCount?_.chatUnreadCount-1:0});break;case a.CONVERSATION_UPDATED:E=n.peerId;var C=n.updateType;if(l.getState().peer!==E)return;if(C!==a.MAIL_CHAT_UPDATE_TYPE_CALL_IN_PROGRESS_CHANGED)return;void 0!==l.getState().callData.canFinishCall&&l.getState().callData.hasUrlLink||(0,p.loadActiveCallDataAction)(l.getState(),m,E)}}))})).catch((function(t){e.eventHandlers.onError&&t&&e.eventHandlers.onError(t),e.debug&&console.error("Resource loading error",t),h.forEach((function(e){switch(e.type){case a.INCOMING_CALL:if(!g(A,e))return;m({type:a.ERROR,text:n("calls_incoming_process_error"),handleType:a.ErrorHandleType.PROCESS,callId:e.payload.call_id})}}))}))};if(e.handleEvent=h,void 0!==window.Notifier){var v=window.Notifier.getLpInstance();v&&v.onData(h)}}function _(e,t,n,r,s){var c=r.reduce((function(r,c){switch(c.type){case a.INCOMING_CALL:if(!g(e,c)){r.push(Promise.resolve());break}var u=(0,o.isGroupCallEvent)(c),f=u,m=(0,o.convertCallerFromLongpoll)(c.payload);if(!u&&m.peerId<0)JSON.parse((0,i.decodeHTMLEntities)(c.payload.payload)).with_join_link&&(f=!0);if(f){var _=u?(0,o.convertChatFromLongpoll)(c.payload):(0,d.getDefaultConversation)(s);if(t({type:a.LOAD_PEERS,conversation:_,members:[m],peerId:_.peerId,caller:u?_:m}),_.photo&&r.push((0,l.preloadImage)(_.photo)),u){var h=(0,p.loadCallPeersWithoutWaitingImagesAction)(e,t,n,_.peerId);r.push(h)}}else t({type:a.LOAD_PEERS,conversation:m,members:[m],peerId:m.peerId});m.photo&&r.push((0,l.preloadImage)(m.photo))}return r}),[]);return Promise.all(c)}function g(e,t){return function(e){return!!e.payload.call_id}(t)&&e.mode!==a.Mode.INCOMING&&e.mode!==a.Mode.CALL}},147853:(e,t,n)=>{"use strict";n.d(t,{setNeedPushToTalkToggleAudio:()=>s,pushToTalkToggleAudio:()=>c,pushToTalkActivate:()=>u,pushToTalkDeactivate:()=>d,onPushToTalkHandler:()=>m});var r=n(745284),a=n(121255),o=n(464380),i=!1,l=!0;function s(e){l=e}function c(e,t,n){if(void 0===n&&(n=!0),l)if(e){var r=!(!t||!t.isAudioEnabled);n&&(i=r),r&&(0,o.toggleLocalAudio)(!1)}else i&&(0,o.toggleLocalAudio)(!0);else s(!0)}function u(e){window.addEventListener("keydown",e),window.addEventListener("keyup",e)}function d(e){window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}var p,f=!1;function m(e,t,n,i){var l=e.keyCode,s=e.type,c=e.repeat,u="keydown"===s;if(32===l){if(e&&e.target){if(["FCComposer__input","FCSearch__input","fc_editable","fc_clist_filter_text"].some((function(t){return e.target.classList.contains(t)})))return}if(e.preventDefault(),c)return;if(f)return clearTimeout(p),void(f=!1);f=!0,p=setTimeout((function(){(function(e,t,n,i){var l=function(){var t,o,l=(null===(t=i.notification)||void 0===t?void 0:t.type)===a.NotificationType.PUSH_TO_TALK,s=!1;if(e&&!l?s=!0:e&&l?s=(null===(o=i.notification)||void 0===o?void 0:o.data)!==(0,r.isIAmSpeaking)(i):!e&&l&&(s=!0),s){var c=null;e&&(c={type:a.NotificationType.PUSH_TO_TALK,timer:0,data:(0,r.isIAmSpeaking)(i)}),n({type:a.CALL_NOTIFICATION,notification:c})}};return e&&t||!e&&!t?Promise.resolve().then(l):(0,o.toggleLocalAudio)(e).then(l)})(u,t,n,i).then((function(){f=!1}))}),u?200:100)}}},253312:(e,t,n)=>{"use strict";n.d(t,{sdkService:()=>T,checkAuthByGroupId:()=>P,getCallStartErrorText:()=>O});var r=n(570655),a=n(121255),o=n(329538),i=n(298811),l=n(834735),s=n(387691),c=n(169610),u=n(525046),d=n(774351),p=n(389953),f=n(745284),m=n(170794),_=n(862191),g=n(614914),h=n(820717),v=n(307915),A=n(697483),E=n(768606),C=n(464380),y=n(604233),S=n(613335),w=n(719481),b=n(233194);function T(e,t,n,S,T,O){var H=S.dispatch,U=S.getState(),F=U.me,G=(0,i.compose)(D,i.startCallRetryWrapper.bind(null,k.bind(null,t,e,S))),V=(0,i.compose)(t.joinCallByLink,i.startCallRetryWrapper.bind(null,k.bind(null,t,e,S))),W={apiKey:n.key,apiEnv:n.is_dev?"VIDEOTEST":"PROD",anonymToken:n.is_anonym?n.token:"",filteredMessages:!0,batchParticipantsOnStart:!0,participantStateMapped:!0,voiceParams:{speakerLevelMultiplier:1.3,smoothing:.5},domain:O?"vk_corp":void 0,videoTracksCount:U.config.enableVideoSlots?U.config.videoSlotsCount:void 0,videoMaxHeight:U.localVideoResolution===a.VideoResolutionTypes.SD?a.VideoHeight.SD:a.VideoHeight.HD,videoMaxWidth:U.localVideoResolution===a.VideoResolutionTypes.SD?a.VideoWidth.SD:a.VideoWidth.HD,debugLog:U.config.debugLog,consumerScreenTrack:U.config.enableScreenTrack,producerScreenTrack:U.config.enableProducerScreenTrack,onLocalStream:function(t,n){e.debug&&console.warn("onLocalStream",t,n),(0,E.throttleAccumulateDispatchParticipant)(H,F,{stream:t,mediaSettings:n}),_.callStatDataStorage.set({hadVideoEnabled:n.isVideoEnabled})},onLocalStreamUpdate:function(t,n){e.debug&&console.warn("onLocalStreamUpdate",t,n);var r=S.getState(),o=r.participants[F],i=o.mediaSettings,l=o.permissions,s={mediaSettings:t};l.audio!==a.MediaPermissionType.ONCE&&l.video!==a.MediaPermissionType.ONCE&&l.screenSharing!==a.MediaPermissionType.ONCE||(s.permissions={},l.audio===a.MediaPermissionType.ONCE&&(null==i?void 0:i.isAudioEnabled)&&!t.isAudioEnabled&&(s.permissions.audio=a.MediaPermissionType.DENY),l.video===a.MediaPermissionType.ONCE&&(null==i?void 0:i.isVideoEnabled)&&!t.isVideoEnabled&&(s.permissions.video=a.MediaPermissionType.DENY),l.screenSharing===a.MediaPermissionType.ONCE&&(null==i?void 0:i.isScreenSharingEnabled)&&!t.isScreenSharingEnabled&&(s.permissions.screenSharing=a.MediaPermissionType.DENY)),(0,E.throttleAccumulateDispatchParticipant)(H,F,s),t.isScreenSharingEnabled!==(null==i?void 0:i.isScreenSharingEnabled)&&(x(r,H,t.isScreenSharingEnabled,F),t.isScreenSharingEnabled?e.eventHandlers.onScreenSharingEnabled&&e.eventHandlers.onScreenSharingEnabled():e.eventHandlers.onScreenSharingDisabled&&e.eventHandlers.onScreenSharingDisabled()),_.callStatDataStorage.set({hadVideoEnabled:t.isVideoEnabled})},onRemoteStream:function(t,n){e.debug&&console.warn("onRemoteStream",t.id,n),(0,E.throttleAccumulateDispatchParticipant)(H,t.id,{stream:n})},onScreenStream:function(t,n){e.debug&&console.warn("onScreenStream",t,n);var r={screenSharingStream:t,mediaSettings:n};(0,E.throttleAccumulateDispatchParticipant)(H,F,r)},onRemoteScreenStream:function(t,n){e.debug&&console.warn("onRemoteScreenStream",t.id,n),(0,E.throttleAccumulateDispatchParticipant)(H,t.id,{screenSharingStream:n})},onConversation:function(n,o,i){var l,s,c,u,d,p;if(e.debug&&((0,C.debugMessage)(C.DebugMessageType.LOG,{type:"start call info",os:b.Platform.OS,arch:b.Platform.ARCH,isMobile:b.Platform.isMobile,browser:(0,b.getBrowserInfo)(),config:S.getState().config,cameras:t.browser.getCameras(),microphones:t.browser.getMicrophones(),hasMicrophonePermission:t.browser.hasMicrophonePermission(),hasCameraPermission:t.browser.hasCameraPermission(),screenHeight:window.screen.availHeight,screenWidth:window.screen.availWidth,windowHeight:window.screen.height,windowWidth:window.screen.width}),console.warn("onConversation",n,o,i)),!S.getState().callData.ts){var f=Date.now();H({type:a.TIME_START,data:f})}var m=S.getState().peer;if(0!==m&&(0,h.loadActiveCallDataAction)(U,H,m),i){H({type:a.LOAD_PEERS,members:i.map((function(e){return{peerId:Number(e.uid.id),mediaSettings:e.mediaSettings,status:e.status||C.ParticipantStatus.CONNECTING,statusData:e.participantState?B(e.participantState):void 0,wasConnected:!1}}))});try{for(var _=(0,r.__values)(i),g=_.next();!g.done;g=_.next()){var v=g.value,A=(null===(u=null===(c=U.participants[v.uid.id])||void 0===c?void 0:c.mediaSettings)||void 0===u?void 0:u.isScreenSharingEnabled)||!1;(null===(d=null==v?void 0:v.mediaSettings)||void 0===d?void 0:d.isScreenSharingEnabled)!==A&&x(U,H,null===(p=null==v?void 0:v.mediaSettings)||void 0===p?void 0:p.isScreenSharingEnabled,Number(v.uid.id),!0)}}catch(e){l={error:e}}finally{try{g&&!g.done&&(s=_.return)&&s.call(_)}finally{if(l)throw l.error}}}},onRemoteMediaSettings:function(t,n){var r,a,o,i=+t.id,l=S.getState(),s=null===(r=l.participants[i])||void 0===r?void 0:r.mediaSettings;if((null==s?void 0:s.isVideoEnabled)!==n.isVideoEnabled||(null==s?void 0:s.isAudioEnabled)!==n.isAudioEnabled||(null==s?void 0:s.isScreenSharingEnabled)!==n.isScreenSharingEnabled){e.debug&&console.warn("onRemoteMediaSettings",t.id,n);var c=(null===(o=null===(a=l.participants[i])||void 0===a?void 0:a.mediaSettings)||void 0===o?void 0:o.isScreenSharingEnabled)||!1;n.isScreenSharingEnabled!==c&&x(l,H,n.isScreenSharingEnabled,i,!0),(0,E.throttleAccumulateDispatchParticipant)(H,i,{mediaSettings:n}),_.callStatDataStorage.set({hadVideoEnabled:n.isVideoEnabled})}},onRemoteStatus:function(t,n,o){var i,l,s=S.getState(),c=n;e.debug&&console.warn("onRemoteStatus",t,n,o);var u=[],d={};try{for(var p=(0,r.__values)(t),f=p.next();!f.done;f=p.next()){var m=f.value,v=Number(m.id);s.participants[v]&&s.participants[v].mediaSettings&&s.participants[v].shortName||u.push(v),d[String(v)]={status:c,statusData:o}}}catch(e){i={error:e}}finally{try{f&&!f.done&&(l=p.return)&&l.call(p)}finally{if(i)throw i.error}}if(e&&u.length>0){var E=s.callData.callId||"",y={withConversation:!s.callData.conversation,awaitImages:!1};(0,h.loadCallParticipantsAccumulate)(s,H,e,E,u,y)}if(H({type:a.UPDATE_PARTICIPANTS_BATCH,data:d}),_.callStatDataStorage.set({connectionStep:c}),Number(null==t?void 0:t[0].id)===s.peer){var w=function(e,t){var n={call_event_type:e,session_id:s.callData.callId,peer_id:s.peer,is_group_call:!1};t&&(n.reason=t),g.callStats.logEvent(n)};if(c===C.ParticipantStatus.CONNECTED){if(w(a.CallActionEventType.CALL_CONNECTED),!s.participants[s.peer].wasConnected&&(0,A.isCreator)(s.participants[s.me])){var b=_.callStatDataStorage.get().startType;w(a.CallActionEventType.OUTGOING_CALL_ACCEPTED_REMOTELY,null==b?void 0:b.toString())}}else c===C.ParticipantStatus.WAITING&&w(a.CallActionEventType.OUTGOING_CALL_REMOTE_RINGING)}},onPermissionsError:function(n){if(e.debug&&console.warn("onPermissionsError",n),S.getState().mode===a.Mode.CALL){switch(n){case a.MediaError.CAMERA_PERMISSION:case a.MediaError.CAMERA_ACCESS:t.toggleLocalVideo(!1);break;case a.MediaError.MIC_ACCESS:case a.MediaError.MIC_NOT_FOUND:t.toggleLocalAudio(!1);break;case a.MediaError.SCREEN_PERMISSION:case a.MediaError.SCREEN_ACCESS:t.captureScreen(!1)}H({type:a.ERROR,text:(0,v.getMediaErrorMessage)(n,T)})}},onPermissionsRequested:function(){e.debug&&console.warn("onPermissionsRequested")},onRemoteRemoved:function(t){e.debug&&console.warn("onRemoteRemoved",t.id),H({type:a.REMOVE_USER,participantId:+t.id})},onCallState:function(t,n,o){var i,l,s;e.debug&&console.warn("onCallState",t,n,o);var c=o.id,u=o.direction;if(!c||!S.getState().callData.callId){if(H({type:a.CALL_STATE,callData:{callId:c}}),!S.getState().peer){var d=Object.keys(S.getState().participants||{}).map((function(e){return Number(e)}));d.length&&(0,h.loadCallParticipantsAccumulate)(U,H,e,c,(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(d)),[S.getState().me]),{withConversation:!0,withChatMembers:!0,withCallParticipants:!0,awaitImages:!1})}!(0,f.isGroupCallByPeer)(S.getState().peer||0)||"JOINING"!==u&&"OUTGOING"!==u||g.callStats.logEvent({call_event_type:a.CallActionEventType.CALL_CONNECTED,session_id:c,peer_id:S.getState().peer||0,is_group_call:!0}),(null===(i=S.getState())||void 0===i?void 0:i.startOptions)&&(null===(s=null===(l=S.getState())||void 0===l?void 0:l.startOptions)||void 0===s?void 0:s.createLink)&&(0,h.loadAndCopyJoinLink)(H,c,S.getState().groupId)}},onRateNeeded:function(){e.debug&&console.warn("onRateNeeded")},onSpeakerChanged:function(t){var n=t.id;e.debug&&console.warn("onSpeakerChanged",n),H({type:a.SET_ORATOR,orator:+n})},onJoinStatus:function(t,n){e.debug&&console.warn("onJoinStatus",t,n)},onHangup:function(n,r){var o=n.hangup;e.debug&&console.warn("onHangup",o,r);var l=o&&![a.HANGUP_TYPE_CANCELED,a.HANGUP_TYPE_MISSED,a.HANGUP_TYPE_HUNGUP,a.HANGUP_TYPE_REMOVED].includes(o),s=o&&o===a.HANGUP_TYPE_HUNGUP,c=(0,f.isGroupCallByPeer)(S.getState().peer);if(S.getState().mode===a.Mode.CALL&&l||S.getState().localStatus===C.ParticipantStatus.WAITING_HALL&&o===a.HANGUP_TYPE_REMOVED)H({type:a.HANGUP,data:o}),(0,d.pause)(a.HANGUP_DELAY,null).finally((function(){H({type:a.CHANGE_MODE,mode:a.Mode.READY})}));else if(U.config.showFeedbackScreen&&s){var u=S.getState().callData.ts,p=(u?Math.floor((Date.now()-u)/1e3):0)>10&&0===Math.floor(3*Math.random()),h=0===Math.floor(5*Math.random());c&&p||h?(H({type:a.MANAGEMENT,isOpen:!1}),H({type:a.CHANGE_MODE,mode:a.Mode.FEEDBACK})):S.getState().mode!==a.Mode.ERROR&&H({type:a.CHANGE_MODE,mode:a.Mode.READY})}else S.getState().mode!==a.Mode.ERROR&&H({type:a.CHANGE_MODE,mode:a.Mode.READY});e.isInActiveCall=!1;var v=(0,i.isInReconnect)(S.getState());if(r=r||"",(0,m.addCallStatEvent)(o,r,v,e.debug),!v&&!c){var A="none";o===C.HangupType.MISSED?A="timeout":o===C.HangupType.BUSY&&(A="busy");var E=S.getState().callData.conversation,y={call_event_type:a.CallActionEventType.CALL_DECLINED_OR_HANGED_REMOTELY,session_id:r,peer_id:(null==E?void 0:E.peerId)||0,is_group_call:!1,reason:A};g.callStats.logEvent(y)}e.authorizedGroupId&&function(e,t,n,r){P(e,t,n,0,r)}(t,e,S,H),_.callStatDataStorage.reset()},onCallAccepted:function(){e.debug&&console.warn("onCallAccepted"),(0,f.isGroupCallByPeer)(S.getState().peer)&&g.callStats.logEvent({call_event_type:a.CallActionEventType.CALL_CONNECTED,session_id:S.getState().callData.callId,peer_id:S.getState().peer,is_group_call:(0,f.isGroupCallByPeer)(S.getState().peer)})},onTokenExpired:function(){e.debug&&console.warn("onTokenExpired"),(e.tokenAttempts||0)<3&&(k(t,e,S),e.tokenAttempts=(e.tokenAttempts||0)+1)},onDeviceChange:function(){e.debug&&console.warn("onDeviceChange")},onMultipartyChatCreated:function(){e.debug&&console.warn("onMultipartyChatCreated")},onFingerprintChange:function(t){e.debug&&console.warn("onFingerprintChange",t)},onVolumesDetected:(0,s.volumesDetectorGenerator)({onUpdate:function(e){H({type:a.SET_SPEAKERS,data:e})},volumeLevelDetection:a.VOLUME_LEVEL_DETECTION,debugCallback:function(){e.debug}}),onLocalVolume:(0,s.localVolumeDetectorGenerator)({onVolumeLevelReached:function(){var e=S.getState();H({type:a.CALL_NOTIFICATION,notification:{type:a.NotificationType.SPEAKING_ON_MUTE}}),g.callStats.logEvent({call_event_type:a.CallActionEventType.MIC_OFF_WHILE_TALKING_ALERT,session_id:e.callData.callId,peer_id:e.peer,is_group_call:(0,f.isGroupCallByPeer)(e.peer)})},onVolumeLevelUpdated:function(e){var t,n=null===(t=S.getState().participants[F].mediaSettings)||void 0===t?void 0:t.isAudioEnabled,r=S.getState().speakers,o=Object.assign({},r);e&&n?o[F]=!0:e||delete o[F],o[F]!==r[F]&&H({type:a.SET_SPEAKERS,data:{speakers:o}})},needCheckMicEnabled:!0,volumeLevelDetection:a.VOLUME_LEVEL_DETECTION,vectorLength:5,callbackFactorStep:0,sensitivityCoefficient:.45,debugCallback:function(){e.debug}}),onChatMessage:function(t,n,r){e.debug&&console.warn("onChatMessage",t,n,r)},onCustomData:function(t,n){e.debug&&console.warn("onCustomData",t,n)},onNetworkStatusChanged:function(t){var n,a;if(e.debug&&console.warn("onNetworkStatusChanged",t),(0,f.isGroupCallByPeer)(U.peer)&&U.config.badNetwork||!(0,f.isGroupCallByPeer)(U.peer)&&U.config.badNetworkP2P)try{for(var o=(0,r.__values)(t),i=o.next();!i.done;i=o.next()){var l=i.value;(0,E.throttleAccumulateDispatchParticipant)(H,+l.uid.id,{networkStatus:l.rating})}}catch(e){n={error:e}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}},onLocalNetworkStatusChanged:function(t){e.debug&&console.warn("onLocalNetworkStatusChanged",t),((0,f.isGroupCallByPeer)(U.peer)&&U.config.badNetwork||!(0,f.isGroupCallByPeer)(U.peer)&&U.config.badNetworkP2P)&&(0,E.throttleAccumulateDispatchParticipant)(H,U.me,{networkStatus:t})},onDebugMessage:function(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];e.debug&&console.warn.apply(console,(0,r.__spreadArray)(["onDebugMessage",t],(0,r.__read)(n)))},onRemoteParticipantState:function(t,n){var r,o,i,l,s,c;n=B(n);var u=t.id,d=!!(null===(i=null===(o=null===(r=S.getState().participants[u])||void 0===r?void 0:r.statusData)||void 0===o?void 0:o.hand)||void 0===i?void 0:i.state);if(d!==!!(null===(l=null==n?void 0:n.hand)||void 0===l?void 0:l.state)){e.debug&&console.warn("onRemoteParticipantState",t,n);var p=!!(null===(s=S.getState().participants[u])||void 0===s?void 0:s.name);(0,E.throttleAccumulateDispatchParticipant)(H,u,{statusData:n}),(null===(c=null==n?void 0:n.hand)||void 0===c?void 0:c.state)&&!d&&p&&H({type:a.CALL_NOTIFICATION,notification:{type:a.NotificationType.RAISED_HAND,data:u}})}},onRolesChanged:function(t,n){e.debug&&console.warn("onRolesChanged",t,n);var r=S.getState().participants[t.id];n.includes(C.UserRole.ADMIN)&&r&&H({type:a.CALL_NOTIFICATION,notification:{type:a.NotificationType.USER_GRANTED_WITH_ADMIN_ROLE,data:t.id}}),(0,E.throttleAccumulateDispatchParticipant)(H,t.id,{roles:n})},onLocalRolesChanged:function(t){e.debug&&console.warn("onLocalRolesChanged",t),(t.includes(C.UserRole.ADMIN)||t.includes(C.UserRole.CREATOR))&&(0,E.throttleAccumulateDispatchParticipant)(H,F,{permissions:{audio:a.MediaPermissionType.ALLOW,video:a.MediaPermissionType.ALLOW,screenSharing:a.MediaPermissionType.ALLOW}}),t.includes(C.UserRole.ADMIN)&&H({type:a.CALL_NOTIFICATION,notification:{type:a.NotificationType.ADMIN_ROLE_GRANTED}}),t.includes(C.UserRole.ADMIN)||t.includes(C.UserRole.CREATOR)?U.config.allowWaitingHall&&(0,f.isWaitingHallEnabled)(S.getState())&&(0,w.loadAdditionalWaitingHall)(S.getState(),H,!0):S.getState().waitingHall&&(0,w.clearWaitingList)(H),H({type:a.CHANGE_PARTICIPANT_ROLES,participantId:F,data:t})},onDeviceSwitched:function(t,n){e.debug&&console.warn("onDeviceSwitched",t,n)},onUnmutePermission:function(t){e.debug&&console.warn("onUnmutePermission",t);var n=S.getState(),r=n.participants[F],o=n.popup;if(t||o!==a.POPUP_UNMUTE_REQUEST||H({type:a.TOGGLE_POPUP}),!(0,A.isAdmin)(r)&&!(0,A.isCreator)(r)){var i=r.permissions,l=i.audio,s=i.video,c=i.screenSharing;l===a.MediaPermissionType.DENY&&s===a.MediaPermissionType.DENY&&c===a.MediaPermissionType.DENY||H({type:a.CALL_NOTIFICATION,notification:{type:t?a.NotificationType.ADMIN_MUTE:a.NotificationType.ADMIN_MUTE_PERMANENT}}),(0,E.throttleAccumulateDispatchParticipant)(H,F,{permissions:{audio:t?a.MediaPermissionType.ALLOW:a.MediaPermissionType.DENY,video:t?a.MediaPermissionType.ALLOW:a.MediaPermissionType.DENY,screenSharing:t?a.MediaPermissionType.ALLOW:a.MediaPermissionType.DENY}}),t&&g.callStats.logEvent({call_event_type:a.CallActionEventType.MIC_OFF_WHILE_TALKING_ENABLE_CLICK,session_id:n.callData.callId,peer_id:n.peer,is_group_call:(0,f.isGroupCallByPeer)(n.peer)})}},onUnmuteRequest:function(n){var o,i;if(e.debug&&console.warn("onUnmuteRequest",n),n!==C.MediaOption.VIDEO){var l=S.getState(),s=l.participants[l.me],c=s.permissions,u=c.audio,d=c.video,p=c.screenSharing,f=(0,A.isMutedPermanently)(s),m=!!(null===(i=null===(o=s.statusData)||void 0===o?void 0:o.hand)||void 0===i?void 0:i.state);m&&t.changeParticipantState({hand:a.SdkHandType.LOWERED}).catch(console.log),(0,E.throttleAccumulateDispatchParticipant)(H,F,(0,r.__assign)({permissions:{audio:f?a.MediaPermissionType.ONCE:u,video:f?a.MediaPermissionType.ONCE:d,screenSharing:f?a.MediaPermissionType.ONCE:p}},m&&{statusData:(0,r.__assign)((0,r.__assign)({},s.statusData),{hand:{ts:Date.now(),state:!1}})})),H({type:a.TOGGLE_POPUP,data:a.POPUP_UNMUTE_REQUEST})}},onRecordStarted:function(t,n,r,o,i,l){e.debug&&console.warn("onRecordStarted",t,n,r,o);var s={isOn:!0,videoId:parseInt(i),ownerId:parseInt(l),host:t,startTime:r,link:"https://"+window.location.host+(0,y.getShortVideoUrl)(l,i),startStreamParams:void 0};H({type:a.SET_TRANSLATION,data:s})},onRecordStopped:function(){e.debug&&console.warn("onRecordStopped"),H({type:a.SET_TRANSLATION,data:{isOn:!1,hasPermission:!1}})},onLocalPin:function(t){var n;e.debug&&console.warn("onLocalPin",{unpin:t});var r=S.getState(),o=r.participants[F];t||H({type:a.CALL_NOTIFICATION,notification:{type:a.NotificationType.PINNED_BY_ADMIN}}),!t&&(0,A.isMutedPermanently)(o)&&(0,E.throttleAccumulateDispatchParticipant)(H,F,{permissions:{audio:a.MediaPermissionType.ONCE,video:a.MediaPermissionType.ONCE,screenSharing:a.MediaPermissionType.ONCE}}),t||(null===(n=o.mediaSettings)||void 0===n?void 0:n.isAudioEnabled)||H({type:a.TOGGLE_POPUP,data:a.POPUP_ADMIN_PIN_UNMUTE_REQUEST}),t||r.isOratorMode||H({type:a.TOGGLE_ORATOR_MODE,isOratorMode:!0}),H({type:a.SET_ADMIN_PINNED_PARTICIPANT,data:t?null:F})},onPinnedParticipant:function(t,n){e.debug&&console.warn("onPinnedParticipant",t,n);var r=S.getState(),o=r.participants[t.id];!n&&o&&((null==o?void 0:o.shortName)||(null==o?void 0:o.name))&&H({type:a.CALL_NOTIFICATION,notification:{type:a.NotificationType.USER_PINNED_BY_ADMIN,data:t.id}}),r.isOratorMode||H({type:a.TOGGLE_ORATOR_MODE,isOratorMode:!0}),H({type:a.SET_ADMIN_PINNED_PARTICIPANT,data:n?null:Number(t.id)})},onOptionsChanged:function(t){e.debug&&console.warn("onOptionsChanged",t),H({type:a.SET_CONVERSATION_OPTIONS,data:t})},onLocalStatus:function(t){e.debug&&console.warn("onLocalStatus",t);var n=S.getState(),i=n.callData,s=n.me;n.participants[s].status!==C.ParticipantStatus.WAITING_HALL||t!==C.ParticipantStatus.WAITING||(0,A.isParticipantAnonym)(s)||(null==i?void 0:i.callId)&&(0,o.getConversationsByCall)([i.callId]).then((function(e){var t=e.items,n=(0,r.__read)(t,1)[0].peer.id;return M(S,n,void 0).then((function(e){return(0,l.preloadImagesFromResponse)(e)})).then((function(){return n}))})).catch((function(e){var t;8===(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.error_code)&&Promise.resolve(0)})),H({type:a.SET_LOCAL_STATUS,data:t}),(0,E.throttleAccumulateDispatchParticipant)(H,n.me,{status:t,wasConnected:!0})},onChatRoomUpdated:function(t,n,r){e.debug&&console.warn("onChatRoomUpdated",t,n,r),t===C.ChatRoomEventType.ATTENDEE&&(0,w.loadWaitingHall)(n,r,S.getState(),H)}};e.authorized=!1,e.authorizedGroupId=0,e.debugMessage=C.debugMessage,e.call=function(e,t,n,r,o){var i=r.dispatch;return function(s,u,d,p,m){void 0===m&&(m=0);var h=(0,f.getMediaOptions)({video:u,audio:!0});return e.isInActiveCall?Promise.reject(a.CallErrorType.ALREADY_IN_CALL).catch(I):(e.isInActiveCall=!0,Promise.resolve().then((function(){i({type:a.SHOW_LOADER,isLoaderVisible:!0})})).then((function(){return N(e)})).then((function(){return P(t,e,r,m,i)})).then((function(){return(0,c.checkPermissions)(t,h)})).then((function(){return M(r,s,d)})).then((function(n){return Promise.all([(0,l.preloadImagesFromResponse)(n),o(e,t,r,h,s)])})).then((function(){i({type:a.SHOW_LOADER,isLoaderVisible:!1}),i({type:a.CHANGE_MODE,mode:a.Mode.CALL,peerId:s}),_.callStatDataStorage.set({timeStart:Date.now(),isOutgoingCall:!0,entryPoint:p,startType:u?a.CallType.VIDEO:a.CallType.AUDIO}),g.callStats.logEvent({call_event_type:u?a.CallActionEventType.OUTGOING_CALL_STARTED_VIDEO:a.CallActionEventType.OUTGOING_CALL_STARTED_AUDIO,session_id:r.getState().callData.callId,peer_id:s,is_group_call:!1,source:p,group_call_users_count:2}),L(r,s,d)})).catch((function(r){e.isInActiveCall=!1,i({type:a.SHOW_LOADER,isLoaderVisible:!1}),R(r,t,e,(0,f.isGroupCallByPeer)(s),n,i)})))}}(e,t,T,S,G),e.startGroupCall=function(e,t,n,r,o){var i=r.dispatch;return function(l,s,u,d,m,v,A){void 0===v&&(v=!0),void 0===A&&(A=null);var E=(0,f.getMediaOptions)({video:d,audio:!0}),C=u?u.filter(p.isUserPeer):[];return e.debug&&u&&u.length!==C.length&&console.warn("Some ids cannot get into the call.",u.filter((function(e){return!(0,p.isUserPeer)(e)}))),e.isInActiveCall?Promise.reject(a.CallErrorType.ALREADY_IN_CALL).catch(I):(e.isInActiveCall=!0,Promise.resolve().then((function(){i({type:a.SHOW_LOADER,isLoaderVisible:!0})})).then((function(){return N(e)})).then((function(){return P(t,e,r,0,i)})).then((function(){return(0,c.checkPermissions)(t,E)})).then((function(){return M(r,l,s)})).then((function(e){return(0,h.loadChatMembersAction)(r.getState(),i,l,e[0])})).then((function(){return o(e,t,r,E,l)})).then((function(){i({type:a.SHOW_LOADER,isLoaderVisible:!1}),i({type:a.CHANGE_MODE,mode:a.Mode.CALL,peerId:l}),v&&(C&&C.length?i({type:a.GROUP_CALL_SETUP,open:!0,peerId:l,preselectedIds:C}):i({type:a.MANAGEMENT,isOpen:!0})),A&&i({type:a.SET_TRANSLATION,data:{deferredId:A}}),L(r,l,s),_.callStatDataStorage.set({timeStart:Date.now(),isOutgoingCall:!0,startType:d?a.CallType.VIDEO:a.CallType.AUDIO,entryPoint:m,isGroupCall:!0}),g.callStats.logEvent({call_event_type:d?a.CallActionEventType.OUTGOING_CALL_STARTED_VIDEO:a.CallActionEventType.OUTGOING_CALL_STARTED_AUDIO,session_id:r.getState().callData.callId,peer_id:l,is_group_call:!0,source:m,group_call_users_count:1})})).catch((function(r){e.isInActiveCall=!1,i({type:a.SHOW_LOADER,isLoaderVisible:!1}),R(r,t,e,(0,f.isGroupCallByPeer)(l),n,i)})))}}(e,t,T,S,G),e.startCall=function(e,t,n,r,o){var i=r.dispatch;return function(s,u,d,p,m){void 0===d&&(d=!0),void 0===p&&(p=0),void 0===m&&(m={});var v=(0,f.getMediaOptions)({video:s,audio:!0});if(e.isInActiveCall)return Promise.reject(a.CallErrorType.ALREADY_IN_CALL).catch(I);e.isInActiveCall=!0;var A=(0,f.getDefaultConversation)(n);return Promise.resolve().then((function(){i({type:a.SHOW_LOADER,isLoaderVisible:!0})})).then((function(){return N(e)})).then((function(){return P(t,e,r,p,i)})).then((function(){return(0,c.checkPermissions)(t,v)})).then((function(){return Promise.all([o(e,t,r,v),(0,l.preloadImagesFromResponse)([A])])})).then((function(){m&&m.conversationOptions&&Object.keys(m.conversationOptions).length>0&&t.changeConversationOptions(m.conversationOptions)})).then((function(){i({type:a.SHOW_LOADER,isLoaderVisible:!1}),i({type:a.LOAD_PEERS,conversation:A,members:[],peerId:0}),i({type:a.CHANGE_MODE,mode:a.Mode.CALL}),d&&i({type:a.MANAGEMENT,isOpen:!0});var e=r.getState().callData.callId;(null==m?void 0:m.createLink)&&(e?(0,h.loadAndCopyJoinLink)(i,e,p):i({type:a.SET_START_OPTIONS,data:m})),_.callStatDataStorage.set({timeStart:Date.now(),isOutgoingCall:!0,entryPoint:u,startType:s?a.CallType.VIDEO:a.CallType.AUDIO,isGroupCall:!0}),g.callStats.logEvent({call_event_type:s?a.CallActionEventType.OUTGOING_CALL_STARTED_VIDEO:a.CallActionEventType.OUTGOING_CALL_STARTED_AUDIO,session_id:e,peer_id:0,is_group_call:!0,source:u,group_call_users_count:1})})).catch((function(r){e.isInActiveCall=!1,i({type:a.SHOW_LOADER,isLoaderVisible:!1}),R(r,t,e,!0,n,i)}))}}(e,t,T,S,G),e.joinCallByLink=function(e,t,n,i,s){var u=i.dispatch;return function(d,p,m,_,h,v){void 0===m&&(m=!1),void 0===h&&(h=0),void 0===v&&(v=void 0);var E=(0,f.getMediaOptions)({video:m,audio:!0});return e.isInActiveCall?Promise.reject(a.CallErrorType.ALREADY_IN_CALL).catch(I):(e.isInActiveCall=!0,(0,A.isParticipantAnonym)(i.getState().me)?Promise.resolve().then((function(){u({type:a.SHOW_LOADER,isLoaderVisible:!0})})).then((function(){return N(e)})).then((function(){return(0,c.checkPermissions)(t,E)})).then((function(){return s(d,E).then((function(){u({type:a.SHOW_LOADER,isLoaderVisible:!1}),u({type:a.CHANGE_MODE,mode:a.Mode.CALL})}))})).catch((function(r){e.isInActiveCall=!1,u({type:a.SHOW_LOADER,isLoaderVisible:!1}),R(r,t,e,!0,n,u)})):Promise.resolve().then((function(){u({type:a.SHOW_LOADER,isLoaderVisible:!0})})).then((function(){return N(e)})).then((function(){return P(t,e,i,h,u)})).then((function(){return(0,c.checkPermissions)(t,E)})).then((function(){return s(d,E)})).then((function(e){var t=e.id;return(0,o.getConversationsByCall)([t])})).then((function(e){var t=e.items,n=(0,r.__read)(t,1)[0].peer.id;return M(i,n,p).then((function(e){return(0,l.preloadImagesFromResponse)(e)})),n})).catch((function(e){var t,n;if(8===(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.error_code))return 0;if(951===(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.error_code))return 0;throw e})).then((function(e){u({type:a.SHOW_LOADER,isLoaderVisible:!1}),u({type:a.CHANGE_MODE,mode:a.Mode.CALL,peerId:e}),v&&u({type:a.SET_TRANSLATION,data:{deferredId:v}}),e&&L(i,e,p),g.callStats.logEvent({call_event_type:a.CallActionEventType.GROUP_CALL_JOINED,session_id:i.getState().callData.callId,peer_id:null!=e?e:0,is_group_call:!0,source:_,group_call_users_count:(0,A.getActiveParticipantsCount)(i.getState())})})).catch((function(r){e.isInActiveCall=!1,u({type:a.SHOW_LOADER,isLoaderVisible:!1}),R(r,t,e,!0,n,u)})))}}(e,t,T,S,V),e.showJoinPopup=function(e,t,n){var l=n.dispatch;return function(s,c){var u=n.getState().mode;return u===a.Mode.CALL||u===a.Mode.INCOMING?Promise.reject(a.CallErrorType.ALREADY_IN_CALL).catch((function(){l({type:a.ERROR,text:t("calls_already_in_call_error")})})):(l({type:a.SHOW_LOADER,isLoaderVisible:!0}),(0,o.getJoinLinkDetails)(s).then(i.normalizePreviewData.bind(null,t)).then((function(e){l({type:a.SHOW_LOADER,isLoaderVisible:!1}),l({type:a.JOIN,data:(0,r.__assign)((0,r.__assign)({},e),{entryPoint:c})})})).catch((function(n){var r;e.eventHandlers.onError&&n&&e.eventHandlers.onError(n),e.debug&&console.warn("getJoinLinkDetails",n);var o=(0,i.getTextForApiErrorByCode)(null===(r=null==n?void 0:n.error)||void 0===r?void 0:r.error_code,!0,t);console.error(o),l({type:a.SHOW_LOADER,isLoaderVisible:!1}),l({type:a.ERROR,text:o,handleType:a.ErrorHandleType.FATAL})})))}}(e,T,S),e.acceptCall=function(e,t,n,r){var o=r.dispatch;return function(i,l){var s=r.getState(),u=s.peer,d=s.callData,p=(0,f.getMediaOptions)({video:i,audio:l});return(0,c.checkPermissions)(t,p).then((function(){return t.acceptCall(p)})).then((function(t){var n=t.acceptTime;o({type:a.CHANGE_MODE,mode:a.Mode.CALL,ts:n}),e.isInActiveCall=!0,g.callStats.logEvent({call_event_type:a.CallActionEventType.INCOMING_CALL_ACCEPTED,session_id:d.callId,peer_id:u,is_group_call:(0,f.isGroupCallByPeer)(u),reason:i?a.CallType.VIDEO:a.CallType.AUDIO})})).catch((function(t){o({type:a.ERROR,text:(0,v.getPermissionsErrorMessage)(i,!0,n),handleType:a.ErrorHandleType.DECLINE}),e.eventHandlers.onError&&t&&e.eventHandlers.onError(t),(0,C.debugMessage)(C.DebugMessageType.ERROR,t),console.error(t)}))}}(e,t,T,S),e.showCallByNamePopup=function(e,t,n,r){var o=r.dispatch;return function(e,t,i){var l=r.getState().mode;return l===a.Mode.CALL||l===a.Mode.INCOMING?Promise.reject(a.CallErrorType.ALREADY_IN_CALL).catch((function(){o({type:a.ERROR,text:n("calls_already_in_call_error")})})):Promise.resolve().then((function(){o({type:a.SHOW_LOADER,isLoaderVisible:!0})})).then((function(){o({type:a.SHOW_LOADER,isLoaderVisible:!1}),o({type:a.CALL_BY_NAME,data:{peerId:e,joinLink:i,entryPoint:t}})})).catch((function(){o({type:a.SHOW_LOADER,isLoaderVisible:!1})}))}}(0,0,T,S),e.showCreateCallByLinkPopup=function(e,t,n,r){var o=r.dispatch;return function(e){var t=r.getState().mode;return t===a.Mode.CALL||t===a.Mode.INCOMING?Promise.reject(a.CallErrorType.ALREADY_IN_CALL).catch(I):Promise.resolve().then((function(){o({type:a.CHANGE_MODE,mode:a.Mode.CREATE_CALL,entryPoint:e})}))}}(0,0,0,S),e.store=S;var z=n.token?Promise.resolve(n.token):(0,u.fetchToken)(n.is_dev);return z.then((function(n){return t.init(W).then((function(){U.config.debugLog&&e.setDebug(!0)})).then((function(){return function(n){return Promise.resolve().then((function(){return(0,A.isParticipantAnonym)(S.getState().me)?Promise.resolve():t.authorize(n).then((function(){return(0,u.saveLocalToken)(n)})).then((function(){return e.authorized=!0})).catch((function(e){throw(0,u.removeLocalToken)(),e}))}))}(n)}))}))}function I(e){switch(e){case a.CallErrorType.ALREADY_IN_CALL:console.log("Already in call");break;default:console.log(e)}}function k(e,t,n){return function(e,t,n){return(0,o.getCallAuthToken)(n.getState().isDev).then((function(n){var r=n.token;return e.authorize(r).then((function(){return(0,u.saveLocalToken)(r)})).then((function(){return t.authorized=!0}))}))}(e,t,n).catch((function(e){t.eventHandlers.onError&&e&&t.eventHandlers.onError(e),console.error("Could not authorize with token request",e)}))}function N(e){return new Promise((function(t){e.initializing.finally((function(){t()}))}))}function P(e,t,n,r,i,l){return void 0===l&&(l=!1),new Promise((function(s,c){r||t.authorizedGroupId||s(),r&&t.authorizedGroupId===r&&s(),l||(g.callStats.setEventCommonData(),i({type:a.SET_GROUP_MEMBERS,groupMembersCount:0,groupMembers:[],unableToCallGroupMembersIds:[]})),(0,o.getCallAuthToken)(n.getState().isDev,r).then((function(n){var u=n.token;e.authorize(u).then((function(){t.authorizedGroupId=r,l?s():r?(0,o.getGroupById)(-r).then((function(e){if(e.groups){var t=e.groups[0];i({type:a.SET_GROUP,groupId:r,meGroup:(0,S.normalizeGroup)(t)}),g.callStats.setEventCommonData({group_id:r}),s()}})).catch((function(e){c(e)})):s()}))}))}))}function D(e,t,n,r,a,o){void 0===a&&(a=0),void 0===o&&(o=[]);var l=(0,i.createPayload)(a,r);if(!a)return t.callTo(void 0,r,l,!0);if(!(0,f.isGroupCallByPeer)(a))return H(e,n,a).then((function(e){return t.forceRelayPolicy(e),t.callTo(a.toString(),r,l)}));var s=o.filter((function(e){return e=Number(e),(0,p.isUserPeer)(e)&&e!==n.getState().me}));return t.callTo(s,r,l,!0)}function M(e,t,n){var l=e.dispatch;return!!n||t?(n?Promise.resolve((0,i.convertClientData)(n)):(0,o.retryLoadCallPeers)(t).then(i.convertServerData)).then((function(e){var n=(0,r.__read)(e,3),o=n[0],i=n[1],s=n[2];return(0,h.setActiveCallData)(l,s||o),l({type:a.LOAD_PEERS,conversation:o,members:i,peerId:t}),e})):Promise.reject("Cannot load data")}function L(e,t,n){var s=e.dispatch;return!!n&&t?(0,o.retryLoadCallPeers)(t).then((function(e){var t=(0,r.__read)((0,i.convertServerData)(e),2),n=t[0],a=t[1];return(0,h.setActiveCallData)(s,e.items[0]),(0,l.preloadImagesFromResponse)([n,a])})).then((function(e){var t=(0,r.__read)(e,2),n=t[0],o=t[1];s({type:a.LOAD_PEERS,conversation:n,members:o})})):Promise.resolve()}function O(e,t,n){switch(!0){case function(e){var t=e||{},n=t.hangup,r=t.message;return!(!n||!r)}(e):case function(e){var t=e||{},n=t.hangup;return t.message&&void 0===n}(e):return(0,i.getTextForServerError)(e.message,t,n);case function(e){var t;return["TypeError","SyntaxError","RangeError","EvalError","URIError"].includes(null===(t=null==e?void 0:e.__proto__)||void 0===t?void 0:t.name)}(e):return n("calls_error");case function(e){return!!e.error_msg}(e):return(0,i.getTextForServerError)(e.error_msg,t,n);case function(e){return"number"==typeof e}(e):return(0,i.getTextForClientError)(e,t,n);case function(e){return!!e}(e):default:return n("calls_sorry_error")}}function R(e,t,n,r,o,i){var l,s;try{var c=O(e,r,o);t.hangup(),n.eventHandlers.onError&&e&&n.eventHandlers.onError(e),(0,C.debugMessage)(C.DebugMessageType.ERROR,e),console.error(e),i({type:a.ERROR,text:c,handleType:a.ErrorHandleType.FATAL}),(null===(l=n.eventHandlers)||void 0===l?void 0:l.onErrorStartCall)&&(null===(s=n.eventHandlers)||void 0===s||s.onErrorStartCall())}catch(n){throw(0,C.debugMessage)(C.DebugMessageType.ERROR,n),console.error(n),t.hangup(),e}}function x(e,t,n,r,o){var i,l,s=Object.keys(e.screenSharers).filter((function(t){return e.screenSharers[t]})).length,c=function(n,r){var o=function(e){t({type:a.TOGGLE_ORATOR_MODE,isOratorMode:e})},i=function(e){t({type:a.SET_PINNED_PARTICIPANT,pinnedParticipant:e})};n&&!e.isOratorMode&&o(!0),!n&&e.screenSharingNeedDisableOratorModeAfterStop&&o(!1),t({type:a.SET_SCREEN_SHARING_PINNED_PARTICIPANT,screenSharingPinnedParticipant:r,screenSharingNeedDisableOratorModeAfterStop:!e.isOratorMode,screenSharingOldPinnedParticipant:e.pinnedParticipant}),r&&e.pinnedParticipant&&i(null),r||e.pinnedParticipant||!e.screenSharingOldPinnedParticipant||i(e.screenSharingOldPinnedParticipant)};0===s&&n?c(!0,r):1!==s||n||c(!(!e.adminPinnedParticipant&&!e.pinnedParticipant),null),!!(null===(l=null===(i=e.participants[r])||void 0===i?void 0:i.mediaSettings)||void 0===l?void 0:l.isScreenSharingEnabled)!==n&&t({type:a.SET_SCREEN_SHARER,participantId:r,isScreenSharingEnabled:n}),n&&o&&t({type:a.CALL_NOTIFICATION,notification:{type:a.NotificationType.SCREEN_SHARING_STARTED,data:r}})}function B(e){var t,n;return e.hand?(0,r.__assign)((0,r.__assign)({},e),{hand:{state:(null===(t=null==e?void 0:e.hand)||void 0===t?void 0:t.state)===a.SdkHandType.RAISED,ts:null===(n=null==e?void 0:e.hand)||void 0===n?void 0:n.ts}}):e}function H(e,t,n){var r=t.getState();return r.ipSettingEnabled&&"all"!==r.privacySettings.callsIp?(0,p.isChatPeer)(n)?Promise.resolve(!0):e.isFriend?Promise.resolve(!e.isFriend(n)):Object.keys(r.friendsCache).length>0?Promise.resolve(!r.friendsCache[n]):(0,i.exponentialRetry)(h.loadFriendsAction)(e,r,t.dispatch).then((function(){return H(e,t,n)})):Promise.resolve(!1)}},662727:(e,t,n)=>{"use strict";n.d(t,{getCallTimer:()=>p,getHangupStatus:()=>f,getCallStatus:()=>m});var r=n(121255),a=n(52777),o=n(298811),i=n(667294),l=n(464380),s=n(670778),c=n(580248),u=n(745284),d=n(697483);function p(e){return e?i.createElement(a.CallTimer,{duration:(0,o.calculateCallDuration)(e)}):null}function f(e,t){if(e.hangupType)switch(e.hangupType){case r.HANGUP_TYPE_BUSY:return t("calls_busy");case r.HANGUP_TYPE_CALLEE_IS_OFFLINE:return t("calls_callee_is_offline");case r.HANGUP_TYPE_REJECTED:return t("calls_rejected_status");case r.HANGUP_TYPE_CANCELED:case r.HANGUP_TYPE_MISSED:case r.HANGUP_TYPE_HUNGUP:case r.HANGUP_TYPE_REMOVED:return null;case r.HANGUP_TYPE_CALLER_IS_BLOCKED:case r.HANGUP_TYPE_EXTERNAL_API_ERROR:case r.HANGUP_TYPE_FAILED:case r.HANGUP_TYPE_NOT_FRIENDS:case r.HANGUP_TYPE_OLD_VERSION:case r.HANGUP_TYPE_SERVICE_DISABLED:case r.HANGUP_TYPE_UNKNOWN_ERROR:case r.HANGUP_TYPE_UNSUPPORTED:return t("calls_error")}return null}var m=function(e,t){return e?f(e,t)||function(e,t){var n,r=e.participants[t];return r&&r.status===l.ParticipantStatus.CONNECTED||r&&r.status===l.ParticipantStatus.WAITING_HALL||(0,d.getActiveParticipantsCount)(e)<2?null:i.createElement(s.ParticipantStatusContainer,{status:null!==(n=null==r?void 0:r.status)&&void 0!==n?n:l.ParticipantStatus.WAITING})}(e,(0,u.isGroupCallByPeer)(e.peer)?e.me:e.peer)||function(e,t){return void 0===((0,u.isGroupCallByPeer)(e.peer)?e.callData.ts:e.callData.localTimeStamp)?i.createElement(c.default,null,t("calls_status_waiting")):null}(e,t):""}},387691:(e,t,n)=>{"use strict";n.d(t,{localVolumeDetectorGenerator:()=>a,volumesDetectorGenerator:()=>o});var r=n(570655);function a(e){var t=e.onVolumeLevelReached,n=e.needCheckMicEnabled,a=e.vectorLength,o=e.volumeLevelDetection,i=e.callbackFactorStep,l=e.sensitivityCoefficient,s=e.onVolumeLevelUpdated,c=e.debugCallback,u=function(e){var t=[],n=0;return function(r){if(t.push(r),n+=r,t.length>e){var a=t.shift();n-=a||0}return n/t.length}}(a),d=0,p=!1;return function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];c&&c(e);var f=(0,r.__read)(e,2),m=f[0],_=f[1],g=m>o;p!==g&&s&&s(g),p=g,0!==d&&_&&(d=0);var h=u(m);n&&_||m/h>(1+d)/l&&m>o&&(d+=i,t())}}function o(e){var t=e.onUpdate,n=e.volumeLevelDetection,a=e.debugCallback,o={},s=[],c={},u=[];return function(){for(var e=[],d=0;d<arguments.length;d++)e[d]=arguments[d];a&&a(e);var p=(0,r.__read)(e,1),f=p[0];c=Object.keys(c).reduce((function(e,t){return c[t]-1>0&&(e[t]=c[t]-1),e}),{});var m=f.reduce((function(e,t){var r=t.uid.id;return t.volume>n&&(e[r]=!0,c[r]=3),e}),{});u=Object.keys(c);var _=!1,g={speakers:null,speakersInHeader:null};i(o,m)||(g.speakers=m,o=m,_=!0),l(s,u)||(g.speakersInHeader=u,s=u,_=!0),_&&t(g)}}function i(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((function(e){return t[e]}))}function l(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}},485525:(e,t,n)=>{"use strict";n.d(t,{wakeLockRequest:()=>c,wakeLockRelease:()=>u});var r,a="wakeLock"in navigator&&!0,o=null,i=!1,l=function(){null!==o&&"visible"===document.visibilityState&&c()},s=function(){var e,t,n,a;r||((r=document.createElement("video")).setAttribute("title","Wake lock"),r.setAttribute("playsinline",""),e=r,t="mp4",n="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA=",(a=document.createElement("source")).src=n,a.type="video/"+t,e.appendChild(a),r.addEventListener("loadedmetadata",(function(){r&&r.addEventListener("timeupdate",(function(){r&&r.currentTime>.5&&(r.currentTime=Math.random())}))}))),r.play().catch((function(){}))};function c(){if(!a)return s();i||(i=!0,document.addEventListener("visibilitychange",l));try{navigator.wakeLock.request("screen").then((function(e){(o=e).addEventListener("release",(function(){}))}))}catch(e){console.error(e.name+", "+e.message)}}function u(){a?o&&o.release().then((function(){o=null})):r&&r.pause()}},862191:(e,t,n)=>{"use strict";n.d(t,{callStatDataStorage:()=>l});var r=n(570655),a=n(464380),o={timeStart:null,entryPoint:null,startType:null,isGroupCall:!1,hadVideoEnabled:!1,isOutgoingCall:!1,connectionStep:null};function i(e){switch(e){case a.ParticipantStatus.WAITING:return 1;case a.ParticipantStatus.CONNECTING:return 2;case a.ParticipantStatus.CONNECTED:return 3;default:return 0}}var l={get:function(){return o},set:function(e){var t,n;o=(0,r.__assign)((0,r.__assign)((0,r.__assign)({},o),e),{connectionStep:(t=e.connectionStep,n=o.connectionStep,t&&i(t)&&i(t)>i(n)?t:n)})},reset:function(){o={timeStart:null,entryPoint:null,startType:null,isGroupCall:!1,hadVideoEnabled:!1,isOutgoingCall:!1,connectionStep:null}}}},614914:(e,t,n)=>{"use strict";n.d(t,{callStats:()=>i});var r=n(570655),a=n(697483),o="type_voip_call_item",i=new(function(){function e(){this.eventCommonData={}}return e.prototype.setActionStatCollector=function(e){this.actionStatCollector=e},e.prototype.setEventCommonData=function(e){void 0===e&&(e={}),this.eventCommonData=e},e.prototype.logEvent=function(e){var t,n=e.peer_id,i=(0,a.isParticipantGroup)(n)?n:0,l=(0,r.__assign)((0,r.__assign)((0,r.__assign)({},e),{peer_id:e.peer_id.toString(),session_id:e.session_id||"",lib_version:"calls_v2",group_id:i}),this.eventCommonData);this.actionStatCollector&&this.actionStatCollector.logEvent(((t={type:o}).type_voip_call_item=l,t))},e}())},170794:(e,t,n)=>{"use strict";n.d(t,{setStatlogEventsHandler:()=>l,addCallStatEvent:()=>s});var r,a=n(121255),o=n(862191),i=n(464380);function l(e){r=e}function s(e,t,n,i){var l,s,u,d=o.callStatDataStorage.get(),p=d.startType,f=d.entryPoint,m=d.timeStart,_=d.isGroupCall,g=d.hadVideoEnabled,h=d.isOutgoingCall,v=!e||e===a.HANGUP_TYPE_HUNGUP&&!n,A={type:p&&function(e,t,n){var r;r=e===a.CallType.VIDEO?t?a.CallStatReachedType.GROUP_VIDEO:a.CallStatReachedType.VIDEO:n?t?a.CallStatReachedType.GROUP_AUDIO_TO_VIDEO:a.CallStatReachedType.AUDIO_TO_VIDEO:t?a.CallStatReachedType.GROUP_AUDIO:a.CallStatReachedType.AUDIO;return r}(p,_,g),result:v?a.CallStatResult.SUCCESS:a.CallStatResult.FAIL,failReason:v?null:c(e,n),callSource:f,totalDuration:m?Date.now()-m:0};h&&(i&&console.log(A),l=t,u=[(s=A).type||"",s.result,s.failReason||"",s.callSource||"",s.totalDuration],r&&r({name:"call_stats",value:l,keys:u}))}function c(e,t){var n=o.callStatDataStorage.get().isOutgoingCall,r=o.callStatDataStorage.get().connectionStep;switch(!0){case t:return a.CallStatFailReason.CONNECTION_LOST;case e===a.HANGUP_TYPE_CANCELED:return a.CallStatFailReason.LOCAL_DECLINE;case e===a.HANGUP_TYPE_REJECTED:return a.CallStatFailReason.REMOTE_DECLINE;case e===a.HANGUP_TYPE_BUSY:return a.CallStatFailReason.REMOTE_BUSY;case e===a.HANGUP_TYPE_MISSED:return n?a.CallStatFailReason.REMOTE_TIMEOUT:null;case r===i.ParticipantStatus.CONNECTING:return a.CallStatFailReason.REMOTE_FAILED_ACCEPT;case!r:return a.CallStatFailReason.REMOTE_NO_CONNECT;default:return null}}},525046:(e,t,n)=>{"use strict";n.d(t,{saveLocalToken:()=>i,removeLocalToken:()=>l,fetchToken:()=>s});var r=n(659397),a=n(329538),o="calls_token";function i(e){r.localStorage.setItem(o,e)}function l(){r.localStorage.removeItem(o)}function s(e){var t=r.localStorage.getItem(o);return t?Promise.resolve(t):(0,a.getCallAuthToken)(e).then((function(e){return e.token}))}},580248:(e,t,n)=>{"use strict";n.d(t,{default:()=>c});var r=n(570655),a=n(667294),o=n(45697),i=n.n(o),l=n(659397),s=function(e){var t=e.children,n=e.className,o=(0,r.__rest)(e,["children","className"]),i=(0,l.classNames)("ActivityIndicator",n);return a.createElement("span",(0,r.__assign)({},o,{className:i}),t)};s.propTypes={className:i().string,children:i().node};const c=s},685537:(e,t,n)=>{"use strict";n.d(t,{AvatarsStack:()=>i});var r=n(667294),a=n(211941),o=n(906942),i=function(e){var t=e.items;return r.createElement("figure",{className:"AvatarsStack"},r.createElement(a.default,null,r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("clipPath",{id:"users-mask"},r.createElement("path",{d:"M43.56 8.25a25 25 0 100 33.5A27.88 27.88 0 0138 25c0-6.28 2.07-12.08 5.56-16.75z"}))))),t.map((function(e,t){return"src"in e?r.createElement("img",{src:e.src,className:"AvatarsStack__item",alt:e.alt,key:e.key||t}):r.createElement(o.ConversationNoPhoto,{text:e.text,id:e.id,size:"50",className:"AvatarsStack__item",key:e.key||t})})))}},622206:(e,t,n)=>{"use strict";n.d(t,{AvatarsStackNoSvgSizes:()=>r,AvatarsStackNoSvg:()=>l});var r,a=n(667294),o=n(906942),i=n(659397);!function(e){e.SIZE_50="50",e.SIZE_34="34",e.SIZE_24="24"}(r||(r={}));var l=function(e){var t=e.items,n=e.size,l=void 0===n?r.SIZE_50:n;return a.createElement("div",{className:"AvatarsStackNoSvg"},t.map((function(e,t){var n=(0,i.classNames)("AvatarsStackNoSvg__item","AvatarsStackNoSvg__item--"+l);return"src"in e?a.createElement("img",{src:e.src,className:n,alt:e.alt,key:e.key||t}):a.createElement(o.ConversationNoPhoto,{text:e.text,id:e.id,size:l,className:n,key:e.key||t})})))}},20845:(e,t,n)=>{"use strict";n.d(t,{DivBlockSkeleton:()=>o});var r=n(667294),a=n(911099),o=function(e){var t=e.height,n=e.classNames,o=void 0===n?"":n,i=(0,r.useMemo)((function(){return{height:t}}),[t]);return r.createElement("div",{className:(0,a.classNames)("DivBlockSkeleton",o),style:i})}},607691:(e,t,n)=>{"use strict";n.d(t,{ListCopyControl:()=>c});var r=n(570655),a=n(667294),o=n(58600),i=n(326542),l=n(629142),s=n(659397),c=function(e){var t=e.value,n=e.copyText,c=e.doneText,u=e.className,d=(0,r.__read)((0,a.useState)(!1),2),p=d[0],f=d[1],m=(0,a.useCallback)((function(){f(!0)}),[]),_=(0,a.useCallback)((function(){f(!1)}),[]),g=(0,s.classNames)("ListCopyControl",u,{"ListCopyControl--copied":p});return a.createElement("div",{className:g},a.createElement(o.CopyText,{text:t,onCopyDone:m},a.createElement(i.default,{className:"ListCopyControl__copyButton"},n)),a.createElement(l.default,{shown:p,callback:_,className:"ListCopyControl__copyDone"},c))}},295886:(e,t,n)=>{"use strict";n.d(t,{ListHeader:()=>o});var r=n(667294),a=n(659397),o=function(e){var t=e.headingElement,n=void 0===t?"h3":t,o=e.extra,i=e.right,l=e.className,s=e.children,c=n;return r.createElement("header",{className:(0,a.classNames)("ListHeader",l)},r.createElement(c,{className:"ListHeader__text"},s),r.createElement("span",{className:"ListHeader__extra"},o),i&&r.createElement("span",{className:"ListHeader__right"},i))}},489685:(e,t,n)=>{"use strict";n.d(t,{LinkIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t,{"aria-hidden":"true"}),a.createElement("path",{d:"M6.022 9.184a.837.837 0 01-1.187-.001 3.861 3.861 0 010-5.419l2.618-2.643a3.772 3.772 0 015.366 0c1.261 1.274 1.557 3.033.67 4.508-.296.49-.947.47-1.325.09-.275-.276-.254-.707-.077-1.019.465-.817.24-1.683-.456-2.379a2.094 2.094 0 00-2.997 0L6.023 4.956a2.143 2.143 0 00-.001 3.025.83.83 0 010 1.202zm1.95-3.166c.833.835.832 2.19-.001 3.025L5.36 11.68a2.094 2.094 0 01-2.998 0c-.695-.696-.91-1.555-.446-2.371.178-.313.199-.744-.076-1.019-.379-.38-1.03-.4-1.325.09-.888 1.474-.602 3.226.659 4.5a3.772 3.772 0 005.367 0l2.617-2.643a3.861 3.861 0 000-5.419.837.837 0 00-1.187 0 .83.83 0 000 1.2z"}))}},823694:(e,t,n)=>{"use strict";n.d(t,{PrivacyIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{d:"M4 9.6c0-.56 0-.84.109-1.054a1 1 0 01.437-.437C4.76 8 5.04 8 5.6 8h8.8c.56 0 .84 0 1.054.109a1 1 0 01.437.437C16 8.76 16 9.04 16 9.6v4.8c0 .56 0 .84-.109 1.054a1 1 0 01-.437.437C15.24 16 14.96 16 14.4 16H5.6c-.56 0-.84 0-1.054-.109a1 1 0 01-.437-.437C4 15.24 4 14.96 4 14.4V9.6z",fill:"#fff"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.2 6a2.2 2.2 0 00-4.4 0v4a2.2 2.2 0 104.4-.001V6zM10 2a4 4 0 00-4 4v4a4 4 0 108-.001V6A4 4 0 0010 2z",fill:"#fff"}))}},449608:(e,t,n)=>{"use strict";n.d(t,{TimeIcon:()=>o});var r=n(570655),a=n(667294),o=function(e){var t=(0,r.__rest)(e,[]);return a.createElement("svg",(0,r.__assign)({width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.8 8a6.2 6.2 0 1112.4 0A6.2 6.2 0 011.8 8zM0 8a8 8 0 1116 0A8 8 0 010 8zm8.9-3a.9.9 0 00-1.8 0v4a.9.9 0 00.498.805l2 1a.9.9 0 10.804-1.61L8.9 8.444V5z",fill:"#fff"}))}},605329:(e,t,n)=>{"use strict";n.d(t,{PageColumns:()=>a});var r=n(667294),a=function(e){var t=e.narrow,n=e.children;return r.createElement("div",{className:"wide_column_left"},r.createElement("div",{className:"narrow_column_wrap"},r.createElement("div",{className:"narrow_column",id:"narrow_column"},t)),r.createElement("div",{className:"wide_column_wrap"},r.createElement("div",{className:"wide_column",id:"wide_column"},n)))}},575003:(e,t,n)=>{"use strict";n.d(t,{RightMenu:()=>o});var r=n(667294),a=n(659397),o=function(e){var t=e.tabs,n=e.activeTab,o=e.onTabClick,i=e.loading,l=void 0!==i&&i,s=window.uiRightMenu,c=(0,r.useCallback)((function(e,r){e.preventDefault();var a=t.find((function(e){return e.id===r}));if(a){if(a.id===n)return;var i=a.ref.current;s.switchMenu(i),o(r,a.href)}}),[n]);return(0,r.useEffect)((function(){var e=t.find((function(e){return e.id===n}));if(e){var r=e.ref.current;s.switchMenu(r)}}),[n]),(0,r.useEffect)((function(){var e=t.find((function(e){return e.id===n}));if(e){var r=e.ref.current;l?s.showProgress(r):s.hideProgress(r)}}),[l,n]),r.createElement("div",{className:"page_block ui_rmenu ui_rmenu_pr",role:"list"},t.map((function(e){if(e.separator)return r.createElement("div",{key:e.id,className:"ui_rmenu_sep"});var t=e,n=t.id,o=t.ref,i=t.href,l=t.label,s=t.parentTab;return r.createElement("a",{key:n,className:(0,a.classNames)("ui_rmenu_item",{ui_rmenu_subitem:!!s}),ref:o,href:i,onClick:function(e){return c(e,n)}},r.createElement("span",null,l))})),r.createElement("div",{className:"ui_rmenu_slider _ui_rmenu_slider"}))}},641221:(e,t,n)=>{"use strict";n.d(t,{TooltipNew:()=>s});var r,a=n(570655),o=n(667294),i=n(617841),l=n(659397);function s(e){var t=e.children,n=e.content,s=e.position,c=void 0===s?"auto":s,u=e.align,d=void 0===u?"auto":u,p=e.appearance,f=void 0===p?"dark":p,m=e.open,_=void 0!==m&&m,g=e.onOpen,h=e.onClose,v=e.delay,A=void 0===v?50:v,E=(0,a.__rest)(e,["children","content","position","align","appearance","open","onOpen","onClose","delay"]),C=(0,a.__read)((0,o.useState)(_?r.OPENED:r.CLOSED),2),y=C[0],S=C[1],w=(0,o.useRef)(null);(0,o.useEffect)((function(){var e=null,t=null,n=function(){e&&(clearTimeout(e),e=null)},a=function(){n(),e=window.setTimeout((function(){S(r.OPENED),g&&g()}),A)},o=function(){n(),t=window.setTimeout((function(){y===r.OPENED?S(r.IS_CLOSING):(S(r.CLOSED),h&&h())}),0)};return w&&w.current&&(w.current.addEventListener("mouseenter",a),w.current.addEventListener("mouseleave",o)),function(){w&&w.current&&(w.current.removeEventListener("mouseenter",a),w.current.removeEventListener("mouseleave",o)),n(),t&&(window.clearTimeout(t),t=null)}}),[w,y]),(0,o.useEffect)((function(){var e=_?r.OPENED:r.CLOSED;y!==e&&S(e)}),[_]);var b=(0,o.useCallback)((function(){y===r.IS_CLOSING&&(S(r.CLOSED),h&&h())}),[y]),T=(0,l.classNames)("TooltipNew",{"TooltipNew--removed":"isClosing"===y,"TooltipNew--dark":"dark"===f,"TooltipNew--light":"light"===f}),I=o.createElement("div",{className:T,onTransitionEnd:b},n);return o.createElement(i.Popper,(0,a.__assign)({open:y!==r.CLOSED,position:c,align:d,content:I,ref:w},E),t)}!function(e){e.OPENED="opened",e.IS_CLOSING="isClosing",e.CLOSED="closed"}(r||(r={}))},211941:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(667294);const a=function(e){var t=e.children;return r.createElement("div",{className:"VisuallyHidden"},t)}}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=r,e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,r,a]=e[u],l=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(a,i),a},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.e=()=>Promise.resolve(),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={4387:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,l,s]=n,c=0;for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(s)var u=s(o);for(t&&t(n);c<i.length;c++)a=i[c],o.o(e,a)&&e[a]&&e[a][0](),e[i[c]]=0;return o.O(u)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[8592,4509,1001,2070,9429,1690],(()=>o(366206)));i=o.O(i)})();