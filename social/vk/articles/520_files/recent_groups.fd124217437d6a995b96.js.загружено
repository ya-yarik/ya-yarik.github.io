(()=>{"use strict";var e,t,i,r={304418:(e,t,i)=>{i.d(t,{uiGetGallery:()=>l,UIGallery:()=>o});var r=i(257451),s=(0,r.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})));function l(e){var t=domData(ge(e),"gallery-id");return t&&s().galleries[t]}class o{constructor(e,t){if(!e)throw new Error("No element was provided for UIGallery");if(e=ge(e),!hasClass(e,"ui_gallery"))throw new Error("Provided incorrect element for UIGallery");var i=l(e);if(i)return i;this._opts=extend({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1},t),this._id=s().incIndex,s().incIndex+=1,this._el=e,this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._itemWidth=getSize(this._items[0])[0],this._itemOffset=intval(getStyle(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=intval(getStyle(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=geByClass1("ui_gallery__inner_cont",this._el),this._inner=geByClass1("ui_gallery__inner",this._el),this._scroll=function(){var e={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return e;if(!cur._scrollInfo){var t=se('<div style="position: fixed; left: -1000; width: 0; overflow: scroll">x</div>');ge("content").appendChild(t);var i=t.scrollLeft;e.rtl=vk.rtl,e.backward=i>0,t.scrollLeft=1e3,e.delta=t.scrollLeft===i?-1:1,e.negative=!e.backward&&e.delta<0,e.rtlSame=e.rtl&&!e.backward&&!e.negative,re(t),cur._scrollInfo=e}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[]},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),domData(this._el,"gallery-id",this._id),s().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&addEvent(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this))}_initArrows(){this._opts.noArrows?addClass(this._el,"ui_gallery_no_arrows"):(this._leftArrow=geByClass1("ui_gallery__arrow_left",this._el),this._rightArrow=geByClass1("ui_gallery__arrow_right",this._el),this._arrowWidth=getSize(this._leftArrow)[0],addEvent(this._leftArrow,"click",this._onArrowScroll.bind(this,-1)),addEvent(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),addEvent(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),addEvent(this._rightArrow,"click",this._onArrowScroll.bind(this,1)),addEvent(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),addEvent(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(e){if(this._opts.scrollX||this._opts.scrollY){var t;if("wheel"==e.type)if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){if(!this._opts.scrollY)return;t=-e.deltaY}else{if(!this._opts.scrollX)return;t=-e.deltaX}else if(void 0!==e.wheelDeltaY){if(!this._opts.scrollY)return;t=e.wheelDeltaY}else if(void 0!==e.wheelDelta)t=e.wheelDelta;else{if(!e.detail||1!==e.axis)return;t=-e.detail}t=this._scroll.rtlSame?-t:t,Math.abs(t)>=120&&(t=74*Math.max(-1,Math.min(1,t))),this._innerCont.scrollLeft-=t,this._checkItemsAfterScroll(this._innerCont.scrollLeft),cancelEvent(e)}}_onArrowScroll(e,t){if(!this._opts.noArrows){var i=this._innerCont.scrollLeft+(this._scroll.rtlSame?-e:e)*(this._width-2*this._arrowWidth),r=this._innerCont.scrollWidth-this._width;this._scroll.negative?(i=Math.min(i,0),i=Math.abs(i)):i=Math.max(0,i),i=Math.min(r,i);var s=this._scroll.negative||this._scroll.rtlSame?-e:e;if(s>0&&i<r)i=Math.floor(i/this._itemFullWidth)*this._itemFullWidth;else if(s<0&&i>0){i=Math.floor(i/this._itemFullWidth)*this._itemFullWidth}if(0===i||i===r){var l=this._innerCont.scrollWidth;addClass(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),i&&(i+=e*(this._innerCont.scrollWidth-l))}this._scroll.negative&&(i=-i),animate(this._innerCont,{scrollLeft:i},{duration:Math.abs(this._innerCont.scrollLeft-i)+50,transition:Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(i),setTimeout((()=>removeClass(this._inner,"ui_gallery__inner_shift_instant")),0),cancelEvent(t)}}_checkItemsAfterScroll(e,t){if(this._scroll.negative&&(e=Math.abs(e)),this._opts.markOutside||this._opts.onViewItem){var i,r=this._itemWidth/3,s=(this._scroll.backward?this._inner.scrollWidth-this._width-e:e)-this._scrollOffset,l=e&&Math.floor(s/this._itemFullWidth),o=l*this._itemFullWidth+2*r;i=this._scroll.backward?e+this._width<this._inner.scrollWidth-o:e>o;var n,a=Math.min(this._items.length-1,Math.floor((s+this._width)/this._itemFullWidth)),_=a*this._itemFullWidth+2*r;if(n=this._scroll.backward?e>this._inner.scrollWidth-_:e+this._width<_,this._opts.onViewItem){var h=i?Math.min(this._items.length-1,l+1):l,c=n?Math.max(0,a-1):a;if(t||h!==this._visible.left||c!==this._visible.right){for(var u=h;u<=c;u++)(this._visible.left<0||t&&!inArray(this._items[u],this._visible.items)||u<this._visible.left||u>this._visible.right)&&this._opts.onViewItem(this._items[u],u);this._visible.left=h,this._visible.right=c,this._visible.items=this._items.slice(h,c+1)}}this._opts.markOutside&&(t?(geByClass("ui_gallery_item_outside",this._inner).forEach((e=>{removeClass(e,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((l!==this._outside.left||!i)&&this._outside.left>=0&&(removeClass(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(a!==this._outside.right||!n)&&this._outside.right>=0&&(removeClass(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),i&&l!==this._outside.left&&(addClass(this._items[l],"ui_gallery_item_outside"),this._outside.left=l),n&&a!==this._outside.right&&(addClass(this._items[a],"ui_gallery_item_outside"),this._outside.right=a))}if(!this._opts.noArrows){var d=e>0,m=e+this._width<this._inner.scrollWidth;toggleClass(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?m:d),toggleClass(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?d:m)}(!this._scroll.backward&&this._inner.scrollWidth-e-this._width<1e3||this._scroll.backward&&e<1e3)&&this._onLoadMore()}_onArrowMouseOver(e){this._opts.noArrows||addClass(this._inner,"ui_gallery__inner_shift_"+e)}_onArrowMouseOut(){this._opts.noArrows||(removeClass(this._inner,"ui_gallery__inner_shift_left"),removeClass(this._inner,"ui_gallery__inner_shift_right"))}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(e,t){e=e||[],this.addItems(e),this._finised=!!t||!e.length,this._loadingMore=!1}addItems(e,t){if((e=e||[]).length){var i=t>=0&&t<this._items.length?this._items[t]:null;e.forEach((e=>{i?domInsertBefore(e,i):this._inner.appendChild(e)})),this.refresh()}}destroy(){removeEvent(this._innerCont),removeEvent(this._leftArrow),removeEvent(this._rightArrow),domData(this._el,"gallery-id",null),delete s().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),re(this._el)}removeItem(e){return isNumeric(e)&&(e=this._items[e]),!(!e||!inArray(e,this._items))&&(re(e),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((e,t)=>[e,this._visible.left+t]))}}},890071:(e,t,i)=>{(0,i(552047).registerRecentGroups)();try{window.stManager.done(window.jsc("web/recent_groups.js"))}catch(e){}},552047:(e,t,i)=>{i.d(t,{registerRecentGroups:()=>_});var r=i(973935),s=i(667294),l=i(40897),o=i(328029),n=i(414914),a="RecentGroups",_=function(){return(0,l.registerReactApplication)(a,(function(e){var t=(0,n.ge)(""+l.rootId+a);t&&r.render(s.createElement(o.RecentGroupsBlock,{totalCount:e.totalCount}),t)}))}},328029:(e,t,i)=>{i.d(t,{RecentGroupsBlock:()=>a});var r=i(570655),s=i(667294),l=i(325710),o=i(529314),n=i(559474),a=function(e){var t=e.totalCount,i=(0,r.__read)((0,s.useState)(!1),2),a=i[0],_=i[1],h=(0,r.__read)((0,s.useState)(!1),2),c=h[0],u=h[1],d=(0,r.__read)((0,s.useState)([]),2),m=d[0],f=d[1];(0,s.useEffect)((function(){l.RecentGroupsService.loadRecentGroups().then((function(e){var t=e.items;f(t)})).catch((function(){return _(!0)})).finally((function(){return u(!0)}))}),[]);var g=(0,s.useCallback)((function(){_(!0),l.RecentGroupsService.removeAll().then((function(){return f([])})).catch((function(){return _(!1)}))}),[]);return s.createElement(s.Fragment,null,!a&&s.createElement("div",{className:"page_block RecentGroups__main"},c&&s.createElement(o.RecentGroupsFull,{items:m,onClear:g}),!c&&s.createElement(n.RecentGroupsSkeleton,{totalCount:t})))}},325710:(e,t,i)=>{i.d(t,{RecentGroupsService:()=>s});var r=i(262643),s={loadRecentGroups:function(){return(0,r.api)("groups.getRecents",{fields:"photo_200,name,screen_name,id"})},removeAll:function(){return(0,r.api)("groups.removeRecents",{})}}},529314:(e,t,i)=>{i.d(t,{RecentGroupsFull:()=>n});var r=i(667294),s=i(263234),l=i(636636),o=i(939029),n=function(e){var t=e.items,i=e.onClear,n=(0,r.useCallback)((function(e){return r.createElement(o.RecentGroupsItem,{item:e})}),[]);return r.createElement(r.Fragment,null,r.createElement(s.RecentGroupsHeader,{onClear:i}),r.createElement(l.RecentGroupsGallery,{renderItems:n,items:t}))}},636636:(e,t,i)=>{i.d(t,{RecentGroupsGallery:()=>l});var r=i(667294),s=i(304418),l=function(e){var t=e.items,i=e.renderItems,l=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(null!==l.current){var e=new s.UIGallery(l.current);return function(){return e.destroy()}}}),[]),r.createElement("div",{className:"ui_gallery",ref:l},r.createElement("div",{className:"ui_gallery__arrow ui_gallery__arrow_left"}),r.createElement("div",{className:"ui_gallery__inner_cont"},r.createElement("div",{className:"ui_gallery__inner"},t.map(i))),r.createElement("div",{className:"ui_gallery__arrow ui_gallery__arrow_right"}))}},263234:(e,t,i)=>{i.d(t,{RecentGroupsHeader:()=>l});var r=i(667294),s=i(41437),l=function(e){var t=e.onClear;return r.createElement("div",{className:"groups_page_block__header"},(0,s.getLang)("groups_recent_groups_title"),r.createElement("a",{className:"groups_page_block__show_all_link",onClick:t},(0,s.getLang)("groups_recent_groups_clear")))}},939029:(e,t,i)=>{i.d(t,{RecentGroupsItem:()=>l});var r=i(667294),s=i(581685),l=function(e){var t=e.item;return r.createElement("a",{href:"/"+t.screen_name,key:t.id,className:"ui_gallery_item RecentGroups__item"},r.createElement("div",{className:"RecentGroups__avatar"},r.createElement(s.default,{photo:t.photo_200,title:t.name})),r.createElement("span",{className:"RecentGroups__name"},t.name))}},936222:(e,t,i)=>{i.d(t,{RecentGroupsItemSkeleton:()=>s});var r=i(667294),s=function(){return r.createElement("div",{className:"ui_gallery_item RecentGroups__item"},r.createElement("div",{className:"RecentGroups__avatar RecentGroups__skeletonAvatar"}),r.createElement("div",{className:"RecentGroups__skeletonName"}))}},559474:(e,t,i)=>{i.d(t,{RecentGroupsSkeleton:()=>o});var r=i(667294),s=i(636636),l=i(936222),o=function(e){var t=e.totalCount,i=(0,r.useCallback)((function(){return r.createElement(l.RecentGroupsItemSkeleton,null)}),[]),o=Array.from(new Array(t));return r.createElement(r.Fragment,null,r.createElement("div",{className:"groups_page_block__header"},r.createElement("div",{className:"RecentGroups__skeletonTitle"})),r.createElement(s.RecentGroupsGallery,{renderItems:i,items:o}))}}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return r[e].call(i.exports,i,i.exports,l),i.exports}l.m=r,e=[],l.O=(t,i,r,s)=>{if(!i){var o=1/0;for(h=0;h<e.length;h++){for(var[i,r,s]=e[h],n=!0,a=0;a<i.length;a++)(!1&s||o>=s)&&Object.keys(l.O).every((e=>l.O[e](i[a])))?i.splice(a--,1):(n=!1,s<o&&(o=s));if(n){e.splice(h--,1);var _=r();void 0!==_&&(t=_)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,r,s]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var s=Object.create(null);l.r(s);var o={};t=t||[null,i({}),i([]),i(i)];for(var n=2&r&&e;"object"==typeof n&&!~t.indexOf(n);n=i(n))Object.getOwnPropertyNames(n).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,l.d(s,o),s},l.d=(e,t)=>{for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},l.e=()=>Promise.resolve(),l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={2056:0};l.O.j=t=>0===e[t];var t=(t,i)=>{var r,s,[o,n,a]=i,_=0;for(r in n)l.o(n,r)&&(l.m[r]=n[r]);if(a)var h=a(l);for(t&&t(i);_<o.length;_++)s=o[_],l.o(e,s)&&e[s]&&e[s][0](),e[o[_]]=0;return l.O(h)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var o=l.O(void 0,[8592,4509],(()=>l(890071)));o=l.O(o)})();