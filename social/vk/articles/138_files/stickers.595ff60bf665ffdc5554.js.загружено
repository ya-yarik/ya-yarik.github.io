(()=>{"use strict";var t,e,i,r={133764:(t,e,i)=>{i.d(e,{Stickers:()=>a});i(59357);var r=i(229804),o={},n=(t,e,i,r)=>{delete o[e],1===r?Emoji.favorite.addFavoriteSticker(t,e,i):-1===r&&Emoji.favorite.deleteFavoriteSticker(t,e,i)};var a={toggleFavorite:function(t,e,i){if(e&&e.stopPropagation(),!hasClass(t,"on")&&Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers.length>=Emoji.favoriteLimit&&!Emoji.favoriteLimitNoticed){var r=langStr(getLang("purchases_stickers_favorite_limit_notice"),"%s",Emoji.favoriteLimit);return setTimeout(window.showFastBox(getLang("global_error"),r).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0,!1}var a=attr(t,"data-sticker-id"),s=attr(t,"data-hash");return!(!a||!s)&&(!o[a]&&(o[a]=1,toggleClass(t,"on"),void ajax.post("/stickers.php",{act:"toggle_favorite",sticker_id:a,hash:s},{onDone:n.pbind(i,a,t)})))},getStickerUrl:function(t,e){var i={id:t,size:e};if(window.isMVK){var o=String(e);return r.colorScheme.isDarkScheme()&&(o=o.replace(/b$/,"")+"b"),window.store.stickers&&rs(window.store.stickers.url_template,{id:t,size:o})}return getTemplate("stickers_sticker_url",i)}}},457865:(t,e,i)=>{i.d(e,{StickersAnimation:()=>r});i(66108),i(296253);var r=function(){var t,e,i,o=!1,n=!1,a={},s={},c={},u={};function l(t){var e=f(t),i=1;if(e){hasClass(t,"animation_play")||(hide(geByClass1("sticker_img",t)),addClass(t,"animation_play")),e.play();var r=attr(t,"data-loop-count");r=parseInt(r),isNaN(r)&&(r=3),-1!==r&&(!e._cbs.loopComplete||e._cbs.loopComplete&&0===e._cbs.loopComplete.length)&&e.addEventListener("loopComplete",(function o(n){i++;var a=!0;r>=i&&(a=!1),a&&(p(t,!1),""!==e._cbs.loopComplete&&e.removeEventListener("loopComplete",o),e.stop())}))}}function d(t){var e=attr(t,"data-uid");return e||(e=attr(t,"data-uid",Math.random().toString(32).substr(2))),e}function p(t,e){u[d(t)]=e}function f(t){var e=attr(t,"data-uniq-id");if(!geByClass1("svg_sticker_animation",t))return!1;var i=s[e];return i||!1}function h(t,e){var r=f(t);if(r)"function"==typeof e&&e(r);else{var o=attr(t,"data-uniq-id");if(!u[d(t)]){p(t,!0);var n=attr(t,"data-animation-path"),c=attr(t,"data-sticker-id"),l=!1;if(c&&(l=(a[c]||n)&&v(t)),l){var h=attr(t,"data-animation-class")||"",m={container:t,renderer:"svg",loop:!0,autoplay:!1,name:o,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:`svg_sticker_animation ${h}`}};a[c]?m.animationData=a[c]:m.path=n;var S=geByClass1("svg_sticker_animation",t);if(S&&re(S),r=i.loadAnimation(m),!a[c])return void r.addEventListener("data_ready",(function(){a[c]=r.animationData,s[o]=r,"function"==typeof e&&e(r)}))}"function"==typeof e&&(s[o]=r,"function"==typeof e&&e(r))}}}function m(){return e().then((t=>(i=t,t)))}return{init(t){e=t.animatorLoader},checkSettingsAndLoadInWeb:function(t){if(StickersSettings.getAutoplay()){var e=ge("fc_msg"+t),i=geByClass1("sticker_animation",e);r.loadAndPlaySticker(i)}},checkSettingsAndLoad:function(t){if(StickersSettings.getAutoplay()){var e=$(`.msg_id_${t} .sticker_animation`);r.loadAndPlaySticker(e)}},loadStickerInMvkIMAndPlay:function(t,e){var i="_msg"+t;e&&(i="msg_id_"+t);var o=geByClass1("sticker_animation",geByClass1(i));r.loadAndPlayStickerWithTimer(o,500)},loadAutoplayAnimationStickers:function(t){if(i){if(t){if(n)return;n=!0}if(!o){o=!0;var e=geByClass("sticker_animation_autoplay");e&&each(e,(function(t,e){h(e,(function(){l(e)}))})),o=!1}}else m().then((()=>{r.loadAutoplayAnimationStickers(t)}))},loadAndPlaySticker:function(t){t&&(i?requestAnimationFrame((()=>{h(t,(function(){l(t)}))})):m().then((()=>{r.loadAndPlaySticker(t)})))},loadAndPlayStickerWithTimer:function(t,e){if(t&&!c[t]){e||(e=1e3);var i=ge(t);hasClass(i,"sticker_animation_disabled_timer")||(c[t]=setTimeout((function(){!i&&(i=ge(t),hasClass(i,"sticker_animation_disabled_timer"))||(r.loadAndPlaySticker(i),clearTimeout(c[t]),c[t]=!1)}),e))}},reloadStickers:function(){s={}},touchStartSticker:function(e){e.addEventListener("contextmenu",r.preventContextMenu,!1),t=setTimeout((function(){r.loadAndPlaySticker(e)}),500)},touchEndSticker:function(){t&&clearTimeout(t)},preventContextMenu:function(t){t.preventDefault(),t.stopPropagation()}};function v(t){var e=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom;return e<window.innerHeight&&i>=0&&isVisible(t)}}()},457551:(t,e,i)=>{i.d(e,{StickersSettings:()=>r});var r={autoplay:0,setAutoplay:function(t){this.autoplay=t},getAutoplay:function(){return r.autoplay&&!r.isPreventAutoplayByCalls()},isPreventAutoplayByCalls:function(){return window.Calls&&window.Calls.isInActiveCall}}},609320:(t,e,i)=>{var r=i(651525),o=i(457551),n=i(133764);window.StickersAnimation=r.StickersAnimation,window.StickersSettings=o.StickersSettings,window.Stickers=n.Stickers;try{stManager.done(jsc("web/stickers.js"))}catch(t){}},651525:(t,e,i)=>{i.d(e,{StickersAnimation:()=>r.StickersAnimation});i(940851),i(296253);var r=i(457865),o=i(401346);r.StickersAnimation.init({animatorLoader:()=>Promise.resolve(o.default)})},229804:(t,e,i)=>{i.d(e,{colorScheme:()=>a});var r,o,n=i(427813);!function(t){t.Light="light",t.Dark="dark",t.Auto="auto"}(r||(r={})),function(t){t.Dark="space_gray",t.Light="bright_light"}(o||(o={}));var a,s=function(){function t(){this.currentMode="",this.subscribers=[],this.initSubscribers=[],this.isExecuted=!1,this.isModeSavingAllowed=!0,this.isSchemeSavingAllowed=!0}return t.prototype.init=function(e){var i=this;this.isExecuted||(this.schemesMap=e.schemesMap,this.setMode(e.mode),this.initSubscribers.forEach((function(t){t()})),t.isSchemesAutoSwitchingSupported()&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){i.currentMode===r.Auto&&i.setScheme(t.matches)})),this.isExecuted=!0))},t.prototype.setScheme=function(e){t.isSchemesSupported()&&(this.applyScheme(document.body,e?o.Dark:o.Light),this.currentIsDark=e,this.isSchemeSavingAllowed&&(0,n.setCookie)("remixdark_color_scheme",Number(e),365),this.subscribers.forEach((function(t){t()})))},t.prototype.isDarkScheme=function(){return this.currentIsDark},t.prototype.getMode=function(){return this.currentMode},t.prototype.setMode=function(e){this.currentMode=e;var i=!1;switch(e){case r.Light:i=!1;break;case r.Dark:i=!0;break;case r.Auto:if(t.isSchemesAutoSwitchingSupported())i=window.matchMedia("(prefers-color-scheme: dark)").matches}this.setScheme(i),this.isModeSavingAllowed&&(0,n.setCookie)("remixcolor_scheme_mode",e,365)},t.prototype.applyScheme=function(t,e){var i,r=(null===(i=this.schemesMap)||void 0===i?void 0:i[e])||e;t.setAttribute("scheme",r)},t.prototype.subscribe=function(t){var e=this;return this.subscribers.push(t),function(){e.subscribers=e.subscribers.filter((function(e){return t!==e}))}},t.prototype.onInit=function(t){var e=this;return this.initSubscribers.push(t),function(){e.initSubscribers=e.initSubscribers.filter((function(e){return t!==e}))}},t.isSchemesSupported=function(){return window.isNewMail&&window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")},t.isSchemesAutoSwitchingSupported=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches},t}();a=window.colorScheme?window.colorScheme:new s,window.colorScheme=a,window.isSchemesSupported=s.isSchemesSupported.bind(null)}},o={};function n(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={exports:{}};return r[t].call(i.exports,i,i.exports,n),i.exports}n.m=r,t=[],n.O=(e,i,r,o)=>{if(!i){var a=1/0;for(l=0;l<t.length;l++){for(var[i,r,o]=t[l],s=!0,c=0;c<i.length;c++)(!1&o||a>=o)&&Object.keys(n.O).every((t=>n.O[t](i[c])))?i.splice(c--,1):(s=!1,o<a&&(a=o));if(s){t.splice(l--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[i,r,o]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},i=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,n.t=function(t,r){if(1&r&&(t=this(t)),8&r)return t;if("object"==typeof t&&t){if(4&r&&t.__esModule)return t;if(16&r&&"function"==typeof t.then)return t}var o=Object.create(null);n.r(o);var a={};e=e||[null,i({}),i([]),i(i)];for(var s=2&r&&t;"object"==typeof s&&!~e.indexOf(s);s=i(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>t[e]));return a.default=()=>t,n.d(o,a),o},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.e=()=>Promise.resolve(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={4346:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var r,o,[a,s,c]=i,u=0;for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(c)var l=c(n);for(e&&e(i);u<a.length;u++)o=a[u],n.o(t,o)&&t[o]&&t[o][0](),t[a[u]]=0;return n.O(l)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var a=n.O(void 0,[8288,8592],(()=>n(609320)));a=n.O(a)})();