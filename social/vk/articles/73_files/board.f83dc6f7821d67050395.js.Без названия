!function(e){function t(t){for(var r,d,n=t[0],c=t[1],s=t[2],l=0,p=[];l<n.length;l++)d=n[l],Object.prototype.hasOwnProperty.call(i,d)&&i[d]&&p.push(i[d][0]),i[d]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,s||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],r=!0,n=1;n<o.length;n++){var c=o[n];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=d(d.s=o[0]))}return e}var r={},i={"web/board":0},a=[];function d(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,d),o.l=!0,o.exports}d.e=function(){return Promise.resolve()},d.m=e,d.c=r,d.d=function(e,t,o){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(d.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)d.d(o,r,function(t){return e[t]}.bind(null,r));return o},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="/js/cmodules/";var n=window.webpackJsonp=window.webpackJsonp||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var s=0;s<n.length;s++)t(n[s]);var u=c;a.push([144,"common"]),o()}({144:function(e,t,o){e.exports=o("w4Ex")},w4Ex:function(e,t,o){"use strict";o.r(t);o("KKXr"),o("pIFo"),o("SRfc");var r=o("zxIV"),i=o("MiCK"),a=o("EasH"),d=o("FWc3"),n=o("v+DW"),c={initTopicEditBox:function(e,t,o){var r=curBox(),i=r.bodyNode,a=geByClass1("_bet_title",i),d=geByClass1("_bet_media_preview",i),n=geByClass1("_bet_attach",i);elfocus(a),cur.boardEditMedia=new MediaSelector(n,d,e,{editable:1,sortable:1,teWidth:420,teHeight:300}),t&&cur.boardEditMedia.chooseMedia("poll","",t),r.removeButtons(),r.addButton(o,this.saveTopic.bind(this)),r.addButton(getLang("global_cancel"),r.hide,"no"),r.setOptions({width:450})},createTopic:function(e,t){for(var o=trim(val("bnt_title")),r=trim(val("bnt_text")),i={},a=cur.boardNewMedia.getMedias()||{},d=[],c=[],s=!1,u=0,l=a.length;u<l;++u){var p=a[u];if(p){if("poll"===p[0]){s=!0;continue}c.push(p[0]),d.push(p[1])}}return o?r||d.length?!(s&&!(i=cur.boardNewMedia.pollData()))&&(globalHistoryDestroy("board"+-e),_tbLink&&_tbLink.loc&&(cur.__phinputs=cur.__phinputs||[],globalHistoryDestroy(_tbLink.loc)),void ajax.post("/al_board.php",extend({act:"do_create",oid:e,hash:t,title:o,post:r,media_types:c,media:d,from_group:Object(n.isChecked)("bnt_from_group"),survey:Object(n.isChecked)("bnt_survey")},i),{showProgress:n.lockButton.pbind(ge("bnt_subm")),hideProgress:n.unlockButton.pbind(ge("bnt_subm"))})):(Object(n.notaBene)("bnt_text"),elfocus("bnt_text")):(Object(n.notaBene)("bnt_title"),elfocus("bnt_title"))},scrollResize:function(){if(!browser.mobile&&!cur.pvShown){var e=document.documentElement,t=window.innerHeight||e.clientHeight||bodyNode.clientHeight,o=scrollGetY(),r=ge("blst_load_more");isVisible(r)&&o+t>r.offsetTop&&c.load()}},initScroll:function(){extend(cur,{module:"board",searchField:ge("board_q")}),cur.searchField&&elfocus(cur.searchField),addEvent(window,"scroll",c.scrollResize),addEvent(window,"resize",c.scrollResize),removeEvent(window,"load",c.initScroll),cur.destroy.push(c.deinitScroll)},deinitScroll:function(){removeEvent(window,"scroll",c.scrollResize),removeEvent(window,"resize",c.scrollResize)},loaded:function(e,t){cur.offset=e;for(var o=ge("blst_cont"),r=ce("div",{innerHTML:t});r.firstChild;)o.appendChild(r.firstChild);if(e>=cur.count||!t)hide("blst_load_more");else{cur.loading=1;var i=cur.query?{act:"search",q:cur.query}:{order:cur.order};ajax.post("/board"+cur.gid,extend(i,{offset:cur.offset,part:1}),{cache:1,onDone:function(){2===cur.loading?c.loaded.apply(window,arguments):cur.loading=!1},onFail:function(){return cur.loading=0,!0}})}},load:function(){if(isVisible("blst_load_more")&&!isVisible("blst_more_progress"))if(cur.loading)cur.loading=2;else{var e=cur.query?{act:"search",q:cur.query}:{order:cur.order};ajax.post("/board"+cur.gid,extend(e,{offset:cur.offset,part:1}),{onDone:c.loaded,onFail:function(){return cur.loading=0,!0},showProgress:function(){show("blst_more_progress"),hide(ge("blst_load_more").firstChild)},hideProgress:function(){show(ge("blst_load_more").firstChild),hide("blst_more_progress")},cache:1})}},topicFieldUpdated:function(){var e=window.Emoji?Emoji.editableVal(cur.addField):"",t=getSize(cur.addBlock)[1],o=cur.addBlockHeight!==t,r=cur.addText!==e;o&&(cur.addBlockHeight=t,cur.addBlockWrap.style.height=t+"px"),r&&(cur.addText=e),(o||r)&&c.topicOnScroll(!1,!1,!0)},topicAttachWillAdd:function(){setTimeout(c.topicFieldUpdated,10),setTimeout(c.topicFieldUpdated,100),setTimeout(c.topicFieldUpdated,1e3)},repliesCount:function(){var e=cur.addText.match(/\[post\d+\|[^\]]+\]/g),t=0;for(var o in e||{})e.hasOwnProperty(o)&&++t;return t},replyPost:function(e,t){if(browser.mobile&&window.Emoji)return Emoji.focus(cur.addField);if(c.topicOnScroll(!1,!1,!0),c.repliesCount()>=10&&window.Emoji)return setTimeout(Emoji.focus.pbind(cur.addField),0);var o=cur.names[t].replace("{post_id}","post"+e);return o=o.replace(/ $/,"&nbsp;"),!!window.Emoji&&(elfocus(cur.addField),Emoji.insertHTML(o),cur.addText=Emoji.editableVal(cur.addField),!1)},saveTopic:function(e){var t=curBox(),o=geByClass1("_bet_title",t.bodyNode),r=geByClass1("_bet_closed",t.bodyNode),i=geByClass1("_bet_fixed",t.bodyNode),a=!1,d=trim(val(o)),c=cur.boardEditMedia.getMedias()||{};for(var s in c)if(c.hasOwnProperty(s)&&"poll"===c[s][0]){a=!0;break}if(!d)return Object(n.notaBene)(o),elfocus(o);e||(e=geByClass("flat_button",domNS(curBox().bodyNode))[1]);var u={};if(a&&!(u=cur.boardEditMedia.pollData()))return!1;ajax.post("/al_board.php",extend({act:"save_topic_info",topic:cur.topic,hash:cur.hash,offset:nav.objLoc.offset,title:d,closed:Object(n.isChecked)(r)?1:0,fixed:Object(n.isChecked)(i)?1:0},u||{}),{showProgress:n.lockButton.pbind(e),hideProgress:n.unlockButton.pbind(e)})},checkDeleteTopic:function(){return Object(a.showFastBox)(getLang("board_edit_topic"),getLang("board_sure_delete_topic"),getLang("global_delete"),c.deleteTopic,getLang("global_cancel"))},deleteTopic:function(e){var t={act:"delete_topic",topic:cur.topic,hash:cur.hash};c.isClaimQuery()&&(t.claim=window.nav.objLoc.claim),ajax.post("/al_board.php",t,{showProgress:n.lockButton.pbind(e),hideProgress:n.unlockButton.pbind(e)})},emojiShowTT:function(e,t){return void 0!==cur.baEmoji&&Emoji.ttShow(cur.baEmoji,e,t)},emojiHideTT:function(e,t){return void 0!==cur.baEmoji&&Emoji.ttHide(cur.baEmoji,e,t)},initTopic:function(e,t){var o=e.owner+"_topic"+e.topicId;extend(cur,{module:"board",canResetDock:!0,docked:!1,topic:e.topic,owner:e.owner,hash:e.hash,postLimit:e.limit,postTo:"board"+-e.owner,options:{rmedia_types:e.media,max_post_len:e.max_post_len,share:{}},wallTpl:e.wallTpl,names:e.names,addField:ge("reply_field"+o),addBlock:ge("bt_reply_form"),addBlockWrap:ge("bt_reply_form_wrap"),pgStart:e.start,pgOffset:e.offset,pgCount:e.count,pgPerPage:e.perpage,pgCont:ge("bt_rows"),pgMore:ge("bt_load_more"),pgPages:ge("bt_pages"),pgPreload:t,pgUrl:e.url,pgHref:e.url+"?offset=",pgPostProcess:c.loadedPosts,pgOnScroll:c.topicOnScroll,pgNoArrowNav:c.noArrowNav,updates:e.updates,topicMyReplied:!1,topicMyDeleted:{},hasGroupAudioAccess:e.hasGroupAudioAccess}),c.initUpdates(),cur.addField&&(Object(r.data)(cur.addField,"send",c.sendPost),placeholderInit(cur.addField,{editable:1}),c.topicFieldUpdated(),cur.onReplyFormSizeUpdate=c.topicFieldUpdated,cur.onMediaChanged=c.topicAttachWillAdd),c.topicOnScroll(!1,!1,!0),Pagination.init(e.bottom),cur.destroy.push(Pagination.deinit),cur.destroy.push(removeEvent.pbind(window,"keydown",c.handleEditEsc))},initUpdates:function(){cur.updates&&window.Notifier&&(c.checkUpdates(),cur.updates.unread=0,cur.updates.interval=setInterval(c.checkUpdates,2e4),cur.destroy.push((function(){clearInterval(cur.updates.interval)})),isArray(cur.onUnidle)||(cur.onUnidle=[]),cur.onUnidle.push((function(){c.updateTitle(!0)})))},checkUpdates:function(){cur.updates&&cur.updates.queue&&Notifier.addKey(cur.updates.queue,c.checkedUpdates)},getAbsDate:function(e){var t,o=new Date(e||vkNow()),r=o.getHours(),i=o.getMinutes(),a="";return cur.updates.time_system&&(a=cur.updates.time_system[r>11?1:0],r=r%12||12),t=r>9?r:"0"+r,i=i>9?i:"0"+i,cur.updates.date_format.replace("{am_pm}",a).replace("{hour}",r).replace("{num_hour}",t).replace("{minute}",i)},checkedUpdates:function(e,t){if(cur.updates&&cur.updates.queue&&cur.updates.queue.key===e)if(t.failed)cur.updates.queue=!1;else if(cur.updates.queue.ts=t.ts,isArray(t.events)&&t.events.length){var o=!1;each(t.events,(function(){var e=this.split("<!>"),t=parseInt(e[0]),r=e[1],i=e[4],a=ge("post"+i);if(t!==cur.updates.qversion)return location.reload(),!1;switch(e[3]>-1&&(o=e[3]),r){case"new_post":if(cur.topicMyReplied||a||cur.pgOffset<cur.pgCount)break;var d={actions:"",owner_id:cur.owner,topic_raw:cur.topic,post_raw:i,post_id:e[5],post_uid:e[6],name:e[7],photo:psr(e[8]),link:e[9],text:e[10],media:psr(e[11]),date:c.getAbsDate(),reply_link:"",online:""},n=cur.updates.skin,s="";vk.id&&(vk.id===d.post_uid||cur.updates.admin_level>0?(s+=rs(n.postAction,{post_raw:d.post_raw,onclick:"return Board.deletePost(this, "+d.post_id+")",tt:getLang("global_delete"),action:"bp_delete"}),(vk.id===d.post_uid||cur.updates.admin_level>1)&&(s+=rs(n.postAction,{post_raw:d.post_raw,onclick:"return Board.editPost(this, "+d.post_id+")",tt:getLang("Edit"),action:"bp_edit"}))):vk.id!==d.post_uid&&(s+=rs(n.postAction,{post_raw:d.post_raw,onclick:"return Board.reportPost(this, "+d.post_id+")",tt:getLang("its_spam"),action:"bp_delete"})),(vk.id!==d.post_uid||cur.updates.admin_level>1)&&(d.reply_link=rs(n.reply_link,{post_id:d.post_id,post_uid:d.post_uid})),d.likes=Likes.makeTemplate(n.likes,{object_raw:i})),d.actions=s,cur.names[d.post_uid]=e[12];var u=se(rs(n.post,d));ge("bt_rows").appendChild(u),setTimeout(addClass.pbind(u,"bp_animated"),0),setTimeout(removeClass.pbind(u,"bp_selected"),5e3),cur.pgOffset++,cur.pgCount++,window.curNotifier&&curNotifier.idle_manager&&curNotifier.idle_manager.is_idle&&cur.updates.unread++;break;case"del_post":if(cur.topicMyDeleted[i]||!a)break;hide(a),cur.pgOffset--,cur.pgCount--;break;case"res_post":if(isVisible(a))break;show(a),cur.pgOffset++,cur.pgCount++}})),!1!==o&&(val("bt_summary",o||""),Pagination.pageReady(!1),c.topicOnScroll(!1,!1,!0),c.updateTitle())}},updateTitle:function(e){cur.updates&&(e&&(cur.updates.unread=0),setDocumentTitle(replaceEntities((cur.updates.unread?"("+cur.updates.unread+") ":"")+cur.updates.skin.title)))},cancelAddPost:function(e){if(!0===e){var t=cur.addField&&Object(r.data)(cur.addField,"composer");t?Composer.reset(t):Emoji.val(cur.addField,""),hide(geByClass1("reply_warn",cur.addBlock)),c.topicFieldUpdated()}else cur.docked=!1,setStyle(cur.addBlock,{width:null,marginLeft:null}),removeClass(cur.addBlock,"fixed")},topicResetStyle:function(){cur.addBlock.style.left=""},topicOnScroll:function(e,t,o){if(!1!==t&&void 0!==t||(t=scrollGetY()),cur.addField){(!0===o||cur.bEditingPost)&&(cur.addBlockTop=getXY(cur.addBlockWrap)[1]);var r=t+lastWindowHeight<cur.addBlockTop+cur.addBlockHeight,i=r?Math.min(0,Math.max(-bodyNode.scrollLeft,bodyNode.clientWidth-getSize(ge("page_layout"))[0])):null;setStyle(cur.addBlock,{marginLeft:i}),r&&!cur.docked?(setStyle(cur.addBlock,"width",getSize(cur.addBlockWrap)[0]),addClass(cur.addBlock,"fixed"),cur.docked=!0,cur.canResetDock=!1):!r&&cur.docked&&(cur.canResetDock?c.cancelAddPost():cur.canResetDock=!0),cur.docked&&e&&"resize"==e.type&&(cur.addBlock.style.left=ge("page_layout").offsetLeft+ge("content").offsetLeft+"px",setTimeout(c.topicResetStyle,0))}},loadedPosts:function(e,t,o,r,i,a,d){c.topicOnScroll(!1,!1,!0),val("bt_summary",e||""),a?c.cancelEditPost():d=r,extend(cur.names,d)},noArrowNav:function(){return cur.__focused||cur.bEditingPost},scrollToEnd:function(){scrollToY(cur.addBlockTop+cur.addBlockHeight-lastWindowHeight,0,void 0,!0)},sendPost:function(e,t,o){var i=ge("reply_button"+e);if(!Object(n.isButtonLocked)(i)){var a=ge("reply_field"+e),d=a&&Object(r.data)(a,"composer"),s=ge("bt_reply_as_group"),u={},l=o.stickerId;if(l)u={message:"",attach1_type:"sticker",attach1:l,sticker_referrer:o.sticker_referrer};else if(!(u=d?Composer.getSendParams(d,c.sendPost.pbind(e)):{message:trim(Emoji.editableVal(a))}).attach1_type&&!u.message)return void Emoji.editableFocus(a,!1,!0);var p=((cur.pgCont.childNodes[cur.pgNodesCount-1].id||"").match(/\d+$/)||[0])[0];u=Wall.fixPostParams(extend(u,{act:"post_comment",topic:cur.topic,hash:cur.hash,last:p,from_group:s&&domData(domClosest("_submit_post_box",ge(s)),"from-oid")<0?1:""})),cur.topicMyReplied=!0,ajax.post("/al_board.php",u,{onDone:function(e,t,o,r,i,a){cur.topicMyReplied=!1,re("b_no_content"),Pagination.loaded.apply(window,arguments),c.cancelAddPost(!l),window.Emoji&&Emoji.focus(cur.addField),setTimeout(c.scrollToEnd,0),i&&r&&nav.setLoc(extend(nav.objLoc,{offset:r}))},showProgress:n.lockButton.pbind(i),hideProgress:n.unlockButton.pbind(i)})}},deleteReportPost:function(e,t,o){if(t=cur.owner+"_"+t,!hasClass(e,"bp_loading")){cur.topicMyDeleted[t]=1;var r={act:o,post:t,hash:cur.hash};c.isClaimQuery()&&(r.claim=window.nav.objLoc.claim),ajax.post("/al_board.php",r,{onDone:function(e,o){var r=ge("post"+t),i=r&&geByClass1("bp_deleted_text",r);r&&(i.innerHTML=e,addClass(r,"bp_deleted")),o&&(Pagination.recache(-1),c.loadedPosts(cur.pgCount))},showProgress:addClass.pbind(e,"bp_loading"),hideProgress:removeClass.pbind(e,"bp_loading")})}},deletePost:function(e,t){return c.deleteReportPost(e,t,"delete_comment"),!1},reportPost:function(e,t){return c.deleteReportPost(e,t,"spam_comment"),!1},restorePost:function(e){return e=cur.owner+"_"+e,cur.topicMyDeleted[e]=0,ajax.post("/al_board.php",{act:"restore_comment",post:e,hash:cur.hash},{onDone:function(){var t=ge("post"+e);t&&(removeClass(t,"bp_deleted"),Pagination.recache(1),c.loadedPosts(cur.pgCount))}}),!1},editPost:function(e,t){if(cur.bEditingPost)return!!ge("bpe_text")&&Object(n.notaBene)("bpe_text");t=cur.owner+"_"+t,cur.bEditingPost=t;var o=ge("post"+t),r=ge("bp_data"+t),i=geByClass1("bp_bottom",o);return ajax.post("/al_board.php",{act:"edit_comment",post:t},{onDone:function(e,t,a){addEvent(window,"keydown",c.handleEditEsc);var d=domFC(domPN(r).insertBefore(se(rs(cur.updates.skin.editPost,{text:e,add:a?'<div class="bpe_auth">'+a+"</div>":""})),r));addClass(o,"bp_editing"),setTimeout((function(){if(show(d.parentNode),elfocus(d),hide(r,i),cur.boardEditMedia=new MediaSelector(ge("bpe_add_media"),"bpe_media_preview",cur.options.rmedia_types,{limit:10,hideAfterCount:5,editable:1,sortable:1,teWidth:420,teHeight:300}),t&&t.length)for(var e=0,o=(t||[]).length;e<o;++e)cur.boardEditMedia.chooseMedia.apply(window,t[e]);Wall.initComposer(d,{lang:{introText:getLang("profile_mention_start_typing"),noResult:getLang("profile_mention_not_found")}}),autosizeSetup(d,{minHeight:30})}),0)},onFail:function(){cur.bEditingPost=!1},showProgress:addClass.pbind(e,"bp_loading"),hideProgress:removeClass.pbind(e,"bp_loading")}),!1},cancelEditPost:function(e,t,o){var r=cur.bEditingPost,i=ge("bpe_save");if(!(!r||i&&Object(n.isButtonLocked)(i))&&(cur.bEditingPost=!1,i)){removeEvent(window,"keydown",c.handleEditEsc),cleanElems(ge("bpe_add_media"));var a=ge("post"+r),d=ge("bp_data"+r),s=d.firstChild,u=s.nextSibling,l=geByClass1("bp_bottom",a);if(void 0!==e&&(val(s,e),(e?show:hide)(s)),void 0!==t&&(u&&!t?re(u):t&&(u||(u=d.appendChild(ce("div"))),d.replaceChild(ce("div",{innerHTML:t}).firstChild,u))),void 0!==o){var p=geByClass1("bp_edited_by",a);val(p,o),(o?show:hide)(p)}return show(l,d),removeClass(a,"bp_editing"),Wall.deinitComposer(ge("bpe_text")),re(ge("bpe_text").parentNode),c.topicOnScroll(!1,!1,!0),!1}},handleEditEsc:function(e){e.keyCode===KEY.ESC&&c.cancelEditPost()},savePost:function(){var e=cur.bEditingPost,t=ge("bpe_save");if(e&&t&&!Object(n.isButtonLocked)(t)){var o=trim(val("bpe_text")),r=cur.boardEditMedia||{},i=r.chosenMedia||{},a=cur.boardEditMedia?r.getMedias():[],d={act:"save_comment",post:e,hash:cur.hash,comment:o},s=0;if(isArray(i)&&i.length&&a.push(clone(i)),a.length&&each(a,(function(e,t){t&&(++s,d["attach"+s+"_type"]=this[0],d["attach"+s]=this[1])})),!s&&!o)return elfocus("bpe_text");ajax.post("/al_board.php",d,{onDone:c.cancelEditPost,showProgress:n.lockButton.pbind(t),hideProgress:n.unlockButton.pbind(t)})}},mentionOver:function(e){var t=((e.getAttribute("mention")||"").match(/^bp(-?\d+_\d+)$/)||{})[1];t?Object(d.showTooltip)(e,{url:"/al_board.php",params:{act:"post_tt",post:t},slide:15,shift:[78,3,5],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",className:"rich board_tt wall_module"}):Object(i.mentionOver)(e)},editTopic:function(e,t){return Object(a.showBox)("/al_board.php",{act:"edit_topic_box",topic:cur.topic})},goCreate:function(e,t){return nav.go({0:"board"+cur.gid,act:"create"},t,{showProgress:n.lockButton.pbind(e),hideProgress:n.unlockButton.pbind(e)})},resetSearch:function(e,t){return nav.go({0:"board"+cur.gid},t,{back:!0})},doSearch:function(e,t,o){return t?nav.go({0:"board"+cur.gid,act:"search",q:t},o,{showProgress:uiSearch.showProgress.pbind(e),hideProgress:function(){e.setValue(""),uiSearch.onChanged(e),uiSearch.hideProgress(e)}}):!(!cur.query||!nav.objLoc.q)&&nav.go({0:"board"+cur.gid},o,{back:!0})},searchGo:function(e,t){return nav.go(e,t,{params:{q:nav.objLoc.q}})},isClaimQuery:function(){return window.nav&&window.nav.objLoc&&window.nav.objLoc.claim}};window.Board=c;try{window.stManager.done(window.jsc("web/board.js"))}catch(e){}}});