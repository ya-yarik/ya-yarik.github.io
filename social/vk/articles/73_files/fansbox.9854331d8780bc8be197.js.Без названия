!function(n){function o(o){for(var e,a,t=o[0],i=o[1],f=o[2],u=0,d=[];u<t.length;u++)a=t[u],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e]);for(l&&l(o);d.length;)d.shift()();return c.push.apply(c,f||[]),r()}function r(){for(var n,o=0;o<c.length;o++){for(var r=c[o],e=!0,t=1;t<r.length;t++){var i=r[t];0!==s[i]&&(e=!1)}e&&(c.splice(o--,1),n=a(a.s=r[0]))}return n}var e={},s={"web/fansbox":0},c=[];function a(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(){return Promise.resolve()},a.m=n,a.c=e,a.d=function(n,o,r){a.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:r})},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,o){if(1&o&&(n=a(n)),8&o)return n;if(4&o&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&o&&"string"!=typeof n)for(var e in n)a.d(r,e,function(o){return n[o]}.bind(null,e));return r},a.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(o,"a",o),o},a.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},a.p="/js/cmodules/";var t=window.webpackJsonp=window.webpackJsonp||[],i=t.push.bind(t);t.push=o,t=t.slice();for(var f=0;f<t.length;f++)o(t[f]);var l=i;c.push([172,"common"]),r()}({172:function(n,o,r){n.exports=r("HdiH")},HdiH:function(n,o,r){"use strict";r.r(o);r("SRfc"),r("Vd3H"),r("OG14"),r("Oyvg"),r("pIFo");var e=r("v+DW"),s=r("FWc3"),c=r("4+be"),a={init:function(n,o){extend(cur,{fnbxOffsets:cur.fnbxOffsets||{},fnbxPhCache:cur.fnbxPhCache||{},fnbxPhShown:cur.fnbxPhShown||{},fnbxIdolsList:cur.fnbxIdolsList||{},fnbxIdolsCache:cur.fnbxIdolsCache||{},fnbxIdolsIndex:cur.fnbxIdolsIndex||{},fnbxIdolsProcessed:cur.fnbxIdolsProcessed||{},fnbxIdolsQuery:cur.fnbxIdolsQuery||"",fnbxAutoload:!0,fnbxWasScroll:!1,fnbxHash:o.hash,fnbxOwnerId:o.ownerId,fnbxObjectId:o.objectId||"",fnbxId:n.tbId,fnbxSearchLink:o.searchLink||"",fnbxPage:o.address||"al_fans.php",fnbxVars:o.getVars||a.fnbxVars}),cur.fnbxOffsets[o.tab]=o.offset,ajax.preload(cur.fnbxPage,extend(cur.fnbxVars(o.tab),{offset:o.offset}),o.preload);var r="padding: 0;";isVisible(n.titleWrap)||(r+="margin-top: 50px;"),n.setOptions({width:o.intro?630:642,bodyStyle:r,noRefreshCoords:!0});var e=boxLayerWrap.scrollTop;elfocus(geByClass1("_scroll_node",n.bodyNode)),boxLayerWrap.scrollTop=e,window.uiScrollBox&&uiScrollBox.init(n,{onShow:function(){cur.fnbxWasScroll&&(boxLayerWrap.scrollTop=cur.fnbxWasScroll,cur.fnbxWasScroll=!1),setTimeout(a.onScroll,0)},onHide:function(){o.onHide&&o.onHide()}}),n.tbDeinit||(extend(n,{tbDeinit:function(){cur.fnbxOwnerId=cur.fnbxOffsets=cur.fnbxPhShown=!1,re(cur.lSTL),removeEvent(boxLayerWrap,"scroll",a.onScroll)},tbcShowProgress:function(){hide("fans_idol_search"),cur.fnbxSearchLink&&hide(cur.fnbxSearchLink)},tbcOnLoad:function(){if("idols"==curBox().tbVis){if(ge("fans_rowsidols")){show("fans_idol_search");var n=cur.fnbxOwnerId;cur.fnbxIdolsList[n]?cur.fnbxIdolsQuery&&a.moreIdols(!0):(cur.fnbxIdolsList[n]="loading",ajax.post("/al_fans.php",{act:"load_idols",oid:n},{onDone:function(o){if(cur.fnbxIdolsList){var r="update"==cur.fnbxIdolsList[n],e=r||"more"==cur.fnbxIdolsList[n];cur.fnbxIdolsCache[n]={all:[]};for(var s=cur.fnbxIdolsProcessed,c=0,t=o.length;c<t;++c)void 0!==s[o[c][0]]&&(o[c][1]=s[o[c][0]]),cur.fnbxIdolsCache[n].all.push(c);cur.fnbxIdolsList[n]=o,cur.fnbxIdolsIndex[n]=new vkIndexer(cur.fnbxIdolsCache[n].all,(function(o){return cur.fnbxIdolsList[n][o][2]}),e?function(){cur.fnbxOwnerId==n&&curBox().tbId==cur.fnbxId&&"idols"==curBox().tbVis&&a.moreIdols(r)}:function(){})}}}))}}else hide("fans_idol_search"),cur.fnbxSearchLink&&show(cur.fnbxSearchLink)}}),addEvent(boxLayerWrap,"scroll",a.onScroll)),n.tbcOnLoad(),cur.fnbxLoaded&&cur.fnbxLoaded(),onBodyResize(),setTimeout(a.onScroll,0)},fnbxVars:function(n){return{act:cur.fnbxAct||"box",oid:cur.fnbxOwnerId,tab:n}},getHighlight:function(n){var o=cur.fnbxIdolsIndex[cur.fnbxOwnerId],r=o.delimiter,e=o.trimmer;return n+=" "+(Object(c.parseLatin)(n)||""),n=(n=escapeRE(n).replace(/&/g,"&amp;")).replace(e,"").replace(r,"|"),{re:new RegExp("("+n+")","gi"),val:'<span class="highlight">$1</span>'}},moreIdols:function(n){var o=cur.fnbxOwnerId,r=cur.fnbxIdolsList[o];if(o&&curBox().tbId==cur.fnbxId)if(r&&"loading"!=r&&"update"!=r&&"more"!=r){r=cur.fnbxIdolsCache[o].all;var e=ge("sb_search_"+cur.fnbxId),s=trim(val(e));isVisible(curBox().tbSearch)||(s="");var c=n||s!=cur.fnbxIdolsQuery,t=!1;if(cur.fnbxIdolsQuery=s,s){if(void 0===(r=cur.fnbxIdolsCache[o]["_"+s])){var i=cur.fnbxIdolsIndex[o].search(s),f={};r=[];for(var l=0,u=i.length;l<u;++l)f[i[l]]||(f[i[l]]=!0,r.push(i[l]));r.sort((function(n,o){return n-o})),cur.fnbxIdolsCache[o]["_"+s]=r}t=a.getHighlight(s)}var d=r.length,b=ge("fans_rowsidols"),x=ge("fans_more_linkidols");if(!d)return hide(x),void val(b,a.genIdolEmpty(val(e)));for(var h=c?0:b.childNodes.length,p=Math.min(d,h+32),_=[],g=h;g<p;++g){var v=cur.fnbxIdolsList[o][r[g]],I=v[2];v&&(v=a.genIdolRow(v,t?I.replace(t.re,t.val):I),c?_.push(v):b.appendChild(se(v)))}c&&(val(b,_.join("")),curBox().tbToTop()),toggle(x,p<d)}else"loading"==r&&(cur.fnbxIdolsList[o]="more")},genIdolEmpty:function(n){var o='<a href="/search?c[section]=groups&c[q]='+encodeURIComponent(n)+'">';return'<div class="no_rows">'+(trim(n)?getLang("fans_idols_not_found")+"<br>"+getLang("groups_you_can_find").replace("{term}",o+clean(n)+"</a>").replace("{link}",o).replace("{/link}","</a>"):getLang("fans_no_idols"))+"</div>"},genIdolRow:function(n,o){var r=n[0],e=n[6]?' onmouseover="uiPhotoZoom.over(this, '+r+', {onBeforeShow: FansBox.beforePhotoShow, showOpts: {onHide: FansBox.backToBox}});"':"",s="/"+(n[4]?n[4]:r>0?"id"+r:"public"+-r),c=n[3],a=getLang("public_N_followers",n[5],!0),t=' style="display: none"',i=n[7].length?n[7]:getLang(r>0?"profile_own_profile":"groups_type_public"),f=vk.id&&vk.id!=r;return`\n<div class="fans_idol_row inl_bl">\n  <div class="fans_idolph_wrap fl_l" ${e}>\n    <a class="fans_idol_ph" href="${s}">\n      <img class="fans_idol_img" src="${c}" />\n    </a>\n  </div>\n  <div class="fans_idol_info">\n    <div class="fans_idol_name"><a class="fans_idol_lnk" href="${s}">${o}</a></div>\n    <div class="fans_idol_status">${i}</div><div class="fans_idol_size">${a}</div>\n    <div id="fans_idol_sub${r}" class="button_blue fans_idol_sub" ${n[1]||!f?t:""}>\n      <button class="flat_button button_small" onclick="FansBox.subscribe(this, ${r})">${getLang("public_subscribe")}</button>\n    </div>\n    <div id="fans_idol_unsub${r}" class="fans_idol_unsub" ${n[1]&&f?"":t}>\n      <button class="flat_button button_small secondary" onclick="FansBox.unsubscribe(this, ${r})">${getLang("public_unsubscribe")}</button>\n    </div>\n  </div>\n</div>`},resetSearch:function(){val("fans_idol_search_inp",""),a.moreIdols(!0),setTimeout(elfocus.pbind("fans_idol_search_inp"),0)},more:function(){var n=curBox().tbCur;if("idols"===n)return a.moreIdols();var o=ge("fans_more_link"+n);Object(e.isButtonLocked)(o)||(ajax.post(cur.fnbxPage,extend(cur.fnbxVars(n),{offset:cur.fnbxOffsets[n]}),{onDone:function(r,e,s){var c=ce("div",{innerHTML:r}),t=ge("fans_rows"+n);if(t){var i=geByClass1("no_rows",t);r&&i&&re(i);for(var f=domFC(c);f;f=domFC(c))t.appendChild(f);cur.fnbxOffsets[n]=e,s?a.preload():hide(o)}},showProgress:e.lockButton.pbind(o),hideProgress:e.unlockButton.pbind(o),cache:1}),cur.fnbxAutoload=!0)},preload:function(){var n=curBox().tbCur;ajax.post(cur.fnbxPage,extend(cur.fnbxVars(n),{offset:cur.fnbxOffsets[n]}),{cache:1})},markSubsc:function(n,o){cur.fnbxIdolsProcessed[n]=o;var r=cur.fnbxIdolsList[cur.fnbxOwnerId];if(r&&r.length)for(var e=0,s=r.length;e<s;++e)if(r[e][0]==n){cur.fnbxIdolsList[cur.fnbxOwnerId][e][1]=o;break}},subscribe:function(n,o){ajax.post("al_feed.php",{act:"subscr",oid:o,hash:cur.fnbxHash},{onDone:function(){hide("fans_idol_sub"+o),show("fans_idol_unsub"+o),show("fans_idol_feedact"+o),cur.fnbxOwnerId==vk.id&&a.recache(1),a.markSubsc(o,1)},showProgress:e.lockButton.pbind(n),hideProgress:e.unlockButton.pbind(n)})},blacklistTip:function(n){Object(s.showTooltip)(n,{text:getLang("fans_block_fan"),shift:[8,5,5],black:1})},blacklist:function(n,o,r){return n.tt&&n.tt.destroy&&n.tt.destroy(),cur.fnbxWasScroll=boxLayerWrap.scrollTop,showBox("/al_fans.php",{act:"block",oid:o},{params:{width:440}}),cancelEvent(r)},unsubscribe:function(n,o){ajax.post("/al_fans.php",{act:"unsub",oid:o,hash:cur.fnbxHash,from:"box"},{onDone:function(){show("fans_idol_sub"+o),hide("fans_idol_unsub"+o),hide("fans_idol_feedact"+o),cur.fnbxOwnerId==vk.id&&a.recache(-1),a.markSubsc(o,0)},showProgress:e.lockButton.pbind(n),hideProgress:e.unlockButton.pbind(n)})},feedToggle:function(n,o){ajax.post("/al_fans.php",{act:"feedtgl",oid:o,hash:cur.fnbxHash,from:"box"},{onDone:function(r,e){n.innerHTML=e,cur.fnbxOwnerId==vk.id&&a.recache(-1);var s=cur.fnbxIdolsList[cur.fnbxOwnerId];if(s&&s.length)for(var c=0,t=s.length;c<t;++c)if(s[c][0]==o){cur.fnbxIdolsList[cur.fnbxOwnerId][c][0]=r;break}},showProgress:function(){n.innerHTML='<span class="progress_inline"></span>'}})},onScroll:function(){var n=curBox();if(cur.fnbxAutoload&&n){var o=lastWindowHeight,r=ge("fans_more_link"+n.tbCur);isVisible(r)&&o>getXY(r,!0)[1]&&r.click()}},recache:function(n){for(var o in cur.fnbxOffsets[curBox().tbCur]+=n,ajaxCache)o.match(new RegExp("^\\/"+cur.fnbxPage+"\\#act="+(cur.fnbxAct||"box"),""))&&delete ajaxCache[o]},remove:function(n){re("fans_fan_row"+n),a.recache(-1),a.onScroll();var o=curBox().tbCur;domFC(ge("fans_rows"+o))||(curBox().hide(),nav.reload())},backToBox:function(){if(cur.fnbxLoaded=function(){var n=curBox().tbVis,o=ge("fans_rows"+n),r=cur.fnbxBack.scroll;n==cur.fnbxBack.tab?(extend(cur,{fnbxOffsets:cur.fnbxBack.offsets,fnbxIdolsQuery:cur.fnbxBack.query}),domPN(o).replaceChild(cur.fnbxBack.cont,o),toggle("fans_more_link"+n,!!cur.fnbxBack.vis),Object(e.unlockButton)("fans_more_link"+n),cur.fnbxLoaded=cur.fnbxBack=!1,boxLayerWrap.scrollTop=r,val("fans_idol_search_inp",cur.fnbxIdolsQuery),"idols"==n&&cur.fnbxIdolsQuery&&(elfocus("fans_idol_search_inp"),show("fans_reset_search")),setTimeout((function(){boxLayerWrap.scrollTop=r,onBodyResize(),a.onScroll()}),0)):curBox().tbTab(cur.fnbxBack.tab)},cur.fnbxBack){cur.fnbxOwnerId=cur.fnbxBack.oid,cur.fnbxObjectId=cur.fnbxBack.objectId;var n=cur.fnbxVars(cur.fnbxBack.initial);if(n.w)nav.change({w:n.w});else{var o=cur.audioListenersOnDone?cur.audioListenersOnDone:{};showBox(cur.fnbxPage,n,extend({cache:1},o))}}},beforePhotoShow:function(){var n=curBox();if(n){var o=n.tbCur;cur.fnbxPhShown=!1,extend(cur,{fnbxBack:{tab:o,initial:n.tbInitial,oid:cur.fnbxOwnerId,objectId:cur.fnbxObjectId,offsets:cur.fnbxOffsets,scroll:boxLayerWrap.scrollTop,query:cur.fnbxIdolsQuery,vis:isVisible("fans_more_link"+o),cont:ge("fans_rows"+o),instance:n.tbInstance}})}}},t=a;window.FansBox=t;try{stManager.done(jsc("web/fansbox.js"))}catch(n){}}});