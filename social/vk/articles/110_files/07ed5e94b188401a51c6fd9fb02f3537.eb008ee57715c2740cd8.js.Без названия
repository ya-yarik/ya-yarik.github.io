(window.webpackJsonp=window.webpackJsonp||[]).push([["07ed5e94b188401a51c6fd9fb02f3537"],{"/bCM":function(t,e,n){"use strict";n.r(e),n.d(e,"REACTION_ID_DEFAULT",(function(){return r})),n.d(e,"REACTION_ID_MAX",(function(){return i})),n.d(e,"REACTION_ID_MIN",(function(){return o})),n.d(e,"REACTION_SET_ITEMS_MIN_COUNT",(function(){return u}));var r=0,i=7,o=0,u=2},"9xR5":function(t,e,n){"use strict";n.r(e),n.d(e,"calcCounters",(function(){return i})),n.d(e,"calcCountersSum",(function(){return o})),n.d(e,"calcCountersWeightedSum",(function(){return u})),n.d(e,"isValidEnvironment",(function(){return c})),n.d(e,"preloadImage",(function(){return a})),n.d(e,"usePrevious",(function(){return s}));var r=n("q1tI"),i=function(t,e){var n={};return Object.entries(t).forEach((function(t){var r,i,o,u=t[0],c=t[1],a=u,s=null!==(o=null===(i=null===(r=null==e?void 0:e.itemsById)||void 0===r?void 0:r[a])||void 0===i?void 0:i.score)&&void 0!==o?o:1;n[a]=s*(c||0)})),n},o=function(t){return Object.values(t).reduce((function(t,e){return t+(e||0)}),0)},u=function(t){return o(t)},c=function(){var t,e,n;return"function"==typeof(null===(t=window.cur)||void 0===t?void 0:t.viewAsBox)?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(null===(n=null===(e=window.Widgets)||void 0===e?void 0:e.oauth)||void 0===n||n.call(e),!1)},a=function(t){return new Promise((function(e,n){var r=new Image;r.src=t,r.onload=function(){return e()},r.onerror=function(){return n()}}))},s=function(t){var e=r.useRef(t);return r.useEffect((function(){e.current=t})),e.current}},Kl2g:function(t,e,n){"use strict";n.r(e),n.d(e,"WallDataEvents",(function(){return u})),n.d(e,"registerUniqueListener",(function(){return s})),n.d(e,"emitEvent",(function(){return l}));var r=n("uQjJ"),i=n("qYuU"),o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},u={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update"},c=Object(i.makeSharedState)("wall-data",(function(){return{emitter:new r.default,keyedListeners:Object.create(null)}})),a=function(t,e,n){var r,i,u=c(),a=null===(i=null===(r=u.keyedListeners)||void 0===r?void 0:r[t])||void 0===i?void 0:i[e];return a&&u.emitter.removeListener(t,a),function(t,e,n){var r,i=c();i.emitter.addListener(t,n),i.keyedListeners[t]=o(o({},i.keyedListeners[t]),((r={})[e]=n,r));return function(){var r,o;i.emitter.removeListener(t,n),(null===(r=i.keyedListeners[t])||void 0===r?void 0:r[e])===n&&(null===(o=i.keyedListeners[t])||void 0===o||delete o[e])}}(t,e,n)},s=function(t,e,n){return a(e,t,n)},l=function(t,e){c().emitter.emit(t,e)}},Rafy:function(t,e,n){"use strict";n.r(e),n.d(e,"DEBUG_ENABLED",(function(){return r}));var r=!!n("Xrg9").default.get("reactions.debug_enabled")},crIy:function(t,e,n){"use strict";n.r(e),n.d(e,"storageAddSets",(function(){return d})),n.d(e,"getReactionSet",(function(){return f}));var r=n("HLtZ"),i=n("fBgk"),o=n("Rafy"),u=n("qYuU"),c=n("pruO"),a=n("vkmG"),s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},l=Object(u.makeSharedState)("reactions-storage",(function(){return new Map})),d=function(t){o.DEBUG_ENABLED&&console.log(t),Object.entries(t).forEach((function(t){var e=t[0],n=t[1],o=Object(i.validateReactionSetPayloaditems)(n,e);if(o)Object(r.logError)(o.error);else{var u=n.map((function(t){return s(s({},t),{title:Object(a.decodeHTMLEntities)(t.title)})}));l().set(e,Object(i.prepareReactionMenuSet)(e,u,{imageMenuSize:c.SIZE_MENU,imagePreviewSize:c.SIZE_PREVIEW}))}}))},f=function(t){var e=l().get(t);if(!e){var n=new Error("Reaction set not found: "+t);return Object(r.logError)(n,{environment:"reactions"}),void console.error(n)}return e}},fBgk:function(t,e,n){"use strict";n.r(e),n.d(e,"getDefaultReaction",(function(){return i})),n.d(e,"getDefaultReactionTitle",(function(){return o})),n.d(e,"prepareReactionMenuSet",(function(){return c})),n.d(e,"isValidReactionId",(function(){return a})),n.d(e,"isValidReactionIdState",(function(){return s})),n.d(e,"parseReactionId",(function(){return l})),n.d(e,"validateReactionSetPayloaditems",(function(){return d}));var r=n("/bCM"),i=function(t){return t.itemsById[r.REACTION_ID_DEFAULT]},o=function(t){var e;return null===(e=i(t))||void 0===e?void 0:e.title},u=function(t,e){return 0===t.length?"":(n=t,r=function(t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)},i=!1,void 0===i&&(i=!0),n.reduce((function(t,e){var n=r(e),o=r(t);return o===n?i?t:e:o<n?t:e}))).url;var n,r,i},c=function(t,e,n){var r=n.imageMenuSize,i=n.imagePreviewSize,o=e.map((function(t){var e=t.asset,n=t.id,o=t.score,c=t.title,a=t.title_color;return{animationURL:e.animation_url||void 0,id:n,imageMenuURL:u(e.images,r),imagePreviewURL:u(e.preview_images,i),score:o,title:c,titleColor:a}})),c={};return o.forEach((function(t){c[t.id]=t})),{id:t,items:o,itemsById:c}},a=function(t){return Number.isInteger(t)&&t>=r.REACTION_ID_MIN&&t<=r.REACTION_ID_MAX},s=function(t){return void 0===t||a(t)},l=function(t){var e=parseInt(t,10);if(a(e))return e},d=function(t,e){if(t.length<r.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error("Invalid reactions items count in set '"+e+"': "+t.length)}}},ha24:function(t,e,n){"use strict";function r(t){var e=t.match(/^([a-z_]+)([0-9\-_]+)$/);return e?{objectType:e[1],objectId:e[2]}:null}n.r(e),n.d(e,"parseLikeObjectId",(function(){return r})),n.d(e,"likePostObjectId",(function(){return i})),n.d(e,"likeReplyObjectId",(function(){return o})),n.d(e,"getElementLikeButtonCount",(function(){return u}));var i=function(t){return"wall"+t},o=function(t){return"wall_reply"+t},u=function(t){var e;return null!==(e=t.querySelector(".like_button_count"))&&void 0!==e?e:void 0}},"p4k+":function(t,e,n){"use strict";n.r(e),n.d(e,"reactionsElemPayload",(function(){return g})),n.d(e,"setDataCurrentId",(function(){return m})),n.d(e,"setDataCounts",(function(){return w})),n.d(e,"updateLikesButtonDom",(function(){return p})),n.d(e,"updateReactionButton",(function(){return _})),n.d(e,"getLikeBtnElem",(function(){return I})),n.d(e,"getPreviewElem",(function(){return O})),n.d(e,"shouldReactionsPreviewBeVisible",(function(){return R})),n.d(e,"updateReactionsPreviewDom",(function(){return j})),n.d(e,"updateReactionsPreview",(function(){return S})),n.d(e,"updateReactionsButtonForCounts",(function(){return E}));var r=n("smNX"),i=n("fBgk"),o=n("crIy"),u=n("9xR5"),c=n("ZxpX"),a=n("zxIV"),s=n("t7n3"),l=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],u=0,c=o.length;u<c;u++,i++)r[i]=o[u];return r},d=function(t,e,n,r,d){var f=function(t,e,n){void 0===n&&(n=!1);var r=void 0!==e?1:0,o=3-r,u=[e].slice(0,r),c=Object.keys(t).map((function(e){return[Object(i.parseReactionId)(e),t[e]]})).filter((function(t){var n=t[0],r=t[1];return void 0!==n&&n!==e&&r&&r>0})).sort((function(t,e){var n=t[1];return(e[1]||0)-(n||0)})).slice(0,o).map((function(t){return t[0]})),a=l(u,c);return n&&a.reverse(),a}(e,r,d),v=t.querySelector(".ReactionsPreview__items"),b=Object(o.getReactionSet)(n),g=0===Object(u.calcCountersSum)(e);v&&b?(v.innerHTML=f.map((function(t){var e=b.itemsById[t];if(!e)return"";var n=Object(c.classNames)({"ReactionsPreviewItem--lite ReactionsPreviewItem--stackOverlayLite":d,"ReactionsPreviewItem--post ReactionsPreviewItem--stackOverlayPost":!d});return Object(a.rs)(Object(s.getTemplate)("reactions_preview_item"),{image_url:e.imagePreviewURL,title:e.title,class:n})})).join(""),t.classList.toggle("ReactionsPreview--empty",g),t.classList.toggle("ReactionsPreview--active",void 0!==r)):console.warn("Unable to render reaction previews",{itemsContainer:v,reactionSet:b})},f=n("4+be"),v=n("7jxN"),b=function(t){var e=t.getAttribute("data-reaction-counts");if(null===e)return{};var n=e?Object(r.parseJSON)(e):void 0;return"object"==typeof n&&null!==n?n:void 0},g=function(t){var e=t.getAttribute("data-reaction-target-object"),n=t.getAttribute("data-reaction-hash"),r=t.getAttribute("data-reaction-set-id");if(null!==r){var o=t.getAttribute("data-reaction-user-reaction-id"),u=o?Object(i.parseReactionId)(o):void 0,c=!!t.getAttribute("data-reaction-lite");return{counts:b(t),csrfHash:n,isLite:c,objectRaw:e,reactionSetId:r,userReactionId:u}}},m=function(t,e){t.setAttribute("data-reaction-user-reaction-id",void 0===e?"":String(e))},w=function(t,e){t.setAttribute("data-reaction-counts",JSON.stringify(e))},p=function(t,e){"boolean"==typeof e&&function(t,e){t.classList.toggle("active",e)}(t,e)},_=function(t,e,n){var r=Object(i.getDefaultReaction)(n),o=void 0;void 0===e||(o=n.itemsById[e])?(function(t,e,n){var r=t.querySelector('[data-section-ref="reactions-button-icon"]');if(r){if(e){var i=null==e?void 0:e.imagePreviewURL;r.style.backgroundImage="url('"+i+"')",r.setAttribute("aria-label",null==e?void 0:e.title)}else r.style.backgroundImage="",(null==n?void 0:n.title)&&r.setAttribute("aria-label",null==n?void 0:n.title);r.classList.toggle("PostButtonReactions__icon--custom",!!e)}}(t,o,r),function(t,e,n){var r,i=t.querySelector('[data-section-ref="reactions-button-title"]');if(i){var o=null===(r=null==e?void 0:e.titleColor)||void 0===r?void 0:r.light,u=o?{color:"#"+o}:{color:null};if(e){i.innerText=e.title,Object(a.setStyle)(i,u);var c=Object(f.langStr)(Object(f.getLang)("reactions_button_unset_reaction_title"),{reaction_name:e.title});t.setAttribute("aria-label",c||"")}else(null==n?void 0:n.title)&&(i.innerText=n.title),Object(a.setStyle)(i,u),t.setAttribute("aria-label",Object(f.getLang)("reactions_button_title")||"")}}(t,o,r)):console.error(new Error("Missing reaction meta for "+e+" in set '"+n.id+"'"))},I=function(t){return document.querySelector('[data-section-ref="reactions-button"][data-reaction-target-object="'+t+'"]')},O=function(t){return document.querySelector('[data-section-ref="reactions-preview-items"][data-reaction-target-object="'+t+'"]')},R=function(t){return Object(u.calcCountersSum)(t)>0},j=function(t,e){var n=e.counts,r=e.isLite,i=e.objectRaw,c=e.reactionId,a=e.reactionSetId,s=Object(o.getReactionSet)(a),l=Object(u.calcCounters)(n,s),b=Object(u.calcCountersWeightedSum)(l),g=Object(u.calcCountersSum)(n),m=O(i);m&&(!function(t,e,n){var r=Object(f.langNumeric)(n,Object(f.getLang)("reactions_n_reacted","raw")||"%s",!0);t.setAttribute("title",r);var i,o=null!==(i=t.querySelector('[data-section-ref="like-button-count"]'))&&void 0!==i?i:void 0;if(o){var u=Object(f.langNumeric)(e,"%s",!0);Object(v.animateCount)(o,u,{str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})}}(m,b,g),d(m,n,a,c,r))},S=function(t,e){var n=I(t),r=e.counts;n&&r?function(t,e){var n=g(t);n&&n.objectRaw&&j(t,{counts:e,isLite:n.isLite,objectRaw:n.objectRaw,reactionId:n.userReactionId,reactionSetId:n.reactionSetId})}(n,r):console.warn("Unable to update object reactions",{objectRaw:t,options:e})},E=function(t,e){var n=e.counts,r=I(t);r&&w(r,n)}},pruO:function(t,e,n){"use strict";n.r(e),n.d(e,"SUPPORTED_OBJECT_TYPES",(function(){return r})),n.d(e,"SIZE_MENU",(function(){return i})),n.d(e,"SIZE_PREVIEW",(function(){return o})),n.d(e,"REACTIONS_COUNTS_RESPONSE_FIELD",(function(){return u}));var r={wall:"wall",wall_reply:"wall_reply"},i={width:96,height:96},o={width:48,height:48},u="reactions_counts"}}]);try{stManager.done("cmodules/bundles/07ed5e94b188401a51c6fd9fb02f3537.eb008ee57715c2740cd8.js")}catch(t){}