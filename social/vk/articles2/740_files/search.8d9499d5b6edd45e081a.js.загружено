(()=>{"use strict";var __webpack_modules__={418431:(e,r,t)=>{t.d(r,{cutTextToHighlight:()=>a});var s="cutTextToHighlight",o=15;function a(e){var r=null;document.querySelectorAll(`${e}:not(.cutTextToHighlight)`).forEach((e=>{if(e.classList.add(s),null===r){var t=getComputedStyle(e).font;r=function(e){var r=document.createElement("canvas").getContext("2d");function t(e){var t=r.measureText(e).width;return Math.ceil(t)}return r.font=e,t}(t)}e.innerHTML=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",s=e.querySelector(".highlight");if(!s)return e.innerHTML;var a=e.innerHTML.indexOf('<em class="highlight">');if(s.offsetLeft+s.offsetWidth<=e.offsetWidth-o)return e.innerHTML;if(s.offsetWidth<e.offsetWidth-o){for(var _=0,i="",c=a;c>0&&_+s.offsetWidth<=e.offsetWidth;){var n=e.innerHTML.lastIndexOf(" ",c-1);if(-1===n&&(n=0),!((_=r(t+(i=e.innerHTML.substring(n,c)+i).trim()))+s.offsetWidth<=e.offsetWidth-o))break;c=n}a=c}if(a>0)return t+e.innerHTML.substring(a).trim();return e.innerHTML}(e,r)}))}},337874:(e,r,t)=>{var s=t(569359),o=t(402108);window.searcher=s.searcher,window.iSearch=s.iSearch,window.searchActions=o.searchActions,window.slideShow=o.slideShow,window.slideHide=o.slideHide;try{stManager.done(jsc("web/search.js"))}catch(e){}},569359:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{searcher:()=>searcher,iSearch:()=>iSearch});var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21466),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(442699),_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(109847),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(519921),_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(414914),_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(705456),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(791563),_web_lib_lang__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(116886),_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(917999),_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(418431),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(719016),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(901659),sectionAuto="auto",sectionAudio="audio",sectionVideo="video",sectionStatuses="statuses",sectionPeople="people",sectionCommunities="communities",sectionMiniApps="mini_apps",sectionQuick="quick",moduleEmpty=void 0,moduleFriends="friends",moduleGroupsCatalog="groups_catalog",moduleGroupsRecommendations="groups_recommendations",paramQuery="c[q]",paramSection="c[section]",paramCategory="c[category]",paramSort="c[sort]",paramPhoto="c[photo]",paramInvite="c[invite]",paramSkipCatalog="c[skip_catalog]",paramHd="c[hd]",paramGroupsRecommendationsModel="c[need_groups_recommendations_model]",paramFrom="c[from]",paramBlockPosition="c[block_position]",searcher={init(e){var r=globalHistory.length;r&&globalHistory[r-1]&&globalHistory[r-1].loc.indexOf("search")?cur.search_return_to=globalHistory[r-1].loc:cur.search_return_to="/",hide("header");var t=ge("search_query");if(!(t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(t,"opts")||{}).isNew){var s=window.iSearch;s.destroy(),vk.id&&s.init(t,e)}elfocus(t),"search"===nav.objLoc[0]&&(extend(cur,{oid:e.user_id,module:"search"}),cur.nav.push(((e,r,t)=>{if(void 0!==e[0]||cur.searchLoc&&void 0!==e.act)return clearTimeout(cur.setLocTO),void(nav.strLoc!==cur.loc&&cur.loc&&hab.setLoc(cur.loc));if(cur.searchLoc){var s=!1;for(var o in t)if("c["===o.substr(0,2)){s=!0;break}if(cur.onLocationChange&&cur.onLocationChange(s),!s)return!0}var a=clone(t);delete a[0];var _=a[paramSection]||a.section||sectionQuick;return ge("search_menu")&&uiRightMenu&&uiRightMenu.switchMenu(geByClass1(`search_menu_${_}`,"search_menu")),searcher.setSection(_),searcher.sendSearchReq(a,!0),!1}))),cur.options||(cur.options={reply_names:{}}),extend(cur.options,e),searcher.applyOptions(e),t.ignoreFixed=cur.section==sectionStatuses,window.scrollTop=bodyNode.scrollTop=pageNode.scrollTop=htmlNode.scrollTop=0,addEvent(window,"scroll",searcher.scrollCheck),addEvent(window,"resize",searcher.onResize),setTimeout(searcher.scrollCheck,50),setTimeout(checkPageBlocks,200);var o=window.audioPlayer;o&&o.showCurrentTrack&&o.showCurrentTrack(),cur._back={text:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("search_back_to"),show:[()=>{hide("header");var r=globalHistory.length;r&&globalHistory[r-1]&&globalHistory[r-1].loc.indexOf("search")&&(cur.search_return_to=globalHistory[r-1].loc),addEvent(window,"scroll",searcher.scrollCheck),addEvent(window,"resize",searcher.onResize);var t=window.iSearch;t.destroy(),vk.id&&t.init(ge("search_query"),e)}],hide:[()=>{removeEvent(window,"scroll",searcher.scrollCheck),removeEvent(window,"resize",searcher.onResize),window.iSearch.destroy()}]},cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_11__.cutTextToHighlight)(".labeled__searchServicesDesc"),this.logSearch(cur.params,e)},sendSearchReq(e,r){if(cur.searchReq)try{cur.searchReq.abort()}catch(e){debugLog(e)}r&&!e.offset&&(vk.no_ads=inArray(e[paramSection],[sectionAudio]),extend(e,{uf:1})),void 0!==cur.useRec&&(e.rec=cur.useRec,delete cur.useRec),e.edit=nav.objLoc.edit,e.sign=nav.objLoc.sign,e.all=nav.objLoc.all,e.change=1,cur.searchLoc&&(e.search_loc=cur.searchLoc),void 0!==cur.topType&&(e.type=cur.topType,delete cur.topType);var t=window.iSearch;t&&t.select&&(t.select.hide(),delete cur.setISearch),cur.loadingMedia||(uiSearch.showProgress("search_query"),ge("search_query").ignoreFixed=e[paramSection]==sectionStatuses),nav.objLoc.from&&(e.from=nav.objLoc.from);var s=this.removeLogClickHandlers,o=this.logSearch;e.act="search_request",e.module=cur.module;var a=+new Date;cur.searchReq=ajax.post("al_search.php",e,{onDone(t,_,i){window.cur.onSearchOrSectionChange&&window.cur.onSearchOrSectionChange.forEach((e=>e())),hide(document.querySelector(".search_seo_info"));var c=e.uf&&ge("results_wrap")?ge("results_wrap"):ge("results"),n=ge("friends_filters_block")?ge("friends_filters_block"):ge("filter_form");if(c.innerHTML=_||"",r&&(n&&(n.innerHTML=i||""),elfocus("search_query")),t.loc){var l=`${locProtocol}//${location.host}/${t.loc}`,u=document.URL===l?"":document.URL;setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_10__.updateCounters.pbind(l,u),10)}searcher.applyOptions(t,r),uiSearch.hideProgress("search_query"),show("search_clear_params");var h=window.audioPlayer;h&&h.showCurrentTrack&&h.showCurrentTrack(),cur.onSearchFinish&&cur.onSearchFinish(),shortCurrency(),setTimeout(checkPageBlocks,200),cur.onSearchDone&&cur.onSearchDone(),s();var d=+new Date-a;t.query_duration=t.query_duration||d,o(e,t)},onFail:()=>(uiSearch.hideProgress("search_query"),!0),showProgress(){addClass(ge(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!0},hideProgress(){removeClass(ge(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!1,cur.loadingMedia=!1},ads:!(!r||e.offset)})},showMore(){var e=ge("ui_search_load_more"),r=ge("search_more_results");if(e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(e)&&!cur.isSearchLoading)if(r&&searcher.appendElements(r),cur.has_more){cur.disableAutoMore=!1,cur.isSearchLoading=!0,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.lockButton)(e);var t=searcher.getSectionParams();t.offset=cur.offset,t.real_offset=cur.real_offset,t.query_id=cur.query_id,t.edit=nav.objLoc.edit,t.sign=nav.objLoc.sign,t.all=nav.objLoc.all,t.act="show_more",t.module=cur.module,cur.section===sectionCommunities&&(t.random_seed=cur.random_seed,t.force_group_id=cur.force_group_id),ajax.post("al_search.php",t,{onDone(r,t){cur.isSearchLoading=!1,t&&(ge("no_results")&&re("no_results"),ge("results").insertBefore(ce("div",{innerHTML:t,id:"search_more_results"}),e),cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_11__.cutTextToHighlight)(".labeled__searchServicesDesc")),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.unlockButton)(e),searcher.applyOptions(r),searcher.scrollCheck()},cache:t[paramSection]!==sectionAudio||t[paramQuery]?1:0})}else hide(e);else r&&searcher.appendElements(r)},switchSection(e,r,t){if(t&&checkEvent(t))return!0;this.removeLogClickHandlers(),r=r||{},e!==sectionCommunities&&e!==sectionMiniApps||(val(paramCategory,0),cur.filtersShown=!1);var s=searcher.getSectionParams(e);if(e!==sectionAuto&&e!==sectionQuick&&r.updateStats&&(s.swt=1),r.tab&&(s.tab=1),ge("search_menu")&&uiRightMenu){var o=geByClass1(`search_menu_${e}`,"search_menu");o&&uiRightMenu.switchMenu(o)}return searcher.setSection(e),searcher.sendSearchReq(s,!0),hasClass(gpeByClass("ui_search","search_query"),"ui_search_fixed")&&scrollToTop(),!1},removeLogClickHandlers(){(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchAuto),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchPeople),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchStatuses),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchCommunities),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchAudio),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchVideo),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceFriendsFind),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceGroupsCatalog)},logSearch(e,r){var t=e[paramQuery];if(t&&0!==(t=t.trim()).length){var s,o=cur.section,a=cur.module,_=cur.query_id,i=r.event_bits,c=r.query_duration,n=r.model_name,l=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(ge("no_results"));switch(o){case sectionAuto:s=_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchAuto;break;case sectionAudio:s=_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchAudio;break;case sectionVideo:s=_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchVideo;break;case sectionStatuses:s=_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchStatuses;break;case sectionPeople:s=_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchPeople;break;case sectionCommunities:s=_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceSearchCommunities;break;case sectionQuick:default:return}switch(a){case moduleFriends:s=_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceFriendsFind;break;case moduleGroupsCatalog:s=_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceGroupsCatalog}a===moduleEmpty&&o===sectionPeople&&(s=_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.serviceFriendsFind),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_2__.saveSearchAttemptStats)(s,0,l,t,_,i,c,n)}},getSectionParams(e){var r=ge("filter_form"),t={};for(var s in(t=!r||e&&e!==cur.section||cur.section===sectionQuick?{[paramSection]:e||cur.section}:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.serializeForm)(r)||{})[paramQuery]=val("search_query"),t)t.hasOwnProperty(s)&&(t[s]&&"0"!=t[s]||delete t[s],"-1"==t[s]&&t[`${s}_custom`]?(t[s]=t[`${s}_custom`],delete t[`${s}_custom`]):t[`${s}_custom`]&&delete t[`${s}_custom`]);return cur.section!==sectionVideo||t[paramSort]||(t[paramSort]="0"),cur.section===sectionPeople&&ge("photo")&&!t[paramPhoto]&&(t[paramPhoto]="0"),cur.section===sectionPeople&&t[paramInvite]&&delete t.from,cur.section!==sectionCommunities||!cur.filtersShown||t[paramQuery]||t[paramCategory]||(t[paramSkipCatalog]="1",cur.module===moduleGroupsRecommendations&&(t[paramGroupsRecommendationsModel]="1",t[paramFrom]=cur.from,t[paramBlockPosition]=cur.block_position)),t},sameParams(e){if(!cur.params)return!1;for(var r in e)if(e.hasOwnProperty(r)&&e[r]!=cur.params[r])return!1;for(var t in cur.params)if(cur.params.hasOwnProperty(t)&&e[t]!=cur.params[t])return!1;return!0},switchAudioTop(e){return cur.useRec=e,cur.audioTop=e,this.switchSection(sectionAudio)},showMedia:(e,r,t)=>(!t||!checkEvent(t))&&(hide(geByClass1("label",r)),show(geByClass1("progress",r)),cur.loadingMedia=!0,searcher.switchSection(e,{updateStats:!0},t)),updResults(){if(cur.customSearchChange)return cur.customSearchChange(),!1;var e=searcher.getSectionParams();if(searcher.sameParams(e)||e[paramSection]===sectionVideo&&!e[paramQuery]&&!nav.objLoc[paramQuery])return!1;cur.onSearchChange&&cur.onSearchChange(e);var r=(cur.section===sectionAuto||cur.section===sectionAudio&&e[paramQuery]&&!ge("audio_lyrics_filter")||cur.section===sectionAudio&&!e[paramQuery]&&ge("audio_lyrics_filter"))&&!e.offset;searcher.sendSearchReq(e,r),hasClass(gpeByClass("ui_search","search_query"),"ui_search_fixed")&&scrollToTop()},onInputChange(e){clearTimeout(cur.requestTimeout),!e||"keydown"===e.type&&13!==e.keyCode?cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),1e3):searcher.updResults()},onKey(){cur.section===sectionQuick&&(clearTimeout(cur.requestTimeout),cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),300))},onEnter(e,r){var t=window.iSearch;t&&t.select&&t.select.isVisible()&&t.select.active>-1||(clearTimeout(cur.requestTimeout),searcher.updResults(),searcher.highlightHotHashtag(r))},checkbox(e,r,t,s){checkbox(e);var o=isChecked(e)?1:0;t&&(o=1-o),val(r,o),s||searcher.updResults()},setSection(e){e!==cur.section&&e!==sectionAuto&&e&&(cur.section=e)},applyOptions(options,changeSection){var iSearch=window.iSearch;iSearch.initSelect(),searcher.setSection(options.section),options.reply_names&&(extend(cur.options.reply_names,options.reply_names),delete options.reply_names),extend(cur,options),cur.params=searcher.getSectionParams();var header=ge("search_header");if(options.tabs)val("search_tabs_wrap",options.tabs),hide(header),show("search_tabs_wrap");else if(options.title){var headerInner=geByClass1("_header_inner",header);val(headerInner,options.title),options.summary&&headerInner.appendChild(ce("span",{className:"page_block_header_count",innerHTML:langNumeric(options.summary,"%s",!0)})),hide("search_tabs_wrap"),show(header)}if(null!=options.controls&&val(geByClass1("_header_extra",header),options.controls||""),void 0!==options.auto_rows&&ge("search_auto_rows")&&(ge("search_auto_rows").innerHTML=options.auto_rows||""),clearTimeout(cur.setLocTO),options.loc)if(changeSection)try{nav.setLoc(options.loc)}catch(e){debugLog(e)}else cur.setLocTO=setTimeout((()=>{if("search"===nav.objLoc[0]||nav.objLoc[0]===sectionCommunities||"brands"===nav.objLoc[0]||nav.objLoc[0].match(/^people($|\/)/)||cur.searchLoc)try{nav.setLoc(options.loc)}catch(e){debugLog(e)}}),100);if(options.htitle&&setDocumentTitle(replaceEntities(stripHTML(options.htitle))),void 0!==options.q){val("search_query",replaceEntities(stripHTML(options.q))||"");var resetEl=ge("search_clear_params");resetEl&&show(resetEl)}if(cur.uiSort&&void 0!==options.sortHide&&(options.sortHide&&cur.uiSort.selectItem(0,!1),cur.uiSort.disable(options.sortHide)),cur.section===sectionAuto&&show(geByClass1("search_menu_auto","search_menu")),options.script)try{eval(options.script)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__.logEvalError)(e,options.script)}var res=ge("results"),sc=ge("search_content"),lighted=hasClass(sc,"highlight");res.className=`search_results search_${cur.section}_results${cur.section===sectionStatuses||cur.section===sectionAuto?" wall_module":""}${cur.section===sectionStatuses&&""!==options.summary||gpeByClass("page_block",res)?"":" page_block"} mark_top_verified`,cur.section===sectionAudio&&(res.className+=" audio_w_covers"),lighted&&addClass(sc,"highlight");var moreResults=ge("search_more_results");cur.has_more||moreResults&&moreResults.firstChild?(hide("seach_pages"),show("ui_search_load_more")):hide("ui_search_load_more")},selectHotHashtag(e){var r=val(e),t=ge("search_query"),s=((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(t,"opts")||{}).onEnter;return val(t,r),s&&s(t,r),statlogsValueEvent("top_hashtag_search",0,"click"),!1},highlightHotHashtag(e){e=e?e.toLowerCase():"";var r=!1,t=geByClass("search_hot_hashtags_item","search_hot_hashtags");return each(t,((t,s)=>{val(s).toLowerCase()===e?(r=!0,addClass(s,"search_hot_hashtags_item_active")):removeClass(s,"search_hot_hashtags_item_active")})),r},toggleFilter(e,r,t){hasClass(e,"search_filter_shut")||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(r)?(addClass(e,"search_filter_open"),removeClass(e,"search_filter_shut"),slideDown(r,200,(()=>{checkPageBlocks(),t&&t()}))):slideUp(r,200,(()=>{addClass(e,"search_filter_shut"),removeClass(e,"search_filter_open"),t&&t()}))},appendElements(e){if(e){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);re(e)}},close:()=>nav.go(cur.search_return_to,{},{back:!0}),toggleMinimizedFilters(e,r,t){var s=e&&domNS(e),o=t?0:200;return void 0===r&&(r=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(s)),!r&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(s)?(cur.filtersShown=!1,removeClass(e,"ui_rmenu_item_expanded"),slideUp(s,o)):r&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(s)&&(cur.filtersShown=!0,val(paramCategory,0),addClass(e,"ui_rmenu_item_expanded"),slideDown(s,o)),!1},onCommunitiesToggle(){"search"==cur.module&&(uiRightMenu.switchMenu(geByClass1(`search_menu_${cur.section}`,"search_menu")),searcher.updResults())},subscribe(e,r,t,s,o,a,_){var i,c,n=gpeByClass("search_row",e);if(cur.unsubscribed=cur.unsubscribed||{},!s&&a&&!cur.unsubscribed[r]){var l=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_warning"),dark:1,bodyStyle:"padding: 20px; line-height: 160%;"},(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_7__.getLang)(a),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("search_group_leave"),(()=>{l.hide(),searcher.subscribe(e,r,t,s,o)}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_cancel"));return!1}s?(i="al_feed.php",c={act:"subscr",oid:r,hash:t,from:o||"search",ref:cur.module},domData(e,"trackcode")&&(c.trackcode=domData(e,"trackcode"))):(i="al_fans.php",c={act:"unsub",oid:r,hash:t,from:"search",ref:cur.module});ajax.post(i,c,{onDone(){_?toggleClass(n,"touched",!!s):(toggle(`search_sub${r}`,!s),toggle(`search_unsub${r}`,!!s)),s||(cur.unsubscribed[r]=1)},onFail(e){if(e)return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_error"),e).hide,2e3),!0},showProgress(){_?(e.tt&&e.tt.destroy(),addClass(n,"loading")):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.lockButton)(e)},hideProgress(){_?removeClass(n,"loading"):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.unlockButton)(e)}})},onResize(){searcher.scrollCheck()},scrollCheck(){if(!(browser.mobile||cur.isSearchLoading||cur.disableAutoMore)){var e=ge("ui_search_load_more");if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(e)){var r=document.documentElement,t=window.innerHeight||r.clientHeight||bodyNode.clientHeight;scrollGetY()+t+200>e.offsetTop&&searcher.showMore()}else{var s=ge("search_more_results");s&&searcher.appendElements(s)}}},switchFilter(e,r,t){if(checkEvent(t))return!1;ge(`c[${e}]`)&&(ge(`c[${e}]`).value=r),cur.section===sectionVideo&&"quality"===e&&ge(paramHd)&&(ge(paramHd).value=r<0?0:1),searcher.updResults()},showMiniAppTooltip(e){var r=e.dataset.appId,t=e.tt&&e.tt.container?e.tt.container:null;t&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(t)&&(t.classList.remove("tt_left"),t.classList.remove("tt_right"),t.classList.remove("GlobalAppsCardTooltipWrapper--up"));var s,o="left",a=-100,_="",i=document.documentElement.clientWidth,c=document.documentElement.clientHeight,n=e.getBoundingClientRect();n.left>i-520?(o="right",s=365):s=-n.width-10,n.top>c-400&&(a=-50,_="GlobalAppsCardTooltipWrapper--up",t&&t.classList.add(_)),(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__.showTooltip)(e,{url:"al_apps.php",params:{act:"mini_app_card_tooltip",app_id:r},className:`GlobalAppsCardTooltipWrapper ${_}`,shift:[s,a],hasover:!0,ajaxdt:200,showdt:300,hidedt:300,center:!1,dir:o})},openMiniApp(e,r,t){t&&showWiki({w:`app${e}`,app_ref:r})}},iSearch={init(e,r){if(!this.inited){var t=this;this.inited=!0,this.input=e,this.cont=e.parentNode.parentNode;var s=ce("div",{className:"results_container",innerHTML:'<div class="result_list"></div>'});this.cont.appendChild(s),this.resultList=geByClass("result_list",s)[0],hide(this.resultList),browser.chrome&&(this.resultList.style.opacity=1),this.resultList.style.width=s.style.width="552px",this.onShowCallback=!!r&&r.onShow,this.initSelect(r),addEvent(e,"keyup click mouseup",t.inputUpHandler),addEvent(document,"click",t.documentClick),addEvent(e,"keypress keydown",t.inputDownHandler),ge("top_search")&&(ge("top_search").onclick=e=>hab.getLoc().indexOf("search")?nav.go("search",e,{search:!0}):(window.searcher&&searcher.close(),!1))}},inputUpHandler(e){var r=window.iSearch;if(r.select){if((r.select.isVisible()&&r.select.active>-1||cur.preventISRequest)&&(delete cur.preventISRequest,inArray(e.keyCode,[KEY.UP,KEY.DOWN,KEY.PAGEUP,KEY.PAGEDOWN,KEY.RETURN])))return cancelEvent(e);clearTimeout(cur.requestTimeout);var t=val(r.input);r.currentTerm=t;var s=cur.section;t?cur.requestTimeout=setTimeout((()=>{cur.setISearch=!0,ajax.post("/hints.php?act=a_gsearch_hints",{q:t,section:s},{onDone(e){r.currentTerm===t&&cur.setISearch&&r.showSelectList(t,e),delete cur.setISearch},cache:1})}),300):r.select.hide()}},documentClick(){var e=window.iSearch;e.select&&e.select.hide()},inputDownHandler(e){var r=window.iSearch;if(r.select){if(!r.select||r.select.active<0)return e.keyCode===KEY.RETURN&&r.select&&(cur.preventISRequest=!0,r.select.hide()),!0;if(e.keyCode===KEY.SPACE||(e.keyCode===KEY.RETURN||10===e.keyCode)&&r.select&&r.select.isVisible()){var t,s=r.select.list.childNodes[r.select.active],o=s?s.getAttribute("val"):"";if(each(r.lastItems,(function(){this[0]===o&&(t=this)})),!t)return;return val(r.input,t[3]+(e.keyCode===KEY.SPACE?" ":"")),elfocus(r.input,r.input.length),e.keyCode!==KEY.SPACE&&(cur.preventISRequest=!0,r.select.hide(),searcher.updResults()),cancelEvent(e)}return e.keyCode!==KEY.RETURN&&10!==e.keyCode||!r.select||!r.select.isVisible()||(triggerEvent(document,e.type,e),cancelEvent(e))}},initSelect(){var e=window._iu,r=window.Select;if(!this.select&&r&&e&&this.resultList){this.guid=e.reg(this);var t=this;this.select=new r(this.resultList,{selectFirst:!1,onItemSelect:this.onItemSelect.bind(this),onShow:()=>((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__.isFunction)(t.onShowCallback)&&t.onShowCallback(),e.sel(t.guid)),onHide:e.sel.pbind(!1),cycle:!0}),this.select.hide()}},showSelectList(e,r){this.select&&((r=isArray(r)&&r.length?r:[]).length?(this.select.clear(),this.lastItems=r,this.select.content(r),this.select.show(),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__.isFunction)(this.onShowCallback)&&this.onShowCallback()):this.select.hide())},onItemSelect(e){var r;if(this.select&&(this.select.hide(),each(this.lastItems,(function(){this[0]===e&&(r=this)})),r)){var t=ce("div",{innerHTML:r[3]});val(this.input,t.innerText||t.textContent),this.input.blur(),searcher.updResults()}},onEvent(e){e.type===(browser.opera||browser.mozilla?"keypress":"keydown")&&this.select.handleKeyEvent(e)},destroy(e){cleanElems(this.resultList),clearTimeout(e?e.requestTimeout:cur.requestTimeout),removeEvent(this.input,"keyup click mouseup",this.inputUpHandler),removeEvent(document,"click",this.documentClick),removeEvent(this.input,"keypress keydown",this.inputDownHandler),this.select&&(this.select.destroy(),delete this.select),this.resultList&&re(this.resultList.parentNode),delete this.lastItems,this.inited=!1},updateResultsList(e){e?e+="px":e=hasClass(ge("search_query_wrap"),"wide")?"512px":"451px",this.resultList.style.width=e}}},402108:(e,r,t)=>{t.d(r,{slideShow:()=>_,slideHide:()=>i,searchActions:()=>c});t(21466);var s=t(561393),o=t(569359),a=t(705456),_=e=>{isVisible(e)||slideDown(e,150)},i=e=>{isVisible(e)&&slideUp(e,150)},c={peopleMessage(e){(0,s.showWriteMessageBox)(window.event||{},e)},peopleAction(e,r,t){ajax.post(r,t,{onDone(r){e.parentNode.replaceChild(ce("span",{innerHTML:r}).firstChild,e)}})},ownerAction(e,r,t){var s=e.parentNode;ajax.post(r,t,{onDone(e){s.innerHTML=e}})},groupAction(e,r,t,s,o){ajax.post("al_groups.php",{act:"member_action",action:r,gid:t,mid:s,hash:o,context:"search"},{onDone(r){e.parentNode.replaceChild(ce("span",{innerHTML:r}).firstChild,e);var t=_tbLink.loc;t&&globalHistoryDestroy(t)}})},inviteToGroup(e,r,t,s,o){var _=o=>{var a="";a=o?`<button class="flat_button button_small button_wide search_btn_invite secondary" onclick="return searchActions.inviteToGroup(this, ${r}, ${t}, '${s}', 1)">${getLang("search_cancel_invitation")}</button>`:`<button class="flat_button button_small button_wide search_btn_invite" onclick="return searchActions.inviteToGroup(this, ${r}, ${t}, '${s}', 0)">${getLang("search_send_invitation")}</button>`,e.parentNode.replaceChild(se(a),e)};return o?ajax.post("/al_page.php",{act:"a_cancel_invite",mid:t,gid:r,hash:s},{onDone(e){_(0)},showProgress:a.lockButton.pbind(e),hideProgress:a.unlockButton.pbind(e)}):ajax.post("/al_page.php",{act:"a_invite",mid:t,gid:r,hash:s},{onDone(r,t){r?_(1):(window.showMsg(gpeByClass("people_row",e),t,"msg"),hide(e))},showProgress:a.lockButton.pbind(e),hideProgress:a.unlockButton.pbind(e)}),!1},showLyrics(e,r,t){var s=ge(`lyrics${e}`);s?isVisible(s)?hide(s):show(s):(s=ce("div",{id:`lyrics${e}`,className:"audio_lyrics_wrap",innerHTML:'<div class="loading"></div>'}),ge(`audio${e}`).appendChild(s),ajax.post("/al_audio.php",{act:"get_lyrics",lid:r,aid:e,top:t},{onDone(e){s.innerHTML=`<div class="audio_lyrics ta_l">${e}</div>`}}))},toggleBanInGroup(e,r,t,s){showBox("/groupsedit.php",{act:"bl_edit",name:`id${r}`,gid:t},{stat:["page.css","ui_controls.js","ui_controls.css"],dark:1})},selectCategory(e,r,t){ge("c[category]").value=r,e&&hasClass(e,"_ui_rmenu_subitem")&&uiRightMenu.switchMenu(e);var s=ge("search_query");return val(s)&&(val(s,""),s.focus(),triggerEvent(s,"keyup")),o.searcher.toggleMinimizedFilters(ge("search_filters_minimized"),!1),o.searcher.updResults(),!1},searchUnchooseGeoPoint(){var e=ge("search_status_map"),r=ge("search_status_map_delete_wrap");removeClass(e,"search_status_map_selected"),setStyle(e,{backgroundImage:""}),r&&r.tt&&r.tt.hide&&r.tt.hide(),val("search_status_map_hidden",""),o.searcher.updResults()},chooseGeoPoint(e,r,t,s){boxQueue.hideLast();var a=Math.pow(10,10),_=200,i=120;window.devicePixelRatio>=2&&(_*=2,i*=2),e=Math.round(e*a)/a,r=Math.round(r*a)/a;var c=ge("search_status_map");addClass(c,"search_status_map_selected"),setStyle(c,{backgroundImage:`url(/maps?lat=${e}&lng=${r}&z=${t}&w=${_}&h=${i})`}),s||(val("search_status_map_hidden",`${e},${r},${t}`),o.searcher.updResults())},searchChooseGeoPoint(){var e={act:"a_choose_place_box",search:1},r=val("search_status_map_hidden").match(/(\-?\d{1,3}(?:\.\d+)?)\,(\-?\d{1,3}(?:\.\d+)?)(?:\,(\d+))?/);r&&(e.lat=floatval(r[1]),e.lon=floatval(r[2]),e.zoom=r[3]||8),showBox("/al_places.php",e),cur.chooseGeoPoint=window.searchActions.chooseGeoPoint},searchUrlOnChange(e,r,t){var s=ge("search_status_url"),a=s.name,_=r?"c[domain]":"c[url]";return radiobtn(e,r,"search_status_hint_domain"),elfocus(s),val(s)&&_!==a&&(s.name=_,o.searcher.updResults()),cancelEvent(t)},onChangeCommunityType(e){e=positive(e),val(ge("c[type]"),e),_("region_filters"),3===e?(_("events_filter"),val(ge("all_events"),isChecked("future")?0:1)):(i("events_filter"),val(ge("all_events"),0)),checkPageBlocks(),window.searchActions.updateCommunityThemes(e),o.searcher.updResults()},updateCommunityThemes(e,r){e=positive(e);var t,s=positive(val(ge("not_safe_search"))),o=[];s?o=cur.communityThemes[e]||[]:each(cur.communityThemes[e]||[],(function(){this[5]||o.push(this)})),r?(t=positive(cur.communityThemesDD.val()),!inArray(t,cur.notSafeThemesIds)&&t||cur.communityThemesDD.clear()):cur.communityThemesDD.clear(),cur.communityThemesDD.setOptions({autocomplete:!1}),cur.communityThemesDD.setData(o),cur.communityThemesDD.setOptions({autocomplete:!0}),e>1?_("cTheme"):i("cTheme")},onChangeCommunityTheme(e){val(ge("c[theme]"),e),o.searcher.updResults()},onChangeNotSafe(e,r,t){var s=val(ge("c[theme]"));inArray(s,cur.notSafeThemesIds)&&val(ge("c[theme]"),""),o.searcher.checkbox(e,r,t,!0),window.searchActions.updateCommunityThemes(val(ge("c[type]")),!0),o.searcher.updResults()}}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto;function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var t=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.loaded=!0,t.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,r,t,s)=>{if(!r){var o=1/0;for(c=0;c<deferred.length;c++){for(var[r,t,s]=deferred[c],a=!0,_=0;_<r.length;_++)(!1&s||o>=s)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](r[_])))?r.splice(_--,1):(a=!1,s<o&&(o=s));if(a){deferred.splice(c--,1);var i=t();void 0!==i&&(e=i)}}return e}s=s||0;for(var c=deferred.length;c>0&&deferred[c-1][2]>s;c--)deferred[c]=deferred[c-1];deferred[c]=[r,t,s]},__webpack_require__.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var t=Object.create(null);__webpack_require__.r(t);var s={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&r&&e;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach((r=>s[r]=()=>e[r]));return s.default=()=>e,__webpack_require__.d(t,s),t},__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.e=()=>Promise.resolve(),__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={5973:0};__webpack_require__.O.j=r=>0===e[r];var r=(r,t)=>{var s,o,[a,_,i]=t,c=0;for(s in _)__webpack_require__.o(_,s)&&(__webpack_require__.m[s]=_[s]);if(i)var n=i(__webpack_require__);for(r&&r(t);c<a.length;c++)o=a[c],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[a[c]]=0;return __webpack_require__.O(n)},t=self.webpackChunkvk=self.webpackChunkvk||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var __webpack_exports__=__webpack_require__.O(void 0,[8592],(()=>__webpack_require__(337874)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();