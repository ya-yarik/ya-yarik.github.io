(()=>{"use strict";var e,t,n,r={237432:(e,t,n)=>{n.d(t,{default:()=>p});var r=n(667294),s=n(887854),i=n.n(s),o=n(408091),a=n(634777),l=n(379333),d="0 0 24 24",c="check_circle_off_24",_=!1;function u(){_||((0,a.addSpriteSymbol)(new(i())({id:c,viewBox:d,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="check_circle_off_24"><path d="M12 0c6.629 0 12 5.373 12 12 0 6.629-5.373 12-12 12-6.629 0-12-5.373-12-12C0 5.371 5.373 0 12 0zm0 1.5C6.2 1.5 1.5 6.2 1.5 12S6.2 22.5 12 22.5 22.5 17.8 22.5 12 17.8 1.5 12 1.5z" fill="currentColor" /></symbol>'})),_=!0)}var f=function(e){return(0,a.useIsomorphicLayoutEffect)((function(){u()}),[]),r.createElement(l.SvgIcon,(0,o.assign)({},e,{viewBox:d,id:c,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};f.mountIcon=u;const p=f},482792:(e,t,n)=>{n.d(t,{default:()=>p});var r=n(667294),s=n(887854),i=n.n(s),o=n(408091),a=n(634777),l=n(379333),d="0 0 24 24",c="check_circle_on_24",_=!1;function u(){_||((0,a.addSpriteSymbol)(new(i())({id:c,viewBox:d,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="check_circle_on_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12zm6.207-14.793a1 1 0 00-1.414-1.414L10 14.586l-2.793-2.793a1 1 0 00-1.414 1.414l3.5 3.5a1 1 0 001.414 0l7.5-7.5z" fill="currentColor" /></symbol>'})),_=!0)}var f=function(e){return(0,a.useIsomorphicLayoutEffect)((function(){u()}),[]),r.createElement(l.SvgIcon,(0,o.assign)({},e,{viewBox:d,id:c,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};f.mountIcon=u;const p=f},587041:(e,t,n)=>{n.d(t,{vkIndexer:()=>r});n(820075),n(976142),n(66108),n(296253),n(751876),n(283946);function r(e,t,n){this.list=e,this.iterCur=0,this.iterEnd=e?e.length:0,this.index={},this.callback=n||function(){},this.prepareFunc=t||function(e){return e},setTimeout(this.indexIteration.bind(this),10)}r.prototype.delimiter=r.delimiter=new RegExp("[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\#\\+\\?\\\\]+","g"),r.prototype.trimmer=new RegExp("^[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\+\\?\\\\]+|[\\s\\-,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\\\]+$","g"),r.prototype.toTranslit={1072:"a",1073:"b",1074:"v",1075:"g",1076:"d",1077:"e",1078:"zh",1079:"z",1080:"i",1081:"y",1082:"k",1083:"l",1084:"m",1085:"n",1086:"o",1087:"p",1088:"r",1089:"s",1090:"t",1091:"u",1092:"f",1093:"h",1094:"ts",1095:"ch",1096:"sh",1097:"sh",1099:"y",1101:"e",1102:"yu",1103:"ya",1105:"e",1098:"",1100:""},r.prototype.toLocalCase={f:"a",",":"b","<":"b",d:"v",u:"g",l:"d",t:"e",";":"zh",":":"zh",p:"z",b:"i",q:"y",r:"k",k:"l",v:"m",y:"n",j:"o",g:"p",h:"r",c:"s",n:"t",e:"u",a:"f","[":"h","{":"kh",w:"ts",x:"ch",i:"sh",o:"sh",s:"y","'":"e",'"':"e",".":"yu",">":"yu",z:"ya","`":"e","~":"e",m:"","]":"","}":""},r.prototype.toLocalTranslit={1072:"f",1074:"d",1075:"u",1076:"l",1077:"t",1079:"p",1080:"b",1081:"q",1082:"r",1083:"k",1084:"v",1085:"y",1086:"j",1087:"g",1088:"h",1089:"c",1090:"n",1091:"e",1092:"a",1094:"w",1095:"x",1096:"i",1097:"o",1099:"s",1103:"z",1098:"m"},r.prototype.indexIteration=function(){for(var e=Math.min(this.iterEnd,this.iterCur+200),t=this.iterCur;t<e;t++){var n=this.list[t];try{n._order=t}catch(e){}this.add(n)}this.iterCur=t,t>=this.iterEnd?this.callback(this):setTimeout(this.indexIteration.bind(this),10)},r.prototype.strToPrefixes=function(e){for(var t={},n=winToUtf(e).toLowerCase().split(this.delimiter),r=n.length;r--;){var s=n[r],i="";if(s){for(var o=0;o<6;o++){var a=s.charCodeAt(o);if(a){var l=this.toTranslit[a],d=s.substr(o,1);i+=null!=l?l:d}}t[i]=1}}return t},r.prototype.strToSearchPrefixes=function(e){for(var t=[],n=e.toLowerCase().split(this.delimiter),r=n.length;r--;){var s={},i=n[r],o="",a="",l="",d=i.length>1;if(i){for(var c=0;c<6;c++){var _=i.charCodeAt(c);if(_){var u=this.toTranslit[_],f=i.substr(c,1);if(o+=null!=u?u:f,d){var p=this.toLocalCase[f],h=this.toLocalTranslit[_];a+=null!=p?p:f,l+=null!=h?h:f}}}s[o]=1,d&&(s[a]=2,s[l]=3),t.push(s)}}return t},r.prototype.toIndexTree=function(e,t){for(var n=this.index,r=0;r<6;r++){var s=e.substr(r,1)||-1;n=n[s]?n[s]:n[s]=5==r?[]:{}}n.push(t)},r.prototype.remove=function(e){var t=this.prepareFunc(e),n=this.strToPrefixes(t);for(var r in n)if(n.hasOwnProperty(r)){for(var s=this.index,i=0;i<6;i++){var o=r.substr(i,1)||-1;if(!s[o])break;s=s[o]}if(s.length)for(var a in s)if(this.equals(s[a],e)){s.splice(a,1);break}}},r.prototype.equals=function(e,t){for(var n in e)if(e.hasOwnProperty(n))switch(typeof e[n]){case"object":if(!this.equals(e[n],t[n]))return!1;break;case"function":if(void 0===e[n]||e[n].toString()!=t[n].toString())return!1;break;default:if(e[n]!=t[n])return!1}for(var r in t)if(void 0===t[r])return!1;return!0},r.prototype.intersect=function(e,t){var n=[];if(isNumeric(e[0])||isNumeric(t[0]))return e.filter((function(e){return-1!==t.indexOf(e)}));for(;e.length>0&&t.length>0;)e[0]._order<t[0]._order?e.shift():(e[0]._order>t[0]._order||this.equals(e[0],t[0])&&n.push(e.shift()),t.shift());return n},r.prototype.add=function(e){var t=this.prepareFunc(e),n=this.strToPrefixes(t);for(var r in n)n.hasOwnProperty(r)&&this.toIndexTree(r,e)},r.prototype.search=function(e){var t=this.index,n=this.strToSearchPrefixes(e),r=[],s=!1;for(var i in n)if(n.hasOwnProperty(i)){if(s&&!r)break;var o=this.localSearch(n[i],0,t);o.sort((function(e,t){return e._order-t._order})),r=s?this.intersect(r,o):o,s=!0}for(var a=r[0],l=r.length+1,d=[],c=1;c<l;c++){var _=r[c];_!=a&&(d.push(a),a=_)}return d},r.prototype.localSearch=function(e,t,n){if(!n)return[];var r={};for(var s in e)if(e.hasOwnProperty(s)){var i=s.substr(t,1)||-1;r[i]||(r[i]={}),r[i][s]=1}if(6==t++||!n)return n;var o=[];for(var a in r)if(-1==a)for(var l in n)n.hasOwnProperty(l)&&o.push.apply(o,this.localSearch(r[a],t,n[l]));else{var d=this.localSearch(r[a],t,n[a]);o.push.apply(o,d)}return o}},549278:(e,t,n)=>{n.d(t,{BEST_FRIENDS_MAX_COUNT:()=>s,AUTOMATIC_BEST_FRIENDS_FROM_HINTS_COUNT:()=>i,BEST_FRIENDS_SELECT_MODE:()=>r});var r,s=100,i=10;!function(e){e.ADD="add",e.DELETE="delete"}(r||(r={}))},150163:(e,t,n)=>{n.d(t,{BestFriendsConversationsBlock:()=>_});var r=n(570655),s=n(667294),i=n(471709),o=n(750598),a=n(881150),l=n(248586),d=n(956462),c=n(41437),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.conversations,r=t.conversationsShownCount,a=t.showMoreConversations,_=t.onConversationClick,u=t.fromSearch,f=u?n:n.slice(0,r),p=Math.min(n.length-r,5),h=(0,c.getLang)("wall_best_friends_settings_box_conversation_more",p);return s.createElement("div",{className:"BestFriendsSettingsBox__chats"},s.createElement("div",{className:"BestFriendsSettingsBox__header"},s.createElement("span",{className:"BestFriendsSettingsBox__sectionTitle"},(0,c.getLang)("wall_best_friends_settings_box_title_chats"))),f.map((function(t,n){return s.createElement(o.default,{key:n,aside:u?"":e.getButton(t),onClick:function(){return _(t.peerId,!e.isAllFriendsAdded(t)||u,u,u)}},s.createElement(l.default,{size:"34",title:t.name,description:e.getDescription(t),photo:s.createElement(i.default,{photos:e.getAvatarImages(t)})}))})),!u&&p>0&&s.createElement(d.ListMore,{className:"BestFriendsSettingsBox__listMore",onClick:a},h))},t.prototype.isAllFriendsAdded=function(e){var t=this;return e.userIds.every((function(e){return t.props.bestFriends.includes(e)}))},t.prototype.getAvatarImages=function(e){var t=this,n=[];return e.photoUrl?n.push(e.photoUrl):e.userIds.slice(0,4).forEach((function(e){var r=t.props.friends.find((function(t){return t.id===e}));r&&n.push(r.photoUrl)})),n},t.prototype.getButton=function(e){var t=(0,c.getLang)("wall_best_friends_settings_box_conversation_add"),n="secondary";return this.isAllFriendsAdded(e)&&(t=(0,c.getLang)("wall_best_friends_settings_box_conversation_cancel"),n="tertiary"),s.createElement(a.default,{appearance:n,size:"s"},t)},t.prototype.getDescription=function(e){return(0,c.getLang)("wall_best_friends_settings_box_conversation_friends_count",e.userIds.length)},t}(s.Component)},487321:(e,t,n)=>{n.d(t,{BestFriendsFriendsBlock:()=>f});var r=n(570655),s=n(667294),i=n(658861),o=n(123683),a=n(750598),l=n(248586),d=n(856612),c=n(41437),_=n(659397),u=n(549278),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.friendsList,r=t.fromSearch,o=t.clearFriends;return s.createElement("div",{className:"BestFriendsSettingsBox__friends"},s.createElement("div",{className:"BestFriendsSettingsBox__header"},s.createElement("span",{className:"BestFriendsSettingsBox__sectionTitle"},(0,c.getLang)("wall_best_friends_settings_box_title_friends")),!r&&s.createElement(d.default,{className:"BestFriendsSettingsBox__link",onClick:o},(0,c.getLang)("wall_best_friends_settings_box_friends_clear"))),s.createElement(i.default,{className:"BestFriendsSettingsBox__list",loadMore:function(){},hasMore:!1},n.map((function(t){return e.renderItem(t,r)}))))},t.prototype.renderItem=function(e,t){var n=this;void 0===t&&(t=!1);var r=this.props.isSelected(e.id),i=this.props.bestFriends.length>=u.BEST_FRIENDS_MAX_COUNT&&!r,d=t||i,c=(0,_.classNames)("BestFriendsSettingsBox__item",{"BestFriendsSettingsBox__item--disabled":i});return s.createElement(a.default,{key:e.id,onClick:function(){return n.props.select(e.id,t,t?u.BEST_FRIENDS_SELECT_MODE.ADD:"",t)},aside:d?"":s.createElement(o.ListMultiSelectControl,{isSelected:r}),className:c,canBeHovered:!i,selectable:!i},s.createElement(l.default,{size:"34",title:e.name,photo:e.photoUrl}))},t}(s.Component)},905329:(e,t,n)=>{n.d(t,{BestFriendsSettingsBox:()=>S});var r=n(570655),s=n(667294),i=n(150163),o=n(487321),a=n(361554),l=n(736434),d=n(30081),c=n(881150),_=n(423558),u=n(41437),f=n(791563),p=n(587041),h=n(705456),v=n(549278),g=n(550344),S=function(e){function t(t){var n=e.call(this,t)||this;n.onClickSave=function(){(0,g.sendBestFriendsAnalytic)(g.BestFriendsEventType.saveBestFriendsList);var e=function(e){(0,g.sendBestFriendsAnalytic)(g.BestFriendsEventType.updatePopupSave);var t=n.props.onSave;n.setState({isSaving:!0}),window.ajax.post("al_wall.php",{act:"edit_best_friends",batch:JSON.stringify(n.state.batchItems),hash:n.props.hash},{onDone:function(){n.setState({isSaving:!1}),window.curBox().hide(),t&&t(n.state.bestFriends.length)},onFail:function(e){return(0,f.showFastBox)((0,u.getLang)("global_error"),e||(0,u.getLang)("global_unknown_error")),n.setState({isSaving:!1}),window.curBox().hide(),!0},showProgress:function(){return(0,h.lockButton)(e)},hideProgress:function(){return(0,h.unlockButton)(e)}})};if(0===n.state.bestFriends.length)e(null);else{var t='\n        <div class="BestFriendsSettingsBoxConfirm">\n          <span class="BestFriendsSettingsBoxConfirm__title">'+(0,u.getLang)("wall_best_friends_settings_box_confirm_save")+'</span>\n          <span class="BestFriendsSettingsBoxConfirm__text">'+(0,u.getLang)("wall_best_friends_settings_box_confirm_save_text")+"</span>\n        </div>\n      ";(0,f.showFastBox)((0,u.getLang)("wall_best_friends_settings_box_confirm_title"),t,(0,u.getLang)("global_save"),e,(0,u.getLang)("global_cancel"),(function(){window.curBox().hide(),(0,g.sendBestFriendsAnalytic)(g.BestFriendsEventType.updatePopupCancel)}))}},n.showMoreConversations=function(){(0,g.sendBestFriendsAnalytic)(g.BestFriendsEventType.moreChats),n.setState({conversationsShownCount:n.state.conversationsShownCount+5})},n.isSelected=function(e){return n.state.bestFriends.includes(e)},n.select=function(e,t,s,i){i&&(0,g.sendBestFriendsAnalytic)(g.BestFriendsEventType.selectFriendFromSearch);var o=n.state,a=o.batchItems,l=o.friendsSorted,d=s===v.BEST_FRIENDS_SELECT_MODE.ADD;Array.isArray(e)||(e=[e]);var c=l.slice(),_=a.slice();e.forEach((function(e){var s=n.isSelected(e),i=n.getBestFriendsFromBatch(_).length;if(s||!(i>=v.BEST_FRIENDS_MAX_COUNT)){if(!d||!s){var o=_.findIndex((function(t){return t.user_id===e}));-1!==o?_.splice(o,1):_.push({op:s?v.BEST_FRIENDS_SELECT_MODE.DELETE:v.BEST_FRIENDS_SELECT_MODE.ADD,user_id:e})}if(t){var a=c.findIndex((function(t){return t.id===e}));c.unshift.apply(c,(0,r.__spreadArray)([],(0,r.__read)(c.splice(a,1))))}}})),n.setState({searchQuery:"",bestFriends:n.getBestFriendsFromBatch(_),batchItems:_,friendsSorted:c})},n.clearFriends=function(){n.select(n.state.bestFriends),(0,g.sendBestFriendsAnalytic)(g.BestFriendsEventType.clear)},n.onConversationClick=function(e,t,s,i){var o=n.state.conversationsSorted,a=n.getConversationByPeerId(e);if(a){var l=o.slice(),d=n.state.conversationsShownCount;if(s){var c=l.map((function(e){return e.peerId})).indexOf(e);l.unshift.apply(l,(0,r.__spreadArray)([],(0,r.__read)(l.splice(c,1)))),c+1>d&&(d+=1)}t&&(i?(0,g.sendBestFriendsAnalytic)(g.BestFriendsEventType.selectChatFromSearch):(0,g.sendBestFriendsAnalytic)(g.BestFriendsEventType.addFriendsFromChat)),n.setState({conversationsSorted:l,conversationsShownCount:d},(function(){var e=t?v.BEST_FRIENDS_SELECT_MODE.ADD:v.BEST_FRIENDS_SELECT_MODE.DELETE;n.select(a.userIds,t,e)}))}};var s=t.conversations,i=t.bestFriends;return n.state={isSaving:!1,searchQuery:"",friendsSorted:n.getFilteredFriendsList(),conversationsSorted:s,conversationsShownCount:2,bestFriends:i,batchItems:[]},n.initIndexer(),n}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=e.friendsSorted;e.bestFriends.length||this.select(t.slice(0,v.AUTOMATIC_BEST_FRIENDS_FROM_HINTS_COUNT).map((function(e){return e.id})),!1,v.BEST_FRIENDS_SELECT_MODE.ADD)},t.prototype.render=function(){var e=this,t=this.state.searchQuery,n=this.getFilteredData(),r=n.friendsSorted,i=n.conversationsSorted,o=this.props,d=o.onClose,c=0===o.friends.length,_=t&&!r.length&&!i.length;return s.createElement(a.BoxModal,{className:"BestFriendsSettingsBox",appearance:"white",hasScroll:!1,title:this.getHeader(),actionButtons:this.getActionModalButtons(),hint:this.getHint(),onClose:d},s.createElement(l.BlockSearchInput,{className:"BestFriendsSettingsBox__search",onChange:function(t){return e.setState({searchQuery:t.target.value})},placeholder:(0,u.getLang)("wall_best_friends_settings_box_search_placeholder"),autoFocus:!0,key:"search",value:t}),c||_?this.renderNotFound(c):this.renderContent(r,i,Boolean(t)))},t.prototype.renderNotFound=function(e){var t=e?(0,u.getLang)("wall_best_friends_settings_no_friends"):(0,u.getLang)("wall_search_nothing_found");return s.createElement("div",{className:"BestFriendsSettingsBox__notFound"},t)},t.prototype.renderContent=function(e,t,n){return void 0===n&&(n=!1),s.createElement("div",{className:"BestFriendsSettingsBox__inner"},Boolean(t.length)&&s.createElement(i.BestFriendsConversationsBlock,{conversations:t,conversationsShownCount:this.state.conversationsShownCount,showMoreConversations:this.showMoreConversations,onConversationClick:this.onConversationClick,fromSearch:n,bestFriends:this.state.bestFriends,friends:this.state.friendsSorted}),Boolean(e.length)&&s.createElement(o.BestFriendsFriendsBlock,{bestFriends:this.state.bestFriends,fromSearch:n,friendsList:e,select:this.select,isSelected:this.isSelected,clearFriends:this.clearFriends}))},t.prototype.initIndexer=function(){var e=this.props,t=e.friends,n=e.conversations;this.indexedFriends=new p.vkIndexer(t,(function(e){return[e.name,e.domain].filter(Boolean).join(" ")})),this.indexedConversations=new p.vkIndexer(n,(function(e){return e.name}))},t.prototype.getFilteredFriendsList=function(){var e=this.props,t=e.friends,n=e.bestFriends;return(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(n.map((function(e){return t.find((function(t){return t.id===e}))})))),(0,r.__read)(t.filter((function(e){return!n.includes(e.id)}))))},t.prototype.getFilteredData=function(){var e=this.state,t=e.searchQuery,n=e.friendsSorted,r=e.conversationsSorted;return t&&(n=this.indexedFriends.search(t),r=this.indexedConversations.search(t)),{friendsSorted:n,conversationsSorted:r}},t.prototype.getHeader=function(){return s.createElement(s.Fragment,null,s.createElement("p",{className:"BestFriendsSettingsBox__title"},(0,u.getLang)("wall_best_friends_settings_box_title")),s.createElement("span",{className:"BestFriendsSettingsBox__subtitle"},s.createElement(d.default,null,(0,u.getLang)("wall_best_friends_settings_box_subtitle"))))},t.prototype.getActionModalButtons=function(){var e=this.props.onClose,t=this.state.isSaving;return[s.createElement(c.default,{key:"close",appearance:"tertiary",onClick:function(){return e()}},(0,u.getLang)("global_cancel")),s.createElement(_.default,{key:"publish",appearance:"primary",onClick:this.onClickSave,loading:t,disabled:this.compareBestFriendsList()},(0,u.getLang)("global_save"))]},t.prototype.getHint=function(){var e=this.state.bestFriends;return e.length?(0,u.getLang)("wall_best_friends_settings_box_friends_count",e.length):""},t.prototype.compareBestFriendsList=function(){var e=this.props.bestFriends,t=this.state.bestFriends;return e.length===t.length&&e.every((function(e){return t.includes(e)}))},t.prototype.getConversationByPeerId=function(e){return this.state.conversationsSorted.find((function(t){return t.peerId===e}))},t.prototype.getBestFriendsFromBatch=function(e){var t=this.props.bestFriends.slice();return e.forEach((function(e){e.op===v.BEST_FRIENDS_SELECT_MODE.DELETE?t.splice(t.indexOf(e.user_id),1):t.push(e.user_id)})),t},t}(s.Component)},399084:(e,t,n)=>{n.d(t,{bestFriendsBoxSettings:()=>c});var r=n(667294),s=n(905329),i=n(40897),o=n(41437),a=n(791563),l=n(611386),d=n(621260),c=function(e){window.ajax.post("al_wall.php",{act:"get_best_friends_box_data"},{loader:!0,onDone:function(t,n,a,l){(0,i.showComponentInBox)(r.createElement(s.BestFriendsSettingsBox,{friends:t,bestFriends:n,conversations:a,hash:l,onClose:function(){var e;return null===(e=(0,d.curBox)())||void 0===e?void 0:e.hide()},onSave:function(t){var n;e&&e(t);var r=(0,o.getLang)("wall_best_friends_settings_box_saved"),s=(0,o.getLang)("wall_best_friends_settings_box_saved_text");0===t&&(r=(0,o.getLang)("wall_best_friends_settings_box_saved_empty"),s=(0,o.getLang)("wall_best_friends_settings_box_saved_empty_text")),(0,d.showDoneBox)('<div class="top_result_header">'+r+"</div>"+s),null===(n=(0,d.curBox)())||void 0===n||n.hide()}}),{width:450,onDestroy:function(e){(0,i.destroyComponentInBox)(e)}})},onFail:function(e){return(0,a.showFastBox)((0,o.getLang)("global_error"),e||(0,o.getLang)("global_unknown_error")),(0,l.logError)(new Error("get_best_friends_box_data error"+(e?": "+e:""))),!0}})}},706389:(e,t,n)=>{var r=n(990461);window.openPostPrivacyModal=r.openPostPrivacyModal;try{window.stManager.done(window.jsc("web/post_privacy_modal.js"))}catch(e){}},249892:(e,t,n)=>{n.d(t,{PRIVACY_MODAL_MODES:()=>f,PrivacyModal:()=>g});var r=n(667294),s=n(550344),i=n(399084),o=n(30081),a=n(881150),l=n(88181),d=n(47886),c=n(442699),_=n(41437),u=n(116886),f={BEST_FRIENDS_ENTRYPOINT:"bestFriendsEntrypoint",CHOOSE_BEST_FRIENDS:"chooseBestFriends",CREATE_POST_FOR_BEST_FRIENDS:"createPostForBestFriends",CREATE_POST_FOR_FRIENDS:"createPostForFriends",OWN_POST_FOR_BEST_FRIENDS:"ownPostForBestFriends",OWN_POST_FOR_BEST_FRIENDS_EMPTY:"ownPostForBestFriendsEmpty",OWN_POST_FOR_FRIENDS:"ownPostForFriends"},p="best_friends_only",h="friends_only",v=function(e){var t=new URLSearchParams({post_privacy:e,own:1,new_post:1}).toString();return"/wall"+window.vk.id+"?"+t},g=function(e){var t=e.mode,n=e.name,g=e.sex,S=e.onClose,E=function(e,t,n,r){var o="",a="",g="",S=function(){},E=function(e){(0,s.sendBestFriendsAnalytic)(s.BestFriendsEventType.editBestFriendsFromPopup),r(),(0,i.bestFriendsBoxSettings)((function(t){if(0!==t)if(e)window.open(v(p));else{var n=document.getElementById("best_friends_only");if(n){var r=(0,_.getLang)("wall_best_friends_settings_box_conversation_friends_count",t);n.innerHTML=(0,c.getTemplate)("visibility_access_best_friends_only_option",{html:(0,c.getTemplate)("visibility_access_best_friends_only_item",{count_text:r}),count:t}),l.default.showEditPost(),l.default.togglePostVisibilityAccess(n,d.VISIBILITY_ACCESS_OPTIONS.ONLY_BEST_FRIENDS,"",!0);var s=document.querySelector(".BestFriendsSettingsEntrypoint");null==s||s.remove()}}}))};switch(e){case f.BEST_FRIENDS_ENTRYPOINT:o=(0,_.getLang)("wall_privacy_modal_best_friends_own_title"),a=(0,_.getLang)("wall_privacy_modal_best_friends_own_text"),g=(0,_.getLang)("wall_privacy_modal_choose_best_friends_button"),S=E;break;case f.CHOOSE_BEST_FRIENDS:o=(0,u.langSex)(n,(0,_.getLang)("wall_privacy_modal_best_friends_title","raw")).replace("{name}",t),a=(0,_.getLang)("wall_privacy_modal_choose_best_friends_text"),g=(0,_.getLang)("wall_privacy_modal_choose_best_friends_button"),S=function(){return E(!0)};break;case f.CREATE_POST_FOR_BEST_FRIENDS:o=(0,u.langSex)(n,(0,_.getLang)("wall_privacy_modal_best_friends_title","raw")).replace("{name}",t),a=(0,_.getLang)("wall_privacy_modal_best_friends_text"),g=(0,_.getLang)("wall_privacy_modal_create_post_button"),S=function(){(0,s.sendBestFriendsAnalytic)(s.BestFriendsEventType.createPostFromPopupBest),window.open(v(p)),r()};break;case f.CREATE_POST_FOR_FRIENDS:o=(0,u.langSex)(n,(0,_.getLang)("wall_privacy_modal_friends_title","raw")).replace("{name}",t),a=(0,_.getLang)("wall_privacy_modal_friends_text"),g=(0,_.getLang)("wall_privacy_modal_create_post_button"),S=function(){(0,s.sendBestFriendsAnalytic)(s.BestFriendsEventType.createPostFromPopupFriends),window.open(v(h)),r()};break;case f.OWN_POST_FOR_BEST_FRIENDS:o=(0,_.getLang)("wall_privacy_modal_own_post_for_best_friends_title"),a=(0,_.getLang)("wall_privacy_modal_own_post_for_best_friends_text"),g=(0,_.getLang)("wall_privacy_modal_create_post_more_button"),S=function(){(0,s.sendBestFriendsAnalytic)(s.BestFriendsEventType.createPostFromPopupBest),window.open(v(p)),r()};break;case f.OWN_POST_FOR_BEST_FRIENDS_EMPTY:o=(0,_.getLang)("wall_privacy_modal_own_post_for_best_friends_empty_title"),a=(0,_.getLang)("wall_privacy_modal_own_post_for_best_friends_empty_text"),g=(0,_.getLang)("wall_privacy_modal_choose_best_friends_button"),S=function(){return E(!0)};break;case f.OWN_POST_FOR_FRIENDS:o=(0,_.getLang)("wall_privacy_modal_own_post_for_friends_title"),a=(0,_.getLang)("wall_privacy_modal_own_post_for_friends_text"),g=(0,_.getLang)("wall_privacy_modal_create_post_more_button"),S=function(){(0,s.sendBestFriendsAnalytic)(s.BestFriendsEventType.createPostFromPopupFriends),window.open(v(h)),r()}}return{title:o,text:a,buttonText:g,action:S}}(t,n,g,S),y=E.title,m=E.text,F=E.buttonText,b=E.action;return r.createElement("div",{className:"PrivacyModal__box"},r.createElement("span",{className:"PrivacyModal__close",onClick:S}),r.createElement("h3",{className:"PrivacyModal__title"},y),r.createElement(o.default,{element:"div",className:"PrivacyModal__text"},m),r.createElement(a.default,{className:"PrivacyModal__button",size:"m",onClick:function(){return b()}},F))}},990461:(e,t,n)=>{n.d(t,{openPostPrivacyModal:()=>a});var r=n(667294),s=n(550344),i=n(40897),o=n(249892),a=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=0);var a=[o.PRIVACY_MODAL_MODES.CHOOSE_BEST_FRIENDS,o.PRIVACY_MODAL_MODES.CREATE_POST_FOR_BEST_FRIENDS,o.PRIVACY_MODAL_MODES.OWN_POST_FOR_BEST_FRIENDS,o.PRIVACY_MODAL_MODES.OWN_POST_FOR_BEST_FRIENDS_EMPTY].includes(e),l=[o.PRIVACY_MODAL_MODES.CREATE_POST_FOR_FRIENDS,o.PRIVACY_MODAL_MODES.OWN_POST_FOR_FRIENDS].includes(e);a?(0,s.sendBestFriendsAnalytic)(s.BestFriendsEventType.clickToLockBestFriends):l?(0,s.sendBestFriendsAnalytic)(s.BestFriendsEventType.clickToLockFriends):e===o.PRIVACY_MODAL_MODES.BEST_FRIENDS_ENTRYPOINT&&(0,s.sendBestFriendsAnalytic)(s.BestFriendsEventType.clickToBestFriendsEntrypoint);var d={containerClass:"PrivacyModal",width:450,onDestroy:function(e){(0,i.destroyComponentInBox)(e)}};(0,i.showComponentInBox)(r.createElement(o.PrivacyModal,{mode:e,name:t,sex:n,onClose:function(){(0,i.destroyComponentInBox)(!0)}}),d)}}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=r,e=[],i.O=(t,n,r,s)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,r,s]=e[c],a=!0,l=0;l<n.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(a=!1,s<o&&(o=s));if(a){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,r,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var s=Object.create(null);i.r(s);var o={};t=t||[null,n({}),n([]),n(n)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,i.d(s,o),s},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.e=()=>Promise.resolve(),i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={2884:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,s,[o,a,l]=n,d=0;for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(l)var c=l(i);for(t&&t(n);d<o.length;d++)s=o[d],i.o(e,s)&&e[s]&&e[s][0](),e[o[d]]=0;return i.O(c)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[8288,8592,4509,4877,2963,8102,8003,8816,613,1140],(()=>i(706389)));o=i.O(o)})();