(()=>{"use strict";var e,t,o,i={239784:(e,t,o)=>{function i(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M10.6 2c.98.03 1.63.58 1.96 1.6l.06.18.04.15.06.2.04.13.03.01.06-.02.1-.04.13-.06c1.16-.53 2.05-.43 2.78.36l.1.12.67.83c.6.8.58 1.63 0 2.54l-.1.15-.1.14-.12.16-.05.1-.03.04v.02l.08.05.1.06.13.07c1.13.58 1.6 1.35 1.42 2.4l-.03.16-.2.87c-.13.56-.23.82-.63 1.19-.39.35-.83.5-1.42.55h-.18l-.16.01-.2.01-.15.02.01.12.01.08.03.14c.26 1.25-.03 2.1-.97 2.62l-.14.08-.96.47c-.9.4-1.72.2-2.48-.58l-.12-.13-.11-.13-.14-.15-.08-.08-.04-.04-.07.08-.09.08-.1.11c-.78.93-1.6 1.27-2.6.88L7 17.49l-.86-.42-.26-.13c-.39-.22-.6-.42-.82-.87a2.38 2.38 0 01-.13-1.54l.03-.19.04-.2L5 14 4.93 14l-.12-.01h-.15c-1.27-.03-2.03-.51-2.33-1.55l-.04-.15-.24-1.04c-.2-.97.2-1.72 1.11-2.28l.16-.1.15-.07.17-.1.13-.08v-.02l-.05-.08-.06-.1-.09-.12c-.76-1.02-.85-1.92-.22-2.8l.1-.12.67-.83c.64-.75 1.47-.9 2.48-.52l.17.07.15.06.18.08.11.04.03-.01.03-.08.04-.11.03-.14c.3-1.17.9-1.83 1.96-1.92L9.46 2zm-.05 1.47h-1.1l-.1.01c-.24.03-.4.16-.54.68l-.04.13-.04.17c-.09.29-.22.61-.39.93a4.8 4.8 0 00-.94.46 5.28 5.28 0 01-.95-.29l-.28-.13c-.2-.08-.36-.13-.48-.14h-.07a.45.45 0 00-.33.16l-.06.06-.64.8-.08.1c-.15.21-.17.4.16.88l.18.25c.18.26.35.57.5.9-.11.32-.19.65-.23.99a5.3 5.3 0 01-.83.6l-.28.14c-.5.28-.57.46-.53.72l.01.06.23 1 .04.13c.07.25.21.39.79.41l.32.02c.3.01.65.07 1 .16.18.29.4.55.63.8.02.43-.02.85-.1 1.18-.16.78 0 .9.32 1.06l.92.45c.1.05.19.07.28.07h.05c.15-.02.32-.13.55-.4l.21-.24c.21-.23.48-.47.78-.68l.24.01h.5l.24-.02c.3.22.57.46.78.69l.21.24c.27.3.44.4.6.4h.06c.05 0 .1-.02.14-.04l.08-.03.92-.45.12-.06c.24-.14.34-.32.2-1a5.07 5.07 0 01-.1-1.18c.24-.25.45-.51.64-.8.34-.1.7-.15 1-.16l.31-.02c.67-.03.75-.2.83-.54l.22-.93c.07-.33.07-.53-.5-.85l-.29-.15a5.26 5.26 0 01-.83-.59 4.87 4.87 0 00-.22-.98c.14-.34.32-.65.49-.9l.19-.26c.33-.48.3-.67.16-.88l-.04-.06-.65-.8c-.11-.13-.2-.23-.37-.26h-.06c-.13 0-.3.04-.54.14l-.3.13c-.27.11-.6.22-.94.28-.3-.18-.61-.33-.94-.45-.16-.3-.29-.62-.37-.9l-.1-.33c-.15-.56-.32-.66-.58-.68zM10 6.9a3.11 3.11 0 110 6.23 3.11 3.11 0 010-6.23zm0 1.48a1.64 1.64 0 100 3.27 1.64 1.64 0 000-3.27z" fill="currentColor"/></svg>',name:"gear_outline_20"}}o.d(t,{getIcon20GearOutline:()=>i})},467196:(e,t,o)=>{function i(){return{icon:'<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 1.5a8.5 8.5 0 110 17 8.5 8.5 0 010-17zM10 3a7 7 0 100 14 7 7 0 000-14zm3.07 9.06c.3.28.3.76.02 1.06a4.06 4.06 0 01-.85.65 4.36 4.36 0 01-2.24.63 4.36 4.36 0 01-2.24-.63 4.06 4.06 0 01-.85-.65.75.75 0 011-1.11l.2.18a3.16 3.16 0 001.89.71 2.88 2.88 0 001.9-.71l.1-.1a.75.75 0 011.07-.03zM7.62 7.25a1.13 1.13 0 110 2.25 1.13 1.13 0 010-2.25zm4.75 0a1.13 1.13 0 110 2.25 1.13 1.13 0 010-2.25z" fill="currentColor"/></svg>',name:"smile_outline_20"}}o.d(t,{getIcon20SmileOutline:()=>i})},455518:(e,t,o)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="user_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="user_outline_20__Icons-20/user_outline_20"><g id="user_outline_20__user_outline_20"><path opacity=".1" d="M0 0h20v20H0z"/><path d="M12.5 5a2.5 2.5 0 10-5 0 2.5 2.5 0 005 0zM14 5a4 4 0 11-8 0 4 4 0 018 0zM4 15.5c0 .72.36 1 1 1h10c.64 0 1-.28 1-1 0-2.33-2.57-3.5-6-3.5s-6 1.17-6 3.5zm-1.5 0c0-3.48 3.33-5 7.5-5s7.5 1.52 7.5 5c0 1.63-1.1 2.5-2.5 2.5H5c-1.4 0-2.5-.87-2.5-2.5z" id="user_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"user_outline_20"}}o.d(t,{getIcon20UserOutline:()=>i})},750238:(e,t,o)=>{function i(){return{icon:'<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.73 11.48a.75.75 0 01.94-.5 7.26 7.26 0 011.64.71 4.22 4.22 0 012.15 3.2.75.75 0 01-1.49.19 2.72 2.72 0 00-1.43-2.1 5.76 5.76 0 00-1.3-.56.75.75 0 01-.5-.94zM6 5a4 4 0 114 4 .75.75 0 010-1.5A2.5 2.5 0 107.5 5 .75.75 0 016 5zM3.22 17.36c.45.42 1.08.64 1.78.64h9.44l.78.78a.75.75 0 101.06-1.06L3.78 5.22a.75.75 0 00-1.06 1.06l4.48 4.48c-.95.2-1.8.5-2.51.93A4.23 4.23 0 002.5 15.5c0 .81.27 1.44.72 1.86zm2.24-4.38A2.74 2.74 0 004 15.5c0 .46.14.67.25.77.12.11.35.23.75.23h7.94l-4.42-4.42c-1.27.13-2.31.45-3.06.9z" fill="currentColor"/></svg>',name:"user_slash_outline_20"}}o.d(t,{getIcon20UserSlashOutline:()=>i})},676972:(e,t,o)=>{o.d(t,{WallEdit:()=>m});o(530522),o(66108),o(296253),o(991181),o(579665),o(95767),o(21466),o(751876),o(59357);var i=o(944890),n=o(897499),s=o(924507),r=o(705456),a=o(791563),l=o(653439),c=o(621260),d=o(239784),p=o(455518),u=o(750238),_=o(116886),g=o(467196),w=o(873078);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var o=[],i=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(o);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var m={handleEditEsc:function(e){e.keyCode==KEY.ESC&&m.cancelEditPost()},editPostDisableSign:function(e){if(!e.no_sign&&!cur.skipWpeCheckingChanging){var t=ge("wpe_signed");e.no_sign=!0,hasClass(t,"checkbox_pic")||checkbox(t,!1),disable(t,!0)}},editPostSignEnabled:function(){var e=ge("wpe_signed");return isChecked(e)&&!hasClass(e,"disabled")?1:0},editPostSwitchSign:function(e){if(e&&!hasClass(e,"disabled")){var t=isChecked(e),o=e.querySelector(".PostOption__iconWrapper"),i="",n="";t?(i=(0,_.getLang)("wall_suggest_sign_disabled"),n=(0,u.getIcon20UserSlashOutline)().icon):(i=(0,_.getLang)("wall_suggest_sign_enabled"),n=(0,p.getIcon20UserOutline)().icon),o.innerHTML=n,domData(e,"title",i),window.tooltips&&tooltips.hide(e,{onHide:e.onmouseover.bind(e)}),checkbox(e,!t)}},editPost:function(e,t,o,r,v,f,P){if(!window.Emoji)return stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){m.editPost(e,t,o,r,v,f)})),!1;var b=ge("wpe_text");if(cur.editingPost&&(cur.editingPost[0]!=e||cur.editingPost[1])&&b)return!!window.Emoji&&Emoji.focus(b);var y,E=window.wkcur&&wkcur.shown&&wkcur.post==e?geByClass1("_wall_post_cont",wkLayer):ge("wpt"+e),C=domQuery1(".copy_quote",domPN(E)),k=v.poster_options,S=k&&k.poster_config,W=S&&v.poster_available&&!C,T=W&&v.poster_bkg_id;cur.postWpeIsPoster=T,T&&o&&(o=o.filter((e=>{if(Array.isArray(e)){var t=h(e,1)[0];return["postpone","copyright",i.MEDIA_TYPE_DONUT_DURATION].includes(t)}}))),y="market_comment"==v.reply?ge("market_comment"+e.replace(/(\d+)market_(\d+)/,"$1_$2")):ge("post"+e);var I=v.wkview?"wl_post_actions_wrap":v.reply?"wpe_bottom"+e:geByClass1("ui_actions_menu_wrap",y);addClass(y,"wpe_wrap");var x,O=geByClass1("post_edit_button",y)||geByClass1("reply_edit_button",y);O&&setStyle(O,{visibility:"hidden"}),cur.editingPost=[e,E,I,v],v.wkview?(x=geByClass1("post_author",ge("wl_post"),"div"),WkView.wallOnEdit(e,v)):x=geByClass1(v.reply?"reply_author":"post_author",y),hide(geByClass1("wall_signed",domPN(E)));var j=ce("span",{className:"wpe_info"}),B=geByClass1(v.reply?"like_wrap":"post_full_like_wrap",y,"div"),L=ge("post_publish_wrap"+e);x&&(re(geByClass1("wpe_info",x)),cur.editingPost.push(x.appendChild(j))),cur.editingPost.push(B),cur.editingPost.push(L),cur.lang=extend(cur.lang||{},v.lang),cur.options=extend(cur.options||{},{share:v.share}),cur.editHash=r,v.tpls&&addTemplates(v.tpls),val(j,'<span class="divider"></span>'+(v.reply?(0,_.getLang)("wall_editing_reply"):(0,_.getLang)("wall_editing_post"))),addEvent(window,"keydown",m.handleEditEsc),t=Emoji.emojiToHTML(clean(replaceEntities(t)),!0);var M="",A="",F="",H="wpe_post_settings_btn";if(v.post_settings&&(A+=v.post_settings),v.signed&&!v.no_sign)if(v.is_publish){var D="";D=v.signed>0?(0,p.getIcon20UserOutline)().icon:(0,u.getIcon20UserSlashOutline)().icon,F+=`<div class="checkbox_pic PostOption suggest_sign_pic${v.signed>0?" on":""}" id="wpe_signed" onclick="WallEdit.editPostSwitchSign(this)" data-title="${v.signed>0?(0,_.getLang)("wall_suggest_sign_enabled"):(0,_.getLang)("wall_suggest_sign_disabled")}" onmouseover="showTitle(this, false, [10,10]);" aria-label="${(0,_.getLang)("wall_suggest_subscribe")}" role="checkbox" aria-checked="false" tabindex="0">\n             <span class="blind_label">${(0,_.getLang)("wall_suggest_subscribe")}</span>\n             <span class="PostOption__iconWrapper">\n               ${D}\n             </span>\n           </div>`}else A+=`<div id="wpe_signed" class="checkbox${v.signed>0?" on":""}" onclick="checkbox(this)">${(0,_.getLang)("wall_suggest_subscribe")}</div>`;if(A||F){if(A){var z=(0,d.getIcon20GearOutline)().icon;F+=`\n          <div class="post_settings PostSettings" id="${H}">\n            <span onmouseover="Wall.showPostSettings(this);" onclick="Wall.showPostSettings(this, event);" class="PostOption PostSettings__gear" tabindex="0" role="button">\n              <span class="PostOption__iconWrapper">${z}</span>\n            </span>\n            <span class="_post_settings_items">${A}</span>\n          </div>`}M=`<div class="post_edit_settings_wrap">${F}</div>`}var U=(0,g.getIcon20SmileOutline)().icon,N=L&&intval(L.getAttribute("data-suggest"))?(0,_.getLang)("wall_publish_suggest"):(0,_.getLang)("global_save"),$=ce("div",{id:"wpe_cont",innerHTML:`\n        <div class="clear_fix">\n          <div class="wpe_text_cont _emoji_field_wrap">\n            <div class="emoji_smile_wrap _emoji_wrap">\n              <div class="emoji_smile _emoji_btn" title="${stripHTML((0,_.getLang)("wall_reply_emoji_hint"))}" onmouseover="return WallEdit.emojiShowTT(this, event);"\n                onmouseout="return WallEdit.emojiHideTT(this, event);" onmousedown="return cancelEvent(event);">\n                <div class="emoji_smile_icon_inline_svg emoji_smile_icon">${U}</div>\n              </div>\n            </div>\n            <div id="wpe_text" class="dark" contenteditable="true">${t}</div>\n          </div>\n        </div>\n        <div id="wpe_warn"></div>\n        <div id="wpe_media_preview" class="clear_fix media_preview"></div>\n        <div id="wpe_post_actions_btns" class="wpe_post_actions_btns"></div>\n        ${v.add?`<div class="wpe_auth">${v.add}</div>`:""}\n        <div class="wpe_buttons">\n          ${W?'<div class="poster__open-btn-wrapper poster" id="wpe_page_poster_btn"><div class="poster__open-btn poster"></div></div>':""}\n          ${v.noatt?"":'<div id="wpe_add_media" class="page_add_media"><span class="add_media_lnk"></span></div>'}\n          ${M}\n        </div>`},{display:"none"}),V=$.querySelector(".wpe_buttons"),R=w.FlatButton.render({appearance:w.FlatButtonAppearance.PRIMARY,size:w.FlatButtonSize.M,children:N,restAttrs:{id:"wpe_save"}}),Q=()=>m.savePost();R.addEventListener("click",Q);var Z=w.FlatButton.render({className:"wpe_cancel",appearance:w.FlatButtonAppearance.TERTIARY,size:w.FlatButtonSize.M,children:(0,_.getLang)("global_cancel")}),q=()=>m.cancelEditPost();Z.addEventListener("click",q),window.cur.destroy.push((()=>{R&&R.removeEventListener("click",Q),Z&&Z.removeEventListener("click",q)})),V.appendChild(R),V.appendChild(Z);var G=$.querySelector(".Post__copyrightButton");G&&G.parentNode.appendChild(G),E.parentNode.insertBefore($,E),(0,l.updateAriaElements)();var Y={introText:(0,_.getLang)("profile_mention_start_typing"),noResult:(0,_.getLang)("profile_mention_not_found")},J=function(){var e=ge("wpe_text");return Emoji.init(e,{ttDiff:-48,rPointer:!0,controlsCont:e.parentNode,shouldFocus:!T,ref:"post",onChange:v.check_sign&&!v.no_sign&&m.editPostDisableSign.pbind(v),onSend:function(){m.savePost()},noEnterSend:!0,noStickers:!0,checkEditable:function(){Wall.checkPostLen.pbind(e,"wpe_warn",Emoji.val(e)),cur.posterWpe&&!cur.posterWpe.isOpen()&&m.checkPosterAvailability()},initUploadForImagePasteCallback:window.Page?Page.initUploadForImagePaste:void 0})};v.noatt?setTimeout((function(){addClass("wpe_media_preview","med_no_attach"),show(E.previousSibling,"wpe_media_preview"),hide(E,I,B,L),cur.wallEditComposer=Composer.init(ge("wpe_text"),{lang:Y}),Emoji.editableFocus("wpe_text"),cur.weEmoji=J()}),0):setTimeout((function(){show(E.previousSibling),hide(E,I,B,L);var t,i=[],r=[];if(v.reply?(each(f,(function(){inArray(this[0],["photo","video","audio","doc","link"])&&i.push(this)})),r=["album",n.MEDIA_SELECTOR_GROUP]):v.copy?(each(f,(function(){inArray(this[0],["photo","video","audio","doc","postpone","mark_as_ads"])&&i.push(this)})),r=["album","share","link","page",n.MEDIA_SELECTOR_GROUP]):i=f,i.length>0){var l=geByClass1("VerticalVideoLayerInfo");t={lnk:ge("wpe_add_media").firstChild,preview:"wpe_media_preview",types:i,options:extend({toId:e.split("_")[0],disabledTypes:r,limit:v.copy?1:v.reply?2:10,toggleLnk:v.reply||v.copy,editable:!v.reply&&!v.copy,sortable:!v.reply&&!v.copy,from:P?"ads":v.reply?"comment":"post"},v.media_opts||{})},v.teWidth&&(t.options.teWidth=v.teWidth),v.teHeight&&(t.options.teHeight=v.teHeight),"photo_comment"!==v.reply&&"video_comment"!==v.reply||(t.options.nocl=1),("photo_comment"===v.reply||l)&&(t.options.maxShown=0,t.options.hideAfterCount=0),l&&(t.options.vectorIcon=!0),t.gearEl=H}var d=ge("wpe_text"),p=[];if(v.reply||v.copy||!cur.postFieldZoomText||(addEvent(d,"keydown paste",(function(){setTimeout((function(){cur.postFieldZoomText(d)}),0)})),p.push((function(){setTimeout((function(){cur.postFieldZoomText(d)}),10)}))),S&&p.push((()=>{setTimeout((()=>{m.checkPosterAvailability()}),0)})),v.check_sign&&!v.no_sign&&p.push(function(e,t){e._media_added&&"postpone"!==t&&m.editPostDisableSign(e)}.pbind(v)),p.length&&(t.options.onAddMediaChange=function(e,t){each(e,(function(e,o){o(t)}))}.pbind(p)),t&&(t.actionsEl=ge("wpe_post_actions_btns")),W){var u=null;v.signed&&!v.no_sign&&v.is_publish&&(u=v.check_sign&&m.editPostDisableSign.bind(m,v));var g={posterConfig:S,onChange:u,isPublish:v.is_publish,postFromId:k.post_from_owner_id};m.initPosterEditor(g),cur.skipWpeCheckingChanging=T,t.options.poster=cur.posterWpe,setTimeout(m.checkPosterAvailability)}if(cur.wallEditComposer=Composer.init(d,{lang:Y,media:t,edit:!0}),t){cur.wallEditMedia=cur.dropboxAddMedia=cur.wallEditComposer.addMedia,WallUpload.attachToEl(y);for(var w=0,h=o.length;w<h;++w)cur.wallEditMedia.chooseMedia.apply(cur.wallEditMedia,o[w]),"postpone"==o[w][0]&&cur.editingPost.push(o[w][1])}if(T&&W){var b={text:d.innerHTML,bkgId:v.poster_bkg_id};m.openPosterEditor(b)}if(setTimeout(function(e){e._media_added=!0}.pbind(v),0),(0,s.isPostTopicEditingEnabled)(v)){var C=ge("wpe_post_actions_btns"),x=window.cur.wallEditMedia&&window.cur.wallEditMedia.lnkId,O=(0,s.initPostTopicEditingSelector)(String(x),C,v.topic_options);O&&window.cur.destroy.push(O.onDestroy)}if(cur.weEmoji=J(),cur.onEditFormSizeUpdate&&cur.onEditFormSizeUpdate(),!v.reply&&!v.copy&&cur.postFieldZoomText&&cur.postFieldZoomText(d),window._videoLastInlined[0]&&isAncestor(window._videoLastInlined[0],y)&&revertLastInlineVideo(),v.is_trending){var j=(0,_.getLang)("wall_prometheus_edit_warn_title"),M=(0,_.getLang)("wall_prometheus_edit_warn"),A=(0,a.showFastBox)(j,M,(0,_.getLang)("global_continue"),(()=>F(!0)),(0,_.getLang)("global_cancel"),(()=>F(!1)));function F(e){A.setOptions({onHide:()=>{}}),e?Emoji.editableFocus("wpe_text",!1,!0):m.cancelEditPost(),void 0!==e&&(0,c.curBox)().hide()}A.setOptions({onHide:()=>F()}),A.changed=!0,setTimeout((()=>{d.blur()}),0)}}),0)},initPosterEditor:function(e){var t=se("<div class='post_info'></div>"),o=cur.editingPost[1],i=domClosest("post_info",o)||domClosest("wl_post_body_wrap",o),n=ge("wpe_text"),s=geByClass1("post_edit_settings_wrap",i),r=geByClass1("wpe_auth",i),a=r?r.innerHTML:"";window.domInsertAfter(t,i);var l=function(){return!1},c=function(){m.closeFancyTooltipsInPost(),m.openPosterEditor(),cur.posterWpe.sendStatsInfo("open")},d={onPostOpen:function(){var e=cur.posterWpe.getTextInputEl();Wall.restoreCaretPositionForPoster(e),cur.skipWpeCheckingChanging=!1},onPreHide:function(){Wall.saveCaretPositionForPoster(cur.posterWpe.getTextInputEl()),m.closeFancyTooltipsInPost();var e=domPN(n),t=ge("wpe_post_actions_btns"),o=ge("wpe_cont"),i=cur.posterWpe.getErrorWrapperElement(),s=geByClass1("wpe_error",i);isVisible(s)&&o.insertBefore(s,domFC(o)),e.appendChild(t)},onPostHide:function(){var e=ge("wpe_post_settings_btn"),t=geByClass1("suggest_sign_pic",cur.posterWpe.getPostOptionsWrapperEl());t&&s.appendChild(t),e&&s.appendChild(e),show(i);var o=cur.posterWpe.getTextAsHtml();o&&o.match(Emoji.emojiRegex)&&(o=o.replace(Emoji.emojiRegex,Emoji.emojiReplace)),n.innerHTML=o,Wall.restoreCaretPositionForPoster(n)},onPreUploaderOpen:function(){var e=cur.posterWpe.getTextInputEl();Wall.saveCaretPositionForPoster(e)},onPostUploaderClose:function(){var e=cur.posterWpe.getTextInputEl();Wall.restoreCaretPositionForPoster(e)},onOverTextLimit:function(){m.disablePoster(!0),cur.posterWpe.closeEditor(),cur.posterWpe.sendStatsInfo("auto_disable"),cur.posterWpe.state.toggled=!0},onChangeData:e.onChange,onSend:function(e){cur.posterWpeSendParams=e,m.savePost()},onCancelClick:function(){m.cancelEditPost()},onDestroy:function(){re(t)},getPostOwnerId:function(){return e.isPublish?cur.oid:e.postFromId},authorInfoTemplate:a,width:i.clientWidth,containerClasses:"poster_wall-edit",prefixId:"wpe-",appendToElem:t};cur.openPosterWpeBtn=ge("wpe_page_poster_btn"),cur.posterWpe=new window.Poster(e.posterConfig,d),addEvent(cur.openPosterWpeBtn,"click",c),addEvent(cur.openPosterWpeBtn,"mousedown",l),cur.destroy.push((function(){removeEvent(cur.openPosterWpeBtn,"click",c),removeEvent(cur.openPosterWpeBtn,"mousedown",l)}))},posterDestroy:function(){cur.posterWpe.closeEditor(),cur.posterWpe.destroy(),cur.openPosterWpeBtn=null,cur.posterWpeSendParams=null,cur.posterWpe=null,cur.postWpeIsPoster=!1},openPosterEditor:function(e){if(cur.posterWpe&&!cur.posterWpe.state.disabled){e=e||{};var t=cur.editingPost[1],o=ge("wpe_text"),i=domClosest("post_info",t)||domClosest("wl_post_body_wrap",t),n=e.bkgId,s=window.browser.windows7||window.browser.windowsVista||window.browser.windowsXp;Wall.saveCaretPositionForPoster(o);var r=e.text||o.innerHTML;r=(r=r.replace(/\n/g,"<br/>")).replace(/<img[^>]*>/g,(function(e){var t=ce("div",{innerHTML:e}).firstChild,o=Emoji.getCode(t);return o?s?" ":Emoji.codeToChr(o):e})),hide(i);var a=ge("wpe_post_settings_btn"),l=geByClass1("suggest_sign_pic",i),c=cur.posterWpe.getPostOptionsWrapperEl(),d=ge("wpe_cont"),p=geByClass1("wpe_error",d);if(l&&c.appendChild(l),a&&c.appendChild(a),isVisible(p)){var u=cur.posterWpe.getErrorWrapperElement();u.innerHTML="",u.appendChild(p)}var _=cur.posterWpe.getBtnsWrapper(),g=ge("wpe_post_actions_btns");g&&(_.firstChild?domInsertBefore(g,_.firstChild):_.appendChild(g),g.children.length||_.children.length>1?show(_):hide(_)),cur.posterWpe.openEditor(),cur.posterWpe.setText(r),n&&cur.posterWpe.setBkg(n,!0)}},checkPosterAvailability:function(){if(cur.posterWpe){var e=ge("wpe_text"),t=cur.wallEditMedia?cur.wallEditMedia.getMedias():[],o=cur.posterWpe.isTextFieldValid(e),i=Wall.checkAttachesForPoster(t),n=o&&i;!n!==cur.posterWpe.state.disabled&&m.disablePoster(!n),n&&cur.posterWpe.state.toggled&&(m.openPosterEditor(),cur.posterWpe.sendStatsInfo("auto_enable"),cur.posterWpe.state.toggled=!1)}},disablePoster:function(e){cur.posterWpe&&(void 0===e&&(e=!0),cur.posterWpe.state.disabled=e,toggleClass(cur.openPosterWpeBtn,"_disable",e))},isPosterEditorOpen:function(){return cur.posterWpe&&cur.posterWpe.isOpen()},closeFancyTooltipsInPost:function(){var e=cur.wallEditMedia.lnkId;cur["postPostponeTT"+e]&&cur["postPostponeTT"+e].hide(),cur["post_action_btn"+e]&&cur["post_action_btn"+e].hide(),(0,s.topicUISelectorHide)(e)},emojiShowTT:function(e,t){return void 0!==cur.weEmoji&&Emoji.ttShow(cur.weEmoji,e,t)},emojiHideTT:function(e,t){return void 0!==cur.weEmoji&&Emoji.ttHide(cur.weEmoji,e,t)},cancelEditPost:()=>(cur.donutAttachesApproved=!1,m.savePostSuccess()),savePostSuccess(e,t,o,n,s){if(cur.editingPost){var a=cur.editingPost[0],l=ge(cur.editingPost[1]),c=ge(cur.editingPost[2]),d=cur.editingPost[3],p=ge("wpe_save"),u=cur.editingPost[4],g=cur.editingPost[5],w=cur.editingPost[6],h=cur.editingPost[7];if(cur.posterWpe&&l){var v=cur.postWpeIsPoster;m.posterDestroy();var f=domClosest("wpe_wrap",l)||ge("wl_post");f&&toggleClass(f,"post_poster",v)}if(a&&l&&p&&!(0,r.isButtonLocked)(p)){var P=ge("wpe_text");if(0===e)return!!window.Emoji&&Emoji.focus(P);cur.editingPost=!1,cur.dropboxAddMedia=!1,removeEvent(window,"keydown",m.handleEditEsc),WallUpload.attachToEl("submit_post_box"),Wall.deinitComposer(P);var b=ge("wpe_add_media");b&&cleanElems(b.firstChild);var y=ge("post"+a),E=geByClass1("post_edit_button",y)||geByClass1("reply_edit_button",y);if(E&&setStyle(E,{visibility:""}),removeClass(y,"wpe_wrap"),-1!=e){if(void 0!==e){val(l,e),val(u," - "+(d&&d.reply?(0,_.getLang)("wall_reply_saved"):(0,_.getLang)("wall_post_saved")));var C=geByClass1("rel_date",y);if(h){t&&C&&(C.innerHTML=t);var k=geByClass1("post_date",y),S=geByClass1("page_friends_only",y),W=geByClass1("page_best_friends_only",y);o&&!S?k.appendChild(se(o)):!o&&S&&re(S),n&&!W?k.appendChild(se(n)):!n&&W&&re(W),(0,i.updatePostponedPostDonatorIcon)(y,s)}setTimeout(animate.pbind(u,{opacity:0},500,re.pbind(u)),1500),a.match(/^-?\d+photo_/)?window.Photoview&&Photoview.commSaved(a):a.match(/^-?\d+video_/)&&window.Videoview&&Videoview.commSaved(a)}else re(u);show(c,l,g,w),show(geByClass1("wall_signed",domPN(l))),re(l.previousSibling),d.wkview&&WkView.wallOnEdited(a),"exchange"==d.from&&re("exchange_msg"),window.audioPlayer&&window.audioPlayer.showCurrentTrack&&window.audioPlayer.showCurrentTrack(),geByClass1("author",y).focus()}else Wall.postponedPublished(a)}}},savePostFailed:function(e){var t=ge("wpe_cont"),o=geByClass1("wpe_error",t);if(o||(o=se('<div class="wpe_error error"><div>'),t.insertBefore(o,domFC(t))),cur.posterWpe&&cur.posterWpeSendParams&&cur.posterWpe.unlockEditPoster(),val(o,e||(0,_.getLang)("global_unknown_error")),isVisible(o)||(slideDown(o,100),vk.widget&&cur.scrollbar&&cur.scrollbar.scrollIntoView(o,100)),m.isPosterEditorOpen()){var i=cur.posterWpe.getErrorWrapperElement();i.innerHTML="",i.appendChild(o),cur.posterWpeSendParams=null}return!0},savePost:function(e){if(cur.editingPost){var t=cur.editingPost[0],o=ge("wpe_save"),n=cur.editingPost[3],l=cur.editingPost[6];if(t&&o&&(!(0,r.isButtonLocked)(o)||cur.posterWpeSendParams)){window.Wall&&Wall.updatePostAuthorData(t);var d=cur.wallEditComposer,p=cur.wallEditMedia||{},u=Composer.getSendParams(d,m.savePost.pbind(e)),g=(0,i.fieldValueIsDonutOnlyPost)(void 0,p);cur.posterWpeSendParams&&cur.posterWpeSendParams.fallbackObj&&(u.attach1_type="photo",u.attach1=cur.posterWpeSendParams.fallbackObj.owner_id+"_"+cur.posterWpeSendParams.fallbackObj.id,u.poster_photo_hash=cur.posterWpeSendParams.fallbackObj.post_hash,u.poster_from_layer=window.wkcur&&window.wkcur.shown?1:0);var w=cur.onepost?"one":(window.wkcur||{}).shown?"wk":"";if(n.from?w=n.from:t.match(/^-?\d+photo_/)&&cur.pvShown?w="photo":t.match(/^-?\d+video_/)&&window.mvcur&&mvcur.mvShown&&!mvcur.minimized?w="video":t.match(/^-?\d+market_/)&&ge("market_comments_wrap")&&(w="market"),!u.delayed){var h;if((h=ge("friends_only"+p.lnkId))&&(u.friends_only=isChecked(h)),(h=ge("best_friends_only"+p.lnkId))&&(u.best_friends_only=isChecked(h)),(h=ge("wpe_mark_as_ads"))&&(u.mark_as_ads=isChecked("wpe_mark_as_ads")?1:0),extend(u,(0,i.getDonutPostParams)(g,p)),cur.posterWpeSendParams&&(u.poster_bkg_id=cur.posterWpeSendParams.bkgId,u.poster_bkg_access_hash=cur.posterWpeSendParams.accessHash),!u.attach1_type&&!u.message&&!n.copy)return!!window.Emoji&&Emoji.focus(ge("wpe_text"));n.save_result_type&&(u.save_result_type=n.save_result_type);var v=geByClass1("wpe_error",ge("wpe_cont"));if(cur.posterWpe&&cur.posterWpeSendParams){var f=cur.posterWpe.getErrorWrapperElement();v=geByClass1("wpe_error",f)}v&&hide(v);var P=cur.wallEditMedia&&cur.wallEditMedia.lnkId;extend(u,(0,s.getPostTopicSelectorParams)(String(P)));var b=(0,i.isPaidAttachPicked)(p,cur.oid);u.donut_duration&&-1!==u.donut_duration&&b&&!cur.donutAttachesApproved?(0,a.showFastBox)((0,_.getLang)("publish_postponed_title"),(0,_.getLang)("wall_publish_donut_freeing_attaches_confirmation_title"),(0,_.getLang)("publish_postponed_btn"),(()=>{(0,c.curBox)().hide(),cur.donutAttachesApproved=!0,m.savePost()}),(0,_.getLang)("global_cancel")):l&&intval(l.getAttribute("data-suggest"))?(extend(u,{act:"post",suggest:t,signed:m.editPostSignEnabled(),close_comments:ge("wpe_close_comments")?isChecked("wpe_close_comments")?1:0:"",mute_notifications:ge("wpe_mute_notifications")?isChecked("wpe_mute_notifications")?1:0:"",hash:cur.editHash,to_id:t.split("_")[0]}),ajax.post("al_wall.php",Wall.fixPostParams(u),{showProgress:r.lockButton.pbind(o),hideProgress:r.unlockButton.pbind(o),onDone:Wall.suggestPublished.pbind(t),onFail:m.savePostFailed,noSort:!0})):(extend(u,{act:"save",post:t,whole:1,hash:cur.editHash,signed:m.editPostSignEnabled(),close_comments:ge("wpe_close_comments")?isChecked("wpe_close_comments")?1:0:"",from:w}),vk.widget&&cur.options&&extend(u,{max_w:cur.options.max_w,reply_max_w:cur.options.reply_max_w,from:cur.options.from}),ajax.post("al_wall.php",Wall.fixPostParams(u),{showProgress:r.lockButton.pbind(o),hideProgress:r.unlockButton.pbind(o),onDone:function(){if(ge("wpe_close_comments")){var o=ge("post"+t);Wall.onCloseComments(u.close_comments,o)}cur.postWpeIsPoster=!!cur.posterWpeSendParams,cur.donutAttachesApproved=!1,e?e(...arguments):m.savePostSuccess(...arguments)},onFail:m.savePostFailed,noSort:!0}))}}}}}},924507:(e,t,o)=>{o.d(t,{getPostTopicSelectorParams:()=>n.getPostTopicSelectorParams,isPostTopicEditingEnabled:()=>n.isPostTopicEditingEnabled,isPostTopicSettingEnabled:()=>n.isPostTopicSettingEnabled,topicUISelectorHide:()=>a.topicUISelectorHide,initPostTopicCreatingSelector:()=>c,initPostTopicEditingSelector:()=>d});var i=o(25180),n=o(24737),s=o(892814),r=o(415340),a=o(690969),l=function(e,t,o){var n=i.TopicUISelector.create(t,{linkId:e,selectTopicId:s.selectTopicId});if(n)return(0,s.initActionsParamsState)(e,n),n.selectTopicId(o[r.WallPostParams.topicId]),{clearSelection:function(){n.clearSelection()},onDestroy:function(){n.destroy()}}},c=function(e,t){var o;return l(e,t,((o={})[r.WallPostParams.topicId]=n.TOPIC_ID_NONE,o))},d=function(e,t,o){var i,s;return l(e,t,((i={})[r.WallPostParams.topicId]=null!==(s=o[r.WallPostParams.topicId])&&void 0!==s?s:n.TOPIC_ID_NONE,i))}},415340:(e,t,o)=>{var i;o.d(t,{WallPostParams:()=>i}),function(e){e.topicId="topic_id"}(i||(i={}))},892814:(e,t,o)=>{o.d(t,{getSelectorRegistry:()=>r,initActionsParamsState:()=>a,getActionParams:()=>l,selectTopicId:()=>d});var i=o(570655),n=o(415340),s=new Map,r=function(e){return s.get(e)},a=function(e,t){return function(e,t){return s.set(e,t)}(e,{actionParams:void 0,selector:t})},l=function(e){var t;return null===(t=s.get(e))||void 0===t?void 0:t.actionParams},c=function(e,t){!function(e,t){var o=s.get(e);void 0!==o&&s.set(e,t(o))}(e,(function(e){return(0,i.__assign)((0,i.__assign)({},e),{actionParams:t})}))},d=function(e,t){var o;c(e,((o={})[n.WallPostParams.topicId]=t,o))}},24737:(e,t,o)=>{o.d(t,{TOPIC_ID_NONE:()=>s,getPostTopicSelectorParams:()=>r,isPostTopicSettingEnabled:()=>a,isPostTopicEditingEnabled:()=>l});var i=o(415340),n=o(892814),s=-1,r=function(e){var t,o,r=null===(o=(0,n.getActionParams)(e))||void 0===o?void 0:o[i.WallPostParams.topicId];return void 0!==r&&r!==s?((t={})[i.WallPostParams.topicId]=r,t):void 0},a=function(e){return!0===(null==e?void 0:e.wallPostTopicSettingEnabled)},l=function(e){return void 0!==e.topic_options}},25180:(e,t,o)=>{o.d(t,{TopicUISelector:()=>p});var i=o(45150),n=o(414914),s=o(917685),r=o(690969),a=o(24737),l=o(917999),c=o(712459),d=o(97194),p=function(){function e(e,t,o,a){var l=this;this.btnEl=e,this.containerEl=t,this.options=o,this.selectorContentEl=a,this.onOptionClickWrapper=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];l.tooltip.hide();var o=e[0].currentTarget;if(o instanceof HTMLElement){var i=(0,c.getJsonDataValue)(o,"data-click-params");i&&l.selectTopicId(i.value)}},this.linkId=this.options.linkId,this.radioBtnId=(0,r.getTooltipId)(this.options.linkId),window.radioBtns[this.radioBtnId]={val:!1,els:a.children},this.tooltip=new i.default(e,{appendTo:t,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:[-12*(window.vk.rtl?-1:1),7],content:a,align:"left",onFirstTimeShow:function(){(0,n.show)(a)}}),(0,n.domQuery)('[data-onclick="togglePostTopic"]',t).forEach((function(e){(0,s.addEvent)(e,"click",l.onOptionClickWrapper)}))}return e.create=function(t,o){var i=(0,r.renderSelector)(t,o.linkId);if(i){var s=this.getSelectorContentEl(i),a=(0,n.domQuery1)(".post_action_btn_layout",i);if(s&&a)return new e(a,i,o,s)}},e.getSelectorContentEl=function(e){return(0,n.domQuery1)(".post_action_tt_content",e)},e.prototype.destroy=function(){this.tooltip.destroy(),delete window.radioBtns[this.radioBtnId]},e.prototype.tooltipHide=function(){this.tooltip.hide()},e.prototype.selectTopicId=function(e){this.options.selectTopicId(this.linkId,e),this.updateViewForSelectedTopic({isTopicSelected:e!==a.TOPIC_ID_NONE,topicId:e})},e.prototype.clearSelection=function(){this.selectTopicId(a.TOPIC_ID_NONE)},e.prototype.updateViewForSelectedTopic=function(t){var o=t.isTopicSelected,i=t.topicId,s=e.getSelectOptionEl(this.containerEl,i),a=s&&(0,c.getJsonDataValue)(s,"data-click-params"),p=(0,n.domQuery1)(".post_action_btn_text",this.containerEl);if(s&&a&&p){var u=a.label;(0,d.updatePostTooltipActionRadioBtn)(s,void 0,(0,r.getTooltipId)(this.options.linkId));var _=p.getAttribute("data-empty")||"",g=o?u:_;p.innerHTML=g,p.setAttribute("aria-label",(0,l.replaceEntities)(g)),(0,n.toggleClass)(this.containerEl,"on",o)}},e.getSelectOptionEl=function(e,t){return(0,n.domQuery1)('[data-value="'+t+'"]',e)},e}()},690969:(e,t,o)=>{o.d(t,{getTooltipId:()=>r,renderSelector:()=>a,topicUISelectorHide:()=>l});var i=o(414914),n=o(442699),s=o(892814),r=function(e){return"post_discover_category_btn"+e},a=function(e,t){var o,s,r=(o={link_id:String(t)},(s=(0,n.getTemplate)("postCategorySelect",o))?(0,i.se)(s):null);if(e instanceof HTMLElement&&r instanceof HTMLElement)return e.appendChild(r),r},l=function(e){var t,o;null===(o=null===(t=(0,s.getSelectorRegistry)(e))||void 0===t?void 0:t.selector)||void 0===o||o.tooltipHide()}},167313:(e,t,o)=>{var i=o(676972);window.WallEdit=i.WallEdit;try{window.stManager.done(window.jsc("web/wall_edit.js"))}catch(e){}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return i[e].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=i,e=[],s.O=(t,o,i,n)=>{if(!o){var r=1/0;for(d=0;d<e.length;d++){for(var[o,i,n]=e[d],a=!0,l=0;l<o.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((e=>s.O[e](o[l])))?o.splice(l--,1):(a=!1,n<r&&(r=n));if(a){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[o,i,n]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var n=Object.create(null);s.r(n);var r={};t=t||[null,o({}),o([]),o(o)];for(var a=2&i&&e;"object"==typeof a&&!~t.indexOf(a);a=o(a))Object.getOwnPropertyNames(a).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,s.d(n,r),n},s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.e=()=>Promise.resolve(),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={1626:0};s.O.j=t=>0===e[t];var t=(t,o)=>{var i,n,[r,a,l]=o,c=0;for(i in a)s.o(a,i)&&(s.m[i]=a[i]);if(l)var d=l(s);for(t&&t(o);c<r.length;c++)n=r[c],s.o(e,n)&&e[n]&&e[n][0](),e[r[c]]=0;return s.O(d)},o=self.webpackChunkvk=self.webpackChunkvk||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=s.O(void 0,[8592,8816],(()=>s(167313)));r=s.O(r)})();