
/**
 * Mail.ru RBAdman-HTML5
 * Release date: 2021-08-09
 * Version: 2.2.3
 */  
AdmanHTML=function(){"use strict";function a(a){V.initMode(a.slot?"slot":"json",{slot:a.slot,version:R.version}),R.slotId=a.slot,R.playerEl=a.playerEl,R.wrapper=a.wrapper,R.videoEl=a.videoEl,R.audioEl=a.audioEl,R.clickEl=a.clickEl,R.quality=parseInt(a.videoQuality||a.params&&a.params.videoQuality||360,10),R.browser=a.browser||{},R.config=a.config||{},R.pauseOnHide=a.pauseOnHide||!1,R.viewabilityValue=a.viewabilityValue||.5,R.viewabilityEl=a.viewabilityEl||R.videoEl;var b=AdmanHTML.Utils.getPageLocation(),c=AdmanHTML.Utils.getHostname(b||"");R.location={top:b,topEncoded:encodeURIComponent(b||""),hostname:c,hostnameEncoded:encodeURIComponent(c||"")},V.rb(V.code.ADMAN_SUCCESSFULLY_INITIALIZED),Y=a.midrollPointsP||null,X=!Y&&a.midrollPoints?a.midrollPoints:null,R.config.vpaidJsInterface||(R.config.vpaidJsInterface=T),R.config.vpaidHtmlInterface||(R.config.vpaidHtmlInterface=U);var d="https://ad.mail.ru/vp/"+R.slotId+"?version="+this.getVersion();if(a.params&&a.params.constructor&&a.params.constructor===Object){var e=[];"flash"in a.params||(a.params.flash=AdmanHTML.Utils.checkFlash()?1:0);for(var f in a.params)a.params.hasOwnProperty(f)&&e.push(f+"="+a.params[f]);var g=AdmanHTML.Utils.getUserIdQuery();g&&e.push(g),e.length&&(d+="&"+e.join("&"))}if((R.slotId||a.json||a.adUrl)&&!R.browser.adBlock){var h={},i=this;R.slotId?h.url=d:a.adUrl?(-1!==a.adUrl.indexOf("ad.mail.ru/")&&(a.adUrl+=-1===a.adUrl.indexOf("?")?"?":"&",a.adUrl+="version="+this.getVersion()),h.url=a.adUrl):h.data=a.json,K=new AdmanHTML.AdSlot(R,h,function(){var b=K.getRootSettings()||{},c=b.requestHostname;if(c&&!AdmanHTML.Utils.matchHostname(R.location.hostname,c))return R.stats.logError("HOSTNAME_MISMATCH:"+c+":"+R.location.topEncoded,{impressionID:b.impressionID,padID:b.padID,bannerIDs:b.bannerIDs}),void(R.callbacks.onError&&R.callbacks.onError());R.location.hostname||R.stats.logError("HOSTNAME_EMPTY:"+c+":"+R.location.topEncoded),R.cb("onReady",[{settings:K.settings}]);var d=1e6,e=[],f=[],g=a.params&&a.params.duration?parseInt(a.params.duration,10):d;0===g&&(g=d),X&&X.sort(AdmanHTML.Utils.numSorter),Y&&Y.sort(AdmanHTML.Utils.numSorter);var h=K.getSection("midroll")||[],j=K.getServices("midroll",function(a){return!a.started()&&a.isAfter()})||[];h=h.concat(j),h.forEach(function(a){var b=a.getAd();b.point||b.pointP||(b.pointP=50)}),h.sort(function(a,b){var c=a.getAd(),d=b.getAd();return c.pointP&&d.pointP?c.pointP-d.pointP:(c.point||c.pointP/100*g)-(d.point||d.pointP/100*g)}).forEach(function(a){if(!a.isEmpty||!a.isEmpty()){var b=a.getAd();X&&X.length?(b.point=X.shift(),b.pointP=null,f.push(b.point),a.addImmutableProperty("point",b.point)):Y&&Y.length?(b.pointP=Y.shift(),b.point=null,e.push(b.pointP),a.addImmutableProperty("pointP",b.pointP)):X||Y||(b.point?(a.addImmutableProperty("point",b.point),f.push(b.point)):b.pointP&&(a.addImmutableProperty("pointP",b.pointP),e.push(b.pointP)))}}),$=e.sort(AdmanHTML.Utils.numSorter),Z=f.sort(AdmanHTML.Utils.numSorter);var k=K.getSection("research");k&&k.length>0&&(P=k[0]),R.pauseOnHide&&I(i)})}else{V.logError("Adman init failed");var j=R.callbacks.onError;j&&j(),N=M=L=null}}function b(a){var b;N&&(N.log("sectionShown"),N.disposed||(N.dispose(),N.disposed=!0,s(N,L)),a&&N.log("closedByUser")),L&&!ea[L]&&(ea[L]="midroll"!==L,b=a?R.callbacks.onClosed:R.callbacks.onCompleted),ca[L]&&M&&(ca[L]=ca[L].concat(M.splice(0,M.length))),N=M=L=null,f(),b&&b()}function c(){var a=K.getSettings(L).maxBannersShow||0,d=ba[L]||0,e=!a||d<a;if(N&&!N.disposed&&(N.complete&&N.log("playbackCompleted"),N.dispose(),N.disposed=!0,s(N,L)),M&&M.length&&e)N=M.shift(),ba[L]=d+(N.isEmpty()?0:1),N.reset(),N.started=!0,N.start();else{var f=K.getNextAfterService(L);"midroll"!==L&&f&&e?f.start(function(){M=K.getSection(L),c()}):K.getSettings(L).loop&&ca[L]&&ca[L].length?(M=ca[L],ca[L]=[],c()):b()}}function d(a){M||(L=a||"preroll",K.resetServices(L),ea[L]=!1,M=K.getSection(L),"midroll"===a&&(M=h(M)),c(),L&&(ca[L]=ca[L]||[]),N&&(N.log("sectionStarted"),R.debugMode&&console.log(L,N.getAd(),N.getSettings(),M)),e(L))}function e(a){(O=K.getDebug(a))&&O.start()}function f(){O&&O.dispose(),O=null}function g(a,b){function c(a,b){for(var c=0;c<a.length&&!(Math.abs(a[c])>b);c++);return c>0?[a[c-1]]:[]}function d(a){var b=a.getAd();return!(b.point&&-1===Z.indexOf(b.point)||b.pointP&&-1===$.indexOf(b.pointP))&&(b.point&&b.point<=j||b.pointP&&b.pointP<=k)}if(!isNaN(a)&&!isNaN(b)){var e=parseInt(a),f=Math.floor(100*a/b);Q=b,_=$&&isFinite(f)?c($,f):[],aa=Z?c(Z,e):[],_[0]&&aa[0]&&(Math.abs(_[0]*Q/100)>Math.abs(aa[0])?aa=[]:_=[]);var g=K.getSettings("midroll").midpointAllowableDelta;da=void 0!=g?g:da;var h=100*da/b,i=0!==da&&da<5?da:5,j=e+i,k=f+i/b*100;if(K.getServices("midroll",function(a){return!(!a.isAfter()||a.started()||!d(a))}).forEach(function(a){K.removeService(a);var b=e-a.getAd().point,c=f-a.getAd().pointP;b<da||c<h||0===da?a.start():R.debugMode&&console.log("skip midroll fetch")}),_.length&&_[0]>0||aa.length&&aa[0]>0){var l=!1,m=K.getSection("midroll");m&&m.forEach(function(a){var b=a.getAd();(b.pointP&&~_.indexOf(b.pointP)||b.point&&~aa.indexOf(b.point))&&(l=!0)}),l&&R.cb("adMidrollPoint",[a])}}}function h(a){function b(a,b){var c=a.getAd(),d=b.getAd();return(c.point||c.pointP*Q/100)-(d.point||d.pointP*Q/100)}var c=[];return a&&a.forEach(function(a){var b=a.getAd();(b.pointP&&~_.indexOf(b.pointP)||b.point&&~aa.indexOf(b.point))&&c.push(a)}),Z.forEach(function(a,b){~aa.indexOf(a)&&(Z[b]=-Z[b])}),$.forEach(function(a,b){~_.indexOf(a)&&($[b]=-$[b])}),c.sort(b),c}function i(){R.cb("onSkipped"),N&&(N.log("closedByUser"),N.skip(c))}function j(){N&&(N.log("playbackPaused"),N.pause())}function k(){N&&(N.log("playbackResumed"),N.resume())}function l(a){a=a<0?0:a>1?1:a,N&&N.setVolume(a)}function m(){N&&N.log("fullscreenOn")}function n(){N&&N.log("fullscreenOff")}function o(){b()}function p(a,b){R.callbacks[a]=b}function q(a){var b=[],c=K.getSection(a||"preroll");return c&&c.forEach(function(a){a.isEmpty()||b.push(a.getExtendedAdForApp())}),b}function r(a){return K.getAfterServices(a||"preroll")}function s(a,b){a.isEmpty()||a.isStat()||ca[b]&&ca[b].push(a)}function t(a){return(a.right-a.left)*(a.bottom-a.top)}function u(a,b){return{left:a.left+b.left,right:a.right+b.left,top:a.top+b.top,bottom:a.bottom+b.top}}function v(a){return a&&!isNaN(a)?a:null}function w(a,b){var c=a.document,d="width"===b?"clientWidth":"clientHeight",e="width"===b?"innerWidth":"innerHeight",f=a[e],g=c.body[d],h=c.documentElement[d],i=1/0;return i=v(g)||i,i=v(h)||i,Boolean(f)&&!isNaN(f)&&(i=Math.min(i,f)),i}function x(a){return{width:w(a,"width"),height:w(a,"height")}}function y(a,b){var c=x(b);return{left:Math.max(0,a.left),right:Math.min(c.width,a.right),top:Math.max(0,a.top),bottom:Math.min(c.height,a.bottom)}}function z(a,b){try{for(var c=a.getBoundingClientRect(),d=t(c),e=b,f=e.parent;e!==f;){var g=e.frameElement.getBoundingClientRect();c=u(c,g);var h=Math.max(g.left,c.left),i=Math.min(g.right,c.right),j=Math.max(g.top,c.top),k=Math.min(g.bottom,c.bottom);c.left=h,c.right=i<h?h:i,c.top=j,c.bottom=k<j?j:k,e=e.parent}c=y(c,f);var l=t(c);return{left:c.left,right:c.right,top:c.top,bottom:c.bottom,percent:l/d*100}}catch(a){return{left:0,right:0,top:0,bottom:0,percent:0}}}function A(){return window.hasOwnProperty("IntersectionObserver")}function B(a){try{if(a===a.top)return"ON_PAGE";for(var b=a;b!==b.parent;){if(b.document.domain!==b.parent.document.domain)return"XD_FRAME";b=b.parent}return"S_FRAME"}catch(a){}return"XD_FRAME"}function C(a){return!A(a)&&"XD_FRAME"!==B(a)}function D(a,b,c){H(c,z(a,window).percent>=100*b)}function E(a){return a.mozVisibilityState?"mozvisibilitychange":a.webkitVisibilityState?"webkitvisibilitychange":a.visibilityState?"visibilitychange":""}function F(a){H(a,!0)}function G(a){H(a,!1)}function H(a,b){var c=a.getPlayStatus();a.prevVisibility!==b&&(a.prevVisibility=b,void 0!==c.curStatus&&c.curStatus!==c.prevStatus&&(b?a.resume():a.pause()))}function I(a){var b=a,c=R.viewabilityValue,d=R.viewabilityEl;if(d)if(A()){var e=new IntersectionObserver(function(a){a.forEach(function(a){H(b,a.intersectionRatio>=c)})},{threshold:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});e.observe(d)}else if(C){var f=function(){D(d,c,b)};window.addEventListener("resize",f,!1),window.addEventListener("scroll",f,!1)}var g=(E(document),function(){G(b)}),h=function(){F(b)};window.top.addEventListener("blur",g,!1),window.top.addEventListener("focus",h,!1)}function J(){return void 0===R.playStatus?{prevStatus:void 0,curStatus:void 0}:R.playStatus}var K,L,M,N,O,P,Q,R={version:"2.2.0",debugMode:!0,callbacks:{},cb:function(a,d){switch(a){case"onCompleted":N&&(N.complete=!0),c();break;case"onError":N&&(N.error=!0),c();break;case"onClosed":b(!0);break;default:var e=R.callbacks[a];e&&e.apply(this,d)}}},S="http:"===window.location.protocol?"http:":"https:",T=S+"//ad.mail.ru/static/admanhtml/vpaid-js-interface.swf",U=S+"//ad.mail.ru/static/rbadman-vpaid.html",V=new AdmanHTML.Stats(R),W=new AdmanHTML.Viewability,X=[],Y=[],Z=[],$=[],_=[],aa=[],ba={},ca={},da=3;R.stats=V,R.viewability=W,R.protocol=S;var ea={};return{init:a,start:d,stop:o,pause:j,resume:k,setVolume:l,fullscreenOn:m,fullscreenOff:n,setFullscreen:function(a){a?m():n()},skip:i,destroy:o,getPlayStatus:J,getSlot:function(){return R.slotId},setSlot:function(a){R.slotId=a},getVersion:function(){return R.version},getBannersForSection:q,getServicesForSection:r,hasSection:function(a){return a=a||"preroll",!(!q(a).length&&!r(a).length)},setDebug:function(a){R.debugMode=a},setPosition:g,getUserIdQuery:AdmanHTML.Utils.getUserIdQuery,onReady:p.bind(this,"onReady"),onError:p.bind(this,"onError"),onStarted:p.bind(this,"onStarted"),onPaused:p.bind(this,"onPaused"),onPlayed:p.bind(this,"onPlayed"),onCompleted:p.bind(this,"onCompleted"),onClosed:p.bind(this,"onClosed"),onSkipped:p.bind(this,"onSkipped"),onClicked:p.bind(this,"onClicked"),onTimeRemained:p.bind(this,"onTimeRemained"),onDurationChanged:p.bind(this,"onDurationChanged"),adMidrollPoint:p.bind(this,"adMidrollPoint"),_onVPAIDStarted:p.bind(this,"onVPAIDStarted"),research:{pause:function(){P&&P.pause()},resume:function(){P&&P.resume()},complete:function(){P&&P.setComplete()},setVolume:function(a){P&&P.setVolume(a)},setFullscreen:function(a){P&&P.setFullscreen(a)},setPosition:function(a,b){P&&P.setPosition(a,b)}}}},AdmanHTML.Ad=function(a,b){"use strict";function c(a){a&&a.forEach(function(a){d(a.url,a.type,a)})}function d(a,c,d){var e,f,g,h;if(a){try{a=decodeURIComponent(a)}catch(a){}if("playheadReachedValue"===c)void 0!==d.thresholdValue||void 0!==d.value?(e=parseInt(d.thresholdValue||d.value,10),b.stats.push({name:"thresholdValue",value:e,type:"thresholdValue."+e,url:a})):void 0===d.thresholdPValue&&void 0===d.pvalue||(e=parseInt(d.thresholdPValue||d.pvalue,10),b.stats.push({name:"thresholdPValue",value:e,type:"thresholdPValue."+e,url:a}));else if("playheadViewabilityValue"===c){var i=parseInt(d.viewablePercent,10),j=void 0===d.ovv&&void 0===d.mrc||(!!d.ovv||!!d.mrc),k="";g=void 0!==d.startTimer?parseInt(d.startTimer,10):0,h=void 0!==d.endTimer?parseInt(d.endTimer,10):0,i=isNaN(i)?50:i,void 0!==d.value?(e=parseInt(d.value,10),f="ovvValue"):void 0!==d.pvalue?(e=parseInt(d.pvalue,10),f="ovvPValue"):void 0!==d.duration&&(e=parseInt(d.duration,10),f="mrcValue",j||(k=d.unload?"unload":"complete")),b.stats.push({name:f,value:e,url:a,percent:i,viewable:j,start:g,end:h,onevent:k})}else if("playheadTimerValue"===c){g=void 0!==d.startTimer?parseInt(d.startTimer,10):0,h=void 0!==d.endTimer?parseInt(d.endTimer,10):0;var l=void 0!==d.rate?parseInt(d.rate,10):1;b.stats.push({name:"timerValue",rate:l,url:a,start:g,end:h})}else b.stats.push({name:c,type:c,url:a})}}function e(a){b.click=a,b.ad&&(b.ad.urlToNavigateOnClick=a)}function f(a,c){b.extensions[a]=c}function g(a,c,d){!d&&a in b.immutables||(b.immutables[a]=c)}function h(a){b.settings=b.settings||{},AdmanHTML.Utils.deepExtend(b.settings,a)}function i(c){function d(a){var b=a.type||"";return!(~b.indexOf("video")&&"video/mp4"!==b||~b.indexOf("audio")&&"audio/mp3"!==b&&"audio/mpeg"!==b)}function e(){a.stats.rb(a.stats.code.UNKNOWN_ADV_TYPE),a.stats.logError("UNKNOWN_ADV_TYPE")}if(b.ad=c,b.click&&(b.ad.urlToNavigateOnClick=b.click),AdmanHTML.Utils.mixin(b.ad,b.extensions),AdmanHTML.Utils.mixin(b.ad,b.immutables),b.ad.mediafiles&&b.ad.mediafiles.length){var f;b.ad.mediafiles.forEach(function(b){d(b)&&(!f||Math.abs(parseInt(b.height)-a.quality)<Math.abs(parseInt(f.height)-a.quality))&&(f=b)}),f&&AdmanHTML.Utils.mixin(b.ad,f)}delete b.ad.statistics,delete b.ad.mediafiles;var g,h;switch(b.ad.type){case"swf":case"application/x-shockwave-flash":if(h=b.ad.apiFramework||b.ad.api,a.browser.mobile||h&&"VPAID"!==h)return e(),!1;g=h?new AdmanHTML.VpaidSwfAdRenderer(a,this):new AdmanHTML.SwfAdRenderer(a,this);break;case"javascript":case"application/javascript":if((h=b.ad.apiFramework||b.ad.api)&&"VPAID"!==h)return e(),!1;g=new AdmanHTML.VpaidJsAdRenderer(a,this);break;case"video":case"video/mp4":g=new AdmanHTML.VideoAdRenderer(a,this);break;case"audio":case"audio/mp3":case"audio/mpeg":g=new AdmanHTML.AudioAdRenderer(a,this);break;case"image":case"image/bmp":case"image/gif":case"image/jpeg":case"image/png":g=new AdmanHTML.ImgAdRenderer(a,this);break;case"text":g=new AdmanHTML.TextAdRenderer(a,this);break;case"html":g=new AdmanHTML.HtmlAdRenderer(a,this);break;case"empty":g=new AdmanHTML.EmptyAdRenderer(a,this);break;case"statistics":g=new AdmanHTML.StatisticsAdRenderer(a,this);break;case"debugData":g=new AdmanHTML.DebugAdRenderer(a,this);break;case"research":g=new AdmanHTML.ResearchAdRenderer(a,this);break;case"video/x-flv":default:return e(),!1}return b.renderer=g,!0}function j(){return new AdmanHTML.Ad(a,JSON.parse(JSON.stringify(b)))}function k(){this.started&&(b.ad&&i.call(this,b.ad),this.disposed=!1,this.completed=!1,this.error=!1,this.started=!1),b.statsBackup?b.stats=b.statsBackup.slice():b.statsBackup=b.stats.slice()}function l(b,c,d){var e=b.url;e=e.replace("{requesthostname}",a.location.hostnameEncoded||""),AdmanHTML.Utils.loadImg(e);var f=c.indexOf(b);~f&&d&&c.splice(f,1)}function m(a,b){var c=b.indexOf(a);~c&&b.splice(c,1)}function n(a,c){function d(a){a=25*Math.floor(a/25);var b=t["thresholdPValue."+a];b&&(f=f.concat(b))}var e=a+(void 0===c?"":"."+c),f=t[e]?t[e].slice(0):[];f.push(e);var g=b.stats.slice(0);"thresholdPValue"===a&&d(c);var h="thresholdPValue"===a||"thresholdValue"===a||"closedByUser"===a;b.stats.forEach(function(b){"thresholdPValue"===a&&"thresholdPValue"===b.name&&b.value<c?l(b,g,h):"thresholdValue"===a&&"thresholdValue"===b.name&&b.value<c&&l(b,g,h),~f.indexOf(b.type)&&l(b,g,h)}),b.stats=g}function o(a,c){function d(a,b){b[Math.ceil(a.percent/10)].duration>1e3*a.value?a.viewable?l(a,f,!0):m(a,f):g++}function e(a){a.viewable||a.onevent===c&&l(a,f,!0)}var f=b.stats.slice(0),g=0,h=a&&a.length?d:e;return b.stats.forEach(function(b){"mrcValue"===b.name&&h(b,a)}),b.stats=f,g}function p(c,d){var e,f,g=b.stats.slice(0);b.stats.forEach(function(b){("ovvValue"===b.name&&b.value<=c||"ovvPValue"===b.name&&b.value<=d)&&(e=e||a.viewability.getViewabilityState(),f=e.percent>b.percent&&e.focus,"UNDETERMINED"!==e.state&&(f&&b.viewable||!f&&!b.viewable)&&AdmanHTML.Utils.loadImg(b.url),m(b,g))}),b.stats=g}function q(a,c){b.renderer&&b.renderer[a]&&b.renderer[a](c)}function r(){var a={};return a="audio"===b.ad.type||"audio/mp3"===b.ad.type||"audio/mpeg"===b.ad.type?{allowSeek:!1,allowSkip:!1,allowTrackChange:!1,allowVolumeChange:!1}:b.settings?{allowClose:!b.settings.hasOwnProperty("allowClose")||b.settings.allowClose,allowCloseDelay:b.settings.hasOwnProperty("allowCloseDelay")?b.settings.allowCloseDelay:0}:{allowClose:!0,allowCloseDelay:0},AdmanHTML.Utils.mixin(a,b.ad),a}function s(){var a=r();return a.statistics=b.stats.slice(0),a}b=b||{stats:[],extensions:{},immutables:{}};var t={closedByUser:["close","skipAd"],click:["addClick"],"thresholdPValue.25":["firstQuartile"],"thresholdPValue.50":["secondQuartile","midpoint"],"thresholdPValue.75":["thirdQuartile"],"thresholdPValue.100":["fourthQuartile"],playbackStarted:["start"],playbackCompleted:["complete"],volumeOff:["mute"],volumeOn:["unmute"],playbackPaused:["pause"],playbackResumed:["resume"],fullscreenOn:["fullscreen"],error:["Error"]};return{addStatCollection:c,addStat:d,addClick:e,addExtension:f,addImmutableProperty:g,addSettings:h,getSettings:function(){return b.settings},addAd:i,getAd:function(){return b.ad},getAdForApp:r,getExtendedAdForApp:s,isEmpty:function(){return"empty"===b.ad.type},isStat:function(){return"statistics"===b.ad.type},clone:j,reset:k,log:n,logMRC:o,logOVV:p,start:q.bind(this,"start"),dispose:q.bind(this,"dispose"),pause:q.bind(this,"pause"),resume:q.bind(this,"resume"),setVolume:q.bind(this,"setVolume"),setFullscreen:q.bind(this,"setFullscreen"),setComplete:q.bind(this,"setComplete"),skip:q.bind(this,"skip"),setPosition:function(a,c){b.renderer&&b.renderer.setPosition&&b.renderer.setPosition(a,c)},complete:!1,error:!1}},AdmanHTML.AdSlot=function(a,b,c){"use strict";function d(a){s||(s={});for(var b in a)a.hasOwnProperty(b)&&(s[b]=a[b])}function e(b,c,d,e,g,j){function k(k){var l={};--u,k&&(v++,k="string"==typeof k?k.trim():k,"object"==typeof k||"{"===k.charAt(0)?(l=h(k,b,c,d||0,e,g,j),w++):"<"===k.charAt(0)?(l=i(k,b,c,d||0,e,g,j),w++):(a.stats.rb(a.stats.code.UNKNOWN_DATA_FORMAT),a.stats.logError("UNKNOWN_DATA_FORMAT"))),b.id&&(l.banners||l.services?l.banners&&z.markNonEmptyService(b.id):z.markEmptyService(b.id)),f(j)}if(d&&d>4)return void f(j);var l=z.getService(b.id);l&&l.log("serviceRequested"),++u,b.url?(-1!==b.url.indexOf("ad.mail.ru/")&&-1===b.url.indexOf("version="+a.version)&&(b.url+=-1===b.url.indexOf("?")?"?":"&",b.url+="version="+a.version),AdmanHTML.Utils.xhr(b.url,k)):b.data&&setTimeout(k,0,b.data)}function f(b){if(!u){if(v&&w){var d=z.getNextOnEmptyService();if(d)return void d.start(f.bind(null,b));o();var e=b||c;return e.called||(e.called=!0,e()),void(a.debugMode&&console.log(q))}g()}}function g(){var b=a.callbacks.onError;b&&b()}function h(b,c,f,g,h,i,o){function p(a){return a?a.filter(function(a){return a.type&&("sectionShown"===a.type||"sectionStarted"===a.type||"sectionEmpty"===a.type)}):[]}function r(b,d,h,i){var m=f?f.clone():new AdmanHTML.Ad(a);if(m.addStatCollection(b.statistics),m.addStatCollection(b.serviceStatistics),"additionalData"===b.type){var n;b.id=b.id||AdmanHTML.Utils.createIntUID(),v.services++;var p=!q[h]||0===q[h].length;if(d>0&&p&&(y[h]=!0),b.extensions)for(var r in b.extensions)b.extensions.hasOwnProperty(r)&&j(m,b.extensions[r],r);if(["point","pointP","hasVolume","hasPause","allowClose","allowCloseDelay","allowSeek","allowSkip","allowTrackChange","allowVolumeChange"].forEach(function(a){a in b&&m.addImmutableProperty(a,b[a])}),"true"===b.doAfter||!0===b.doAfter||b.doOnEmptyResponseFromId){var s="true"===b.doAfter||!0===b.doAfter?x.POST:null,t=function(a,c){e(b,a||m,b.allowRepeat?0:g+1,h,s,function(){c&&c()})};n=new AdmanHTML.ServiceAd(a,null,t),l(h,c.id,n,b,m)}else n=new AdmanHTML.ServiceAd(a),l(h,c.id,n,b),0===d&&p?e(b,m,g+1,h,x.PRE,o):e(b,m,g+1,h,null,o)}else k(h,i,m,b),v.banners++;return m}var t,u=b,v={banners:0,services:0};if("string"==typeof b)try{u=JSON.parse(b)}catch(b){return a.stats.rb(a.stats.code.ERROR_CONVERTING_STRING_TO_JSON),void a.stats.logError("ERROR_CONVERTING_STRING_TO_JSON")}if(u.settings&&u.settings.requestHostname&&!s.requestHostname&&(s.requestHostname=u.settings.requestHostname),u&&u.settings&&(s=a.slot&&a.slot.getRootSettings()||s||{},d&&"function"==typeof d)){const w=u.sections&&u.sections.preroll&&u.sections.preroll.length&&u.sections.preroll[0]||null;d({impressionID:u.settings.impressionID||"",padID:u.settings.padID||"",bannerIDs:w&&w.bannerID||""})}for(var z in u.sections)if(u.sections.hasOwnProperty(z)){var A=u.sections[z],B=0;if(u.settings&&(t=u.settings[z])&&(t.controlsStyle=u.settings.controlsStyle||0,n(z,t)),A.forEach(function(b){if("debugData"===b.type){var c=new AdmanHTML.Ad(a);return c.addClick(b.url),void m(z,c,b)}var d=h===z?i:"",e=r(b,B,z,d);t&&(e.addStatCollection(p(t.statistics)),e.addSettings(t)),B++}),0===A.length){var C=new AdmanHTML.Ad(a);t&&C.addStatCollection(p(t.statistics)),k(z,"",C,{type:"empty"})}}return u.type&&r(u,0,h,i),v}function i(b,c,f,g,h,i,l){function m(a,b,c){o(a.getElementsByTagName(b),c)}function n(a,b,c,d){m(a,b,function(a){d(q(a),c?p(a,c):null,a)})}function o(a,b){Array.prototype.forEach.call(a,b.bind(this))}function p(a,b){var c=a.attributes.getNamedItem(b);return c?c.value:null}function q(a){return a&&a.childNodes&&a.childNodes[0]&&a.childNodes[0].wholeText?a.childNodes[0].wholeText.trim():null}var r,t={banners:0,services:0};try{r=AdmanHTML.Utils.parseXml(b)}catch(b){return a.stats.rb(a.stats.code.ERROR_CONVERTING_STRING_TO_XML),void a.stats.logError("ERROR_CONVERTING_STRING_TO_XML")}return m(r,"Ad",function(b){function r(c){var d=f?f.clone():new AdmanHTML.Ad(a);n(b,"Impression","id",function(a){try{d.addStat(a,"playbackStarted")}catch(a){}}),n(b,"Extension","type",function(a,b){j(d,a,b)}),n(b,"Error",null,function(a){d.addStat(a,"error")}),n(c,"Tracking","event",d.addStat);var e=c.getElementsByTagName("VideoClicks")[0];return e&&o(e.childNodes,function(a){"ClickThrough"===a.tagName?d.addClick(q(a)):"ClickTracking"===a.tagName&&d.addStat(q(a),"click")}),d}function u(a){var b={width:p(a,"width"),height:p(a,"height"),id:p(a,"id"),assetWidth:p(a,"assetWidth"),assetHeight:p(a,"assetHeight"),expandedWidth:p(a,"expandedWidth"),expandedHeight:p(a,"expandedHeight"),apiFramework:p(a,"apiFramework"),adSlotID:p(a,"adSlotID"),statistics:[]};return n(a,"StaticResource",null,function(a){b.staticResource=a}),n(a,"HTMLResource",null,function(a){b.htmlResource=a}),n(a,"IFrameResource",null,function(a){b.iframeResource=a}),n(a,"CompanionClickTracking",null,function(a){b.statistics.push({type:"click",url:a})}),n(a,"Tracking","event",function(a,c){b.statistics.push({type:c,url:a})}),n(a,"CompanionClickThrough",null,function(a){b.urlToNavigateOnClick=a}),b}var v=p(b,"id");m(b,"InLine",function(b){var e=[];m(b,"CompanionAds",function(a){var c=p(a,"required")||"none";m(b,"Companion",function(a){var b=u(a);b.required=c,e.push(b)})}),m(b,"Linear",function(b){var f,g=r(b),j=b.parentNode;j&&(f=p(j,"adId")||p(j,"adID")||p(j,"AdId")||p(j,"AdID")||p(j,"id")),f=f||v;var l={bannerID:f,mediafiles:[],duration:AdmanHTML.Utils.convertDuration(q(b.getElementsByTagName("Duration")[0]))};c.urlToNavigateOnClick&&(l.urlToNavigateOnClick=c.urlToNavigateOnClick),m(b,"MediaFile",function(a){l.mediafiles.push({apiFramework:p(a,"apiFramework"),type:p(a,"type"),width:p(a,"width"),height:p(a,"height"),src:q(a)})}),m(b,"AdParameters",function(b){l.params=q(b);try{var c=JSON.parse(l.params);if(c&&c.settings&&(s=a.slot&&a.slot.getRootSettings()||s||{},d&&"function"==typeof d)){const e=c.sections&&c.sections.preroll&&c.sections.preroll.length&&c.sections.preroll[0]||null;c.settings&&c.settings.preroll;d({impressionID:c.settings.impressionID||"",padID:c.settings.padID||"",bannerIDs:e&&e.bannerID||""})}}catch(a){console.log(a)}}),e.length&&(l.companionAds=e),k(h||"preroll",i,g,l),t.banners++}),m(b,"NonLinear",function(a){var b=r(a),c={width:p(a,"width"),height:p(a,"height"),duration:AdmanHTML.Utils.convertDuration(p(a,"minSuggestedDuration")),mediafiles:[]};n(a,"NonLinearClickThrough",null,function(a){b.addStat(a,"click")}),n(a,"StaticResource","creativeType",function(a,b){c.mediafiles.push({type:b,src:a})}),k(h||"overlay",i,b,c),t.banners++})}),m(b,"VASTAdTagURI",function(a){t.services++,e({url:q(a),id:c.id},r(b),g+1,h,i,l)})}),t}function j(a,b,c){"controls"===c?a.addExtension("showControls",Boolean(parseInt(b,10))):"skipTime2"===c?(b=isNaN(b)?AdmanHTML.Utils.convertDuration("00:"+b):parseInt(b,10),a.addExtension("allowCloseDelay",b)):"linkTxt"===c&&(a.addExtension("linkText",b),a.addExtension("adText",b))}function k(a,b,c,d){c.addAd(d)&&(c.sectionType=a,b===x.PRE&&y[a]&&(b=""),a=(b||"")+a,q[a]=q[a]||[],q[a].push(c))}function l(a,b,c,d,e){c.addAd(d),c.addInheritedAd(e),c.addStatCollection(d.statistics),c.addStatCollection(d.serviceStatistics),c.sectionType=a,z.addService(c,b)}function m(a,b,c){b.addAd(c)&&(b.section=a,t[a]=b)}function n(a,b){r[a]=r[a]||{},AdmanHTML.Utils.mixin(r[a],b),delete r[a].statistics,delete r[a].view,delete r[a].advertisment}function o(){"preroll midroll pauseroll overlay postroll claimroll".split(" ").forEach(function(a){var b=y[a]?q[a]:q[x.PRE+a],c=y[a]?q[x.PRE+a]:q[a],d=q[x.POST+a];q[a]=[].concat(b||[],c||[],d||[]),p(x.PRE+a),p(x.POST+a)})}function p(a){q[a]=[]}var q={},r={},s={},t={},u=0,v=0,w=0,x={PRE:"pre-",POST:"post-"},y={},z=new AdmanHTML.ServiceStorage;return e({url:b.url,data:b.data}),{getSection:function(a){return q[a]},getAfterServices:z.getAfterServices,getNextAfterService:z.getNextAfterService,resetServices:z.resetAll,getServices:z.getServices,removeService:z.removeService,getSettings:function(a){return r[a]||{}},getRootSettings:function(){return s},getDebug:function(a){return t[a]}}},AdmanHTML.ServiceAd=function(a,b,c){"use strict";function d(a){return b.ad=a,!0}function e(a){b.inheritedAd=a}function f(a,c){b.inheritedAd.addImmutableProperty(a,c,!0)}function g(a){var b=a?a.filter(function(a){return"serviceRequested"===a.type||"serviceAnswerEmpty"===a.type}):[];b&&b.forEach(function(a){h(a.url,a.type,a)})}function h(a,c){a=decodeURIComponent(a),b.stats.push({name:c,type:c,url:a})}function i(a){m=!0,c&&c(b.inheritedAd,a)}function j(){m=!1}function k(){return!(!b.ad||!b.ad.doAfter)&&(!0===b.ad.doAfter||"true"===b.ad.doAfter)}function l(a){function c(a){AdmanHTML.Utils.loadImg(a.url);var b=d.indexOf(a);~b&&d.splice(b,1)}var d=b.stats.slice(0);b.stats.forEach(function(b){b.type===a&&c(b)}),b.stats=d}b=b||{stats:[]};var m=!1;return{addStatCollection:g,addStat:h,addAd:d,addInheritedAd:e,addImmutableProperty:f,getAd:function(){return b.ad},start:i,reset:j,started:function(){return m},log:l,isAfter:k}},AdmanHTML.ServiceStorage=function(){"use strict";function a(a,b){var c=a.getAd();m.push(c.id),l[c.id]={service:a},b&&l[b]&&(l[b].children=l[b].children||[],l[b].children.push(c.id)),("true"===c.doAfter||!0===c.doAfter||c.doOnEmptyResponseFromId)&&k.push(a)}function b(a){return l[a]?l[a].service:null}function c(a){var b="string"==typeof a||"number"==typeof a?a:a.getAd().id;delete l[b];var c,d;for(c=0,d=k.length;c<d;c++)if(a=k[c],a.getAd().id===b){k.splice(c,1);break}}function d(a,b){if(!a)return[];var c,d,e=[];for(c in l)l.hasOwnProperty(c)&&(d=l[c].service,d.sectionType!==a||b&&!b(d)||e.push(d));return e}function e(a){var b,c,d,e;for(b=m.length-1;b>=0;b--)if(c=m[b],l[c])if(d=l[c].service,c===a)d.log("serviceAnswerEmpty"),m.splice(b,1),n.push(a),delete l[c];else{if(!(e=l[c].children))continue;-1!==e.indexOf(a)&&e.splice(e.indexOf(a),1),0===e.length&&(a=c,b++)}}function f(a){var b=l[a];b&&(b.children=null)}function g(){var a,b,c,d;for(a=0,b=k.length;a<b;a++)if(c=k[a],(d=c.getAd().doOnEmptyResponseFromId)&&-1!==n.indexOf(d)&&!c.isAfter())return k.splice(a,1),c;return null}function h(a){if(!a)return[];var b,c,d,e=[];for(b=0,c=k.length;b<c;b++)d=k[b],d.sectionType===a&&d.isAfter()&&!d.started()&&e.push(d);return e}function i(a){if(!a)return null;var b,c,d,e;for(b=0,c=k.length;b<c;b++)if(d=k[b],d.sectionType===a&&d.isAfter()&&!d.started()){if((e=d.getAd().doOnEmptyResponseFromId)&&-1===n.indexOf(e))continue;return d.getAd().allowRepeat||k.splice(b,1),d}return null}function j(a){var b,c,d;for(b=0,c=k.length;b<c;b++)d=k[b],a&&d.sectionType!==a||d.reset()}var k=[],l={},m=[],n=[];return{addService:a,getService:b,getServices:d,removeService:c,resetAll:j,markEmptyService:e,markNonEmptyService:f,getAfterServices:h,getNextAfterService:i,getNextOnEmptyService:g}},"function"==typeof define&&define.amd&&define(function(){"use strict";return AdmanHTML}),AdmanHTML.VpaidLoader=function(){"use strict";function a(a,b){this.id=Math.round(1e6*Math.random()),this.video=a,this.videoIsElement=AdmanHTML.Utils.isElement(this.video),this._props={},this.autoMuted=!1,this.win=b||window}var b=300;return a.prototype.load=function(a,b){var c=document.createElement("iframe");return this.adframe=c,this.src=a,c.width="100%",c.height="100%",c.scrolling="no",c.marginWidth="0",c.marginHeight="0",c.frameBorder="0",c.src=b,c.id="ad-frame-"+this.id,c.setAttribute("allow","autoplay"),c.onload=function(){this.send({type:"vpaid",method:"load",src:this.src,urlToNavigateOnClick:this.urlToNavigateOnClick})}.bind(this),this.processMessage=this.processMessage.bind(this),this.videoEventHandler=this.videoEventHandler.bind(this),this.videoEvents=["play","pause","volumechange","timeupdate","ended"],this.video.addEventListener("play",this.videoEventHandler),this.video.addEventListener("pause",this.videoEventHandler),this.video.addEventListener("volumechange",this.videoEventHandler),this.video.addEventListener("timeupdate",this.videoEventHandler),this.video.addEventListener("ended",this.videoEventHandler),this.win.addEventListener("message",this.processMessage),c},a.prototype.processMessage=function(a){if(a.source===this.adframe.contentWindow)try{var b=JSON.parse(a.data);switch(this.urlToNavigateOnClick&&(b.urlToNavigateOnClick=this.urlToNavigateOnClick),b.type){case"video":this.videoMessageHandler(b);break;case"vpaid":this.vpaidMessageHandler(b)}}catch(a){}},a.prototype.videoMessageHandler=function(a){switch(a.src&&a.src.replace(/https?:/,"")!==this.video.src.replace(/https?:/,"")&&(this.video.src=a.src),a.method){case"load":this.video.load();break;case"play":var c=this.video.play();c.then&&c.then(function(){this.video.muted&&!this.autoMutedTS&&(this.autoMutedTS=(new Date).getTime())}.bind(this),function(){this.autoMuted=!0,this.autoMutedTS=(new Date).getTime(),this.video.muted=!0,this.video.volume=0,this.videoEventHandler({type:"volumechange"}),this.callSet("adVolume",0),this.video.play()}.bind(this));break;case"pause":this.video.pause();break;case"muted":if(!a.value&&this.video.muted&&this.autoMutedTS&&(new Date).getTime()-this.autoMutedTS<b)return;this.mutedByVPAID=a.value,this.video.muted=a.value;break;case"volume":a.value&&this.video.muted&&!this.mutedByVPAID?!this.autoMutedTS||(new Date).getTime()-this.autoMutedTS>b?(this.video.muted=!1,this.video.volume=a.value):this.callSet("adVolume",0):(this.video.volume=a.value,0===a.value&&(this.video.muted=!0));break;case"addEventListener":this.videoEvents=this.videoEvents||[],this.videoEvents.push(a.eventType),this.video.addEventListener(a.eventType,this.videoEventHandler)}},a.prototype.videoEventHandler=function(a){this.send({type:"video",method:"emit",eventType:a.type,currentTime:this.video.currentTime,duration:this.video.duration,volume:this.video.volume,muted:this.video.muted}),this.videoIsElement&&("play"===a.type?this.onVpaidCallback("video:play"):"pause"===a.type&&this.video.currentTime>0&&this.video.currentTime<.99*this.video.duration&&this.onVpaidCallback("video:pause"))},a.prototype.vpaidMessageHandler=function(a){AdmanHTML.Utils.mixin(this._props,a.props),"function"==typeof this.onVpaidCallback&&this.onVpaidCallback(a.eventType,a.props)},a.prototype.call=function(a,b){var c={type:"vpaid",method:a};if(b&&(c.params=b),this.send(c),a in this._props)return this._props[a]},a.prototype.callGet=function(a){return this._props[a]},a.prototype.callSet=function(a,b){return a="set"+a.charAt(0).toUpperCase()+a.slice(1),this.call(a,[b])},a.prototype.send=function(a){this.adframe&&(a.id=this.id,this.adframe.contentWindow&&this.adframe.contentWindow.postMessage(JSON.stringify(a),"*"))},a.prototype.onVpaidEvent=function(a){this.onVpaidCallback=a},a.prototype.destroy=function(){if(this.adframe&&this.adframe.parentNode&&this.adframe.parentNode.removeChild(this.adframe),this.videoEvents&&this.videoEvents.length)for(var a=0,b=this.videoEvents.length;a<b;a++)this.video.removeEventListener(this.videoEvents[a],this.videoEventHandler);this.video.pause(),this.video.src="",this.autoMuted&&(this.video.muted=!1),this.adframe=null,this.win.removeEventListener("message",this.processMessage),this.win=null},a}(),
AdmanHTML.Stats=function(a){"use strict";function b(a){if(i){var b=k[a];b&&d("https://r.mail.ru/d"+b+".gif?rnd="+Math.random())}else j.push(a)}function c(b,c){var e=AdmanHTML.Utils.getPageLocation(),f=AdmanHTML.Utils.getHostname(e||""),g=[];if(c)for(var h in c)c.hasOwnProperty(h)&&g.push(h+"="+String(c[h]));var i="";g.length&&(i="&"+g.join("&")),-1===f.indexOf("localhost")&&d("https://ad.mail.ru/admanhtml/?app=admanhtml&ver="+a.version+"&error="+encodeURI(b)+"&slot="+a.slotId+i),a.debugMode&&console&&console.warn&&console.warn("Error: "+b)}function d(a){AdmanHTML.Utils.loadImg(a)}function e(a){if(!h){var c="https://ad.mail.ru/vp/"+g+"?original="+(a.slot||"")+"&version="+a.version;h=!0;var d=AdmanHTML.Utils.getPageLocation();-1===AdmanHTML.Utils.getHostname(d||"").indexOf("localhost")?AdmanHTML.Utils.xhr(c,function(a){if(i=!0,a){if("string"==typeof a)try{k=JSON.parse(a.trim())}catch(a){}else"object"==typeof a&&(k=a);var c=j.slice();j=[],c.forEach(b)}}):(console.log(c),i=!0)}}var f="slot",g=3107,h=!1,i=!1,j=[],k={};return{rb:b,logError:c,simple:d,initMode:function(a,b){f=a,"slot"===a&&e(b)},code:{ADMAN_INSTANCE_CREATED:"ADMAN_INSTANCE_CREATED",ADMAN_SUCCESSFULLY_INITIALIZED:"ADMAN_SUCCESSFULLY_INITIALIZED",ERROR_CONVERTING_STRING_TO_JSON:"ERROR_CONVERTING_STRING_TO_JSON",ERROR_PARSING_JSON:"ERROR_PARSING_JSON",ERROR_CONVERTING_STRING_TO_XML:"ERROR_CONVERTING_STRING_TO_XML",ERROR_PARSING_XML:"ERROR_PARSING_XML",UNKNOWN_DATA_FORMAT:"UNKNOWN_DATA_FORMAT",UNKNOWN_ADV_TYPE:"UNKNOWN_ADV_TYPE"}}},AdmanHTML.StyleUtils=function(){"use strict";function a(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})}function b(b,c,d){var e,f=g[c];if(!f)for(e=0;e<h.length;e++)if(f=""===h[e]?c:a(h[e]+"-"+c),void 0!==b[f]){g[c]=f;break}b[f]=d}function c(a){return parseInt(a)+"px"}function d(a,b){function c(a,b){return a=parseInt(a,16),b=b||1,"rgba("+(a>>16&255)+","+(a>>8&255)+","+(255&a)+","+b+")"}if(Array.isArray(a)){return"linear-gradient("+a.map(function(a){return c(a,b)}).join(", ")+")"}return c(a,b)}function e(a,b,c){var d=a.style;(c||Object.keys(b)).forEach(function(a){b.hasOwnProperty(a)&&f(d,a,b[a],b)})}function f(a,e,f,g){var h,i,j;switch(e){case"fontFace":h="fontFamily",i=f;break;case"hasBackground":f||(h="background",i="none",delete g.backgroundColor);break;case"backgroundColor":h="background",i=d(f,g.backgroundAlpha);break;case"cornerRounding":case"borderCornerRounding":h="borderRadius",i=c(Math.floor(f/2));break;case"headerColor":case"bodyColor":case"hyperlinkColor":case"textColor":h="color",i=d(f);break;case"headerSize":case"bodySize":case"hyperlinkSize":case"textSize":h="fontSize",i=c(f);break;case"headerUnderline":case"bodyUnderline":case"hyperlinkUnderline":case"textUnderline":h="text-decoration",i=f?"underline":"none",j="";break;case"headerUnderlineOnRollOver":h="text-decoration",i=f?"":"none",j=f?"":"important";break;case"headerBold":case"bodyBold":case"hyperlinkBold":case"textBold":h="fontWeight",i=f?"bold":"normal";break;case"headerIndent":case"bodyIndent":case"hyperlinkIndent":h="marginTop",i=c(f);break;case"bodyPaddingRight":h="marginRight",i=c(f);break;case"width":case"height":h=e,i=c(f);break;case"contentPadding":case"contentIndent":case"controlsSafeArea":h="padding",i=c(f);break;case"maxImageWidth":case"maxImageHeight":h="maxImageWidth"===e?"maxWidth":"maxHeight",i=c(f);break;case"borderSize":h="borderWidth",i=c(f);break;case"borderColor":h="borderColor",i=d(f,g.borderAlpha);break;case"paddingLeft":case"paddingTop":h="paddingLeft"===e?"left":"top",i=c(f);break;case"controlsPaddingTop":case"controlsPaddingRight":h="controlsPaddingRight"===e?"right":"top",i=c(f)}h&&i&&(void 0!==j?a.setProperty(h,i,j):b(a,h,i))}var g={},h=["","webkit","Moz","O","ms"];return{applyStyle:e,getLength:c}}(),AdmanHTML.Utils=function(){"use strict";function a(){return K||(K=function(){try{if(window===window.top)return L;for(var a=window;a!==a.parent;){if(a.document.domain!==a.parent.document.domain)return N;a=a.parent}return M}catch(a){}return N}())}function b(){if(null!==O)return O;var a=window;try{for(;a.parent!==a&&a.document.domain===a.parent.document.domain;)a=a.parent}catch(a){}return O=a,a}function c(){var a=window,c="",d=b();try{c=a.top.location.href}catch(b){if(d&&d.parent===a.top&&(c=d.document.referrer),!c){var e=a.location.ancestorOrigins;e&&e.length&&(c=e[e.length-1])}}return c||(c=(d||window).document.referrer),c}function d(){return R.major?Q:P}function e(a){a(d())}function f(a,b){b&&a.addEventListener("load",b,!1);var c=document.getElementsByTagName("head");if(c&&c.length){var d=c[0];d&&d.appendChild(a)}}function g(a,b,c){var d=document.getElementById(b);if(d&&d.parentNode){if(!c)return;d.parentNode.removeChild(d)}d=document.createElement("style"),d.type="text/css",d.id=b,d.innerHTML=a,f(d)}function h(a){var b=document.querySelector("link[href*='"+a+"']");b||(b=document.createElement("link"),b.type="text/css",b.rel="stylesheet",b.href=a,f(b))}function i(a){var b=document.querySelector("script[src*='"+a+"']");b||(b=document.createElement("script"),b.setAttribute("type","text/javascript"),b.setAttribute("charset","utf8"),b.setAttribute("src",a),f(b))}function j(a,b){var c=AdmanHTML.Utils.getPageLocation();if(-1===AdmanHTML.Utils.getHostname(c||"").indexOf("localhost")){var d=new Image;d.onload=function(){b&&b(d)},d.src=a}else console.log(a)}function k(a,b,c,d,e){d=d||"GET";var f=new XMLHttpRequest;return f.open(d,a,!0),f.withCredentials=!e,f.setRequestHeader("Content-Type","text/plain"),f.send(c||null),b&&(f.onreadystatechange=function(){4===f.readyState&&(200===f.status?b(f.response):b())},f.onerror=function(){e?b():k(a,b,c,d,!0)}),f}function l(a,b,c,d,e){void 0===e&&(e=!0);var f=b*c<a*d;e&&(f=!f);var g=f?d/b:c/a,h=Math.floor(a*g),i=Math.floor(b*g);return{x:Math.floor((c-h)/2),y:Math.floor((d-i)/2),width:Math.floor(h),height:Math.floor(i)}}function m(a){return"object"==typeof a&&!!a&&!Array.isArray(a)}function n(a){var b;for(b in a)return!1;return!0}function o(a,b){if(!a)return null;if(b){var c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function p(a,b){if(b){var c,d;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],m(d)?(a[c]=a[c]||{},a[c]=p(a[c],d)):a[c]=d)}return a}function q(a,b,c){return a=a||0,b=b||0,c=c||1,Math.min(c,Math.max(b,a))}function r(a,b){return a-b}function s(){return Math.floor(Math.random()*Math.pow(2,48)).toString()}function t(a){a=a.split("+").join(" ");for(var b,c={},d=/[?&]?([^=]+)=([^&]*)/g;b=d.exec(a);)c[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return c}function u(a,b){var c;document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0)):(c=document.createEventObject(),c.eventType=b),c.eventName=b,document.createEvent?a.dispatchEvent(c):a.fireEvent("on"+c.eventType,c)}function v(a){return a?a.substring(a.indexOf("//")+2,a.indexOf("/?")):""}function w(a){var b=document.createElement("a");return b.href=a,b.hostname}function x(a){return a.replace(/^(www[0-9]?\.)?/,"")}function y(a,b){return!a||!b||(a=x(a),b=x(b),new RegExp("^"+b.replace(/^(\*\.?)/,"([^/]*.)?").replace(/\./g,"\\.")+"$").test(a))}function z(a){var b=a.button,c=a.which;return c||void 0===b?c:1&b?1:2&b?3:4&b?2:0}function A(a){return 1===z(a)}function B(a,b){return b=b||document.body,a!==b&&b.contains(a)}function C(a){return a&&1===a.nodeType}function D(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function E(a){a.preventDefault()}function F(a){var b;if(window.DOMParser)b=(new DOMParser).parseFromString(a,"text/xml");else{if(!window.ActiveXObject)return;b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}return b.documentElement}function G(a){if(a){var b=a.split(":");if(3===b.length){var c=parseInt(b[0],10),d=parseInt(b[1],10),e=b[2].split("."),f=parseInt(e[0],10),g=0;if(2===e.length&&(g=parseInt(e[1],10)),!(isNaN(c)||isNaN(d)||isNaN(f)||isNaN(g)))return 3600*c+60*d+f+g/1e3}}return NaN}function H(a,b){var c,d=a;for(c in b)b.hasOwnProperty(c)&&(d=d.replace("{{"+c+"}}",b[c]));return d}function I(a,b){if(b=b||0,window.Worker&&window.Blob){var c,d=new Blob(['var timeout; onmessage = function(e) {clearTimeout(timeout); if (e.data === "start") {timeout = setTimeout(function() { postMessage({}); }, '+b+");}}"]);try{c=new Worker(window.URL.createObjectURL(d)),c.onmessage=function(){c.terminate(),a()},c.postMessage("start")}catch(c){return setTimeout(a,b)}return c}return setTimeout(a,b)}function J(){function a(a){var b={};try{var c=window[a].getItem("rb_sync_id");c&&"object"!=typeof(b=JSON.parse(c))&&(b={})}catch(a){}return b}var b=[],c=a("localStorage"),d=a("sessionStorage"),e=o(c,d);for(var f in e)e.hasOwnProperty(f)&&b.push(f+"="+encodeURIComponent(e[f]));return b.join("&")}var K,L=1,M=2,N=3,O=null,P=0,Q=1,R=function(){var a="undefined",b="Shockwave Flash",c="application/x-shockwave-flash",d={major:0,minor:0,release:0},e=null;if(typeof navigator.plugins!==a&&"object"==typeof navigator.plugins[b])(e=navigator.plugins[b].description)&&typeof navigator.mimeTypes!==a&&navigator.mimeTypes[c]&&navigator.mimeTypes[c].enabledPlugin&&(e=e.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),d.major=parseInt(e.replace(/^(.*)\..*$/,"$1"),10),d.minor=parseInt(e.replace(/^.*\.(.*)\s.*$/,"$1"),10),d.release=/[a-zA-Z]/.test(e)?parseInt(e.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof window.ActiveXObject!==a)try{var f=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash");f&&(e=f.GetVariable("$version"))&&(e=e.split(" ")[1].split(","),d.major=parseInt(e[0],10),d.minor=parseInt(e[1],10),d.release=parseInt(e[2],10))}catch(a){}return d}();return{addCss:g,loadCss:h,loadJs:i,loadImg:j,xhr:k,scaleBySide:l,isEmptyObject:n,mixin:o,deepExtend:p,validateMinMax:q,numSorter:r,createIntUID:s,getQueryParams:t,triggerEvent:u,getUserIdQuery:J,getPageLocation:c,getDomain:v,getHostname:w,matchHostname:y,isLeftButtonPressed:A,isElementInDocument:B,isElement:C,getElementViewport:D,preventDefault:E,parseXml:F,convertDuration:G,renderTemplate:H,setTimeout:I,checkFlash:d,checkFlashAsync:e,FLASH_READY:Q,FLASH_MISSING:P,getServingType:a,servingTypes:{ON_PAGE:L,S_FRAME:M,XD_FRAME:N}}}(),AdmanHTML.Viewability=function(){"use strict";function a(a,b,c){return a.forEach(function(a){a.duration=b.focus&&b.percent>=a.threshold?a.duration+c:0}),a}function b(a){a.forEach(function(a){a.duration=0})}function c(a){return new window.IntersectionObserver(function(b){b&&b.length&&void 0!==b[0].intersectionRatio&&a(b[0].intersectionRatio)},{threshold:B})}function d(){return x?!document[x]:v===w.XD_FRAME||(!window.top.document.hasFocus||window.top.document.hasFocus())}function e(){var b=f();if("UNDETERMINED"!==b.state){if(a(C,b,t),p){p.logMRC(C)||o()}return b}}function f(){var a,b,c=d();return u?(a=A,b="DETERMINED"):v!==w.XD_FRAME?(a=g(q).percent,b="DETERMINED"):(a=0,b="UNDETERMINED"),{percent:a,focus:c,state:b}}function g(a,b){try{var c=a.getBoundingClientRect(),d=h(c),e=AdmanHTML.Utils.getElementViewport(a)||window;for(b=b||window.top;e!==b;){var f=e.frameElement.getBoundingClientRect();c=i(c,f),c.left=Math.max(f.left,c.left),c.right=Math.min(f.right,c.right),c.top=Math.max(f.top,c.top),c.bottom=Math.min(f.bottom,c.bottom),c.right<c.left&&(c.right=c.left),c.bottom<c.top&&(c.bottom=c.top),e=e.parent}c=j(c,b);var g=h(c);return c.percent=g/d*100,c}catch(a){return{left:0,right:0,top:0,bottom:0,percent:0}}}function h(a){return(a.right-a.left)*(a.bottom-a.top)}function i(a,b){return{left:a.left+b.left,right:a.right+b.left,top:a.top+b.top,bottom:a.bottom+b.top}}function j(a,b){var c={},d=k(b);return c.left=Math.max(0,a.left),c.right=Math.min(d.width,a.right),c.top=Math.max(0,a.top),c.bottom=Math.min(d.height,a.bottom),c}function k(a){var b={width:1/0,height:1/0};return!isNaN(a.document.body.clientWidth)&&a.document.body.clientWidth>0&&(b.width=a.document.body.clientWidth),!isNaN(a.document.body.clientHeight)&&a.document.body.clientHeight>0&&(b.height=a.document.body.clientHeight),a.document.documentElement&&a.document.documentElement.clientWidth&&!isNaN(a.document.documentElement.clientWidth)&&(b.width=a.document.documentElement.clientWidth),a.document.documentElement&&a.document.documentElement.clientHeight&&!isNaN(a.document.documentElement.clientHeight)&&(b.height=a.document.documentElement.clientHeight),a.innerWidth&&!isNaN(a.innerWidth)&&(b.width=Math.min(b.width,a.innerWidth)),a.innerHeight&&!isNaN(a.innerHeight)&&(b.height=Math.min(b.height,a.innerHeight)),b}function l(a,b,d){if(p=b,z=!d,q=a,u)s=s||c(function(a){A=100*a}),s.observe(a);else if(v===w.XD_FRAME)return y=!1,void p.log("viewabilityUnmeasurable");d||(r=setInterval(e,t)),y=!0,p.log("viewabilityMeasurable"),window.addEventListener("unload",m)}function m(){n("unload")}function n(a){y&&p&&z&&p.logMRC([],a||"complete"),p=null,y=!1,z=!1,q=null,clearInterval(r),b(C),s&&s.disconnect(),window.removeEventListener("unload",m)}function o(){clearInterval(r)}var p,q,r,s,t=250,u=!!window.IntersectionObserver,v=AdmanHTML.Utils.getServingType(),w=AdmanHTML.Utils.servingTypes,x=function(){for(var a=["h","webkitH","mozH","msH","oH"],b=0;b<a.length;b++)if(void 0!==document[a[b]+"idden"])return a[b]+"idden";return""}(),y=!1,z=!1,A=0,B=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],C=[];return B.forEach(function(a){C.push({threshold:Math.round(100*a),duration:0})}),{start:l,pause:o,stop:n,getViewabilityState:f}},AdmanHTML.AdRenderer=function(a,b){"use strict";function c(){t.wrapperEl=t.wrapperEl||a.wrapper,t.mainEl=t.mainEl||document.createElement("div"),t.clickEl=t.clickEl||t.mainEl,AdmanHTML.Utils.isElement(t.mainEl)&&!t.mainEl.parentNode&&(t.wrapperEl.childNodes.length?t.wrapperEl.insertBefore(t.mainEl,t.wrapperEl.childNodes[0]):t.wrapperEl.appendChild(t.mainEl),s=!0),t.clickEl.addEventListener("click",t.onClick),window.addEventListener("resize",n)}function d(a){a()}function e(){a.viewability.stop(),window.removeEventListener("resize",n),t.clickEl&&t.clickEl.removeEventListener("click",t.onClick),clearTimeout(p),AdmanHTML.Utils.isElement(t.mainEl)&&s&&t.mainEl.parentNode&&t.mainEl.parentNode.removeChild(t.mainEl)}function f(){if(!u&&(u=!0,clearTimeout(p),q)){var a=Date.now()-q;r=1e3*v.duration-a}}function g(){u&&(u=!1,h())}function h(){q=Date.now();var b=r||1e3*v.duration;p=setTimeout(function(){e(),a.cb("onCompleted")},b)}function i(){v.urlToNavigateOnClick&&(window.open(v.urlToNavigateOnClick,"_blank"),b.log("click"),a.cb("onClicked"))}function j(c){a.cb("onStarted",[b.sectionType,AdmanHTML.Utils.mixin(b.getAdForApp()||{},c||{})]),b.log("playbackStarted")}function k(c,d){var e=parseInt(c/d*100);a.cb("onTimeRemained",[{remained:d-c,percent:e,duration:d,currentTime:c}]),c=parseInt(c),b.log("thresholdPValue",e),b.log("thresholdValue",c),b.logOVV(c,e)}function l(a,b){"string"!=typeof a&&a?t.mainEl.appendChild(a):t.mainEl.innerHTML=a,AdmanHTML.Utils.mixin(t.mainEl.style,b)}function m(a){t.wrapperEl=a}function n(){t.onResize(t.mainEl.offsetWidth,t.mainEl.offsetHeight)}function o(){}var p,q,r,s,t={},u=!1,v=b.getAd();return t={start:c,pause:f,resume:g,skip:d,dispose:e,onClick:i,onStart:j,registerTimer:h,setView:l,setWrapper:m,onTimeRemained:k,onResize:o}},AdmanHTML.AudioAdRenderer=function(a,b){"use strict";function c(){g.mainEl=a.audioEl||document.createElement("audio"),h.forEach(function(a){g.mainEl.addEventListener(a,e)}),a.audioEl||g.setView(null,{position:"absolute",width:"1px",height:"1px",top:"-10000px",left:"-10000px"}),f=b.getAd().duration,g.mainEl.src=b.getAd().src,g.mainEl.load(),g.mainEl.play(),a.audioEl||g.start()}function d(){g.dispose(),h.forEach(function(a){g.mainEl.removeEventListener(a,e)})}function e(b){var c,d;switch(b.type){case"loadedmetadata":g.onStart();break;case"play":a.cb("onPlayed");break;case"pause":a.cb("onPaused");break;case"timeupdate":c=g.mainEl.duration,d=g.mainEl.currentTime,!isNaN(c)&&f&&Math.abs(f-c)>1&&(c=f,d=Math.min(d,c)),g.onTimeRemained(d,c);break;case"ended":a.cb("onCompleted");break;case"error":a.cb("onError")}}var f,g=new AdmanHTML.AdRenderer(a,b),h=["loadedmetadata","error","pause","play","timeupdate","ended"];return{start:c,skip:g.skip,dispose:d,pause:function(){g.mainEl.pause()},resume:function(){g.mainEl.play()},setVolume:function(a){var c=g.mainEl.muted?0:g.mainEl.volume;g.mainEl.muted=0===a,g.mainEl.volume=a,(0===c&&a>0||c>0&&0===a)&&b.log(a?"volumeOn":"volumeOff")}}},AdmanHTML.CloseBtnRenderer=function(a,b){"use strict";function c(){f.start();var a=b.getSettings(),c=a.controlsStyle||0,d=g[c],k=h[c];k.bg=k.bg||k.width;var l={};for(var m in j)j.hasOwnProperty(m)&&(l[m]=void 0!==a[m]?a[m]:j[m]);if(l.controlsPaddingTop=l.controlsPaddingTop-l.controlsSafeArea,l.controlsPaddingRight=l.controlsPaddingRight-l.controlsSafeArea,f.setView(AdmanHTML.Utils.renderTemplate(i,{img:d,width:k.width,height:k.height,bg:k.bg}),{position:"absolute",cursor:"pointer"}),AdmanHTML.StyleUtils.applyStyle(f.mainEl,l),k.bg!==k.width){var n=k.bg-k.width,o=function(a){"rb-adman_close"===a.target.className&&(a.target.style.backgroundPosition="-"+n+"px 0")},p=function(a){"rb-adman_close"===a.target.className&&(a.target.style.backgroundPosition="0 0")};f.mainEl.addEventListener("mouseover",o),f.mainEl.addEventListener("mouseout",p),e=function(){f.mainEl.removeEventListener("mouseover",o),f.mainEl.removeEventListener("mouseout",p)}}}function d(){e&&e(),f.dispose()}var e,f=new AdmanHTML.AdRenderer(a,b),g=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAASCAMAAAAE/YwaAAABTVBMVEUAAAD4+PiLi4sAAAD////////q6uokJCT4+PiDg4MVFRUAAAD////9/f2AgICwsLC8vLyWlpaTk5MAAADq6urGxsYmJiZra2v29vZ2dnba2trQ0NCmpqbb29unp6c0NDTs7OzPz8+xsbH+/v7///9jY2P///+fn5+ysrLe3t5LS0uzs7PBwcEuLi66urpYWFi3t7cAAAD39/fW1tb8/PzGxsba2tpKSkpUVFR/f39sbGyRkZF2dnaqqqqioqLKyspERET6+vr////l5eX////w8PD////////a2tr////Y2Nj///+Pj4////+Dg4N6enq3t7dkZGSGhoaMjIz///+amppeXl7///9MTExxcXE9PT3///////9CQkL////////////n5+fKysrq6uq9vb2jo6Pk5OScnJyoqKjk5OS9vb2IiIhAQEBeXl7///8RDLJoAAAAbnRSTlNegIEhrIlmZmWAZkky/GeCgYFnBoCAdGbzq4GAgGZmZvHfzaefnJiXkpGKcG5uZmZDQ/fq466sqqeZmJeSd2xnZvnw7Onj2dHMyMfAvLe2tLCwpJGQjH92b25ubFpYUUhA4NrQzsrHvqqolnl5b4/gN4MAAAGhSURBVCjPZdFXbxpBEMDxORYSks1VDrgOpphqwKF34t7j3lt6n+//mOFtkX/Srlaj/8NKAzG2CoJVFns5AVZuhwXtMmP5JgqaeQa8I0UF0i/O01lJkE1zgNyrBTmANWnBGgAs+351PK761cq4UvX9ZYAN0yzYdsEsntqnRdPcoOh8WukgdipeCy11Oj0HaJnFDOLXgp1G68gxWxRFarXJd5R/f0G5OKnVIgBbjjNcQvlHE+WDguNsUSQFweTPJsqIbSMIAglg23U1e30+yQxd192m6MowDCVkIe4pBrkC2I3H4xcf3yN+7sfJLkV3iqLchGi0c6OQO4B9TdPO5tFSXyP7FEWTyeTlJn5APP5HzyjAoapenKTnk0xfVdVDiu7r9esdlM/2UB5e1+v3AGHPG9DHj+gcjDwvTNHj7PYY8eft309oXc5mjwBZfZRB/DboraN1outZip5SqZVEYoWu+Z16oh3oer7bzeujXrc30PUcRc+vFzzTDkILaAe88fBW8NDgvKS+EaglDizReCdoJBgrlyKCUplBjHEQcBZ7OfkPWYpTXkAiSDwAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANBAMAAACAxflPAAAAGFBMVEX///8AAAD///////////////////////8GrCwdAAAACHRSTlPMAKZNgI0NmlQIVC0AAABMSURBVAjXYxAUVmBQFhRgEFNgYGBQE2AQYgACJgEGA6YAhiAGAwYFVhEWcQaQpKOhAwMIMAsDCRgfLC8KlDdgKmAoYjCA6oebBzMfAF6oBtnQTZWMAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAA0CAMAAABRjo0fAAAARVBMVEUAAAAAAAAAAAD///+3t7e3t7cAAAAtLS3FxcUAAAAtLS3z8/Px8fHIyMjCwsJKSkpKSkoAAAAAAAD29vbi4uLi4uL////qCBnnAAAAFnRSTlMAgE2Zx3c4jHxiVJLy0s2VWR8K9eSJJoi7pQAAAS1JREFUWMPs0DkSwzAIQNFoV+R90/2PGg0DTQI2RQoX/hUN84ReT09Pf22JViwu/E58G7F3ZFdWZERqZXaQEamVgdCRY95Hjiwx/2YvW37eZi6L/EEld46pywVOYg9KQ1+Z+iHxJ4EDDEuB9L0DzlaFNpBYKDuxLEFDFRtEqJOhToJ6GepFyJ0kQfWku0DHXLLDcpkPDbRPaazYmKZdBc1tCg4KbZw10NQmXyHfxkkFFQsSOrZooGRAQsckFZQtSgGGrIFGg5KHYdRABISAoAIiwHsEVRBJ6KggktDRQCSRo4FIIkcDkUSOBiKJnDtCn1EadIMtMVAheQ+uDEuNImhwFarUqCYGV8VHPYsGvnFCi+YW3RqQdGsS062RT69uC906YvTqWo6CUTAKqAkAIPxHpRLLbKUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAiCAMAAADRYI/HAAAAOVBMVEUAAAD///+7u7uxsbF9fX2Pj4/W1taJiYn39/eTk5PNzc2tra2CgoLx8fHIyMioqKiioqJ3d3fh4eHCLdXsAAAAAXRSTlMAQObYZgAAAPhJREFUSMfszksOgzAMRdFiYoKdL+x/sTWRDJXyppU66BtF6HLk13+/vbTCpac4AtzxFNYTmH32IoQceVrMIXzcQbpNU7pvOcxoNK2Z4reYcS5gJ/kpZigq1BRHyArYkCOx4aLFB9lwst0IEy6Iv4Jo3ZexvSpGUveiJ4woEe2jsIciJLFIuR5FhBNEKq2mDGOlipAuOcpVSMzSITJ+tpgGhpDCMZhiRohcEOKKGxPiCrMbAHHFDYAs44j3wM7BE8VAI4Bm4ItioClAMyBsyg2hsncoD1jKo5jyxEZBsueAJ3sqZsDBWJ5QXjxSXlBTXmVQo/KiZjUKAAVsE9yzWNzOAAAAAElFTkSuQmCC"],h=[{width:18,height:18,bg:36},{width:13,height:13},{width:26,height:26,bg:52},{width:17,height:17,bg:34}],i='<div class="rb-adman_close" style="background:url({{img}});background-size:{{bg}}px 100%;width:{{width}}px;height:{{height}}px""></div>',j={controlsPaddingTop:3,controlsPaddingRight:0,controlsSafeArea:0};return f.onClick=function(b){b.stopPropagation(),"rb-adman_close"===b.target.className&&a.cb("onClosed")},{start:c,dispose:d,setWrapper:f.setWrapper}},AdmanHTML.DebugAdRenderer=function(a,b){"use strict";function c(){d.mainEl=document.createElement("span"),d.start(),d.setView("&#9874; "+b.section,{position:"absolute",cursor:"pointer",top:"5px",left:"5px",background:"rgba(204,204,204,0.8)",padding:"5px",color:"#333","border-radius":"6px",font:"12px/19px Tahoma",display:"inline-block","z-index":100})}var d=new AdmanHTML.AdRenderer(a,b),e=b.getAd();return d.onClick=function(){window.open(e.urlToNavigateOnClick,"_blank")},{start:c,dispose:d.dispose}},AdmanHTML.EmptyAdRenderer=function(a,b){"use strict";function c(){b.log("sectionEmpty"),setTimeout(function(){a.cb("onCompleted")})}return{start:c}},AdmanHTML.HtmlAdRenderer=function(a,b){"use strict";function c(){n.start();var c=b.getAd();l=c.duration,k=j(),k.width="100%",k.height="100%",k.setAttribute("style","display:block;width:100%;height:100%"),n.setView(k,{position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"transparent"}),AdmanHTML.Utils.isElement(a.videoEl)&&a.videoEl.parentNode===n.mainEl.parentNode&&n.mainEl.parentNode.insertBefore(n.mainEl,a.videoEl.nextSibling);var d=k.contentWindow?k.contentWindow.document:k.contentDocument;d.open(),d.write(c.src),d.close(),o=AdmanHTML.Utils.getElementViewport(a.wrapper),o.addEventListener("message",h),a.viewability.start(n.mainEl,b),f(),n.onStart()}function d(){p||(p=!0,q+=Date.now()-r,clearInterval(m),a.cb("onPaused"))}function e(){p&&(p=!1,f(),a.cb("onPlayed"))}function f(){r=Date.now(),m=setInterval(g,500)}function g(){q+=Date.now()-r,r=Date.now(),n.onTimeRemained(q/1e3,l),q>=1e3*l&&a.cb("onCompleted")}function h(c){if(c.source===k.contentWindow)try{switch(JSON.parse(c.data).type){case"trg:click":b.log("click"),a.cb("onClicked")}}catch(a){}}function i(){clearInterval(m),o.removeEventListener("message",h),n.dispose()}function j(){var a=document.createElement("iframe");return a.scrolling="no",a.marginWidth="0",a.marginHeight="0",a.frameBorder="0",a.src="about:blank",a.id="ad-frame-"+Math.round(1e5*Math.random()),a}var k,l,m,n=new AdmanHTML.AdRenderer(a,b),o=null,p=!1,q=0,r=0;return n.onClick=function(){},{start:c,pause:d,resume:e,skip:n.skip,dispose:i}},AdmanHTML.ImgAdRenderer=function(a,b){"use strict";function c(){e.start(),e.registerTimer(),AdmanHTML.Utils.addCss(h,g);var a=b.getAd();e.setView(AdmanHTML.Utils.renderTemplate(i,a),{position:"absolute",display:"inline-block",width:"100%","max-width":a.width+"px",left:"50%",bottom:0,transform:"translate(-50%,0)","box-sizing":"border-box",overflow:"hidden","text-align":"center"});var c=b.getSettings(),d=e.mainEl.querySelector(".rb-adman_age_wrapper");if(c&&c.advertisment&&c.advertisment.image){var j=c.advertisment.image;AdmanHTML.StyleUtils.applyStyle(e.mainEl,j,"fontFace contentIndent hasBackground backgroundColor backgroundAlpha cornerRounding".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_image_wrapper"),j,"borderSize borderColor borderAlpha borderCornerRounding".split(" "));var k=c.advertisment.image.ageRestrictions;a.ageRestrictions&&k&&(AdmanHTML.StyleUtils.applyStyle(d,k),AdmanHTML.StyleUtils.applyStyle(d.querySelector(".rb-adman_age_content"),k,["textUnderline"]))}a.ageRestrictions||d.parentNode.removeChild(d),f.setWrapper(e.mainEl),f.start(),e.onStart()}function d(){e.dispose(),f.dispose()}var e=new AdmanHTML.AdRenderer(a,b),f=new AdmanHTML.CloseBtnRenderer(a,b),g="rb-adman-img-style",h=".rb-adman_image_overlay {display:inline-block; overflow:hidden;vertical-align:middle;cursor:pointer;color:#fff}.rb-adman_image_overlay .rb-adman_image_wrapper {display:block;border:0px solid transparent;overflow:hidden;}.rb-adman_image_overlay .rb-adman_image_wrapper img {vertical-align:top;}.rb-adman_image_overlay .rb-adman_age_wrapper {display:block;position:absolute;top:0px;left:3px;border:0px solid transparent;margin-right:1px;text-decoration:none!important}",i='<div class="rb-adman_image_overlay"><div class="rb-adman_image_wrapper"><img src="{{src}}" width="100%" height="auto"></div><span class="rb-adman_age_wrapper"><span class="rb-adman_age_content">{{ageRestrictions}}</span></span></div>';return{start:c,pause:e.pause,resume:e.resume,skip:e.skip,dispose:d}},AdmanHTML.ResearchAdRenderer=function(a,b){"use strict";function c(a,b){var c=[];return a.forEach(function(a){a.name===b&&c.push(a)}),c}function d(a,b,c){return b<=a&&(!c||c>=a)}function e(){!p&&o&&(p=!0,b.log("playbackPaused"))}function f(){p&&o&&(p=!1,b.log("playbackResumed"))}function g(){o=!1,p=!1,n.stop()}function h(a){var c=!a;c!==q&&(q=c,b.log(c?"volumeOff":"volumeOn"))}function i(){o&&(s&&k(s,s),l&&t.forEach(function(a){a.completed||(a.completed=!0,!a.viewable&&AdmanHTML.Utils.loadImg(a.url))}),g())}function j(a){b.log(a?"fullscreenOn":"fullscreenOff")}function k(c,e){if(!isNaN(c)){o||(o=!0,n.start(a.playerEl,b,!0),b.log("playbackStarted")),c=Math.round(c);var f=null!==r?c-r:null;if(r=c,b.log("thresholdValue",c),!isNaN(e)&&isFinite(e)&&e>0&&(e=Math.round(e),s=e,b.log("thresholdPValue",Math.floor(c/e*100))),f<0&&b.log("rewind"),u.forEach(function(a){if(d(c,a.start,a.end)){var b=Math.floor((c-a.start)/a.rate);b>0&&a.last!==b&&(a.last=b,AdmanHTML.Utils.loadImg(a.url.replace("[CONTENTPLAYHEAD]",c)))}else a.last=null}),!1!==l&&0!==f){var g,h=f<0||f>1;t.forEach(function(a){if(d(c,a.start,a.end)&&!a.completed){g=g||n.getViewabilityState(),l="DETERMINED"===g.state;var b=g.percent>a.percent&&g.focus;a.duration=a.duration||0,a.lastViewable&&b&&!h?a.duration+=f:a.duration=0,a.lastViewable=b,a.duration>=a.value&&(a.completed=!0,a.viewable&&AdmanHTML.Utils.loadImg(a.url))}else a.duration=0,a.lastViewable=!1})}}}var l,m=b.getExtendedAdForApp().statistics,n=new AdmanHTML.Viewability,o=!1,p=!1,q=!1,r=null,s=null,t=c(m,"mrcValue"),u=c(m,"timerValue");return{pause:e,resume:f,setVolume:h,setPosition:k,setComplete:i,setFullscreen:j}},AdmanHTML.StatisticsAdRenderer=function(a,b){"use strict";function c(){b.log("playbackStarted"),AdmanHTML.Utils.setTimeout(function(){a.cb("onCompleted")})}return{start:c}},AdmanHTML.SwfAdRenderer=function(a,b){"use strict";function c(){e.start(),AdmanHTML.Utils.checkFlashAsync(function(c){c===AdmanHTML.Utils.FLASH_READY?(e.registerTimer(),e.setView(d(b.getAd().src,{width:"100%",height:"100%"},{}),{position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"black"}),e.onStart()):a.cb("onError")})}function d(a,b,c){var d,e,f=b||{},g=c||{};f.type="application/x-shockwave-flash",window.ActiveXObject?(f.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",g.movie=a):f.data=a,e="<object";for(d in f)f.hasOwnProperty(d)&&(e+=" "+d+'="'+f[d]+'"');e+=">";for(d in g)g.hasOwnProperty(d)&&(e+='<param name="'+d+'" value="'+g[d]+'" />');return e+="</object>"}var e=new AdmanHTML.AdRenderer(a,b);return{start:c,skip:e.skip,dispose:e.dispose,createSwfObject:d,super:e}},AdmanHTML.TextAdRenderer=function(a,b){"use strict";function c(){e.start(),e.registerTimer(),AdmanHTML.Utils.addCss(h,g);var a=AdmanHTML.Utils.mixin({header:"",body:"",hyperlinkText:""},b.getAd());e.setView(AdmanHTML.Utils.renderTemplate(i,a),{position:"absolute",margin:"0 auto",left:0,right:0,bottom:0,"box-sizing":"border-box",overflow:"hidden"});var c=b.getSettings();if(c&&c.advertisment&&c.advertisment.text){var d=c.advertisment.text;AdmanHTML.StyleUtils.applyStyle(e.mainEl,d,"fontFace width height contentPadding hasBackground backgroundColor backgroundAlpha cornerRounding".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_header"),d,"headerColor headerSize headerUnderline headerBold headerIndent".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_header_text"),d,["headerUnderlineOnRollOver"]),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_body"),d,"bodyColor bodySize bodyUnderline bodyLeading bodyIndent bodyPaddingRight".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_link"),d,"hyperlinkColor hyperlinkSize hyperlinkUnderline hyperlinkIndent".split(" "));var j=c.advertisment.text.ageRestrictions,k=e.mainEl.querySelector(".rb-adman_age_wrapper");a.ageRestrictions?j&&(AdmanHTML.StyleUtils.applyStyle(k,j),AdmanHTML.StyleUtils.applyStyle(k.querySelector(".rb-adman_age_content"),j,["textUnderline"])):k.parentNode.removeChild(k);var l=e.mainEl.querySelector(".rb-adman_image_wrapper span");if(d.noImage)l.parentNode.removeChild(l);else if(d.contentPadding&&(l.style.marginRight=AdmanHTML.StyleUtils.getLength(d.contentPadding)),d.maxImageHeight||d.maxImageWidth){var m=a.width/a.height;l.style.width=AdmanHTML.StyleUtils.getLength(Math.round(d.maxImageWidth||d.maxImageHeight*m)),l.style.height=AdmanHTML.StyleUtils.getLength(Math.round(d.maxImageHeight||d.maxImageWidth/m))}}f.setWrapper(e.mainEl),f.start(),e.onStart()}function d(){e.dispose(),f.dispose()}var e=new AdmanHTML.AdRenderer(a,b),f=new AdmanHTML.CloseBtnRenderer(a,b),g="rb-adman-text-style",h=".rb-adman_text_overlay {display:block; overflow:hidden;height:100%;cursor:pointer;color:#fff}.rb-adman_text_overlay .rb-adman_image_wrapper {display:block;float:left;position:relative;height:100%;vertical-align:middle}.rb-adman_text_overlay .rb-adman_image_wrapper span {display:inline-block;vertical-align:middle;background-size:contain;background-position:center}.rb-adman_text_overlay .rb-adman_text_wrapper {display:block;overflow:hidden;height:100%;vertical-align:top;line-height:1.2}.rb-adman_text_overlay .rb-adman_header {display:block;white-space:nowrap;margin-right:20px;overflow:hidden;text-overflow:ellipsis}.rb-adman_text_overlay .rb-adman_age_wrapper {display:inline-block; vertical-align:middle;border:0px solid transparent;margin-right:1px;text-decoration:none!important}.rb-adman_text_overlay .rb-adman_header_text {color:inherit;text-decoration:none;letter-spacing:normal;line-height:1.5;vertical-align:middle}.rb-adman_text_overlay .rb-adman_header_text:hover {color:inherit;text-decoration:underline}.rb-adman_text_overlay .rb-adman_body {padding:2px 0}.rb-adman_text_overlay .rb-adman_body, .rb-adman_link {display:block;text-decoration:none;padding-top:2px}",i='<div class="rb-adman_text_overlay"><div class="rb-adman_image_wrapper"><div style="display:table;height:100%;"><div style="display:table-cell;height:100%;vertical-align:middle"><span style="background-image: url({{src}});width:{{width}}px;height:{{height}}px"></span></div></div></div><div class="rb-adman_text_wrapper"><span class="rb-adman_header"><span class="rb-adman_age_wrapper"><span class="rb-adman_age_content">{{ageRestrictions}}</span></span><span class="rb-adman_header_text">{{header}}</span></span><span class="rb-adman_body">{{body}}</span><span class="rb-adman_link">{{hyperlinkText}}</span></div></div>';return{start:c,pause:e.pause,resume:e.resume,skip:e.skip,dispose:d}},AdmanHTML.VideoAdRenderer=function(a,b){"use strict";function c(){i.mainEl=a.videoEl,i.clickEl=a.clickEl||i.mainEl,j.forEach(function(a){i.mainEl.addEventListener(a,e)}),i.mainEl.parentNode?l={src:i.mainEl.src,time:i.mainEl.currentTime,muted:i.mainEl.muted}:i.setView(null,{position:"absolute",width:"100%",height:"100%",top:0}),i.mainEl.controls=a.browser.mobile,i.mainEl.src=b.getAd().src,i.mainEl.load(),g(0),h=i.mainEl.play(),h&&h.then&&h.then(f,function(){i.mainEl.muted=!0,h=i.mainEl.play(),h.then(f,function(){})}),i.start()}function d(){i.dispose(),j.forEach(function(a){i.mainEl.removeEventListener(a,e)}),l.src?(i.mainEl.src=l.src,i.mainEl.load(),i.mainEl.play(),g(l.time)):(i.mainEl.src="",
i.mainEl.removeAttribute&&i.mainEl.removeAttribute("src"))}function e(b){switch(b.type){case"loadedmetadata":break;case"playing":h||f();break;case"play":a.cb("onPlayed");break;case"pause":a.cb("onPaused");break;case"timeupdate":i.onTimeRemained(i.mainEl.currentTime,i.mainEl.duration);break;case"ended":a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="pause",a.cb("onCompleted");break;case"error":a.cb("onError")}}function f(){if(!k){k=!0;var c=AdmanHTML.Utils.isElement(i.mainEl)?i.mainEl:i.wrapperEl;a.viewability.start(c,b),i.onStart({muted:i.mainEl.muted})}}function g(a){if(i.mainEl)try{i.mainEl.currentTime=a}catch(a){}}var h,i=new AdmanHTML.AdRenderer(a,b),j=["loadedmetadata","error","pause","play","playing","timeupdate","ended"],k=!1,l={};return{start:function(){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="play",c()},skip:function(){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="pause",i.skip.apply(a,arguments)},dispose:function(){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="pause",d()},pause:function(){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="pause",i.mainEl.pause()},resume:function(){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="play",i.mainEl.play()},setVolume:function(a){var c=i.mainEl.muted?0:i.mainEl.volume;a>0&&i.mainEl.muted&&(i.mainEl.muted=!1),0===a&&(i.mainEl.muted=!0),i.mainEl.volume=a,(0===c&&a>0||c>0&&0===a)&&b.log(a?"volumeOn":"volumeOff")}}},AdmanHTML.VpaidJsAdRenderer=function(a,b){"use strict";function c(){var a;if(!i)return v.duration;try{a=i.callGet("adDuration"),void 0===a&&(a=v.duration)}catch(b){a=v.duration}return a}function d(){if(u.start(),AdmanHTML.Utils.isElement(a.videoEl)){var c=AdmanHTML.Utils.getElementViewport;c(a.videoEl)===c(u.wrapperEl)&&(a.videoEl.parentNode?(k=a.videoEl.parentNode,l=a.videoEl.nextSibling):j=!0,u.wrapperEl.insertBefore(a.videoEl,u.wrapperEl.childNodes[0]),AdmanHTML.Utils.mixin(a.videoEl.style,{position:"absolute",width:"100%",height:"100%",top:0}))}var d=b.getSettings();d&&(d.loadTimeout&&(w=d.loadTimeout),d.startTimeout&&(x=d.startTimeout)),a.cb("onStarted",[b.sectionType,b.getAdForApp()||{}]),f(w,"EXTERNAL_JS_ADVERTISMENT_TIMEOUT:LoadInterface"),i.urlToNavigateOnClick=b.getAd().urlToNavigateOnClick,u.setView(i.load(v.src,a.config.vpaidHtmlInterface),{position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"transparent"})}function e(){j&&a.videoEl.parentNode?a.videoEl.parentNode.removeChild(a.videoEl):k&&k.insertBefore(a.videoEl,l&&l.parentNode?l:null),g(),i.destroy(),u.dispose()}function f(a,b){g(),r=b,n=setTimeout(h,a)}function g(){clearTimeout(n)}function h(){q=!0,g(),b.log("error"),r&&a.stats.logError(r+":"+v.bannerID),a.cb("onError")}var i,j,k,l,m,n,o,p,q,r,s,t,u=new AdmanHTML.AdRenderer(a,b),v=b.getAd(),w=500,x=1e3;u.onResize=function(a,b){i&&i.call("resizeAd",[a,b,"normal"])},u.onClick=function(){};var y=function(d,e){if(!q){var h,j;switch(d){case"loaded":f(w,"EXTERNAL_JS_ADVERTISMENT_TIMEOUT:LoadJs");break;case"vpaidloaded":g();break;case"inited":i.call("handshakeVersion",["2.0"])?(f(x,"EXTERNAL_JS_ADVERTISMENT_TIMEOUT:InitAd"),i.call("initAd",[u.mainEl.offsetWidth,u.mainEl.offsetHeight,"normal",v.bitrate,{AdParameters:v.params}])):a.cb("onError");break;case"AdStarted":g(),p=i.callGet("adVolume"),void 0===o||i.autoMuted||i.callSet("adVolume",o),b.log("playbackStarted"),a.viewability.start(u.mainEl,b),a.cb("onVPAIDStarted");break;case"AdLoaded":f(x,"EXTERNAL_JS_ADVERTISMENT_TIMEOUT:StartAd"),i.call("startAd");break;case"AdRemainingTimeChange":h=c(),j=i.callGet("adRemainingTime"),h>0&&j>=0?u.onTimeRemained(h-j,h):a.cb("onDurationChanged",[{remained:j,duration:h}]);break;case"AdVolumeChange":var k=i.callGet("adVolume");(0===p&&k>0||p>0&&0===k)&&b.log(k?"volumeOn":"volumeOff"),p=k;break;case"AdVideoComplete":a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="pause",h=c(),u.onTimeRemained(h,h);break;case"AdStopped":case"AdSkipped":s||(s=!0,setTimeout(function(){m?m():a.cb("onCompleted")}));break;case"AdClickThru":e.url&&e.playerHandles&&window.open(e.url,"_blank"),b.log("click"),a.cb("onClicked");break;case"AdError":a.stats.logError("EXTERNAL_JS_ADVERTISMENT_ERROR:"+(e&&e.message||"")),a.cb("onError");break;case"AdPaused":t||(t=!0,a.cb("onPaused"));break;case"AdPlaying":t&&(t=!1,a.cb("onPlayed"));break;case"AdUserClose":b.log("closedByUser");break;case"video:pause":t||i&&i.call("pauseAd");break;case"video:play":t&&i&&i.call("resumeAd")}}},z=a.wrapper.ownerDocument,A=z.defaultView||z.parentWindow;return i=new AdmanHTML.VpaidLoader(a.videoEl,A),i.onVpaidEvent(y),{start:function(){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="play",d()},dispose:function(){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="pause",e()},pause:function(){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="pause",i&&i.call("pauseAd")},resume:function(){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="play",i&&i.call("resumeAd")},setVolume:function(a){i&&i.callSet("adVolume",a),o=a},skip:function(b){a.playStatus||(a.playStatus={}),a.playStatus.prevStatus=a.playStatus.curStatus,a.playStatus.curStatus="pause",m=b;try{i&&i.call("skipAd")}catch(a){}}}},AdmanHTML.VpaidSwfAdRenderer=function(a,b){"use strict";function c(){var a;if(!i)return q.duration;try{a=i.callGet("adDuration")||q.duration}catch(b){a=q.duration}return a}function d(){p.start();var c=b.getSettings();c&&(c.loadTimeout&&(s=c.loadTimeout),c.startTimeout&&(t=c.startTimeout)),AdmanHTML.Utils.checkFlashAsync(function(c){if(c===AdmanHTML.Utils.FLASH_READY){a.cb("onStarted",[b.sectionType,b.getAdForApp()||{}]),f(s);var d="vpaidSwfUrl="+encodeURIComponent(q.src)+"&proxyMethodName="+r;p.setView(o.createSwfObject(a.config.vpaidJsInterface,{width:"100%",height:"100%"},{flashvars:d,allowScriptAccess:"always",wmode:"opaque"}),{position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"black"})}else a.cb("onError")})}function e(){g(),p.dispose(),window[r]=null}function f(a){g(),k=setTimeout(h,a)}function g(){clearTimeout(k)}function h(){n=!0,g(),b.log("error"),a.cb("onError")}var i,j,k,l,m,n,o=new AdmanHTML.SwfAdRenderer(a,b),p=o.super,q=b.getAd(),r="vpaidProxyMethod"+Date.now(),s=500,t=1e3;return p.onResize=function(a,b){i&&i.call("resizeAd",[a,b,"normal"])},p.onClick=function(){},window[r]=function(d,e){if(!n){var h;switch(d){case"loaded":f(s);break;case"vpaidloaded":g();break;case"inited":i=p.mainEl.getElementsByTagName("object")[0];i.call("handshakeVersion",["2.0"])?(f(t),i.call("initAd",[p.mainEl.offsetWidth,p.mainEl.offsetHeight,"normal",q.bitrate,q.params,""])):a.cb("onError");break;case"AdStarted":g(),m=i.callGet("adVolume"),void 0!==l&&i.callSet("adVolume",l),b.log("playbackStarted"),a.viewability.start(p.mainEl,b),a.cb("onVPAIDStarted");break;case"AdLoaded":f(t),i.call("startAd");break;case"AdRemainingTimeChange":h=c(),p.onTimeRemained(h-i.callGet("adRemainingTime"),h);break;case"AdVolumeChange":var k=i.callGet("adVolume");(0===m&&k>0||m>0&&0===k)&&b.log(k?"volumeOn":"volumeOff"),m=k;break;case"AdVideoComplete":h=c(),p.onTimeRemained(h,h);break;case"AdStopped":case"AdSkipped":setTimeout(function(){j?j():a.cb("onCompleted")});break;case"AdClickThru":b.log("click"),a.cb("onClicked");break;case"AdError":a.stats.logError("EXTERNAL_SWF_ADVERTISMENT_ERROR:"+(e&&e.message||"")),a.cb("onError");break;case"AdPaused":a.cb("onPaused");break;case"AdPlaying":a.cb("onPlayed");break;case"AdUserClose":b.log("closedByUser")}}},{start:d,dispose:e,pause:function(){i&&i.call("pauseAd")},resume:function(){i&&i.call("resumeAd")},setVolume:function(a){i&&i.callSet("adVolume",a),l=a},skip:function(a){j=a;try{i&&i.call("skipAd")}catch(a){}}}};
if(window.admanAsyncLoader){setTimeout(admanAsyncLoader)}else{window.admanAsyncInit&&setTimeout(admanAsyncInit)}