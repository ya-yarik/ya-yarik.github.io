(self.webpackChunkvk=self.webpackChunkvk||[]).push([[1563],{540249:(e,_,t)=>{"use strict";t.d(_,{default:()=>m});var a=t(667294),i=t(887854),o=t.n(i),r=t(408091),s=t(634777),l=t(379333),n="0 0 12 16",c="chevron_16",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(o())({id:c,viewBox:n,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 16" id="chevron_16"><g fill="none" fill-rule="evenodd"><path d="M0 0h12v16H0z" /><path d="M7.227 8L3.864 4.636a.9.9 0 111.272-1.272l4 4a.9.9 0 010 1.272l-4 4a.9.9 0 11-1.272-1.272L7.227 8z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var u=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),a.createElement(l.SvgIcon,(0,r.assign)({},e,{viewBox:n,id:c,width:isNaN(e.width)?12:+e.width,height:isNaN(e.height)?16:+e.height}))};u.mountIcon=p;const m=u},492867:(e,_,t)=>{"use strict";t.d(_,{default:()=>m});var a=t(667294),i=t(887854),o=t.n(i),r=t(408091),s=t(634777),l=t(379333),n="0 0 24 24",c="chevron_left_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(o())({id:c,viewBox:n,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="chevron_left_24"><path d="M15.884 18.116a1.25 1.25 0 01-1.768 1.768l-7-7a1.25 1.25 0 010-1.768l7-7a1.25 1.25 0 011.768 1.768L9.768 12z" fill="currentColor" /></symbol>'})),d=!0)}var u=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),a.createElement(l.SvgIcon,(0,r.assign)({},e,{viewBox:n,id:c,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};u.mountIcon=p;const m=u},960308:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Tickets:()=>Tickets});var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(751876),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(59357),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21466),_tickets_ef__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(96871),_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(414914),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(917685),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(719016),_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(705456),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(442699),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(51229),_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(190148),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(651988),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(791563),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(927663),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(621260),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(182408),_web_lib_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(907851),react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(667294),_web_support_ClaimFZFormReportReasonSelector_ClaimFZFormReportReasonSelector__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(17172),_shared_lib_init_react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(40897),_web_support_ClaimFZFormReportReasonSelector_ClaimFZFormReportEmailSelector__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(49089),MAX_TEXT_PART_LENGTH=4096,CLAIM_FZ_FORM_TEXT_LENGTH=500;function replyIsSending(){return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isButtonLocked)("tickets_send")}var Tickets={getRequestUrl(){var e=nav.objLoc[0];return"aovk"===e||"helpdesk"===e?e:"support"},getSaveTicketUrl(){var e=nav.objLoc[0];return"aovk"===e||"helpdesk"===e?e+"?act=a_save":"support_save_ticket"},gotoTicket:(e,_)=>!!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__.checkEvent)(_)||nav.go(e,_),getBrowser(){var e,_,t=!1,a=window.browser;if(each(["opera_mini","opera_mobile","safari_mobile","msie_mobile","bada","android","ipad","ipod","iphone","mozilla","opera","chrome","safari","msie10","msie9","msie8","msie7","msie6","msie"],(function(e,_){if(!0===a[_])return t=_,!1})),window._ua&&/yabrowser/i.test(window._ua)&&(t="yabrowser"),t){if(a&&a.msie&&(!a.version||a.version<10))_="";else{var i=(window._ua.match(/.+(?:mini|bada|mobi)[\/: ]([\d.]+)/)||[0,"0"])[1];_="0"!=i?" "+i:" "+a.version}e=t+_}else e=navigator.userAgent.toLowerCase();var o=a.flashfull;return e+="|"+o.major+"."+o.minor+"."+o.rev},showTooltip(e,_,t,a,i){var o="right"===(a=a||"left");(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_6__.showTooltip)(e,{dir:a,text:_,slideX:o?-15:15,className:"tickets_side_tt "+t,shift(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(e.tt.container),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(e);if("bottom"===a)return[-(t[0]-_[0])/2,7];return[o?_[0]+7:-t[0]-7,0,-(t[1]+_[1])/2]},forcetodown:!0,hasover:1,onCreate(){i&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__.removeEvent)(e,"mouseout")}})},hideTooltip(e){e.tt&&e.tt.hide&&e.tt.hide()},doSaveTicket(e,_){var t={onDone(_,t){0==_?(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.showDoneBox)(t):1==_&&Tickets.showAverageTime(t,Tickets.doSaveTicket.pbind(extend({},e,{force:1})))},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_send"),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.unlockButton)("tickets_send")};!0===_&&(t.onFail=e=>(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_16__.showErrorBox)(e)),ajax.post(Tickets.getSaveTicketUrl(),e,t)},getFromObjLoc(e){var _={};return each(e,(function(e,t){nav.objLoc[t]&&(_[t]=nav.objLoc[t])})),_},getAudioFields(){var e={};if(cur.samples&&cur.samples.audio||ge("audio_checking")){e.audio_html=ge("audio_checking").innerHTML;var _=(cur.samples||{}).audio||"";window.ag&&window.sh&&(e.audio_html=e.audio_html.replace(/_info/g,"vkontakte_info")),(window.dwnl_video||window.add_js)&&(e.audio_html=e.audio_html.replace(/_info/g,"dwnl_info")),e.audio_orig=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:_.replace(/z9q2m/g,"audio")}).innerHTML}return e},saveTicket(e){var _=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_title")),t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_text")),a=!0;_||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_title",!1,!a),a=!1);var i=Tickets.getUploadAttachs();t||cur.descriptionNotNeeded||i.length||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_text",!1,!a),a=!1);var o=Tickets.getBrowser(),r=extend({title:_,text:t,hash:e,attachs:i,browser:o,section:cur.faqSection},Tickets.getAudioFields(),Tickets.getFromObjLoc(["id","mid","group_id","app_id","union_id","from","mobile","bhash","email"]));nav.objLoc.hasOwnProperty("hds")&&(r.hds=nav.objLoc.hds),cur.ticketReferer&&(r.referer=cur.ticketReferer);var s=_tickets_ef__WEBPACK_IMPORTED_MODULE_3__.TicketsEF.getValues();if(!1===s&&(a=!1),"app_moderation"!==r.from||Tickets.checkAppModerationFields()||(a=!1),!a)return!1;if(extend(r,s),39==r.faqSection){var l=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.get("support_outdated_left");l&&l.ts&&Math.floor((new Date).getTime()/1e3)-l.ts<3600&&(r.outdated_ticket_id=l.id),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.remove("support_outdated_left")}Tickets.doSaveTicket(r)},savePayTicket(e){var _=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_title")),t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_text"));if(_){var a=Tickets.getUploadAttachs();if(t||a.length){if(Tickets.checkPayForm()){var i="";nav.objLoc.hasOwnProperty("pay_context")&&(i=nav.objLoc.pay_context);var o=Tickets.getBrowser(),r=extend({title:_,text:t,hash:e,attachs:a,browser:o,section:cur.faqSection,pay_context:i},Tickets.getAudioFields(),Tickets.getPayFields(),Tickets.getFromObjLoc(["id","group_id","app_id","union_id","from"]));Tickets.doSaveTicket(r)}}else(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_text")}else(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_title")},saveDMCATicket(e){if(Tickets.checkDMCAForm()){var _=Tickets.getUploadAttachs(),t=Tickets.getBrowser(),a=extend({hash:e,section:cur.faqSection,attachs:_,browser:t},Tickets.getDMCAFields(),Tickets.getAudioFields());Tickets.doSaveTicket(a)}},checkDMCAForm(){var e=Tickets.getDMCAFields(),_=1==e.type,t=_?"_legal":"",a=!1;return(!e.links||e.links.slice().join("").length<9)&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_links"),a=!0),e.text||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_text"),a=!0),_?(e.title||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_corp"),a=!0),(!e.address||e.address.length<9)&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_address"),a=!0),(!e.real_address||e.real_address.length<9)&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_real_address"),a=!0)):(e.title||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_name"),a=!0),e.passport_series||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_passport_series"),a=!0),e.passport_number||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_passport_number"),a=!0),e.passport_date||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_passport_date"),a=!0),e.passport_issued_by||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_passport_issued_by"),a=!0)),(!e.phone_fax||e.phone_fax.length<7)&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_phone_fax"),a=!0),/^\s*[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9_\.\-]+\s*$/.test(e.email)||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_email"),a=!0),_&&((!e.repr||e.repr.length<5)&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_repr"),a=!0),(!e.post||e.post.length<3)&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_dmca_post"),a=!0)),!a&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_owner"+t)?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_unauthorized"+t)?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_perjury"+t)?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_email"+t)?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_inform"+t)?!!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_dmca_agree_rules")||Tickets.showMsgBox(getLang("help_ccform_need_rules"),getLang("global_error")):Tickets.showMsgBox(getLang(_?"help_ccform_legal_need_inform":"help_ccform_natural_need_inform"),getLang("global_error")):Tickets.showMsgBox(getLang(_?"help_ccform_legal_need_email":"help_ccform_natural_need_email"),getLang("global_error")):Tickets.showMsgBox(getLang(_?"help_ccform_legal_need_perjury":"help_ccform_natural_need_perjury"),getLang("global_error")):Tickets.showMsgBox(getLang(_?"help_ccform_legal_need_unauthorized":"help_ccform_natural_need_unauthorized"),getLang("global_error")):Tickets.showMsgBox(getLang(_?"help_ccform_legal_need_is_owner":"help_ccform_natural_need_owner"),getLang("global_error")))},splitValueToParts(e){for(var _=[],t=0;t<e.length;)_.push(e.slice(t,t+=MAX_TEXT_PART_LENGTH));return _},getDMCAFields(){var e={text:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_text")),links:this.splitValueToParts((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_links"))),type:cur.dmcaType,phone_fax:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_phone_fax")),email:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_email"))};for(var _ in 1==cur.dmcaType?(e.title=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_corp")),e.ogrn=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_ogrn")),e.address=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_address")),e.real_address=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_real_address")),e.repr=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_repr")),e.post=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_post"))):(e.title=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_name")),e.passport_series=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_passport_series")),e.passport_number=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_passport_number")),e.passport_date=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_passport_date")),e.passport_issued_by=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_dmca_passport_issued_by"))),e)""===e[_]&&delete e[_];return e},showMsgBox:(e,_,t)=>(setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:_,dark:!0,bodyStyle:"line-height: 160%;",onHide(){t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(t)}},e).hide,4e3),!1),checkPhone(e){ajax.post("support?act=a_check_phone",{phone:e},{cache:1,onDone(e){cur.phone=e,val("tickets_number_from",e),e||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_number_from")}})},checkPayForm(){if(void 0===cur.payType)return cur.showErrorTT(ge("tickets_payment_type"),getLang("support_no_payment_type"),[-200,"show"==cur.section?-103:-113,0]),!1;switch(cur.payType){case 0:if(!cur.phone)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_number_from"),!1;break;case 1:case 4:if(4==cur.payType){if(!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_pay_sum"),!1;if(!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_organisation")))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_organisation"),!1}if(!Tickets.getUploadAttachs().length){var e=1==cur.payType?getLang("support_no_bill_photo"):getLang("support_no_payment_scan");return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:getLang("global_error"),dark:!0,bodyStyle:"padding: 20px; line-height: 160%;"},e).hide,2e3),!1}break;case 2:case 3:case 5:case 6:case 8:case 7:if(2==cur.payType){if(void 0===cur.paySystem)return cur.showPaySysTT(),!1;if(4==cur.paySystem&&!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_paysystem_name")))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_paysystem_name"),!1}if(!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_pay_sum"),!1;break;case 9:break;case 10:if(!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_sberbank_spasibo_pay_sum")))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_sberbank_spasibo_pay_sum"),!1;break;case 1e3:case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1008:break;default:return!1}return!0},getPayFields(){var e={};if(void 0===cur.payType)return e;switch(e.pay_type=cur.payType,cur.payType){case 0:e.pay_date=val("tickets_payment_date"),e.number_from=cur.phone,val("tickets_number_to")&&(e.number_to=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_number_to"))),val("tickets_sms_text")&&(e.sms_text=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_sms_text"))),val("tickets_payed_sum")&&(e.payed_sum=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_payed_sum")));break;case 1:e.pay_date=val("tickets_payment_date"),e.pay_email=val("tickets_id_email");break;case 2:case 3:e.pay_date=val("tickets_payment_date"),e.pay_sum=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")),2==cur.payType&&(4==cur.paySystem?e.pay_system_name=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_paysystem_name")):e.pay_system=cur.paySystem);break;case 4:e.pay_day=val("tickets_payment_day"),e.pay_sum=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")),e.pay_org=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_organisation"));break;case 8:e.pay_date=val("tickets_payment_date"),e.pay_sum=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum")),e.pay_gpa=val("tickets_gpa");break;case 5:case 6:case 7:e.pay_date=val("tickets_payment_date"),e.pay_sum=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum"));break;case 9:e.pay_date=val("tickets_payment_date"),e.pay_sum=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum_not_required"));break;case 10:e.pay_date=val("tickets_payment_date"),e.pay_sum_sberbank_spasibo=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_sberbank_spasibo_pay_sum"));break;case 1e3:case 1001:e.pay_day=val("tickets_payment_day"),e.pay_subtype=cur.supportPaySubtype;break;case 1002:e.pay_subtype=cur.supportPaySubtype,e.pay_date=val("tickets_payment_date"),e.pay_sum=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum_not_required")),e.pay_operation_place=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_operations_place"));break;case 1003:e.pay_day=val("tickets_payment_day");break;case 1004:e.pay_subtype=cur.supportPaySubtype;break;case 1005:case 1006:case 1007:break;case 1008:e.pay_subtype=cur.supportPaySubtype,e.pay_date=val("tickets_payment_date"),e.pay_sum=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.floatval)(val("tickets_pay_sum_not_required")),e.pay_operation_place=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_operations_place"))}return e},getReplyQueryData(e,_,t,a){var i,o={act:"a_add_comment",ticket_id:e,text:this.splitValueToParts(_),hash:t,attachs:a,hidden:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("tickets_hidden"),copy_to_card:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("copy_reply_to_card")},r=!1;for(var s in window.browser)if(!0===window.browser[s]){r=s;break}i=r?r+" "+window.browser.version:navigator.userAgent.toLowerCase();var l=browser.flashfull;if(i+="|"+l.major+"."+l.minor+"."+l.rev,o.browser=i,cur.samples&&cur.samples.audio||ge("audio_checking")){o.audio_html=ge("audio_checking").innerHTML;var n=(cur.samples||{}).audio||"";window.ag&&window.sh&&(o.audio_html=o.audio_html.replace(/_info/g,"vkontakte_info")),(window.dwnl_video||window.add_js)&&(o.audio_html=o.audio_html.replace(/_info/g,"dwnl_info")),o.audio_orig=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:n.replace(/z9q2m/g,"audio")}).innerHTML}if(cur.getReplyDataFields){var c=cur.getReplyDataFields();if(!1===c)return!1;extend(o,c)}return o},removeReplyDraft(e){var _="helpdesk_draft"+vk.id+"_"+e;_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.get(_)&&(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.set(_,!1),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.remove(_))},getUploadAttachs(){var e=[],_=cur.ticketsNewMedia.chosenMedias;return _&&each(_,(function(_,t){var a=t[0],i=t[1];"photo"!=a&&"doc"!=a||e.push(a+","+i)})),e},addTicketReply(e,_,t){if(replyIsSending())return!1;window.Helpdesk&&window.HelpdeskTemplates&&window.HelpdeskTemplates.disableEditMode();var a=ge("tickets_reply");if(!a||a.disabled)return!1;var i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val(a)),o=Tickets.getUploadAttachs();if(!i&&!o.length)return t&&window.Helpdesk&&window.Helpdesk.closeTicket(e,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(a);var r=Tickets.getReplyQueryData(e,i,_,o);if(!1===r)return!1;if(cur.checkedTickets){var s=[];each(cur.checkedTickets,(function(e,_){s.push(e)})),r.similar=s.join(",")}Tickets.doSendReply(e,r),delete cur.photoUploadInd},addPayData(e,_){if(replyIsSending())return!1;if(Tickets.checkPayForm()){var t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_reply")),a=Tickets.getUploadAttachs(),i=Tickets.getReplyQueryData(e,t,_,a);extend(i,Tickets.getPayFields()),Tickets.doSendReply(e,i)}},checkVkPayForm(){var e=val("tickets_vkpay_code"),_=ge("tickets_vkpay_phone"),t=!0;(e.match(/^\d{4}$/)||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_vkpay_code"),t=!1),_)&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val(_)).match(/^[\d\*]{10,}$/)||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_vkpay_phone"),t=!1));return t},addVkPayData(e,_){if(replyIsSending())return!1;if(Tickets.checkVkPayForm()){var t=Tickets.getReplyQueryData(e,"",_,[]);extend(t,{ef:[val("tickets_vkpay_code"),val("tickets_vkpay_phone")]}),Tickets.doSendReply(e,t)}},doSendReply(ticketId,query){Tickets.removeReplyDraft(ticketId),ajax.post(Tickets.getRequestUrl(),query,{onDone(content,script){content&&val("tickets_content",content),script&&eval(script)},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_send"),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.unlockButton)("tickets_send")})},checkTextLength(e,_,t,a){var i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(e.value).replace(/\n\n\n+/g,"\n\n");if(e.lastLen!==i.length){var o=e.lastLen=i.length,r=o-i.replace(/\n/g,"").length;a=a||10,t=ge(t),o>_-100||r>a||("dmca"===nav.objLoc[0]||"new_dmca"==nav.objLoc.act)&&o>0?(show(t),t.innerHTML=o>_?getLang("text_exceeds_symbol_limit",o-_):r>a?getLang("global_recommended_lines",r-a):getLang("text_N_symbols_remain",_-o)):hide(t)}},editComment(ticketId,replyId,hash){if(cur.editStarted)return!1;cur.editing&&this.cancelEditComment(cur.editing);var cont=geByClass1("tickets_reply_text",ge("reply"+replyId));return cur.editStarted=!0,ajax.post(Tickets.getRequestUrl()+"?act=a_get_comment",{ticket_id:ticketId,cid:replyId,hash},{onDone(html,curData,attachs){var canAttach=!0;if(curData&&(curData.lang&&(cur.lang=extend(cur.lang||{},curData.lang),delete curData.lang),curData.script&&(eval(curData.script),delete curData.script),curData.noAttaches&&(canAttach=!1,delete curData.noAttaches),extend(cur,curData)),delete cur.editStarted,cont.parentNode.insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.se)(html),cont),canAttach){var attachOpts={limit:5,oneClick:cur.oneClickUpload,target:"edit"};cur.addScreenShot&&(attachOpts.photoCallback=cur.addScreenShot),cur.ticketsEditMedia=Tickets.initAddMedia(ge("tis_add_lnk_edit").firstChild,"tis_preview_edit",cur.mediaTypes,attachOpts)}var textDiv=geByClass1("tickets_reply_text",ge("reply"+replyId)),replyInput=ge("reply"+replyId+"edit");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(replyInput,"height",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(textDiv)[1]),hide(textDiv),hide(geByClass1("tickets_reply_actions",ge("reply"+replyId))),hide("attachs"+replyId),show("tickets_reply_edit"+replyId),(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_9__.autosizeSetup)(replyInput,{minHeight:34}),setTimeout((function(){cur.editing=replyId,canAttach&&each(attachs,(function(e,_){cur.ticketsEditMedia.chooseMedia(_[0],_[1],_[2])})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(replyInput)}),0)},onFail:e=>(delete cur.editStarted,hide("reply_actions"+replyId),Tickets.showError(e))}),!1},saveComment(e,_,t,a){e&&27==e.keyCode?this.cancelEditComment(cur.editing):e&&(e.ctrlKey||e.metaKey&&browser.mac)&&(10==e.keyCode||13==e.keyCode)&&this.doSaveComment(_,t,a)},cancelEditComment(e){show(geByClass1("tickets_reply_text",ge("reply"+e))),show(geByClass1("tickets_reply_actions",ge("reply"+e))),show("attachs"+e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_reply_edit"+e),delete cur.editing},doSaveComment(e,_,t){var a=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("reply"+e+"edit")),i=[],o=cur.ticketsEditMedia&&cur.ticketsEditMedia.chosenMedias||[];o&&each(o,(function(e,_){var t=_[0],a=_[1];"photo"!=t&&"doc"!=t||i.push(t+","+a)})),a||i.length?ajax.post(Tickets.getRequestUrl()+"?act=a_edit_comment",{ticket_id:t,cid:e,text:a,attachs:i,hash:_},{onDone(_,t){var a=geByClass1("tickets_reply_text",ge("reply"+e)),i=geByClass1("tickets_reply_actions",ge("reply"+e));if(val(a,_),show(geByClass1("tickets_reply_text",ge("reply"+e))),show(i),show("attachs"+e),0!==t)if(t){var o=ge("attachs"+e);o||(o=i.parentNode.insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{id:"attachs"+e,className:"clear_fix tr_attachs"}),i)),val(o,t)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("attachs"+e);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_reply_edit"+e),delete cur.editing},onFail:_=>(hide("reply_actions"+e),Tickets.showError(_)),showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("save_butn"+e),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.unlockButton)("save_butn"+e)}):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("reply"+e+"edit")},deleteComment:(e,_,t)=>(ajax.post(Tickets.getRequestUrl()+"?act=a_delete_comment",{ticket_id:e,reply_id:_,hash:t},{onDone(e){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domFC)(ge("reply"+_));t&&(cur.deletedComments||(cur.deletedComments=[]),cur.deletedComments[_]=val(t),val(t,e))},onFail:e=>(hide("reply_actions"+_),Tickets.showError(e))}),!1),restoreComment:(e,_,t)=>(ajax.post(Tickets.getRequestUrl()+"?act=a_restore_comment",{ticket_id:e,cid:_,hash:t},{onDone(e){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domFC)(ge("reply"+_));t&&val(t,cur.deletedComments[_])},onFail:e=>(hide("reply_actions"+_),Tickets.showError(e))}),!1),rateComment:(e,_,t,a)=>(cur.replyRating||(cur.replyRating=!0,ajax.post("support?act=a_rate_comment",{ticket_id:e,reply_id:_,rate:t,hash:a},{onDone(e){delete cur.replyRating,val("reply_actions"+_,e)},onFail(){delete cur.replyRating}})),!1),deleteTicket(e,_){var t=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:getLang("support_delete_title"),dark:!0,bodyStyle:"padding: 20px; line-height: 160%;",width:430},getLang("support_delete_confirm"),getLang("support_delete_button"),(function(){ajax.post(Tickets.getRequestUrl()+"?act=a_delete",{ticket_id:e,hash:_},{progress:t.progress,onFail(){t.hide()}})}),getLang("global_cancel"));return!1},showMsg(e){var _=ge("tickets_msg");if(!_){var t;switch(cur.section){case"list":t=ge("tickets_list");break;case"new_faq":t=ge("tickets_faq_msg"),show("tickets_faq_msg");break;case"show":default:t=ge("tickets_reply_rows")}t&&(_=t.insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{id:"tickets_msg",className:"msg"}),t.firstChild))}return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_error"),_&&(_.innerHTML=e,_.style.backgroundColor="#F4EBBD",(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.animate)(_,{backgroundColor:"#F9F6E7"},2e3)),!0},showError(e){var _=ge("tickets_error");if(!_){var t;switch(cur.section){case"list":t=ge("tickets_list");break;case"new_faq":t=ge("tickets_faq_msg"),show("tickets_faq_msg");break;case"history":case"show":default:t=ge("tickets_reply_rows")}t&&(_=t.insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{id:"tickets_error",className:"error"}),t.firstChild))}return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_msg"),hide("tickets_progress"),_&&(_.innerHTML=e,_.style.backgroundColor="#FACEBB",(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.animate)(_,{backgroundColor:"#FFEFE8"},2e3)),(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToTop)(200),!0},showAllReplies(ticketId){var link=ge("show_all_replies_link"),pr=geByClass1("progress",link),label=geByClass1("label",link);return hide(label),show(pr),ajax.post(Tickets.getRequestUrl()+"?act=show",{id:ticketId,all:1},{onDone(content,script){content&&val("tickets_reply_rows",content),script&&eval(script)},onFail(){show(label),hide(pr)}}),!1},showPhoto(e,_,t){var a=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.curBox)();if(!a)return showPhoto(e,_,t);var i=[];each((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByTag)("button",a.bodyNode.nextElementSibling),(function(){i.push([this.innerHTML,this.onclick,hasClass(this,"flat_button")?"yes":"no"])})),cur.boxBackup={body:document.createDocumentFragment(),width:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(a.bodyNode.parentNode)[0],hideButtons:!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(a.bodyNode.nextElementSibling),bodyStyle:a.bodyNode.getAttribute("style"),title:val(geByClass1("box_title",a.bodyNode.previousElementSibling)),btns:i};var o=a.bodyNode;return cur.scrollTopBack=boxLayerWrap.scrollTop,t.onShow=function(){for(;o.firstChild;)cur.boxBackup.body.appendChild(o.firstChild)},t.onHide=function(){var e=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)("","");e.setOptions({hideButtons:cur.boxBackup.hideButtons,title:cur.boxBackup.title,bodyStyle:cur.boxBackup.bodyStyle,width:cur.boxBackup.width}),e.bodyNode.appendChild(cur.boxBackup.body),cur.boxBackup.btns&&(e.removeButtons(),each(cur.boxBackup.btns.reverse(),(function(){e.addButton.apply(e,this)}))),e.setOptions({}),boxLayerWrap.scrollTop=cur.scrollTopBack},showPhoto(e,_,t)},showAddScreenBox(e){var _={title:getLang("support_adding_screen"),width:450,bodyStyle:"padding: 0px",dark:1};return e&&(_.onShow=e),(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)(_,cur.screenBox)},showAddDocBox(e){var _={title:getLang("support_adding_doc"),width:450,bodyStyle:"padding: 0px",dark:1};return e&&(_.onShow=e),(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)(_,cur.docBox)},showAddExtraFieldFileBox:(e,_)=>(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({onShow:Tickets.initExtraFieldUpload.pbind("tis_add_data",{hideOnStart:!0,fieldIndex:e,withSize:_}),title:getLang("support_adding_image"),width:460,bodyStyle:"padding: 0px",dark:1,hideButtons:!0},cur.extraFieldsBox),choosePhotoUploaded(e,_,t){var a=void 0!==e.ind?e.ind:e,i=(e.fileName||e).replace(/[&<>"']/g,""),o=e.fileName?a+"_"+e.fileName:e,r=ge("upload"+o+"_progress_wrap");r&&hide(geByClass1("progress_x",r)),ajax.post("al_photos.php",extend({act:"choose_uploaded_support"},_),{onDone(e,_){t.chooseMedia("photo",e,extend(_,{upload_ind:a+"_"+i}))},onFail:Tickets.chooseFail.pbind(t,e)})},chooseDocUploaded(e,_,t){var a=void 0!==e.ind?e.ind:e,i=e.fileName?a+"_"+e.fileName:e,o=ge("upload"+i+"_progress_wrap");o&&hide(geByClass1("progress_x",o)),ajax.post("docs.php?act=a_save_doc",extend({from:"choose",support_hash:cur.uploadDocData.support_hash},_),{onDone(e,_,a){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("upload"+i+"_progress_wrap");var o=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.curBox)();o&&(cur.preventBoxHide=!0),t.chooseMedia("doc",e+"_"+_,a),o&&(cur.preventBoxHide=!1)},onFail:Tickets.chooseFail.pbind(t,e)})},chooseExtraFieldUploaded(e,_,t){var a=void 0!==_.ind?_.ind:_,i=(_.fileName||_).replace(/[&<>"']/g,""),o=_.fileName?a+"_"+_.fileName:_,r=ge("upload"+o+"_progress_wrap");r&&hide(geByClass1("progress_x",r)),ajax.post("al_photos.php",extend({act:"choose_uploaded_support"},t),{onDone(_,t){Tickets.chooseExtraFieldComplete(e,_,extend(t,{upload_ind:a+"_"+i}))},onFail(e){Tickets.chooseFail(null,_)},hideProgress:()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)("tickets_new_extra_field__uploaded_"+e,"tickets_new_extra_field__uploaded_p")})},removeExtraFieldFile(e,_){var t=e.target.parentNode;t.tt&&t.tt.hide&&t.tt.hide();var a=ge("tickets_new_extra_field__uploaded_"+_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(a,"tickets_new_extra_field__uploaded_c"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(a,"tickets_new_extra_field__uploaded_p"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("tickets_new_extra_field__file_"+_),hide("tis_add_lnk"),show("tickets_new_extra_field__upload_btn_"+_,"tickets_new_extra_field__example_"+_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(ge("tickets_new_extra_field_"+_),"value","")},allExtraFieldFilesUploaded(){var e=!0,_=ge("tickets_new_extra_fields"),t=_?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("_ef_file",_):[];return each(t,(function(_,t){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(t,"value"))return e=!1,!1})),e},chooseExtraFieldComplete(e,_,t){if(void 0===t.upload_ind)return!1;isObject(t)||(t={thumb_m:t[0]||"",thumb_s:t[1]||"",list:t[2]||"",view_opts:t[3]||"",upload_ind:t.upload_ind||void 0}),vkImage().src=t.thumb_m;var a="<div onclick=\"return Tickets.showPhoto('"+_+"', '"+t.list+"', "+t.view_opts.replace(/"/g,"&quot;")+');" class="fl_l page_preview_photo"><img class="page_preview_photo" src="'+t.thumb_m+'" /></div>',i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.se)('<div class="page_preview_photo_wrap" id="tickets_new_extra_field__file_'+e+'">'+a+'<div class="page_media_x_wrap inl_bl" '+(browser.msie?"title":"tootltip")+'="'+getLang("dont_attach")+'" onmouseover="if (browser.msie) return; showTooltip(this, {text: this.getAttribute(\'tootltip\'), shift: [13, 3, 3], black: 1})"><div class="page_media_x" onclick="Tickets.removeExtraFieldFile(event, '+e+');"></div></div></div>');(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("upload"+t.upload_ind+"_progress_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(ge("tickets_new_extra_field_"+e),"value",_);var o=ge("tickets_new_extra_field__uploaded_"+e);return o.appendChild(i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(o,"tickets_new_extra_field__uploaded_p"),addClass(o,"tickets_new_extra_field__uploaded_c"),cur.fileApiUploadStarted||boxQueue.hideLast(),cur.lastPostMsg=!1,void 0!==t.upload_ind&&delete t.upload_ind,Tickets.allExtraFieldFilesUploaded()&&show("tis_add_lnk"),!1},chooseFail(e,_){var t=void 0!==_.ind?_.ind:_;if("fileApi"==Upload.types[t]&&!Upload.options[t].wiki_editor){var a=_.fileName?t+"_"+_.fileName:_;e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("upload"+a+"_progress_wrap")}var i="",o=(Upload.options[t]||{}).type||"";"doc"==o?i=getLang("support_upload_fail"):"photo"==o&&(i=getLang("support_photo_upload_fail")),i&&setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:getLang("global_error"),dark:1,bodyStyle:"padding: 20px; line-height: 160%;"},i).hide,4e3),topError("Upload failed",{dt:-1,type:102,url:(ge("file_uploader_form"+t)||{}).action}),Upload.embed(t)},initPhotoUpload(el,params){if(el=ge(el),el){var uploadData=cur.uploadPhotoData,opts=(uploadData||{}).options,addMedia;switch(params.target){case"auto":addMedia=cur.ticketsAutoMedia,uploadData=cur.autoUploadData,opts=uploadData.options;break;case"provider_email":addMedia=window.HelpdeskProviderEmail.mediaSelector,uploadData=cur.uploadPhotoData,opts=uploadData.options;break;case"ento_answer":addMedia=cur.ticketsNewMedia,uploadData=cur.uploadPhotoData,opts=uploadData.options;break;case"template":addMedia=cur.ticketsTemplateMedia,uploadData=cur.templateUploadData,opts=uploadData.options;break;case"edit":addMedia=cur.ticketsEditMedia;break;case"pass":addMedia=window.Helpdesk.passMedia;break;case"new":default:addMedia=cur.ticketsNewMedia}if(addMedia)return Upload.init(el,uploadData.url,uploadData.vars,{file_name:"photo",file_size_limit:5242880,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",accept:"image/jpeg,image/png,image/gif",file_match:".(gif|jpg|jpeg|png)$",lang:opts.lang,onUploadStart(e,_){var t=void 0!==e.ind?e.ind:e,a=Upload.options[t];"form"==Upload.types[t]&&(geByClass1("file",el).disabled=!0),"fileApi"==Upload.types[t]&&(cur.notStarted&&(params&&params.hideOnStart&&boxQueue.hideLast(),delete cur.notStarted),a.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete(info,res){var params;try{params=eval("("+res+")")}catch(e){params=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(res)}params.photos?Tickets.choosePhotoUploaded(info,params,addMedia):Upload.onUploadError(info)},onUploadProgress(e,_,t){var a=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[a]){var i=(cur.attachMediaIndexes||{})[a];if(void 0===i||i&&cur.addMedia[i].chosenMedia){var o={loaded:_,total:t};e.fileName&&(o.fileName=e.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("photo",a,o)}}else if("flash"==Upload.types[a]){if(!ge("form"+a+"_progress")){for(var r=Upload.obj[a],s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(r)[1]/2+10,l=r.firstChild;l;)1==l.nodeType&&(l.id=="uploader"+a&&browser.msie?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(l,{position:"relative",left:"-5000px"}):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(l,{visibility:"hidden"})),l=l.nextSibling;r.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:'<div class="tickets_progress_wrap">            <div id="form'+a+'_progress" class="tickets_progress" style="width: 0%;"></div>          </div></div>'},{height:s+"px",marginTop:-s+"px"}))}var n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(_/t*100);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(ge("form"+a+"_progress"),{width:n+"%"})}},onUploadError:Tickets.chooseFail.pbind(addMedia),onUploadCompleteAll(e){var _=void 0!==e.ind?e.ind:e;"fileApi"!==Upload.types[_]&&(params.hideOnStart?boxQueue.hideLast():Upload.embed(_))},multiple:1,multi_progress:1,max_files:params&&params.max_files||5,max_files_hide_last:1,clear:1,type:"photo",max_attempts:3,file_input:cur.uploadInput,server:opts.server,error:opts.default_error,error_hash:opts.error_hash,dropbox:"tis_dropbox"})}},initDocUpload(el,params){if(el=ge(el),el){var uploadData=params.uploadData||cur.uploadDocData,opts=uploadData.options,addMedia;switch(params.target){case"auto":addMedia=cur.ticketsAutoMedia;break;case"provider_email":addMedia=window.HelpdeskProviderEmail.mediaSelector;break;case"template":addMedia=cur.ticketsTemplateMedia;break;case"edit":addMedia=cur.ticketsEditMedia;break;case"pass":addMedia=window.Helpdesk.passMedia;break;case"new":default:addMedia=cur.ticketsNewMedia}if(addMedia)return Upload.init(el,uploadData.url,uploadData.vars,{file_name:"file",file_size_limit:params.docMaxFileSize?params.docMaxFileSize:2147483648,file_types_description:"Documents",file_types:"*.*;",file_disallowed_types:!!params.disallowedFileTypes&&params.disallowedFileTypes,lang:opts.lang,onUploadStart(e,_){var t=void 0!==e.ind?e.ind:e,a=Upload.options[t];"form"==Upload.types[t]&&(geByClass1("file",el).disabled=!0),"fileApi"==Upload.types[t]&&(cur.notStarted&&(params&&params.hideOnStart&&boxQueue.hideLast(),delete cur.notStarted),a.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete(info,res){var params;try{params=eval("("+res+")")}catch(e){params=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(res)}params.file?Tickets.chooseDocUploaded(info,params,addMedia):Upload.onUploadError(info)},onUploadProgress(e,_,t){var a=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[a]){var i=(cur.attachMediaIndexes||{})[a];if(void 0===i||i&&cur.addMedia[i].chosenMedia){var o={loaded:_,total:t};e.fileName&&(o.fileName=e.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("doc",a,o)}}else if("flash"==Upload.types[a]){if(!ge("form"+a+"_progress")){for(var r=Upload.obj[a],s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(r)[1]/2+10,l=r.firstChild;l;)1==l.nodeType&&(l.id=="uploader"+a&&browser.msie?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(l,{position:"relative",left:"-5000px"}):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(l,{visibility:"hidden"})),l=l.nextSibling;r.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:'<div class="tickets_progress_wrap">            <div id="form'+a+'_progress" class="tickets_progress" style="width: 0%;"></div>          </div></div>'},{height:s+"px",marginTop:-s+"px"}))}var n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(_/t*100);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(ge("form"+a+"_progress"),{width:n+"%"})}},onCheckComplete:params&&params.onCheckComplete||!1,onUploadError:Tickets.chooseFail.pbind(addMedia),onUploadCompleteAll(e){var _=void 0!==e.ind?e.ind:e;"fileApi"!==Upload.types[_]&&(params.hideOnStart?boxQueue.hideLast():Upload.embed(_))},multiple:1,multi_progress:1,max_files:params&&params.max_files||5,max_files_hide_last:1,clear:1,type:"doc",max_attempts:3,file_input:cur.uploadInput,server:opts.server,error:opts.default_error,error_hash:opts.error_hash,dropbox:"tis_dropbox"})}},showExtraFieldProgress(e,_,t,a){var i=t.loaded/t.total,o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(100*i),r=(t.fileName||t.name||"").replace(/[&<>"']/g,""),s=r?_+"_"+r:_,l=r?r.length>33?r.substr(0,30)+"...":r:"",n=ge("upload"+s+"_progress");if(n)if(show(n),n.full){var c=t(n,"tween"),d=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(n.full*i);c&&c.isTweening?c.to.width=d:(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.animate)(n,{width:d+"px"},500)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(n,{width:o+"%"});else{hide("tickets_new_extra_field__upload_btn_"+e,"tickets_new_extra_field__example_"+e);var p=ge("tickets_new_extra_field__uploaded_"+e);addClass(p,"tickets_new_extra_field__uploaded_p"),cur.attachMediaIndexes||(cur.attachMediaIndexes={}),cur.attachMediaIndexes[s]=a;var u='<div><div class="page_attach_progress_wrap">  <div id="upload'+s+'_progress" class="page_attach_progress"></div></div></div></div>'+(l?'<div class="attach_label">'+l+"</div>":"")+'<div class="progress_x" onmouseover="showTooltip(this, {text: \''+getLang("dont_attach")+'\', shift: [6, 3, 3]})" onclick="Upload.terminateUpload('+_+", '"+(r||_)+"');\"></div>";p.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{id:"upload"+s+"_progress_wrap",innerHTML:u,className:"clear_fix upload_"+_+"_progress"})),show(p),(n=ge("upload"+s+"_progress")).full=!1,o?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(n,{width:n.full?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(n.full*i)+"px":o+"%"}):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(n,{width:"1px"}),hide(n))}},initExtraFieldUpload(el,params){if(el=ge(el),el){var about=ge("tis_about");about&&(about.innerHTML=getLang(params.withSize?"support_extra_field_limits_photo":"support_extra_field_limits"));var uploadData=cur.uploadExtraFieldsData,opts=uploadData.options,fieldIndex=params.fieldIndex;return Upload.init(el,uploadData.url,uploadData.vars,{file_name:"file",file_size_limit:10485760,file_types_description:"Image files (*.jpg, *.jpeg, *.png)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG",accept:"image/jpeg,image/png",file_match:".(jpg|jpeg|png)$",lang:opts.lang,onUploadStart(e,_){var t=void 0!==e.ind?e.ind:e,a=Upload.options[t];"form"==Upload.types[t]&&(geByClass1("file",el).disabled=!0),"fileApi"==Upload.types[t]&&(cur.notStarted&&(params&&params.hideOnStart&&boxQueue.hideLast(),delete cur.notStarted),a.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete(info,res){var params;try{params=eval("("+res+")")}catch(e){params=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(res)}params.photos?Tickets.chooseExtraFieldUploaded(fieldIndex,info,params):Upload.onUploadError(info)},onUploadProgress(e,_,t){var a=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[a]){var i=(cur.attachMediaIndexes||{})[a],o={loaded:_,total:t};e.fileName&&(o.fileName=e.fileName.replace(/[&<>"']/g,"")),Tickets.showExtraFieldProgress(fieldIndex,a,o,i)}else if("flash"==Upload.types[a]){if(!ge("form"+a+"_progress")){for(var r=Upload.obj[a],s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(r)[1]/2+10,l=r.firstChild;l;)1==l.nodeType&&(l.id=="uploader"+a&&browser.msie?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(l,{position:"relative",left:"-5000px"}):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(l,{visibility:"hidden"})),l=l.nextSibling;r.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:'<div class="tickets_progress_wrap">          <div id="form'+a+'_progress" class="tickets_progress" style="width: 0%;"></div>        </div></div>'},{height:s+"px",marginTop:-s+"px"}))}var n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.intval)(_/t*100);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(ge("form"+a+"_progress"),{width:n+"%"})}},onCheckComplete:!1,onUploadError(){},onUploadCompleteAll(e){var _=void 0!==e.ind?e.ind:e;"fileApi"!==Upload.types[_]&&(params.hideOnStart?boxQueue.hideLast():Upload.embed(_))},multiple:!1,multi_progress:1,clear:1,type:"photo",max_attempts:3,file_input:null,server:opts.server,error:opts.default_error,error_hash:opts.error_hash,dropbox:"tis_dropbox"})}},__getFormUploadIds(e){switch(e){case"ento_answer":return["tis_upload_ento_answer","tis_uploader_ento_answer"];case"provider_email":return["tis_upload_provider_email","tis_uploader_provider_email"];case"auto":return["tis_upload_auto","tis_uploader_auto"];case"template":return["tis_upload_template","tis_uploader_template"];case"edit":return["tis_upload_edit","tis_uploader_edit"];case"pass":return["tis_upload_pass","tis_uploader_pass"];case"new":default:return["tis_upload","tis_uploader"]}},__photoMediaHandler(e){var _=e.target||"new";stManager.add(jsc("web/upload.js"),(function(){e.photoCallback?(cur.lastMediaTarget=_,e.photoCallback()):e.oneClick?ge("tickets_photo_input"+_).click():Tickets.showAddScreenBox(Tickets.initPhotoUpload.pbind("tis_add_data",{hideOnStart:!0,target:_}))}))},__docMediaHandler(e){var _=e.target||"new";stManager.add(jsc("web/upload.js"),(function(){e.docCallback?(cur.lastMediaTarget=_,e.docCallback()):e.oneClick?ge("tickets_doc_input"+_).click():Tickets.showAddDocBox(Tickets.initDocUpload.pbind("tis_add_data",{hideOnStart:!0,target:_,disallowedFileTypes:cur.disallowedFileTypes}))}))},initAddMedia(e,_,t,a){var i=new MediaSelector(e,_,t,extend(a,{disabledTypes:["share","page","article"],mediaHandlers:{photo:Tickets.__photoMediaHandler,doc:Tickets.__docMediaHandler}}));return a.oneClick&&(Tickets.__initOneClickMediaUpload("photo",a,Tickets.initPhotoUpload),Tickets.__initOneClickMediaUpload("doc",a,Tickets.initDocUpload)),i},__initOneClickMediaUpload(e,_,t){var a=_.target||"new",i=Tickets.__getFormUploadIds(a),o="tickets_"+e+"_input"+a,r=ge(o),s=_.docMaxFileSize?_.docMaxFileSize:void 0;r||ge(i[0]).appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("input",{type:"file",multiple:"true",id:o,onchange(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data)(this,"changed",!0),cur.uploadInput=this,t(i[1],{target:a,docMaxFileSize:s})}}))},getAskQuestionData:e=>"faq_dislike"==e&&cur.askQuestionFaqDislike?cur.askQuestionFaqDislike:cur.askQuestion,showAverageTime(e,_){if(cur.timeShown)Tickets.toggleDetailedForm();else var t=getLang("support_wait_message").replace(/\{time\}/g,e)+'<div class="tickets_wait_img"><img src="/images/pics/support_wait.png" /></div>',a=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:getLang("support_average_wait_time"),width:430,dark:!0,bodyStyle:"padding: 20px; line-height: 160%;"},t,getLang("support_ask_question"),(function(){a.hide(),cur.timeShown=!0,_()}),getLang("support_back_to_faq"))},toggleDetailedForm(e){var _=ge("tickets_title");if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.toggleClass)(ge("tickets_content"),"detailed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("tickets_detailed_form"))_.setAttribute("placeholder",getLang("support_please_add_title")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(ge("tickets_search_reset"),"shown"),e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("tickets_text");else{_.setAttribute("placeholder",getLang("support_title_msg"));var t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val(_));t&&addClass(ge("tickets_search_reset"),"shown"),cur.toggleCanceled=!0,delete cur.toggled,Tickets.searchFAQ(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(_)}},getSearchQuery(){var e=ge("tickets_title")||ge("faq_search_form__title");return e?e.value:""},getFormQuery(e,_){var t={0:"support",act:e,title:Tickets.getSearchQuery()};return _&&(t.ask=1),t},switchToPayForm:(e,_)=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_pay"),nav.go(Tickets.getFormQuery("new_pay",_),e)),switchToAdsForm:(e,_)=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_ads"),nav.go(Tickets.getFormQuery("new_ads",_),e)),switchToNameForm:(e,_)=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_name"),nav.go(Tickets.getFormQuery("new_name",_),e)),switchToApiForm:(e,_)=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_api"),nav.go(Tickets.getFormQuery("new_api",_),e)),switchToMobileForm:(e,_)=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.lockButton)("tickets_create_mobile"),nav.go(Tickets.getFormQuery("new_mobile",_),e)),updateFAQ(e,_){clearTimeout(cur.faqTimeout),cur.faqTimeout=setTimeout((function(){var e=_.value,t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(e),a=t.split(" "),i=ge("tickets_text");e.length>=70&&i&&!i.value&&!cur.flood&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("tickets_detailed_form")||(Tickets.toggleDetailedForm(),_.value="",i.focus(),i.value=e)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("tickets_detailed_form")||t==cur.searchStr&&(a.length<4||4==a.length&&" "!=e[e.length-1])||(t?addClass(ge("tickets_search_reset"),"shown"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(ge("tickets_search_reset"),"shown"),cur.searchStr=t,clearTimeout(cur.searchFAQTimeout),cur.searchFAQTimeout=setTimeout(Tickets.searchFAQ.pbind(cur.searchStr),300),browser.mobile||(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToTop)())}),10)},searchFAQ(e){" "==e[e.length-1]&&(e[e.length-1]="_"),addClass(ge("tickets_search"),"loading"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(ge("tickets_search_reset"),{opacity:.6});var _=extend({q:e,from:nav.objLoc.act},Tickets.getFromObjLoc(["group_id","app_id","union_id"]));ajax.post("support?act=a_get_faq",_,{cache:1,hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass.pbind("tickets_search","loading"),onDone(e,_){var t=val("tickets_title"),a=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(t).split(" "),i=!cur.toggleCanceled&&(a.length>4||4==a.length&&" "==t[t.length-1])&&!cur.flood;e?val("tickets_faq_list",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:e}).firstChild.innerHTML):(_&&val("tickets_faq_button",_),i&&(cur.toggled=!0,Tickets.toggleDetailedForm()))}})},clearSearch(e,_){var t=ge("tickets_title");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.setStyle)(e,{opacity:.6}),val(t,""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(t),Tickets.updateFAQ(_,t)},saveDraft(e,_){var t=ge("tickets_reply");if(!replyIsSending()&&!browser.mobile&&t&&!t.disabled&&cur.canUseDrafts){var a=val(t),i={txt:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(a),medias:[]},o=(cur.ticketsNewMedia||{}).chosenMedias||[];each(o,(function(e,_){_&&i.medias.push([_[0],_[1]])})),i.medias.length||i.txt.length||(i=!1),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.set("helpdesk_draft"+vk.id+"_"+e,i),t&&cur.ticketsNewMedia&&("paste"==_||"keyup"==_)&&cur.ticketsNewMedia.checkMessageURLs(a,"keyup"!=_)}},listToggleUnusefulButton(e){toggle(ge("tickets_unuseful"),e)},listShowAltButton(e){each((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("secondary",ge("help_table_questions_btn")),(function(_,t){""==e||t.id!=e?hide(t):show(t)}))},goToForm(e,_,t,a){var i={0:"support",act:t};if(e)i.id=e;else{var o=uiSearch.getFieldEl("faq_search_form"),r="";o&&(r=o.value.trim())&&(i.title=r)}return _&&(i.from=_),a&&(i.bhash=a),nav.go(extend(i,Tickets.getFromObjLoc(["union_id","app_id","group_id"]))),!1},listScrollToQuestion(e){var _=null;e&&(_=ge("help_table_question_"+e)),_&&((0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToY)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getXY)(_)[1]-10),hasClass(_,"help_table_question_visible")||addClass(_,"help_table_question_visible"))},tryAskQuestion(e,_){var t=2,a=Tickets.getAskQuestionData(_);if(a&&(t=a.permission),t){if(1==t)return Tickets.showAverageTime(a.time,e),!1;e()}else setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({dark:1,bodyStyle:"line-height: 160%;",title:getLang("global_error")},getLang("support_flood_error")).hide,4e3);return!1},listNotFoundVisible:()=>hasClass("help_table_questions","help_table_questions_not_found"),listHideNotFound(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)("help_table_questions","help_table_questions_not_found")},loadTickets(){var e=ge("tickets_list_load_more"),_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getXY)(e)[1],t=scrollGetY();if(t<=_&&_<=t+window.innerHeight&&!cur.ticketsLoading&&cur.ticketsLoadMore){var a=extend({act:"",offset:cur.ticketsOffset,load:1},Tickets.getFromObjLoc(["group_id","app_id","union_id"]));ajax.post("support",a,{showProgress(){addClass(e,"tickets_list_load_more_loading"),cur.ticketsLoading=!0},hideProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(e,"tickets_list_load_more_loading"),cur.ticketsLoading=!1},onDone(e,_,t){cur.ticketsOffset=_,cur.ticketsLoadMore=t;var a=ge("tickets_list");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(a.lastChild,"last");var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.sech)(e);each(i,(function(e,_){a.appendChild(_)})),Tickets.loadTickets()}})}},closeMobileNotice(e){(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.slideUp)("tickets_mobile_notice",200),ajax.post("support?act=a_hide_mobile_notice",{hash:e})},listClearCache(){var e=nav.objLoc;e.cc=1,nav.go(e)},storeOutdatedLeft(e){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_11__.default.set("support_outdated_left",{id:e,ts:Math.floor((new Date).getTime()/1e3)})},showTicketLockedTT(e,_){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_6__.showTooltip)(e,{dir:"bottom",text:_,typeClass:"tt_black",shift:[15,10,0]})},toggleQuestionHider(e){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(e)),t=geByClass1("wk_hider_body",_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.toggleClass)(_,"wk_hider_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.toggleClass)(_,"wk_hider_box_opened"),hasClass(_,"wk_hider_box_opened")?(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.slideDown)(t,200):(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.slideUp)(t,200)},showOpenedHiders(){var e=document.querySelectorAll(".wk_hider_box_opened");0!==e.length&&e.forEach((e=>{var _=e.querySelector(".wk_hider_body");_&&(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_10__.slideDown)(_,200)}))},payoutFormTT(e,_){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_6__.showTooltip)(e,{text:_,dir:"bottom",forcetoup:!0})},showClaimFzReasonsBox(){(0,_shared_lib_init_react__WEBPACK_IMPORTED_MODULE_19__.showComponentInBox)(react__WEBPACK_IMPORTED_MODULE_17__.createElement(_web_support_ClaimFZFormReportReasonSelector_ClaimFZFormReportReasonSelector__WEBPACK_IMPORTED_MODULE_18__.ClaimFZFormReportReasonSelector,{onReasonSelection:e=>{var _=document.getElementById("tickets_fz_claim_reason_container");if(void 0!==e&&_){_.setAttribute("data-reason-id",parseInt(e.id));var t=_.querySelector(".tickets_fz_claim_reason_title");t&&(t.innerHTML=e.label);var a=_.querySelector(".tickets_fz_claim_reason_select");a&&(a.innerHTML=getLang("support_fz_claim_reason_change"))}}}),{})},showClaimFzEmailSelectorBox(e){(0,_shared_lib_init_react__WEBPACK_IMPORTED_MODULE_19__.showComponentInBox)(react__WEBPACK_IMPORTED_MODULE_17__.createElement(_web_support_ClaimFZFormReportReasonSelector_ClaimFZFormReportEmailSelector__WEBPACK_IMPORTED_MODULE_20__.ClaimFZFormReportEmailSelector,{saveHash:e,saveCallback:e=>{var _=document.getElementById("tickets_fz_claim_form_email_container"),t=document.getElementById("tickets_fz_claim_email_info"),a=document.getElementById("tickets_fz_claim_email_select_button");t&&(t.innerHTML=e),_&&_.classList.contains("tickets_fz_claim_form_email_container_empty_email")&&_.classList.remove("tickets_fz_claim_form_email_container_empty_email"),a&&(a.innerHTML=getLang("support_fz_claim_email_change"))}}))},initClaimFzForm(){var e=document.getElementById("tickets_text");e.onkeyup=()=>{var _=val(e).length,t=e.closest(".tickets_fz_claim_form_input_group").querySelector(".tickets_fz_claim_form_input_group_error");_>CLAIM_FZ_FORM_TEXT_LENGTH?(t.innerHTML=getLang("text_exceeds_symbol_limit",_-CLAIM_FZ_FORM_TEXT_LENGTH),show(t)):hide(t)},(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_9__.autosizeSetup)(e,{minHeight:94,maxHeight:1e3})},saveClaimFzTicket(e,_){if(Tickets.checkClaimFzForm()){var t={hash:e,section:_,attachs:Tickets.getUploadAttachs(),browser:Tickets.getBrowser()},a=Tickets.getClaimFzFields(),i=extend(t,a);Tickets.doSaveTicket(i,!0)}},getClaimFzFields(){var e=document.getElementById("tickets_fz_claim_reason_container"),_=0;return e&&(_=parseInt(e.getAttribute("data-reason-id"))),{text:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("tickets_text")),reason:_,link:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.trim)(val("support_fz_claim_input_content_link"))}},checkClaimFzForm(){var e=Tickets.getClaimFzFields(),_=document.getElementById("tickets_fz_claim_reason_container"),t=document.getElementById("tickets_fz_claim_email_info"),a=!0;return(0===e.text.length||e.text.length>CLAIM_FZ_FORM_TEXT_LENGTH)&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_text"),a=!1),0===t.innerHTML.length&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_fz_claim_form_email_container"),a=!1),(isNaN(e.reason)||0===e.reason)&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)(_),a=!1),0===e.link.length&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("support_fz_claim_input_content_link"),a=!1),!!a&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_fz_claim_agreement_one")||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_fz_claim_form_agreements"),a=!1),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_fz_claim_agreement_three")||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_fz_claim_form_agreements"),a=!1),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)("support_fz_claim_agreement_three")||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)("tickets_fz_claim_form_agreements"),a=!1),a)},checkAppModerationFields(){var e=[],_=document.querySelectorAll(".vk_mini_app_moderation_platform_checkbox");this.areAllCheckboxesUnchecked(_)&&e.push(..._);var t=document.querySelectorAll(".vk_mini_app_votes_moderation_checkbox"),a=document.querySelector(".vk_mini_app_votes_moderation_input input"),i=this.areAllCheckboxesUnchecked(t),o=val(a),r=0!==t.length,s=!i||Boolean(o);return r&&s&&(o&&o.trim()||e.push(a),i&&e.push(...t)),e.forEach((e=>{(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.notaBene)(e)})),0===e.length},areAllCheckboxesUnchecked:e=>Array.prototype.slice.call(e).every((e=>{var _=e.querySelector(".checkbox");return!_||!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_7__.isChecked)(_)}))}},96871:(e,_,t)=>{"use strict";t.d(_,{TicketsEF:()=>l});t(66108),t(296253);var a=t(960308),i=t(414914),o=t(705456),r=t(442699),s=t(917685),l={_getInput:function(e){return ge("tickets_new_extra_field_"+e+"_inp")},_getValues:function(e){return cur.extraFieldsValues[e]},init:function(){l._runOverAll((function(e,_){var t=l._getInput(_),a=cur.extraFieldsNotes[_],o=l._getValues(_),r=l._getType(e,t,o);switch((0,i.data)(e,"ef-type",r),r){case"plain":l._initPlain(e,t,a);break;case"select":l._initSelect(e,t,a,o);break;case"radio":l._initRadio(e,t,_);break;case"date":l._initDate(e,t);break;case"datetime":l._initDatetime(e,t);break;case"checkbox":break;case"hidden":l._initPlain(e);break;default:console.log("Failed to define type of field=%s",_)}})),l._checkBlocking()},_runOverAll:function(e){if(e){var _=ge("tickets_new_extra_fields"),t=_?(0,i.geByClass)("_extra_field",_):[];each(t,(function(_,t){e(t,attr(t,"ef-index"))}))}},_getType:function(e,_,t){return _?(0,i.hasClass)(_,"_date")?(0,i.geByClass1)("_time",e)?"datetime":"date":t.length>0?"select":e&&(0,i.geByClass1)("checkbox",e)?"checkbox":"plain":e&&(0,i.geByClass1)("radiobtn",e)?"radio":"hidden"},_getDefinedType:function(e){return(0,i.data)(e,"ef-type")},_initPlain:function(e,_,t){_?t&&""!==t&&((0,s.addEvent)(_,"focus",(function(e){var _=e.target;a.Tickets.showTooltip(_,t,"extra_field","right",!0)})),(0,s.addEvent)(_,"blur",a.Tickets.hideTooltip.pbind(_))):(0,i.data)(e,"value","")},_initHidden:function(e){(0,i.data)(e,"value","")},_initSelect:function(e,_,t,a){if(_){var o=attr(_,"placeholder"),r=new Dropdown(_,a,{introText:o,placeholder:o,width:getSize(_)[0],big:1,autocomplete:!0,multiselect:!1,zeroPlaceholder:!0});(0,i.data)(e,"dd",r)}else(0,i.data)(e,"value","")},_getRadioName:function(e){return"efRadio"+e},_getCheckbox:function(e){return e.querySelector(".checkbox")},_initRadio:function(e,_,t){var a=(0,i.geByClass1)("on",e);window.radioBtns[l._getRadioName(t)]={val:a?(0,r.intval)(attr(a,"ef-value")):"",els:(0,i.geByClass)("radiobtn",e)}},_initDatetime:function(e,_,t){var o=(0,i.geByClass1)("_time",e);new Datepicker(_,{time:o,width:207}),""!==t&&(0,s.addEvent)(e,"focus",(function(_){a.Tickets.showTooltip(e,t,"extra_field","right",!0)}))},_initDate:function(e,_){var t=attr(_,"placeholder").toString();new Datepicker(_,{width:348}),""!==t&&(0,s.addEvent)(e,"focus",(function(_){a.Tickets.showTooltip(e,t,"extra_field","right",!0)}))},radioClick:function(e){var _=(0,i.gpeByClass)("_extra_field",e);_&&(radiobtn(e,attr(e,"ef-value"),l._getRadioName(attr(_,"ef-index"))),l._checkBlocking(),l._checkVisible())},_checkBlocking:function(){var e=!1;l._runOverAll((function(_,t){(0,i.isVisible)(_)&&l._isBlocking(_,t)&&(e=!0)})),toggle("tickets_new_controls",!e)},_checkVisible:function(){l._runOverAll((function(e,_){var t=cur.extraFieldsVisible[_];if(t){var a=!0;each(t,(function(e,_){if("_"!==e){var t=l._getValueByIndex(e);""!==t&&(0,r.inArray)((0,r.intval)(t),_)||(a=!1)}})),toggle(e,a)}}))},_isBlocking:function(e,_){var t=l._getInput(_),a=l._getValues(_);if("radio"===l._getDefinedType(e,t,a)){var i=(0,r.intval)((0,o.radioval)(l._getRadioName(_))),s=cur.extraFieldsBlocking[_];return(0,r.inArray)(i,s)}return!1},_getValueByIndex:function(e){var _=ge("tickets_new_extra_field_"+e),t=l._getInput(e);return _?l._getValue(_,e,t,l._getDefinedType(_,t,l._getValues(e))):""},_getValue:function(e,_,t,a){var s="";switch(a){case"plain":case"date":case"datetime":s=(0,r.trim)((0,i.val)(t));break;case"select":var n=e?(0,i.data)(e,"dd"):null;n&&(s=n.val());break;case"radio":s=(0,o.radioval)(l._getRadioName(_));break;case"checkbox":s=(0,o.isChecked)(l._getCheckbox(e));break;case"hidden":s=(0,i.data)(e,"value")}return s},_getNotableBlock:function(e,_,t){var a=_;switch(t){case"select":var o=(0,i.data)(e,"dd");o&&(a=o.container);break;case"radio":case"hidden":a=e}return a},getValues:function(){var e={},_=!0;return l._runOverAll((function(t,a){var r=l._getInput(a),s=(0,i.hasClass)(t,"_ef_required"),n=(0,i.hasClass)(t,"_ef_check_url");if((0,i.isVisible)(t)&&!(0,i.hasClass)(t,"_ef_note")){var c=l._getDefinedType(t,r,l._getValues(a)),d=l._getValue(t,a,r,c);if(s&&(""===d||n&&-1===d.indexOf("vk.com")||l._isBlocking(t,a))){var p=l._getNotableBlock(t,r,c);p&&(0,o.notaBene)(p,!1,!_),_=!1}e["extra_field_"+a]=d}})),!!_&&e}}},361554:(e,_,t)=>{"use strict";t.d(_,{BoxModal:()=>s});var a=t(570655),i=t(667294),o=t(121265),r=t(7692),s=function(e){function _(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(_,e),_.prototype.render=function(){var e=this.props,_=e.className,t=e.appearance,a=e.title,s=e.actionButtons,l=e.onClose,n=e.children,c=e.hint,d=e.hasScroll;return i.createElement("div",{className:"BoxModal"},i.createElement("div",{className:(0,o.classNames)("Modal","Modal--"+t,_)},i.createElement(r.default.Header,{title:a,onClose:l}),Boolean(n)&&i.createElement(r.default.Body,{hasScroll:d},n),Boolean(s)&&i.createElement(r.default.Footer,{actionButtons:s,hint:c})))},_.defaultProps={appearance:"white",hasScroll:!0},_}(i.Component)},129601:(e,_,t)=>{"use strict";t.d(_,{ReportReasonCategorySelector:()=>r});var a=t(570655),i=t(667294),o=t(540249),r=function(e){function _(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(_,e),_.prototype.renderCategory=function(e,_){var t=this;return i.createElement("div",{className:"ReportReasonCategorySelector__category",key:e.label,onClick:function(){return t.props.onCategorySelect(_)}},i.createElement("div",{className:"ReportReasonCategorySelector__categoryLabel"},e.label),i.createElement(o.default,{className:"ReportReasonCategorySelector__categoryArrow"}))},_.prototype.render=function(){var e=this;return i.createElement("div",{className:"ReportReasonCategorySelector"},this.props.categories.map((function(_,t){return e.renderCategory(_,t)})))},_}(i.Component)},623475:(e,_,t)=>{"use strict";t.d(_,{ReportReasonSelector:()=>s});var a=t(570655),i=t(667294),o=t(62738),r=t(659397),s=function(e){function _(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(_,e),_.prototype.renderReason=function(e){var _=this;return i.createElement(o.default,{className:"ReportReasonSelector__reason",key:e.id,checked:this.props.selectedReasonId===e.id,onChange:function(){return _.props.onReasonSelect(e)}},i.createElement("div",{className:"ReportReasonSelector__reasonInformation"},i.createElement("div",{className:"ReportReasonSelector__reasonLabel"},e.label),e.description&&i.createElement("div",{className:"ReportReasonSelector__reasonDescription"},e.description)))},_.prototype.render=function(){var e=this;return i.createElement("div",{className:(0,r.classNames)("ReportReasonSelector",this.props.className)},this.props.reasons.map((function(_){return e.renderReason(_)})))},_}(i.Component)},49089:(e,_,t)=>{"use strict";t.d(_,{ClaimFZFormReportEmailSelector:()=>u});var a=t(570655),i=t(667294),o=t(881150),r=t(41437),s=t(40897),l=t(361554),n=t(595775),c=t(907851),d=t(705456),p=t(64385),u=function(e){function _(_){var t=e.call(this,_)||this;return t.onChangeEmail=function(e){var _=e.target.value,a=!0;if(_.length>0){a=!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(_)}t.setState({email:_,saveButtonDisabled:a})},t.destroy=function(){(0,s.destroyComponentInBox)()},t.save=function(e){var _=e.target,a={act:"a_save_claim_fz_email",email:t.state.email,hash:t.props.saveHash},i={onDone:function(e){t.props.saveCallback(e),t.destroy()},onFail:function(e){return(0,c.showErrorBox)(e)},showProgress:function(){return(0,d.lockButton)(_)},hideProgress:function(){return(0,d.unlockButton)(_)}};p.ajax.post("support",a,i)},t.state={saveButtonDisabled:!0,email:""},t}return(0,a.__extends)(_,e),_.prototype.render=function(){var e=i.createElement(i.Fragment,null,i.createElement(o.default,{key:"close-button",onClick:this.destroy,appearance:"secondary"},(0,r.getLang)("global_cancel")),i.createElement(o.default,{key:"update-button",onClick:this.save,appearance:"primary",disabled:this.state.saveButtonDisabled},(0,r.getLang)("global_save")));return i.createElement(l.BoxModal,{className:"ClaimFZFormReportEmailSelector__box",appearance:"white",title:(0,r.getLang)("support_fz_claim_input_email"),onClose:this.destroy,actionButtons:e},i.createElement("div",{className:"ClaimFZFormReportEmailSelector__modalBody"},i.createElement("div",{className:"ClaimFZFormReportEmailSelector__inputGroup"},i.createElement("div",{className:"ClaimFZFormReportEmailSelector__inputLabel"},(0,r.getLang)("support_fz_claim_input_box_email_label")),i.createElement(n.default,{className:"ClaimFZFormReportEmailSelector__input",value:this.state.email,onChange:this.onChangeEmail}))))},_}(i.Component)},17172:(e,_,t)=>{"use strict";t.d(_,{ClaimFZFormReportReasonSelector:()=>m});var a=t(570655),i=t(667294),o=t(40897),r=t(41437),s=t(148434),l=t(492867),n=t(423558),c=t(881150),d=t(129601),p=t(623475),u=t(361554),m=function(e){function _(_){var t=e.call(this,_)||this;return t.state={reasonCategories:void 0,selectedReasonCategoryId:void 0,selectedReasonId:void 0,error:void 0},t}return(0,a.__extends)(_,e),_.destroy=function(){(0,o.destroyComponentInBox)()},_.prototype.componentDidMount=function(){this.loadInitialData()},_.prototype.loadInitialData=function(){var e=this,_={onDone:function(_){return e.setState({reasonCategories:_})},onFail:function(_){return e.setError("error loading initial data: "+(_||"undefined error")),!0}};window.ajax.post("al_tickets.php",{act:"get_fz_form_report_reason_categories"},_)},_.prototype.setError=function(e){this.setState({error:e})},_.prototype.selectReasonCategory=function(e){this.setState({selectedReasonCategoryId:e})},_.prototype.selectReason=function(e){this.setState({selectedReasonId:e.id})},_.prototype.moveToPreviousStage=function(){void 0!==this.state.selectedReasonCategoryId?this.setState({selectedReasonCategoryId:void 0,selectedReasonId:void 0}):this.setError("Unable to reset selectedReasonCategoryId because it's already undefined")},_.prototype.submit=function(){void 0!==this.state.selectedReasonId?(this.props.onReasonSelection(this.getReasonById(this.state.selectedReasonId)),_.destroy()):this.setError("Unable to submit the form because selectedReasonId is undefined")},_.prototype.getReasonById=function(e){var _,t,i,o;if(void 0!==this.state.reasonCategories)try{for(var r=(0,a.__values)(this.state.reasonCategories),s=r.next();!s.done;s=r.next()){var l=s.value;try{for(var n=(i=void 0,(0,a.__values)(l.reasons)),c=n.next();!c.done;c=n.next()){var d=c.value;if(d.id===e)return d}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}}}catch(e){_={error:e}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(_)throw _.error}}},_.prototype.renderBottomButtons=function(){var e=this;if(void 0!==this.state.selectedReasonCategoryId&&void 0===this.state.error)return i.createElement(i.Fragment,null,i.createElement(c.default,{appearance:"tertiary",className:"ClaimFZFormReportReasonSelector__cancelButton",onClick:function(){return _.destroy()}},(0,r.getLang)("global_cancel")),i.createElement(n.default,{appearance:"primary",className:"ClaimFZFormReportReasonSelector__submitButton",disabled:void 0===this.state.selectedReasonId,onClick:function(){return e.submit()}},(0,r.getLang)("reports_claim_fz_form_reason_selector_select_reason")))},_.prototype.renderHeader=function(){var e=this;return void 0!==this.state.selectedReasonCategoryId?i.createElement("div",{className:"ClaimFZFormReportReasonSelector__headerMoveBackButton",onClick:function(){return e.moveToPreviousStage()}},i.createElement(l.default,{className:"ClaimFZFormReportReasonSelector__headerMoveBackIcon"}),i.createElement("div",{className:"ClaimFZFormReportReasonSelector__headerMoveBackLabel"},(0,r.getLang)("reports_claim_fz_form_reason_selector_get_back"))):(0,r.getLang)("reports_claim_fz_form_reason_selector_header")},_.prototype.renderContent=function(){var e=this;return void 0!==this.state.error?i.createElement("div",{className:"ClaimFZFormReportReasonSelector__error"},"Error happened: $",this.state.error):void 0===this.state.reasonCategories?i.createElement("div",{className:"ClaimFZFormReportReasonSelector__loading"},i.createElement(s.default,null)):void 0===this.state.selectedReasonCategoryId?i.createElement(i.Fragment,null,i.createElement("div",{className:"ClaimFZFormReportReasonSelector__explanation"},(0,r.getLang)("reports_claim_fz_form_reason_selector_category_selection_explanation")),i.createElement(d.ReportReasonCategorySelector,{categories:this.state.reasonCategories,onCategorySelect:function(_){return e.selectReasonCategory(_)}})):i.createElement(i.Fragment,null,i.createElement("div",{className:"ClaimFZFormReportReasonSelector__explanation"},(0,r.getLang)("reports_claim_fz_form_reason_selector_reason_selection_explanation")),i.createElement(p.ReportReasonSelector,{className:"ClaimFZFormReportReasonSelector__reportReasonSelector",reasons:this.state.reasonCategories[this.state.selectedReasonCategoryId].reasons,selectedReasonId:this.state.selectedReasonId,onReasonSelect:function(_){return e.selectReason(_)}}))},_.prototype.render=function(){return i.createElement(u.BoxModal,{className:"ClaimFZFormReportReasonSelector",appearance:"white",title:this.renderHeader(),actionButtons:this.renderBottomButtons(),hasScroll:!1,onClose:function(){return _.destroy()}},this.renderContent())},_}(i.Component)}}]);try{stManager.done("dist/a3257201d300a38766dbfc73aedbdbaf.fa7bf67ce89cb33134bb.js")}catch(e){}