(self.webpackChunkvk=self.webpackChunkvk||[]).push([[2256],{609467:(t,e,i)=>{"use strict";i.d(e,{default:()=>g});var o=i(667294),n=i(887854),r=i.n(n),s=i(408091),a=i(634777),l=i(379333),d="0 0 56 56",c="hide_outline_56",h=!1;function u(){h||((0,a.addSpriteSymbol)(new(r())({id:c,viewBox:d,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="hide_outline_56"><g fill-rule="nonzero" fill="none"><path d="M0 0h56v56H0z" /><path d="M12.44 10.44a1.5 1.5 0 012.12 0l31 31a1.5 1.5 0 01-2.12 2.12l-2.515-2.513C37.03 43.573 32.652 45 28 45c-6.256 0-12.004-2.583-16.639-6.832C7.644 34.761 5 30.484 5 28c0-3.35 4.362-9.256 9.932-12.947l-2.493-2.492a1.5 1.5 0 010-2.122zm4.662 6.784C12.052 20.387 8 25.732 8 28c0 1.454 2.232 5.063 5.389 7.957C17.505 39.73 22.556 42 28 42c3.828 0 7.46-1.118 10.75-3.129l-4.446-4.446a9 9 0 01-12.728-12.728zM28 11c6.256 0 12.004 2.583 16.639 6.832C48.356 21.239 51 25.516 51 28c0 1.99-1.714 5.171-4.331 8.11a1.5 1.5 0 01-2.24-1.996C46.6 31.676 48 29.078 48 28c0-1.454-2.232-5.063-5.389-7.957C38.495 16.27 33.444 14 28 14c-1.443 0-2.86.159-4.248.468a1.5 1.5 0 11-.652-2.928c1.6-.356 3.236-.54 4.9-.54zm-4.302 12.819a6 6 0 008.484 8.485zm5.93-3.295a1.5 1.5 0 011.975-.774 9.028 9.028 0 014.65 4.651 1.5 1.5 0 01-2.75 1.2 6.028 6.028 0 00-3.102-3.102 1.5 1.5 0 01-.774-1.975z" fill="currentColor" /></g></symbol>'})),h=!0)}var _=function(t){return(0,a.useIsomorphicLayoutEffect)((function(){u()}),[]),o.createElement(l.SvgIcon,(0,s.assign)({},t,{viewBox:d,id:c,width:isNaN(t.width)?56:+t.width,height:isNaN(t.height)?56:+t.height}))};_.mountIcon=u;const g=_},526380:(t,e,i)=>{"use strict";function o(){return{icon:'<svg width="12" height="12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.22 2.47a.75.75 0 011.06 0l3 3a.75.75 0 010 1.06l-3 3a.75.75 0 01-1.06-1.06L6.69 6 4.22 3.53a.75.75 0 010-1.06z" fill="currentColor"/></svg>',name:"chevron_12"}}i.d(e,{getIcon12Chevron:()=>o})},304418:(t,e,i)=>{"use strict";i.d(e,{uiGetGallery:()=>r,UIGallery:()=>s});var o=i(257451),n=(0,o.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})));function r(t){var e=domData(ge(t),"gallery-id");return e&&n().galleries[e]}class s{constructor(t,e){if(!t)throw new Error("No element was provided for UIGallery");if(t=ge(t),!hasClass(t,"ui_gallery"))throw new Error("Provided incorrect element for UIGallery");var i=r(t);if(i)return i;this._opts=extend({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1},e),this._id=n().incIndex,n().incIndex+=1,this._el=t,this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._itemWidth=getSize(this._items[0])[0],this._itemOffset=intval(getStyle(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=intval(getStyle(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=geByClass1("ui_gallery__inner_cont",this._el),this._inner=geByClass1("ui_gallery__inner",this._el),this._scroll=function(){var t={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return t;if(!cur._scrollInfo){var e=se('<div style="position: fixed; left: -1000; width: 0; overflow: scroll">x</div>');ge("content").appendChild(e);var i=e.scrollLeft;t.rtl=vk.rtl,t.backward=i>0,e.scrollLeft=1e3,t.delta=e.scrollLeft===i?-1:1,t.negative=!t.backward&&t.delta<0,t.rtlSame=t.rtl&&!t.backward&&!t.negative,re(e),cur._scrollInfo=t}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[]},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),domData(this._el,"gallery-id",this._id),n().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&addEvent(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this))}_initArrows(){this._opts.noArrows?addClass(this._el,"ui_gallery_no_arrows"):(this._leftArrow=geByClass1("ui_gallery__arrow_left",this._el),this._rightArrow=geByClass1("ui_gallery__arrow_right",this._el),this._arrowWidth=getSize(this._leftArrow)[0],addEvent(this._leftArrow,"click",this._onArrowScroll.bind(this,-1)),addEvent(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),addEvent(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),addEvent(this._rightArrow,"click",this._onArrowScroll.bind(this,1)),addEvent(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),addEvent(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(t){if(this._opts.scrollX||this._opts.scrollY){var e;if("wheel"==t.type)if(Math.abs(t.deltaY)>Math.abs(t.deltaX)){if(!this._opts.scrollY)return;e=-t.deltaY}else{if(!this._opts.scrollX)return;e=-t.deltaX}else if(void 0!==t.wheelDeltaY){if(!this._opts.scrollY)return;e=t.wheelDeltaY}else if(void 0!==t.wheelDelta)e=t.wheelDelta;else{if(!t.detail||1!==t.axis)return;e=-t.detail}e=this._scroll.rtlSame?-e:e,Math.abs(e)>=120&&(e=74*Math.max(-1,Math.min(1,e))),this._innerCont.scrollLeft-=e,this._checkItemsAfterScroll(this._innerCont.scrollLeft),cancelEvent(t)}}_onArrowScroll(t,e){if(!this._opts.noArrows){var i=this._innerCont.scrollLeft+(this._scroll.rtlSame?-t:t)*(this._width-2*this._arrowWidth),o=this._innerCont.scrollWidth-this._width;this._scroll.negative?(i=Math.min(i,0),i=Math.abs(i)):i=Math.max(0,i),i=Math.min(o,i);var n=this._scroll.negative||this._scroll.rtlSame?-t:t;if(n>0&&i<o)i=Math.floor(i/this._itemFullWidth)*this._itemFullWidth;else if(n<0&&i>0){i=Math.floor(i/this._itemFullWidth)*this._itemFullWidth}if(0===i||i===o){var r=this._innerCont.scrollWidth;addClass(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),i&&(i+=t*(this._innerCont.scrollWidth-r))}this._scroll.negative&&(i=-i),animate(this._innerCont,{scrollLeft:i},{duration:Math.abs(this._innerCont.scrollLeft-i)+50,transition:Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(i),setTimeout((()=>removeClass(this._inner,"ui_gallery__inner_shift_instant")),0),cancelEvent(e)}}_checkItemsAfterScroll(t,e){if(this._scroll.negative&&(t=Math.abs(t)),this._opts.markOutside||this._opts.onViewItem){var i,o=this._itemWidth/3,n=(this._scroll.backward?this._inner.scrollWidth-this._width-t:t)-this._scrollOffset,r=t&&Math.floor(n/this._itemFullWidth),s=r*this._itemFullWidth+2*o;i=this._scroll.backward?t+this._width<this._inner.scrollWidth-s:t>s;var a,l=Math.min(this._items.length-1,Math.floor((n+this._width)/this._itemFullWidth)),d=l*this._itemFullWidth+2*o;if(a=this._scroll.backward?t>this._inner.scrollWidth-d:t+this._width<d,this._opts.onViewItem){var c=i?Math.min(this._items.length-1,r+1):r,h=a?Math.max(0,l-1):l;if(e||c!==this._visible.left||h!==this._visible.right){for(var u=c;u<=h;u++)(this._visible.left<0||e&&!inArray(this._items[u],this._visible.items)||u<this._visible.left||u>this._visible.right)&&this._opts.onViewItem(this._items[u],u);this._visible.left=c,this._visible.right=h,this._visible.items=this._items.slice(c,h+1)}}this._opts.markOutside&&(e?(geByClass("ui_gallery_item_outside",this._inner).forEach((t=>{removeClass(t,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((r!==this._outside.left||!i)&&this._outside.left>=0&&(removeClass(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(l!==this._outside.right||!a)&&this._outside.right>=0&&(removeClass(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),i&&r!==this._outside.left&&(addClass(this._items[r],"ui_gallery_item_outside"),this._outside.left=r),a&&l!==this._outside.right&&(addClass(this._items[l],"ui_gallery_item_outside"),this._outside.right=l))}if(!this._opts.noArrows){var _=t>0,g=t+this._width<this._inner.scrollWidth;toggleClass(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?g:_),toggleClass(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?_:g)}(!this._scroll.backward&&this._inner.scrollWidth-t-this._width<1e3||this._scroll.backward&&t<1e3)&&this._onLoadMore()}_onArrowMouseOver(t){this._opts.noArrows||addClass(this._inner,"ui_gallery__inner_shift_"+t)}_onArrowMouseOut(){this._opts.noArrows||(removeClass(this._inner,"ui_gallery__inner_shift_left"),removeClass(this._inner,"ui_gallery__inner_shift_right"))}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(t,e){t=t||[],this.addItems(t),this._finised=!!e||!t.length,this._loadingMore=!1}addItems(t,e){if((t=t||[]).length){var i=e>=0&&e<this._items.length?this._items[e]:null;t.forEach((t=>{i?domInsertBefore(t,i):this._inner.appendChild(t)})),this.refresh()}}destroy(){removeEvent(this._innerCont),removeEvent(this._leftArrow),removeEvent(this._rightArrow),domData(this._el,"gallery-id",null),delete n().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),re(this._el)}removeItem(t){return isNumeric(t)&&(t=this._items[t]),!(!t||!inArray(t,this._items))&&(re(t),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((t,e)=>[t,this._visible.left+e]))}}},362270:(t,e,i)=>{"use strict";i.d(e,{OPEN_BLOCK_MODE_SUBSCRIBE:()=>d,OPEN_BLOCK_MODE_UNSUBSCRIBE:()=>c,SimilarGroups:()=>h});var o=i(705456),n=i(791563),r=i(116886),s=i(304418),a=i(501458),l="enter",d="subscribe",c="unsubscribe";class h{init(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.ownerId=t,this.isEvent=e,this.hash=i,this.block=document.querySelector(".similar_groups_block"),this.block_title=document.querySelector(".similar_groups_block__title"),this.initGalleryBlock(),this.initMenuItem(),this.eventLog=new a.SimilarGroupsEventLog(Math.abs(this.ownerId)),this.issetSimilarGroups()&&isVisible(this.block)&&this.initGallery()}reInit(){this.init(this.ownerId,this.isEvent,this.hash)}initMenuItem(){this.menuItem=document.querySelector(".page_menu_group_similar_recommends"),this.updateMenuItemText()}updateMenuItemText(){null!==this.menuItem&&(isVisible(this.block)?this.menuItem.innerHTML=(0,r.getLang)("groups_similar_recommends_hide_menu_item"):this.isEvent?this.menuItem.innerHTML=(0,r.getLang)("groups_similar_events_show_menu_item"):this.menuItem.innerHTML=(0,r.getLang)("groups_similar_recommends_show_menu_item"))}issetSimilarGroups(){return null!==this.block&&null!==this.menuItem}initGalleryBlock(){this.gallery=document.querySelector(".similar_community_gallery")}initGallery(){null!==this.gallery&&new s.UIGallery(this.gallery)}toggleBlock(){this.issetSimilarGroups()&&(isVisible(this.block)?this.hide():this.show("menu_item"))}toggleSubscribeGroup(t,e,i){var o=t.closest(".wall_card"),s=o.dataset.action,a=o.dataset.in_group;if("0"!==o.dataset.group_closed&&"0"!==a&&s!==l)var d=(0,n.showFastBox)({title:(0,r.getLang)("global_warning"),bodyStyle:"padding: 20px; line-height: 160%;"},(0,r.getLang)("groups_group_leave2"),(0,r.getLang)("group_leave_group"),(()=>{d.hide(),this._toggleSubscribeGroup(t,e,i)}),(0,r.getLang)("global_cancel"));else this._toggleSubscribeGroup(t,e,i);e.preventDefault()}_toggleSubscribeGroup(t,e,i){var s=t.closest(".wall_card"),a=s.dataset.action,d=-s.dataset.group_id,c=a===l?"al_feed.php":"al_fans.php",h={act:a===l?"subscr":"unsub",hash:i,from:"similar_groups"};a===l?h.oid=d:h.id=d,this.eventLog.addLog(a,this.block.dataset.open_mode,s.dataset.index,Math.abs(d),s.dataset.add),ajax.post(c,h,{onDone(e){a===l?(t.classList.add("secondary"),s.dataset.action="leave"):(t.classList.remove("secondary"),s.dataset.action=l),t.innerHTML=e},onFail(t){if(t)return(0,n.showFastBox)({title:(0,r.getLang)("global_error"),onHide:nav.reload,bodyStyle:"padding: 20px; line-height: 160%;"},t),!0},showProgress:()=>(0,o.lockButton)(t),hideProgress:()=>(0,o.unlockButton)(t)})}show(t){this.issetSimilarGroups()&&(this.block.dataset.open_mode=t,this.isEvent?this.block_title.innerHTML=(0,r.getLang)("groups_similar_events_recommendations_title"):this.block_title.innerHTML=(0,r.getLang)("groups_similar_recommendations_title"),null===this.gallery?ajax.post("al_groups.php",{act:"a_recommends_get",owner_id:this.ownerId,hash:this.hash},{onDone:t=>{this.block.insertAdjacentHTML("beforeend",t),this.showBlock()},onFail(t){if(t)return(0,n.showFastBox)({title:(0,r.getLang)("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},t),!0},showProgress:Page.actionsDropdownLock.pbind(this.menuItem),hideProgress:Page.actionsDropdownUnlock.pbind(this.menuItem)}):this.showBlock())}showBlock(){show(this.block),this.initGalleryBlock(),this.initGallery(),this.updateMenuItemText();var t=[];this.gallery.querySelectorAll(".ui_gallery_item").forEach((e=>t.push(e.dataset.group_id))),this.eventLog.addLog("open_group_block",this.block.dataset.open_mode,-1,-1,"",t)}hide(){this.issetSimilarGroups()&&(hide(this.block),this.updateMenuItemText(),this.eventLog.addLog("hide_group_block",this.block.dataset.open_mode),ajax.post("al_groups.php",{act:"a_recommends_hide",owner_id:this.ownerId,hash:this.hash}))}clickOnGroup(t,e){e.target.closest(".similar_group_subscribe")||this.eventLog.addLog("open_group",this.block.dataset.open_mode,t.dataset.index,t.dataset.group_id,t.dataset.add)}delRefFromUrl(){nav.objLoc&&"similar_groups_block"===nav.objLoc.from&&(delete nav.objLoc.from,nav.setLoc(nav.objLoc))}}},266499:(t,e,i)=>{"use strict";i.d(e,{initGroupsMenu:()=>g});i(530522),i(66108),i(296253),i(991181),i(579665),i(95767),i(751876);var o=i(304418),n=i(917685),r=i(109847),s=i(414914),a=i(469433),l=i(900233),d=i(80909),c=i(826239);function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],o=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{o||null==a.return||a.return()}finally{if(n)throw r}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var _=6441755;function g(t){window.onDomReady((function(){var e=ge("group_section_menu_gallery");if(e){var i=(0,s.geByClass)("ui_gallery_item",e),u={markOutside:!0};(!i||i.length<4)&&(u.scrollX=!1,u.scrollY=!1),(0,s.domQuery1)(".ui_gallery_item ._transparent",e)&&(u.scrollX=!1,u.scrollY=!1);var g=new o.UIGallery(e,u);(g?g.getItems():[]).forEach((e=>{var i=e.firstElementChild;if(i&&((0,n.addEvent)(i,"click",(e=>{var o=i.getAttribute("data-hash"),s=Number(i.getAttribute("data-id")),u=Number(i.getAttribute("data-type")),g=Number(i.getAttribute("data-pos")),p=i.getAttribute("data-object-id");if(o&&s&&u&&p&&((0,r.statlogsValueEvent)("groups_menu_item_click",o,t,s,u,g),!(0,n.checkEvent)(e))){var f=null;switch(u){case 1:var w={w:`wall${p}`};(f=i.getAttribute("data-click")?JSON.parse(i.getAttribute("data-click")):{}).reply&&(w.reply=f.reply),(0,a.showWiki)(w,!1,e);break;case 5:(0,l.showVideo)(`${p}`,"",{autoplay:1},e);break;case 16:-1===p.indexOf("_")?nav.change({z:`tag${p}`},e):nav.change({z:`album${p}`},e);break;case 4:(0,a.showPhoto)(`${p}`,"",{},e);break;case 3:(0,a.showWiki)({w:`product${p}`,from:"group_module"},!1,e,{queue:1});break;case 8:case 17:f=i.getAttribute("data-click")?JSON.parse(i.getAttribute("data-click")):{};var m=h(p.split("_"),2),v=m[0],b=m[1],y=f.access_hash;d.AudioUtils.showAudioPlaylist(v,b,y,void 0,e);break;case 10:var k=h(p.split("_"),2),C=k[0],B=k[1],L=i.getAttribute("href"),S=new URLSearchParams(L).get("ref"),G={};if(S&&(G.app_ref=S),Number(C)===_)window.Groups.inviteToChat(-Number(B));else{if((f=i.getAttribute("data-click")?JSON.parse(i.getAttribute("data-click")):{})&&f.forward){var A=f.forward.split("#");A=A?A[1]?A[1]:A[0]:"",G.w=`app${p}#${A}`}else G.w=`app${p}`;if(!f.show_wiki)return!0;(0,a.showWiki)(G)}break;case 25:(0,a.showPodcast)(null,p);break;case 26:var E=h(p.split("_"),2),I=E[0],M=E[1];(0,c.showNarrative)(I,M);break;default:return}(0,n.cancelEvent)(e)}})),10===Number(i.getAttribute("data-type")))){var o=h(i.getAttribute("data-object-id").split("_"),1)[0];Number(o)===_&&(0,n.addEvent)(i,"mouseover",(()=>{window.Groups.inviteToChatPreload()}))}}))}}))}},412685:(t,e,i)=>{"use strict";i.d(e,{ON_BOARDING_BG_RECT_ID:()=>l,default:()=>h});i(530522),i(66108),i(296253),i(991181),i(579665),i(95767);var o=i(414914),n=i(927663),r=i(491792);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],o=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{o||null==a.return||a.return()}finally{if(n)throw r}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var l="onboarding_bg_rect",d="page_header_cont",c="onboarding";class h{constructor(t,e){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.el=t,this.text=e,this.hideDarkness=!0,this.oldColor=!1;var n,r,s={autoShow:!1,noAutoHideOnWindowClick:null===(i=o.noAutoHideOnWindowClick)||void 0===i||i,content:e instanceof HTMLElement?e:`${e}`,cls:`feature_intro_tt tutorial_tip_tt ${r=null!==(n=o.class)&&void 0!==n?n:"",o.tooltipWhite?r:r+" feature_intro_blue_tt"}`,appendToParent:!0,onHide:this.ttOnHide.bind(this),scrollOffset:o.scrollOffset||0,align:o.align||window.ElementTooltip.ALIGN_CENTER};o.side&&(s.forceSide=o.side),o.offset&&(s.offset=o.offset),o.width&&(s.width=o.width),o.shift&&(s.centerShift=o.shift),o.border?this.border=o.border:this.border=[10,10,10,10],o.ttOnHide&&(s.onHide=o.ttOnHide),o.withCloseButton&&(s.withCloseButton=o.withCloseButton,s.onCloseButtonClick=o.onCloseButtonClick),o.align&&(s.align=o.align),this.ttParams=s,this.opts=o,this.initOnboardingBG()}initOnboardingBG(){if(!window.onboardingBG){var t=se('\n<div id="onboarding_layout">\n  <svg id="onboarding_bg_header" width="100%" height="49px">\n    <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="0" width="100%" height="100%" fill-opacity="0.8" fill="#000"></rect>\n  </svg>\n  <svg id="onboarding_bg" width="100%" height="100%">\n  <defs>\n    <mask id="mask" x="0" y="0" width="100%" height="100%">\n      <rect x="0" y="0" width="100%" height="100%" fill="#fff"></rect>\n      <rect id="onboarding_bg_clip" class="GroupOnboardingBgClip" x="0" y="0" width="0" height="0" fill="#000" rx="8" ry="8"></rect>\n    </mask>\n  </defs>\n  <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="42" width="100%" height="100%" mask="url(#mask)" fill-opacity="0.8"></rect>\n  </svg>\n</div>\n      ');(0,o.domInsertBefore)(t,window.layerBG),window.onboardingBGHeader=ge("onboarding_bg_header"),window.onboardingBG=ge("onboarding_bg"),window.onboardingBGRect=ge(l),window.onboardingBGClip=ge("onboarding_bg_clip"),window.cur.destroy.push((()=>{hide(window.onboardingBG),hide(window.onboardingBGHeader),removeClass(ge(d),c),this.hideDarkness=!0,this.hideTT(),delete window.onboardingBG,delete window.onboardingBGHeader,delete window.onboardingBGRect,delete window.onboardingBGClip,this.opts.onBGClick&&removeEvent(window.onboardingBG,"click",this.opts.onBGClick)})),this.opts.onBGClick&&addEvent(window.onboardingBG,"click",this.opts.onBGClick)}}showTT(){var t=s((0,o.getXY)(this.el),2)[1];this.tt=new window.ElementTooltip(this.el,this.ttParams),this.opts.highlight&&(this.addDarkness(),this.addHighlight()),this.tt.show();var e=this.tt.getContent();(0,r.isElementInViewport)(this.el)&&(0,r.isElementInViewport)(e)||(0,n.scrollToY)(t-42-this.ttParams.scrollOffset)}hideTT(){this.tt&&(this.opts.onBGClick&&this.opts.onBGClick(),this.tt.destroy(),this.removeDarkens(),this.hideDarkness&&(removeEvent(window,"scroll"),removeEvent(window,"resize")))}addHighlight(){window.onboardingBGClip&&(this.highlightElement(),addEvent(window,"scroll",this.onScrollTT.bind(this)),addEvent(window,"resize",this.onResizeTT.bind(this)))}highlightElement(){var t=this.el.offsetWidth,e=this.el.offsetHeight,i=(0,o.getXY)(this.el);attr(window.onboardingBGClip,"width",t+this.border[1]+this.border[3]),attr(window.onboardingBGClip,"height",e+this.border[0]+this.border[2]),attr(window.onboardingBGClip,"x",i[0]-this.border[1]),attr(window.onboardingBGClip,"y",i[1]-this.border[0])}onResizeTT(){this.setDartToFullWidth(),this.highlightElement()}onScrollTT(){var t=this.getPageHeight();window.onboardingBG.height!=t&&this.setDartToFullHeight()}setDartToFullHeight(){attr(window.onboardingBG,"height",this.getPageHeight())}setDartToFullWidth(){attr(window.onboardingBG,"width",this.getPageWidth()),attr(window.onboardingBGHeader,"width",this.getPageWidth())}addDarkness(){(0,o.isVisible)(window.onboardingBG)||(this.setDartToFullHeight(),this.setDartToFullWidth(),show(window.onboardingBG),(0,o.isVisible)(window.onboardingBGHeader)||(show(window.onboardingBGHeader),addClass(ge(d),c)))}removeDarkens(){this.hideDarkness&&(hide(window.onboardingBG),hide(window.onboardingBGHeader),removeClass(ge(d),c))}ttOnHide(){this.hideTT()}show(){setTimeout(this.showTT.bind(this),1e3)}getPageWidth(){var t=document.documentElement,e=document.body;return Math.max(e.scrollWidth,t.scrollWidth,e.offsetWidth,t.offsetWidth,e.clientWidth,t.clientWidth)}getPageHeight(){var t=document.documentElement,e=document.body;return Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight)}}},79018:(t,e,i)=>{"use strict";i.d(e,{initGroupLinksTracking:()=>s,getGroupsTrackCodeAttr:()=>l});i(991181),i(296253);var o=i(917685),n=i(414914),r=i(705456);function s(){setTimeout((function(){var t=(0,n.domQuery)("a[data-group-track-type='link']",ge("page_body"));Object.keys(t).forEach((e=>{var i=t[e];(0,o.addEvent)(i,"click",a),cur.destroy.push(o.removeEvent.pbind(i,"click"))}))}),3e3)}function a(t){var e=t.target;if(!e)return!0;if((0,r.linkLocked)(e))return!0;var i=(0,n.domData)(e,"group-track-code"),o=(0,n.domData)(e,"group-track-type");if(!i||!o)return!0;var s={act:"track",group_id:-cur.oid,track_code:i,type:o};return ajax.post("al_groups.php",s,{onDone:function(){(0,r.unlockLink)(e)}}),!0}function l(t){return(0,n.domData)(t,"trackcode")}},491792:(t,e,i)=>{"use strict";function o(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}i.d(e,{isElementInViewport:()=>o})},294071:(t,e,i)=>{"use strict";i.d(e,{default:()=>r});const o=new WeakMap;function n(t,e,i,n){var r,s;if(!t&&!o.has(e))return!1;const a=null!==(r=o.get(e))&&void 0!==r?r:new WeakMap;if(o.set(e,a),!t&&!o.has(e))return!1;const l=null!==(s=a.get(i))&&void 0!==s?s:new Set;a.set(i,l);const d=l.has(n);return t?l.add(n):l.delete(n),d&&t}const r=function t(e,i,o,r,s){if("string"==typeof e&&(e=document.querySelectorAll(e)),"function"!=typeof e.addEventListener){const n=Array.prototype.map.call(e,(e=>t(e,i,o,r,s)));return{destroy(){n.forEach((t=>t.destroy()))}}}const a=e,l=Boolean("object"==typeof s?s.capture:s),d=t=>{const e=t.target.closest(i);e&&(t.delegateTarget=e,t.currentTarget.contains(t.delegateTarget)&&r.call(a,t))},c=JSON.stringify({selector:i,type:o,capture:l}),h={destroy(){a.removeEventListener(o,d,s),n(!1,a,r,c)}};return n(!0,a,r,c)||a.addEventListener(o,d,s),h}},509608:(t,e,i)=>{"use strict";i.d(e,{onGroupLeaveDonutConfirmation:()=>l});var o=i(791563),n=i(116886),r=i(442699),s=i(705456),a=i(414914),l=function(t,e,i,l){var d,c,h,u=(0,r.getTemplate)("groupLeaveConfirmationKeptSubscription"),_=(0,o.showFastBox)({title:(0,n.getLang)("global_warning")},u,(0,n.getLang)("group_leave_group"),(function(){var o,n=null===(o=_.bodyNode)||void 0===o?void 0:o.querySelector('[data-section-ref="donut_keep_subscription"]'),r=!(!n||(0,s.isChecked)(n))||void 0;t.leave(e,i,l,void 0,void 0,{donut_cancel_subscription:r}),_.hide()}),(0,n.getLang)("global_cancel")),g=null===(d=_.bodyNode)||void 0===d?void 0:d.querySelector('[data-section-ref="donut_keep_subscription"]'),p=null===(c=_.bodyNode)||void 0===c?void 0:c.querySelector('[data-section-ref="donut_cancellation_warning"]'),f=function(){(0,a.toggle)(p,!(0,s.isChecked)(g))};null===(h=null==g?void 0:g.addEventListener)||void 0===h||h.call(g,"click",(function(t){var e=t.target;(0,s.checkbox)(e),f()})),f()}},666815:(t,e,i)=>{"use strict";i.d(e,{donutDebugGroupActions:()=>r});var o=i(917685),n=i(64385),r={toggleDntrStatus:function(t,e,i,r){var s,a,l,d,c,h;n.ajax.post("al_groups.php",{act:"a_toggle_dntr_status",status:i?1:0,oid:window.cur.oid,hash:e},{onDone:function(){window.nav.reload()},showProgress:null===(l=null===(a=null===(s=window.Page)||void 0===s?void 0:s.actionsDropdownLock)||void 0===a?void 0:a.pbind)||void 0===l?void 0:l.call(a,t),hideProgress:null===(h=null===(c=null===(d=window.Page)||void 0===d?void 0:d.actionsDropdownUnlock)||void 0===c?void 0:c.pbind)||void 0===h?void 0:h.call(c,t)}),(0,o.cancelEvent)(r)},donutResetSubscription:function(t,e,i){var r,s,a,l,d,c;n.ajax.post("al_groups.php",{act:"a_donut_reset_subscription",owner_id:window.cur.oid,hash:e},{onDone:function(){window.nav.reload()},showProgress:null===(a=null===(s=null===(r=window.Page)||void 0===r?void 0:r.actionsDropdownLock)||void 0===s?void 0:s.pbind)||void 0===a?void 0:a.call(s,t),hideProgress:null===(c=null===(d=null===(l=window.Page)||void 0===l?void 0:l.actionsDropdownUnlock)||void 0===d?void 0:d.pbind)||void 0===c?void 0:c.call(d,t)}),(0,o.cancelEvent)(i)},donutForcePayment:function(t,e,i){var r,s,a,l,d,c;n.ajax.post("al_groups.php",{act:"a_donut_force_payment",owner_id:window.cur.oid,hash:e},{onDone:function(){window.nav.reload()},showProgress:null===(a=null===(s=null===(r=window.Page)||void 0===r?void 0:r.actionsDropdownLock)||void 0===s?void 0:s.pbind)||void 0===a?void 0:a.call(s,t),hideProgress:null===(c=null===(d=null===(l=window.Page)||void 0===l?void 0:l.actionsDropdownUnlock)||void 0===d?void 0:d.pbind)||void 0===c?void 0:c.call(d,t)}),(0,o.cancelEvent)(i)}}},473135:(t,e,i)=>{"use strict";i.d(e,{initGroupMenuDonut:()=>p});var o=i(570655),n=i(294071),r=i(917685),s=i(791563),a=i(116886),l=i(289542),d=i(705456),c=i(694137),h=i(442699),u=i(414914),_='[data-section-ref="donut-cancel-subscription-error"]',g=function(t){var e,i=t.target;if((0,r.checkEvent)(t)||!(i instanceof HTMLElement))return!1;var n=null===(e=(0,c.getActionData)(i))||void 0===e?void 0:e.actionParams;if(n)var g=(0,h.getTemplate)("groupCancelSubscriptionBox"),p=(0,s.showFastBox)({title:(0,a.getLang)("groups_donut_cancel_subscription_dialog_title")},g,(0,a.getLang)("groups_donut_cancel_subscription_dialog_button_confirm"),(function(){var t,e,i;t=p.bodyNode,(0,u.hide)(t.querySelector(_)),(e=n,i={showProgress:d.lockButton.bind(null,p.btns.ok[0]),hideProgress:d.unlockButton.bind(null,p.btns.ok[0])},(0,l.ajaxPostP)("/al_groups.php",(0,o.__assign)({act:"a_donut_cancel_subscription"},e),i)).then((function(){p.hide(),window.nav.reload()}),(function(t){!function(t,e){var i=t.querySelector(_),o=null==i?void 0:i.querySelector(".msg_text");i&&o&&e&&(o.innerHTML=e,(0,u.show)(i))}(p.bodyNode,function(t){return"string"==typeof(null==t?void 0:t.message)?null==t?void 0:t.message:"string"==typeof t?t:(0,a.getLang)("global_error_occured")}(t))}))}),(0,a.getLang)("groups_donut_cancel_subscription_dialog_button_discard"))},p=function(t){var e,i=null===(e=t.container)||void 0===e?void 0:e.parentElement;return i?(0,n.default)(i,'[data-onclick="showDonutUnsubBox"]',"click",g).destroy:function(){}}},361731:(t,e,i)=>{"use strict";i.d(e,{onGroupLeaveDonutConfirmation:()=>o.onGroupLeaveDonutConfirmation,donutDebugGroupActions:()=>n.donutDebugGroupActions,initGroupMenuDonut:()=>r.initGroupMenuDonut});var o=i(509608),n=i(666815),r=i(473135)},289542:(t,e,i)=>{"use strict";i.d(e,{ajaxPostP:()=>r});var o=i(570655),n=i(64385),r=function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),new Promise((function(r,s){n.ajax.post(t,e,(0,o.__assign)((0,o.__assign)({},i),{onDone:function(t){r(t)},onFail:function(t){return s(t),!0}}))}))}},694137:(t,e,i)=>{"use strict";i.d(e,{getActionData:()=>n});var o=i(712459),n=function(t){var e=(0,o.getJsonDataValue)(t,"data-action-params");if("object"==typeof e||null===e)return{actionParams:e}}},453705:(t,e,i)=>{"use strict";i.d(e,{initEasyMarketPromoteTooltips:()=>w});var o,n=i(570655),r=i(45150),s=i(412685),a=i(927663),l=i(414914),d=i(64385),c=i(526380),h=i(128533);!function(t){t.ONBOARDING="onboarding",t.ONBOARDING_WITH_HIGHLIGHT="onboarding_with_highlight",t.WARNING="warning"}(o||(o={}));var u="MarketPromotionGroupEntrypointTooltip__moreLink",_="MarketPromotionGroupEntrypointTooltip__moreLinkIcon",g=function(t,e,i){var o;void 0===i&&(i={threshold:.5});var n=new IntersectionObserver((function(t,i){t.every((function(t){return t.isIntersecting}))&&(e(),i.disconnect())}),i);n.observe(t),null===(o=window.cur.destroy)||void 0===o||o.push((function(){return n.disconnect()}))},p=function(t,e){return t.replace("{link}",'<a class="'+u+'" href="'+e+'">').replace("{/link}",'<span class="'+_+'">'+(0,c.getIcon12Chevron)().icon+"</span></a>")},f=function(t){var e={act:"help_hints_hide",hint_id:t.tooltip_id,hash:t.tooltip_hash};e.hash&&e.hint_id&&d.ajax.post("al_index.php",e)},w=function(){(0,h.tq)().setStartupHandler("AutoPromotionWebTooltip/init",(function(t){var e=t.payload,i=e.target,d=e.data;i instanceof HTMLElement&&function(t,e){var i,d,h=t.closest(".page_block"),w=Boolean(t.closest(".wide_column")),m=t.getAttribute("onclick");switch(e.tooltip_type){case o.ONBOARDING_WITH_HIGHLIGHT:var v=new s.default(t,e.tooltip_text,{highlight:!0,width:240,offset:[11,-13],shift:-11,border:[0,10,10,10],side:"bottom",align:"right",withCloseButton:!0,onBGClick:function(){v.hideTT(),(0,a.enableBodyScroll)()},onCloseButtonClick:function(){return(0,a.enableBodyScroll)()}});setTimeout((function(){var e=(0,n.__read)((0,l.getXY)(t),2)[1];(0,a.scrollToY)(e-100,250),v.showTT(),(0,a.disableBodyScroll)()}),2e3);break;case o.WARNING:var b=w?"right":"bottom",y=w?[0,0]:[0,5],k=new r.default(t,{content:(i=e.tooltip_text,d=m||"",i.replace("{link}",'<a class="'+u+'" onclick="'+d+'">').replace("{/link}",'<span class="'+_+'">'+(0,c.getIcon12Chevron)().icon+"</span></a>")),forceSide:b,withCloseButton:!0,appendTo:h,autoShow:!1,noAutoHideOnWindowClick:!0,noHideOnClick:!0,width:250,offset:y,cls:"MarketPromotionGroupEntrypointTooltip feature_intro_tt",onCloseButtonClick:function(){return f(e)}});h&&g(h,(function(){return k.show()}));break;case o.ONBOARDING:var C=new r.default(t,{content:p(e.tooltip_text,e.article_href),forceSide:"bottom",align:"right",withCloseButton:!0,appendTo:h,autoShow:!1,noAutoHideOnWindowClick:!0,noHideOnClick:!0,width:250,offset:[0,0],centerShift:-11,cls:"MarketPromotionGroupEntrypointTooltip feature_intro_tt",onCloseButtonClick:function(){return f(e)}});h&&g(h,(function(){return C.show()}))}}(i,d)}))}},953338:(t,e,i)=>{"use strict";i.d(e,{showWarningNotification:()=>_});var o=i(570655),n=i(667294),r=i(40897),s=i(881150),a=i(484426),l=i(423558),d=i(609467),c=i(64385),h=i(897557),u=function(t){function e(e){var i=t.call(this,e)||this;return i.clickProceed=function(){i.sendViewSignal(),i.props.onClose()},i.clickBack=function(){i.setState({isLoading:!0}),window.history.length>1?window.history.back():window.nav.go("/")},i.state={isLoading:!1},i}return(0,o.__extends)(e,t),e.prototype.sendViewSignal=function(){var t=this.props,e={act:"hide_warning_notification",notification_id:t.notification_id,group_id:t.group_id,user_id:t.user_id,hash:t.hash},i={};t.need_reload_on_accept&&(i={onDone:function(){window.nav.reload()}}),c.ajax.post("al_groups.php",e,i)},e.prototype.render=function(){var t=this.props,e=this.state;return n.createElement("div",{className:"WarningNotification__box"},n.createElement("div",{className:"WarningNotification__image-container"},n.createElement(d.default,{className:"WarningNotification__image"})),n.createElement("div",{className:"WarningNotification__title WarningNotification__component--centered",dangerouslySetInnerHTML:{__html:t.title_html}}),n.createElement("div",{className:"WarningNotification__text WarningNotification__component--centered",dangerouslySetInnerHTML:{__html:t.text_html}}),n.createElement("div",{className:"WarningNotification__button-group"},n.createElement(l.default,{loading:e.isLoading,onClick:this.clickBack,className:"WarningNotification__button WarningNotification__button--back WarningNotification__component--centered",appearance:t.ok_button_html?"primary":"secondary"},(0,h.decodeHTMLEntities)(t.back_button_html)),null!==t.ok_button_html&&n.createElement(s.default,{onClick:this.clickProceed,appearance:"secondary",className:"WarningNotification__button WarningNotification__button--proceed WarningNotification__component--centered"},(0,h.decodeHTMLEntities)(t.ok_button_html))))},e}(n.Component);function _(t){var e=function(){_(t)},i=window.cur;i._back.show.push(e),i._back.onArticleNavBack=e;var s=function(){(0,r.destroyComponentInBox)(!0)};i.zNavInfo&&(s=function(){(0,r.destroyComponentInBox)(!0),(0,a.zNav)(i.zNavInfo.info,i.zNavInfo.opts)});var l={containerClass:"WarningNotification",onHideAttempt:function(t){return Boolean(t)}};(0,r.showComponentInBox)(n.createElement(u,(0,o.__assign)({},t,{onClose:s})),l)}},594904:(t,e,i)=>{"use strict";i.d(e,{initPageActionsMenu:()=>r});var o=i(361731),n=i(711918),r=function(){var t,e={container:document.querySelector("._page_actions_container")},i=(0,o.initGroupMenuDonut)(e);null===(t=window.cur.destroy)||void 0===t||t.push(i),(0,n.initGroupMenuLike)()}},711918:(t,e,i)=>{"use strict";i.d(e,{initGroupMenuLike:()=>h});var o=i(294071),n=i(64385),r=i(116886),s=i(45150),a="on",l="group_friends_wrap",d="page_action_menu_groups",c="page_menu_group_like",h=function(){var t,e,i=document.querySelector("."+d);if(i){var h,u=i.querySelector("."+c),_=null==u?void 0:u.dataset.tooltip_text;if(u&&_){var g={act:"help_hints_hide",hint_id:u.dataset.tooltip_id,hash:u.dataset.tooltip_hash};h=new s.default(u,{content:_,forceSide:"left",withCloseButton:!0,appendTo:i,autoShow:!1,noAutoHideOnWindowClick:!0,noHideOnClick:!0,width:200,offset:[30,0],cls:"feature_intro_tt",onCloseButtonClick:function(){return n.ajax.post("al_index.php",g)}});var p=new IntersectionObserver((function(t,e){t.every((function(t){return t.isIntersecting}))&&(null==h||h.show(),e.disconnect())}),{threshold:1});p.observe(u),null===(t=window.cur.destroy)||void 0===t||t.push((function(){return p.disconnect()}))}var f=(0,o.default)(i,"."+c,"click",function(t){return function(e){var i,o=e.target;if(o instanceof HTMLElement){var s=o.closest("."+c);if(s instanceof HTMLElement&&(null===(i=null==t?void 0:t._closeButton)||void 0===i||i.click(),!Boolean(null===window||void 0===window?void 0:window.Page.actionsDropdownLocked(s)))){var d=s.classList.contains(a),h={act:"group_like_toggle",group_id:s.dataset.group_id,hash:s.dataset.hash,is_like:Number(!d),ref:window.cur.ref};n.ajax.post("al_groups.php",h,{onDone:function(t){d?(s.innerHTML=(0,r.getLang)("groups_action_menu_recommend"),s.classList.remove(a)):(s.innerHTML=(0,r.getLang)("groups_action_menu_you_recommend"),s.classList.add(a));var e=document.querySelector(".groups_friends_likes"),i=null==e?void 0:e.closest("."+l);i&&e&&t&&(i.innerHTML=t)},showProgress:function(){return null===window||void 0===window?void 0:window.Page.actionsDropdownLock(s)},hideProgress:function(){return null===window||void 0===window?void 0:window.Page.actionsDropdownUnlock(s)}})}}}}(h)).destroy;null===(e=window.cur.destroy)||void 0===e||e.push(f)}}},9807:(t,e,i)=>{"use strict";i.d(e,{addRecent:()=>n});var o=i(64385),n=function(t,e){var i={act:"add_recent",group_id:t,hash:e};o.ajax.post("al_groups.php",i)}}}]);try{stManager.done("dist/e98707524fc56246574c812286aa7ba2.17ce51cfd0d6e5f47aae.js")}catch(t){}