(self.webpackChunkvk=self.webpackChunkvk||[]).push([[6181],{713652:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 12 12",u="add_12",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="add_12"><path d="M6.75 1.75a.75.75 0 00-1.5 0v3.5h-3.5a.75.75 0 000 1.5h3.5v3.5a.75.75 0 001.5 0v-3.5h3.5a.75.75 0 000-1.5h-3.5v-3.5z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?12:+e.width,height:isNaN(e.height)?12:+e.height}))};h.mountIcon=p;const _=h},943302:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 16 16",u="repost_16",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="repost_16"><path d="M8.583 1.914l.061-.087a.6.6 0 01.758-.128l.088.063 3.272 2.805.04.043a.6.6 0 01.01.768l-.075.078L9.49 8.238a.6.6 0 01-.982-.358L8.5 7.783V5.999L5 6a1 1 0 00-.993.883L4 7v4a1 1 0 00.883.993L5 12h4a1 1 0 01.117 1.993L9 14H5a3 3 0 01-2.995-2.824L2 11V7a3 3 0 012.824-2.995L5 4h3.5V2.216a.6.6 0 01.083-.303l.061-.087z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};h.mountIcon=p;const _=h},318422:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 20 20",u="flip_horizontal_20",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="flip_horizontal_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.465 7.531A.75.75 0 019 8.25v8a.75.75 0 01-.75.75H3a.75.75 0 01-.627-1.162l5.25-8a.75.75 0 01.842-.307zM4.389 15.5H7.5v-4.74L4.39 15.5zM6.53 1.47a.75.75 0 010 1.06l-.72.72h8.38l-.72-.72a.75.75 0 011.06-1.06l2 2a.75.75 0 010 1.06l-2 2a.75.75 0 11-1.06-1.06l.72-.72H5.81l.72.72a.75.75 0 01-1.06 1.06l-2-2a.75.75 0 010-1.06l2-2a.75.75 0 011.06 0zm5.005 6.061a.75.75 0 01.842.308l5.25 8A.75.75 0 0117 17h-5.25a.75.75 0 01-.75-.75v-8a.75.75 0 01.535-.719zm.965 3.229v4.74h3.11l-3.11-4.74z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};h.mountIcon=p;const _=h},402255:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 20 20",u="flip_vertical_20",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="flip_vertical_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.394 2.34a.75.75 0 01.767.033l8 5.25A.75.75 0 0111.75 9h-8A.75.75 0 013 8.25V3a.75.75 0 01.394-.66zM4.5 4.39V7.5h4.74L4.5 4.39zM3 11.75a.75.75 0 01.75-.75h8a.75.75 0 01.412 1.377l-8 5.25A.75.75 0 013 17v-5.25zm1.5.75v3.11l4.74-3.11H4.5zm10.97-9.03a.75.75 0 011.06 0l2 2a.75.75 0 01-1.06 1.06l-.72-.72v8.38l.72-.72a.75.75 0 111.06 1.06l-2 2a.75.75 0 01-1.06 0l-2-2a.75.75 0 111.06-1.06l.72.72V5.81l-.72.72a.75.75 0 11-1.06-1.06l2-2z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};h.mountIcon=p;const _=h},777163:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 20 20",u="rotate_left_20",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="rotate_left_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.2 9.5H6.8c-.865 0-1.423.001-1.848.036-.408.033-.559.09-.633.127a1.5 1.5 0 00-.656.656c-.037.074-.094.225-.127.633-.035.425-.036.983-.036 1.848v.4c0 .865.001 1.423.036 1.848.033.408.09.559.127.633a1.5 1.5 0 00.656.656c.074.037.225.094.633.127.425.035.983.036 1.848.036h2.4c.865 0 1.423-.001 1.848-.036.408-.033.559-.09.633-.127a1.5 1.5 0 00.655-.656c.038-.074.095-.225.128-.633.035-.425.036-.983.036-1.848v-.4c0-.865-.001-1.423-.036-1.848-.033-.408-.09-.559-.128-.633a1.5 1.5 0 00-.655-.656c-.074-.037-.225-.094-.633-.127C10.623 9.5 10.065 9.5 9.2 9.5zm-6.873.138C2 10.28 2 11.12 2 12.8v.4c0 1.68 0 2.52.327 3.162a3 3 0 001.311 1.311C4.28 18 5.12 18 6.8 18h2.4c1.68 0 2.52 0 3.162-.327a3 3 0 001.311-1.311C14 15.72 14 14.88 14 13.2v-.4c0-1.68 0-2.52-.327-3.162a3 3 0 00-1.311-1.311C11.72 8 10.88 8 9.2 8H6.8c-1.68 0-2.52 0-3.162.327a3 3 0 00-1.311 1.311zM13.53 1.97a.75.75 0 010 1.06l-.72.72H13a4.75 4.75 0 014.75 4.75V11a.75.75 0 01-1.5 0V8.5A3.25 3.25 0 0013 5.25h-.19l.72.72a.75.75 0 01-1.06 1.06l-2-2a.75.75 0 010-1.06l2-2a.75.75 0 011.06 0z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};h.mountIcon=p;const _=h},322298:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 20 20",u="rotate_right_20",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="rotate_right_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.2 9.5h-2.4c-.865 0-1.423.001-1.848.036-.408.033-.559.09-.633.127a1.5 1.5 0 00-.656.656c-.037.074-.094.225-.127.633-.035.425-.036.983-.036 1.848v.4c0 .865.001 1.423.036 1.848.033.408.09.559.127.633a1.5 1.5 0 00.656.656c.074.037.225.094.633.127.425.035.983.036 1.848.036h2.4c.865 0 1.423-.001 1.848-.036.408-.033.559-.09.633-.127a1.5 1.5 0 00.656-.656c.037-.074.094-.225.127-.633.035-.425.036-.983.036-1.848v-.4c0-.865-.001-1.423-.036-1.848-.033-.408-.09-.559-.127-.633a1.5 1.5 0 00-.656-.656c-.074-.037-.225-.094-.633-.127-.425-.035-.983-.036-1.848-.036zm-6.873.138C6 10.28 6 11.12 6 12.8v.4c0 1.68 0 2.52.327 3.162a3 3 0 001.311 1.311C8.28 18 9.12 18 10.8 18h2.4c1.68 0 2.52 0 3.162-.327a3 3 0 001.311-1.311C18 15.72 18 14.88 18 13.2v-.4c0-1.68 0-2.52-.327-3.162a3 3 0 00-1.311-1.311C15.72 8 14.88 8 13.2 8h-2.4c-1.68 0-2.52 0-3.162.327a3 3 0 00-1.311 1.311zM6.47 1.97a.75.75 0 011.06 0l2 2a.75.75 0 010 1.06l-2 2a.75.75 0 01-1.06-1.06l.72-.72H7A3.25 3.25 0 003.75 8.5V11a.75.75 0 01-1.5 0V8.5A4.75 4.75 0 017 3.75h.19l-.72-.72a.75.75 0 010-1.06z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};h.mountIcon=p;const _=h},418586:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 20 20",u="stars_20",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="stars_20"><g clip-path="url(#stars_20_clip0)" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.004 8.13c-.368.835-.857 1.717-1.507 2.367-.65.65-1.532 1.14-2.367 1.507.835.367 1.717.857 2.367 1.507.65.65 1.14 1.532 1.507 2.367.367-.835.857-1.717 1.507-2.367.65-.65 1.532-1.14 2.367-1.507-.835-.368-1.717-.857-2.367-1.507-.65-.65-1.14-1.532-1.507-2.367zm-.785-2.178c-.421 1.317-1.014 2.716-1.782 3.485-.769.768-2.168 1.36-3.485 1.782a21.073 21.073 0 01-1.162.338c-.38.1-.38.793 0 .894a27.146 27.146 0 01.912.26c.083.025.166.05.25.078 1.317.421 2.716 1.014 3.485 1.782.768.768 1.36 2.168 1.782 3.485a20.843 20.843 0 01.27.907l.068.255c.1.38.793.38.894 0a27.487 27.487 0 01.26-.912c.025-.083.05-.166.078-.25.421-1.317 1.014-2.717 1.782-3.485.768-.768 2.168-1.36 3.485-1.782a20.843 20.843 0 01.907-.27l.255-.068c.38-.1.38-.793 0-.894a27.487 27.487 0 01-.912-.26 20.843 20.843 0 01-.25-.078c-1.317-.421-2.717-1.014-3.485-1.782-.768-.769-1.36-2.168-1.782-3.485a21.13 21.13 0 01-.338-1.162c-.1-.38-.793-.38-.894 0a27.146 27.146 0 01-.26.912 21.13 21.13 0 01-.078.25z" /><path d="M4.365.763a.385.385 0 00-.73 0l-.414 1.24a1.926 1.926 0 01-1.218 1.218l-1.24.414a.385.385 0 000 .73l1.24.414a1.926 1.926 0 011.218 1.218l.414 1.24a.385.385 0 00.73 0l.414-1.24a1.926 1.926 0 011.218-1.218l1.24-.414a.385.385 0 000-.73l-1.24-.414a1.926 1.926 0 01-1.218-1.218L4.365.763z" /></g><defs><clipPath id="stars_20_clip0"><path fill="#fff" d="M0 0h20v20H0z" /></clipPath></defs></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};h.mountIcon=p;const _=h},270640:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 20 20",u="water_drop_outline_20",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="water_drop_outline_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.4 8.683c-.419.85-.65 1.647-.65 2.317a5.25 5.25 0 1010.5 0c0-.67-.231-1.467-.65-2.317-.414-.842-.988-1.69-1.615-2.447-.628-.759-1.292-1.408-1.874-1.86a4.888 4.888 0 00-.76-.499 1.644 1.644 0 00-.255-.106A.419.419 0 0010 3.75a.42.42 0 00-.096.02c-.065.02-.15.054-.254.107a4.854 4.854 0 00-.76.5c-.583.451-1.247 1.1-1.875 1.859-.627.757-1.201 1.605-1.615 2.447zm3.573-6.145c.308-.155.667-.288 1.027-.288.36 0 .72.133 1.027.288.322.163.662.389 1.003.654.684.53 1.425 1.26 2.11 2.087.686.828 1.33 1.774 1.806 2.742.473.96.804 1.992.804 2.979a6.75 6.75 0 01-13.5 0c0-.987.331-2.018.804-2.979.476-.969 1.12-1.914 1.806-2.742.685-.827 1.426-1.557 2.11-2.087a6.44 6.44 0 011.003-.654z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};h.mountIcon=p;const _=h},456775:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="arrow_uturn_left_outline_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="arrow_uturn_left_outline_24"><path clip-rule="evenodd" d="M10.236 3.264a.9.9 0 010 1.272L7.673 7.1H12a5.9 5.9 0 110 11.8H7.9a.9.9 0 110-1.8H12a4.1 4.1 0 100-8.2H7.673l2.564 2.564a.9.9 0 11-1.273 1.272l-4.1-4.1a.9.9 0 010-1.272l4.1-4.1a.9.9 0 011.273 0z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},699111:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="arrow_uturn_right_outline_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="arrow_uturn_right_outline_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.764 3.264a.9.9 0 011.273 0l4.1 4.1a.9.9 0 010 1.272l-4.1 4.1a.9.9 0 01-1.273-1.272L16.327 8.9H12a4.1 4.1 0 100 8.2h4.1a.9.9 0 110 1.8H12a5.9 5.9 0 110-11.8h4.327l-2.563-2.564a.9.9 0 010-1.272z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},621748:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="brush_outline_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="brush_outline_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.28 3.562a1.85 1.85 0 00-2.54.09l-6.883 6.796a.9.9 0 001.265 1.281l6.889-6.802.013-.014a.044.044 0 01.032-.013c.014 0 .025.004.033.011a.03.03 0 01.008.01.026.026 0 01.003.01l-.001.01a.027.027 0 01-.006.01l-.013.015-6.113 7.664a.9.9 0 101.407 1.123l6.108-7.657a1.826 1.826 0 00-.201-2.534zM6.733 16.206c.046-1.027.814-1.779 1.74-1.779.96 0 1.738.779 1.738 1.739 0 .937-.784 2.148-2.688 2.743-.86.268-1.538.245-2.043.12.586-.553 1.19-1.426 1.253-2.823zm1.74-3.579c-1.99 0-3.454 1.614-3.538 3.498-.042.93-.45 1.402-.824 1.715-.1.084-.2.158-.303.232l-.047.033c-.083.059-.189.134-.273.203a1.62 1.62 0 00-.195.186 1.11 1.11 0 00-.227.4.997.997 0 00.04.7c.091.208.233.341.331.417.757.587 2.339 1.33 4.623.616 2.383-.744 3.95-2.484 3.95-4.461a3.538 3.538 0 00-3.538-3.539z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},274824:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="crop_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="crop_24"><g fill="currentColor"><path d="M6 1.006a.9.9 0 01.9.9V14.8c0 .575 0 .952.024 1.24.023.278.062.394.096.46a1.1 1.1 0 00.48.48c.067.034.182.073.46.096.288.023.665.024 1.24.024h12.898a.9.9 0 010 1.8H18.9v3.198a.9.9 0 11-1.8 0V18.9H9.165c-.53 0-.981 0-1.352-.03-.389-.032-.768-.102-1.13-.286a2.9 2.9 0 01-1.267-1.267c-.184-.362-.254-.741-.286-1.13-.03-.37-.03-.822-.03-1.352V6.9H1.903a.9.9 0 010-1.8H5.1V1.906a.9.9 0 01.9-.9z" /><path d="M16.04 6.924c-.288-.023-.665-.024-1.24-.024H9.907a.9.9 0 110-1.8h4.928c.53 0 .981 0 1.352.03.39.032.768.102 1.13.286a2.9 2.9 0 011.267 1.267c.184.362.254.74.286 1.13.03.37.03.822.03 1.352V14.1a.9.9 0 11-1.8 0V9.2c0-.575 0-.952-.024-1.24-.023-.278-.062-.394-.096-.46a1.1 1.1 0 00-.48-.48c-.067-.034-.182-.073-.46-.096z" /></g></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},949151:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="filter_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="filter_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 8.9c.08 0 .159-.01.233-.03a2.901 2.901 0 005.534 0c.075.02.153.03.233.03h8a.9.9 0 100-1.8h-8c-.08 0-.158.01-.233.03a2.901 2.901 0 00-5.534 0A.9.9 0 006 7.1H4a.9.9 0 100 1.8h2zm3-2a1.1 1.1 0 100 2.2 1.1 1.1 0 000-2.2zM3.1 16a.9.9 0 01.9-.9h8a.9.9 0 01.233.03 2.901 2.901 0 015.534 0A.902.902 0 0118 15.1h2a.9.9 0 110 1.8h-2a.902.902 0 01-.233-.03 2.901 2.901 0 01-5.534 0 .9.9 0 01-.233.03H4a.9.9 0 01-.9-.9zm10.8 0a1.1 1.1 0 112.2 0 1.1 1.1 0 01-2.2 0z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},815204:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="fullscreen_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="fullscreen_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 4.9a.9.9 0 01.9-.9h4.2a.9.9 0 01.9.9v4.2a.9.9 0 11-1.8 0V7.073l-3.664 3.663a.9.9 0 11-1.272-1.272L16.927 5.8H14.9a.9.9 0 01-.9-.9zm-3.264 8.364a.9.9 0 010 1.272L7.073 18.2h2.025a.9.9 0 110 1.8H4.9a.9.9 0 01-.9-.9v-4.2a.9.9 0 011.8 0v2.027l3.664-3.663a.9.9 0 011.272 0z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},601352:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="fullscreen_exit_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="fullscreen_exit_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 13.9a.9.9 0 01.9-.9h4.2a.9.9 0 01.9.9v4.2a.9.9 0 11-1.8 0v-2.027l-3.664 3.663a.9.9 0 11-1.272-1.272L7.927 14.8H5.9a.9.9 0 01-.9-.9zm14.736-9.636a.9.9 0 010 1.272L16.073 9.2h2.025a.9.9 0 010 1.8H13.9a.9.9 0 01-.9-.9V5.9a.9.9 0 111.8 0v2.027l3.664-3.663a.9.9 0 011.272 0z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},591420:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="image_filter_outline_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="image_filter_outline_24"><path d="M8.983 15.8a3.8 3.8 0 000-7.599 7.166 7.166 0 00-1.083 3.8c0 1.394.396 2.696 1.083 3.798z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M8.9 4.6A7.4 7.4 0 1012 18.721a7.4 7.4 0 100-13.443A7.372 7.372 0 008.9 4.6zM3.3 12a5.6 5.6 0 1111.2 0 5.6 5.6 0 01-11.2 0zm10.586-5.468A7.381 7.381 0 0116.3 12c0 2.166-.93 4.115-2.414 5.468a5.6 5.6 0 100-10.936z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},94566:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="recent_outline_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="recent_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M12 21.428A9.428 9.428 0 012.571 12 9.428 9.428 0 0112 2.57c5.206 0 9.429 4.221 9.429 9.429 0 5.207-4.223 9.428-9.429 9.428zm0-1.8a7.63 7.63 0 10-.001-15.258A7.63 7.63 0 0012 19.628zm4.085-6.387a.9.9 0 11-.575 1.706l-4.226-1.427a.9.9 0 01-.613-.853V8.353a.9.9 0 111.8 0v3.668l3.614 1.22z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},147650:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="smile_outline_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="smile_outline_24"><path d="M8.438 14.297a.9.9 0 011.259.133c.013.016.196.223.53.432.383.24.97.488 1.773.488a3.3 3.3 0 001.773-.488c.191-.12.382-.26.53-.432a.9.9 0 011.4 1.132 4.045 4.045 0 01-.976.826A5.094 5.094 0 0112 17.15a5.094 5.094 0 01-2.727-.762 3.987 3.987 0 01-.976-.826.9.9 0 01.14-1.265zm1.812-4.047a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM15 11.5A1.25 1.25 0 1015 9a1.25 1.25 0 000 2.5z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 2.1c-5.468 0-9.9 4.432-9.9 9.9s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9-4.432-9.9-9.9-9.9zM3.9 12a8.1 8.1 0 1116.2 0 8.1 8.1 0 01-16.2 0z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},569456:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="storefront_outline_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="storefront_outline_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 14a.9.9 0 01.9.9v4.2h8.2v-4.2a.9.9 0 011.8 0V20a.9.9 0 01-.9.9H7a.9.9 0 01-.9-.9v-5.1A.9.9 0 017 14z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M3 20a.9.9 0 01.9-.9h16.2a.9.9 0 110 1.8H3.9A.9.9 0 013 20zm13.9-10a1.1 1.1 0 002.2 0h1.8a2.9 2.9 0 01-5.8 0h1.8z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M16 9.1a.9.9 0 01.9.9 1.1 1.1 0 002.2 0 .9.9 0 111.8 0 2.9 2.9 0 01-5.8 0 .9.9 0 01.9-.9z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 9.1a.9.9 0 01.9.9 1.1 1.1 0 002.2 0 .9.9 0 111.8 0 2.9 2.9 0 01-5.8 0 .9.9 0 01.9-.9z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M8 9.1a.9.9 0 01.9.9 1.1 1.1 0 002.2 0 .9.9 0 111.8 0 2.9 2.9 0 01-5.8 0 .9.9 0 01.9-.9z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M4 9.1a.9.9 0 01.9.9 1.1 1.1 0 002.2 0 .9.9 0 011.8 0 2.9 2.9 0 01-5.8 0 .9.9 0 01.9-.9z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M8.703 3.1h6.594c.553 0 1.019-.001 1.453.137a2.9 2.9 0 011.033.585c.342.301.581.7.865 1.175l.056.094 1.612 2.686.027.045c.143.239.264.44.352.66.077.195.133.397.167.604.038.234.038.47.038.747V10h-1.8v-.114c0-.358-.003-.438-.014-.51a1.1 1.1 0 00-.064-.228c-.027-.068-.066-.138-.25-.445L17.16 6.017c-.37-.618-.462-.752-.566-.843a1.1 1.1 0 00-.392-.222c-.131-.042-.294-.052-1.014-.052H8.812c-.72 0-.883.01-1.014.052a1.1 1.1 0 00-.392.222c-.104.091-.196.225-.566.843L5.228 8.703c-.185.307-.223.377-.25.445a1.1 1.1 0 00-.064.228c-.011.072-.014.152-.014.51V10H3.1v-.167c0-.278 0-.513.038-.747a2.9 2.9 0 01.167-.603c.088-.22.209-.422.352-.66l.027-.046L5.296 5.09l.056-.094c.284-.474.523-.874.865-1.175a2.9 2.9 0 011.033-.585c.434-.138.9-.138 1.453-.137z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},526326:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(667294),o=r(887854),a=r.n(o),i=r(408091),s=r(634777),l=r(379333),c="0 0 24 24",u="text_outline_24",d=!1;function p(){d||((0,s.addSpriteSymbol)(new(a())({id:u,viewBox:c,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="text_outline_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.136 17.146c-.222.725-.537 1.004-1.101 1.004-.583 0-.98-.344-.98-.883 0-.223.055-.465.175-.818L5.7 6.59c.323-.93.776-1.339 1.618-1.339.842 0 1.295.4 1.61 1.338l3.469 9.861c.102.307.157.558.157.79 0 .558-.398.911-.999.911-.564 0-.897-.288-1.11-1.004l-.87-2.62h-4.57l-.87 2.62zm3.108-9.6l-1.74 5.362h3.572l-1.73-5.362h-.102zm12.784 9.188h-.102c-.537.91-1.519 1.411-2.732 1.411-1.907 0-3.194-1.206-3.194-2.989 0-1.81 1.315-2.915 3.5-2.924h2.444v-.872c0-1.105-.675-1.68-1.925-1.68-.778 0-1.315.278-1.88.853-.25.242-.49.335-.843.335-.453 0-.75-.307-.75-.752 0-.567.39-1.124 1.213-1.57.593-.324 1.37-.5 2.39-.5C20.62 8.045 22 9.233 22 11.368v5.616c0 .706-.361 1.114-1 1.114-.565 0-.926-.343-.972-.928v-.437zm-2.241-3.09c-1.093 0-1.722.51-1.722 1.41 0 .91.713 1.523 1.768 1.523 1.195 0 2.111-.817 2.111-1.876v-1.058h-2.157z" fill="currentColor" /></symbol>'})),d=!0)}var h=function(e){return(0,s.useIsomorphicLayoutEffect)((function(){p()}),[]),n.createElement(l.SvgIcon,(0,i.assign)({},e,{viewBox:c,id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;const _=h},518525:(e,t,r)=>{"use strict";function n(){return{icon:'<svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path d="M7.58.92l.06-.1A.6.6 0 018.4.7l.08.06 2.78 2.32.04.05a.6.6 0 010 .76l-.07.08-2.75 2.29a.6.6 0 01-.97-.37l-.01-.1V4.5H4a1 1 0 00-1 .88V8a1 1 0 00.88 1H8a1 1 0 01.12 2H4a3 3 0 01-3-2.82V5.5a3 3 0 012.82-3H7.5V1.2c0-.1.03-.2.08-.3l.06-.08z" fill="currentColor"/></svg>',name:"repost_12"}}r.d(t,{getIcon12Repost:()=>n})},423292:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M17.5 5.25a.75.75 0 00-.74-.75H3.24a.75.75 0 00-.74.75c0 .41.34.75.74.75h13.52c.4 0 .74-.33.74-.75zm0 5a.75.75 0 00-.74-.75H3.24a.75.75 0 00-.74.75c0 .41.34.75.74.75h13.52c.4 0 .74-.33.74-.75zm-15 5c0 .41.34.75.76.75h8.98c.42 0 .76-.33.76-.75a.75.75 0 00-.76-.75H3.26a.75.75 0 00-.76.75z" id="article_outline_20__path-1"/></defs><g id="article_outline_20__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="article_outline_20__article_outline_20"><path id="article_outline_20__Shape" d="M0 0h20v20H0z"/><mask id="article_outline_20__mask-2" fill="#fff"><use xlink:href="#article_outline_20__path-1"/></mask><use id="article_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero" xlink:href="#article_outline_20__path-1"/></g></g></svg>',name:"article_outline_20"}}r.d(t,{getIcon20ArticleOutline:()=>n})},507239:(e,t,r)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M14.95 3.8a2.72 2.72 0 00-3.86 0L5.56 9.35a4.5 4.5 0 000 6.34 4.46 4.46 0 006.32 0l2.88-2.86a.75.75 0 011.06 1.06l-2.88 2.86a5.96 5.96 0 01-8.44 0 6 6 0 010-8.46l5.53-5.55a4.22 4.22 0 015.98 0 4.24 4.24 0 010 6l-5.53 5.54a2.49 2.49 0 11-3.52-3.52l3.1-3.09a.75.75 0 011.06 1.07l-3.1 3.08a1 1 0 000 1.4.99.99 0 001.4 0l5.53-5.55a2.74 2.74 0 000-3.87z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"attach_20"}}r.d(t,{getIcon20Attach:()=>n})},959473:(e,t,r)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.5 5.5c.57 0 1-.2 1.34-.52.24-.24.43-.54.55-.74l.06-.1c.15-.23.26-.37.39-.47.11-.08.3-.17.66-.17h3c.36 0 .55.09.66.17.13.1.24.24.4.48l.05.09c.12.2.3.5.55.74.33.32.77.52 1.34.52.73 0 .99 0 1.19.04.9.18 1.59.88 1.77 1.77.04.2.04.46.04 1.19v3.45c0 .85 0 1.45-.04 1.9-.04.46-.1.72-.2.92-.22.42-.57.77-.99.98-.2.1-.46.17-.91.21-.46.04-1.06.04-1.91.04h-6.9c-.85 0-1.45 0-1.91-.04a2.4 2.4 0 01-.91-.2 2.25 2.25 0 01-.99-.99 2.4 2.4 0 01-.2-.91c-.04-.46-.04-1.06-.04-1.91V8.5c0-.73 0-.99.04-1.19.18-.9.88-1.59 1.77-1.77.2-.04.46-.04 1.19-.04zm3-3.5c-.64 0-1.14.16-1.54.46-.39.27-.62.63-.78.9l-.08.11c-.13.22-.2.34-.3.43-.06.05-.12.1-.3.1h-.09c-.61 0-1.03 0-1.4.07a3.75 3.75 0 00-2.94 2.95C1 7.38 1 7.8 1 8.42v3.56c0 .81 0 1.47.04 2 .05.55.14 1.03.37 1.47.36.7.93 1.28 1.64 1.64.44.23.92.32 1.47.37.53.04 1.18.04 2 .04H13.48c.81 0 1.47 0 2-.04a3.84 3.84 0 001.47-.37c.7-.36 1.28-.93 1.64-1.64.23-.44.32-.92.37-1.47.04-.53.04-1.19.04-2V8.41c0-.61 0-1.03-.07-1.4a3.75 3.75 0 00-2.95-2.94 7.5 7.5 0 00-1.4-.07h-.08c-.18 0-.24-.05-.3-.1-.1-.1-.17-.2-.3-.43l-.08-.12c-.16-.26-.4-.62-.78-.9-.4-.29-.9-.45-1.54-.45zm3.75 8.25a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm1.5 0a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"camera_outline_20"}}r.d(t,{getIcon20CameraOutline:()=>n})},662950:(e,t,r)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M17.2 6.78a2 2 0 01.24.58c.06.23.06.48.06.97v2.97c0 2.52 0 3.78-.49 4.74a4.5 4.5 0 01-1.97 1.97c-.96.49-2.22.49-4.74.49h-.6c-2.52 0-3.78 0-4.74-.49a4.5 4.5 0 01-1.97-1.97c-.49-.96-.49-2.22-.49-4.74V8.7c0-2.52 0-3.78.49-4.74a4.5 4.5 0 011.97-1.97c.96-.49 2.22-.49 4.74-.49h.97c.5 0 .74 0 .97.06.2.04.4.13.58.23.2.13.37.3.72.65l3.62 3.62c.35.35.52.52.65.72zM10.3 17h-.6c-1.28 0-2.16 0-2.83-.06-.66-.05-1-.15-1.23-.27a3 3 0 01-1.31-1.3 3.24 3.24 0 01-.27-1.24C4 13.46 4 12.58 4 11.3V8.7c0-1.28 0-2.16.06-2.83.05-.66.15-1 .27-1.23a3 3 0 011.3-1.31c.24-.12.58-.22 1.24-.27C7.54 3 8.42 3 9.7 3h.3v1.28c0 .67 0 1.23.04 1.67.03.47.12.88.31 1.28.32.6.81 1.1 1.42 1.42.4.2.81.28 1.28.31.44.04 1 .04 1.67.04H16v2.3c0 1.28 0 2.16-.06 2.83-.05.66-.15 1-.27 1.23a3 3 0 01-1.3 1.31c-.24.12-.58.22-1.24.27-.67.06-1.55.06-2.83.06zm5.57-9.5h-1.12c-.71 0-1.2 0-1.58-.03a1.88 1.88 0 01-.71-.16c-.33-.17-.6-.44-.77-.77a1.88 1.88 0 01-.16-.7 21.6 21.6 0 01-.03-1.59V3.13l.01.01.37.36 3.62 3.62.36.37.01.01z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"document_outline_20"}}r.d(t,{getIcon20DocumentOutline:()=>n})},357134:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_20__Icons-20/music_outline_20"><g id="music_outline_20__music_outline_20"><path d="M0 0h20v20H0z"/><path d="M14.73 2.05a2.28 2.28 0 012.75 2.23v7.99c0 3.57-3.5 5.4-5.39 3.51-1.9-1.9-.06-5.38 3.52-5.38h.37V6.76L8 8.43v5.82c0 3.5-3.35 5.34-5.27 3.62l-.11-.1c-1.9-1.9-.06-5.4 3.51-5.4h.37V6.24c0-.64.05-1 .19-1.36l.05-.13c.17-.38.43-.7.76-.93.36-.26.7-.4 1.41-.54zM6.5 13.88h-.37c-2.32 0-3.34 1.94-2.45 2.82.88.89 2.82-.13 2.82-2.45v-.37zm9.48-1.98h-.37c-2.32 0-3.34 1.94-2.46 2.82.89.89 2.83-.13 2.83-2.45v-.37zm-.02-7.78a.78.78 0 00-.92-.6L9.06 4.77c-.4.09-.54.15-.68.25a.8.8 0 00-.27.33c-.08.18-.1.35-.1.88v.67l7.97-1.67v-.95-.08z" id="music_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"music_outline_20"}}r.d(t,{getIcon20MusicOutline:()=>n})},670570:(e,t,r)=>{"use strict";function n(){return{icon:'<svg height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z"/><path d="M10.53 1.5c.69.17 1.29.51 1.77 1.03.53.56.82 1.16 1.16 2.44l.3 1.14a.75.75 0 11-1.44.38l-.3-1.13c-.3-1.07-.48-1.45-.81-1.8-.28-.3-.62-.5-1.02-.6-.44-.1-.84-.08-1.75.16l-.22.05-2.23.6c-.88.24-1.3.42-1.6.63l-.07.06-.14.12c-.3.28-.49.62-.58 1.01-.1.41-.09.78.1 1.55l.1.42 1.9 7.06.11.42c.23.76.4 1.09.7 1.4.27.29.61.48 1 .58.48.1.9.08 1.98-.2l.56-.16a.75.75 0 01.4 1.45l-.57.15c-1.3.34-1.96.4-2.7.22a3.48 3.48 0 01-1.77-1.02 4.76 4.76 0 01-1.1-2.2L4.25 15l-1.9-7.06c-.34-1.29-.39-1.95-.21-2.7.14-.6.43-1.15.86-1.61l.17-.17.18-.15a5.1 5.1 0 012-.93l.25-.07 2.23-.6c1.3-.34 1.96-.39 2.7-.21zm5.6 6.75a3.2 3.2 0 013.12 3.28c0 1.75-.66 2.64-3.32 4.84l-1.15.96c-.45.37-1.1.37-1.56 0l-1.41-1.17c-2.44-2.05-3.06-2.93-3.06-4.63a3.2 3.2 0 015.12-2.65l.13.1.13-.1a3.44 3.44 0 011.78-.62zm0 1.5c-.59 0-1.1.24-1.58.75l-.19.2a.5.5 0 01-.72 0l-.19-.2c-.47-.51-.99-.75-1.58-.75-.88 0-1.62.78-1.62 1.78 0 1.16.44 1.75 2.77 3.69l.98.8.98-.8c2.25-1.87 2.74-2.49 2.77-3.58v-.11c0-1-.74-1.78-1.62-1.78z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"narrative_outline_20"}}r.d(t,{getIcon20NarrativeOutline:()=>n})},397366:(e,t,r)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 17a7 7 0 110-14 7 7 0 010 14zm-8.5-7a8.5 8.5 0 1117 0 8.5 8.5 0 01-17 0zm8.65 3.38l2.7-1.56a2.1 2.1 0 000-3.64l-2.7-1.56A2.1 2.1 0 007 8.44v3.12a2.1 2.1 0 003.15 1.82zm1.95-3.9c.4.23.4.8 0 1.04l-2.7 1.56a.6.6 0 01-.9-.52V8.44c0-.46.5-.75.9-.52z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"video_circle_outline_20"}}r.d(t,{getIcon20VideoCircleOutline:()=>n})},214377:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.59 3c2.18 0 3.23.2 4.32.79a5.54 5.54 0 012.3 2.3c.59 1.09.79 2.14.79 4.32v7.18c0 2.18-.2 3.23-.79 4.32a5.54 5.54 0 01-2.3 2.3c-1.09.59-2.14.79-4.32.79h-7.18c-2.18 0-3.23-.2-4.32-.79a5.54 5.54 0 01-2.3-2.3C3.2 20.82 3 19.77 3 17.6v-7.18c0-2.18.2-3.23.79-4.32a5.54 5.54 0 012.3-2.3C7.18 3.2 8.23 3 10.4 3h7.18zm0 2h-7.18c-1.88 0-2.62.14-3.38.55-.64.34-1.14.84-1.48 1.48-.4.76-.55 1.5-.55 3.38v7.18c0 1.88.14 2.62.55 3.38.34.64.84 1.14 1.48 1.48.76.4 1.5.55 3.38.55h7.18c1.88 0 2.62-.14 3.38-.55a3.54 3.54 0 001.48-1.48c.4-.76.55-1.5.55-3.38v-7.18c0-1.88-.14-2.62-.55-3.38a3.54 3.54 0 00-1.48-1.48c-.76-.4-1.5-.55-3.38-.55zM13 17.5a1 1 0 110 2H9a1 1 0 110-2h4zm6-4.5a1 1 0 110 2H9a1 1 0 110-2h10zm0-4.5a1 1 0 110 2H9a1 1 0 110-2h10z" fill="currentColor"/></svg>',name:"article_outline_28"}}r.d(t,{getIcon28ArticleOutline:()=>n})},998354:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="attach_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="attach_outline_28__attach_outline_28"><path d="M0 0h28v28H0z"/><path d="M14.19 10.9a1 1 0 111.41 1.41l-4.17 4.17a1.5 1.5 0 000 2.12c.6.6 1.56.57 2.12 0l7.78-7.77a4 4 0 00-5.66-5.66L7.9 12.95a6.52 6.52 0 000 9.19 6.52 6.52 0 009.19 0l4.17-4.17a1 1 0 011.41 1.41l-4.17 4.17a8.52 8.52 0 01-12.02 0 8.52 8.52 0 010-12.02l7.78-7.77a6 6 0 018.48 8.48l-7.77 7.78a3.5 3.5 0 01-4.95-4.95l4.17-4.17z" id="attach_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"attach_outline_28"}}r.d(t,{getIcon28AttachOutline:()=>n})},23277:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="document_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="document_outline_28__document_outline_28"><path d="M0 0h28v28H0z"/><path d="M15.2 2.12c.41.1.78.25 1.13.47.36.22.63.45 1.2 1.02l4.86 4.87c.57.56.8.83 1.02 1.2.22.34.37.7.47 1.11.1.41.12.77.12 1.57v6.87c0 1.98-.19 2.94-.72 3.94-.48.9-1.2 1.63-2.11 2.11-1 .53-1.96.72-3.94.72h-6.46c-1.98 0-2.94-.19-3.94-.72a5.09 5.09 0 01-2.11-2.11c-.53-1-.72-1.96-.72-3.94V8.07c0-1.29.23-2.33.72-3.24.48-.9 1.2-1.63 2.11-2.11A6.66 6.66 0 0110.07 2h3.57c.8 0 1.16.03 1.57.12zM13.84 4h-3.76a4.7 4.7 0 00-2.3.48c-.56.3-.99.73-1.29 1.3A4.7 4.7 0 006 8.06v11.16c0 1.68.13 2.33.48 3 .3.56.73.99 1.3 1.29.66.35 1.31.48 2.99.48h6.46c1.68 0 2.33-.13 3-.48.56-.3.99-.73 1.29-1.3.35-.66.48-1.31.48-2.99v-6.87V12h-5.5A2.5 2.5 0 0114 9.5V4h-.17zm2.28 1.02l-.11-.1V9.5c0 .25.18.45.41.5h4.68a30.5 30.5 0 00-.11-.1L16.1 5.01z" id="document_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"document_outline_28"}}r.d(t,{getIcon28DocumentOutline:()=>n})},899500:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.15 8c1.34 0 1.83.14 2.32.4.48.26.87.65 1.13 1.13l.1.19c.2.44.3.96.3 2.13v7.68c-.04 2.02-.3 2.83-.73 3.66a5 5 0 01-2.08 2.08c-.9.47-1.79.73-4.24.73H9.47c-2.02-.04-2.83-.3-3.66-.73a5 5 0 01-2.08-2.08c-.45-.86-.7-1.71-.73-3.94v-7.4c0-1.34.14-1.83.4-2.32.26-.48.65-.87 1.13-1.13l.19-.1c.4-.18.88-.28 1.88-.3h14.55zm0 2H6.5c-.63.01-.82.06-1.01.16a.73.73 0 00-.32.32c-.1.2-.15.42-.16 1.18v7.29c0 1.93.13 2.6.5 3.3a3 3 0 001.26 1.25c.69.37 1.36.5 3.3.5h7.89c1.93 0 2.6-.13 3.3-.5a3 3 0 001.25-1.26c.37-.69.5-1.36.5-3.3v-7.1c0-.91-.04-1.14-.16-1.36a.73.73 0 00-.32-.32c-.2-.1-.38-.15-1.01-.16h-.36zM19 12a1 1 0 110 2 1 1 0 010-2zM9 12a1 1 0 110 2 1 1 0 010-2zm5-10a6 6 0 016 6h-2a4 4 0 00-8 0H8a6 6 0 016-6z" fill="currentColor"/></svg>',name:"market_outline_28"}}r.d(t,{getIcon28MarketOutline:()=>n})},813329:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_28__music_outline_28"><path d="M0 0h28v28H0z"/><path d="M11 16.93v2.46c0 4.7-4.58 7.1-7.07 4.61-2.5-2.49-.08-7.07 4.6-7.07H11zm-2 2h-.46c-3.02 0-4.34 2.52-3.2 3.66C6.48 23.73 9 22.4 9 19.39v-.46zm10.39-15.4A3 3 0 0123 6.45v10.43c0 4.7-4.58 7.1-7.07 4.61-2.5-2.49-.08-7.07 4.6-7.07H21v-4.7L11 11.8V18H9V8.92c0-.95.08-1.43.31-1.96.23-.5.56-.9 1-1.23.47-.33.93-.51 1.85-.7zM21 16.42h-.46c-3.02 0-4.34 2.52-3.2 3.66 1.14 1.14 3.66-.18 3.66-3.2v-.46zm-.02-10.17a1 1 0 00-1.18-.78l-7.23 1.5c-.67.15-.88.23-1.08.37-.16.12-.27.25-.35.43-.1.23-.14.45-.14 1.14v.85l10-2.08V6.46a1 1 0 000-.1z" id="music_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"music_outline_28"}}r.d(t,{getIcon28MusicOutline:()=>n})},752963:(e,t,r)=>{"use strict";function n(){return{icon:'<svg fill="none" height="28" viewBox="0 0 28 28" width="28" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M24.11 19.09c.64-.88.88-1.86.89-2.93 0-2.3-1.86-4.16-4.16-4.16a5 5 0 00-2.7.82l-.14.1-.14-.1a4.76 4.76 0 00-2.7-.82A4.16 4.16 0 0011 16.16c0 1.07.25 2.06.89 2.93.66.91 1.77 1.9 3.55 3.3l1.65 1.3c.53.42 1.29.42 1.82 0l1.65-1.3c1.77-1.4 2.89-2.39 3.55-3.3zm-10.6-1.18c.48.66 1.37 1.5 3.17 2.9L18 21.87l1.32-1.04c1.8-1.42 2.7-2.25 3.18-2.9.39-.54.5-1.1.5-1.76 0-1.2-.97-2.16-2.16-2.16-.8 0-1.5.3-2.13.94l-.36.35a.5.5 0 01-.7 0l-.36-.35a2.9 2.9 0 00-2.13-.94c-1.2 0-2.16.97-2.16 2.16 0 .65.12 1.22.5 1.75z"/><path d="M7.65 3.47l3.36-.9c.78-.2 1.42-.38 1.95-.48.56-.1 1.08-.13 1.62-.02a4 4 0 012.14 1.23c.36.4.6.88.78 1.41.18.52.36 1.16.56 1.93l.68 2.54a1 1 0 01-1.93.52l-.67-2.5c-.22-.83-.37-1.39-.52-1.81a2.16 2.16 0 00-.39-.75 2 2 0 00-1.07-.62c-.17-.03-.4-.04-.84.04-.44.08-1 .23-1.83.46L8.2 5.4c-.82.22-1.38.37-1.81.52-.41.15-.61.27-.74.39a2 2 0 00-.62 1.07c-.04.17-.04.4.04.83.08.45.23 1.01.45 1.84L8.2 20.09c.22.83.37 1.4.52 1.82.15.41.27.61.4.74a2 2 0 001.06.62c.34.07.79.01 2.1-.33a1 1 0 01.5 1.93c-1.18.31-2.12.55-3.01.36a4 4 0 01-2.15-1.24c-.36-.4-.59-.88-.78-1.4-.18-.52-.35-1.16-.56-1.94L3.58 10.53c-.21-.78-.39-1.42-.48-1.96a4.09 4.09 0 01-.03-1.6 4 4 0 011.24-2.15c.4-.36.88-.6 1.4-.78.52-.19 1.16-.36 1.94-.57z"/></g></svg>',name:"narrative_outline_28"}}r.d(t,{getIcon28NarrativeOutline:()=>n})},149791:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="place_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="place_outline_28__place_outline_28"><path d="M0 0h28v28H0z"/><path d="M23 12.01a9 9 0 10-18 0c0 3.55 2.18 7.83 6.48 12.92a3.3 3.3 0 005.04 0c4.3-5.09 6.48-9.37 6.48-12.92zM14.84 23.8a1.3 1.3 0 01-1.83-.15C8.98 18.88 7 14.98 7 12a7 7 0 1114 0c0 2.97-1.98 6.87-6 11.63l-.16.15zM10 12a4 4 0 118 0 4 4 0 01-8 0zm2 0a2 2 0 104 0 2 2 0 00-4 0z" id="place_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"place_outline_28"}}r.d(t,{getIcon28PlaceOutline:()=>n})},908667:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="playlist_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="playlist_outline_28__playlist_outline_28"><path d="M0 0h28v28H0z"/><path d="M24.78 4.02A1 1 0 0126 5v2.1a3.6 3.6 0 01-2.67 3.48l-3.33.89v7.92c0 4.7-4.58 7.1-7.07 4.61-2.58-2.57-.11-6.8 5.07-7.06v-6.22a1 1 0 010-.04V8.93c-.03-1.92.91-3.29 2.68-3.88.64-.21 2-.55 4.1-1.03zM18 18.94c-3.54.2-4.84 2.46-3.66 3.65 1.14 1.14 3.66-.18 3.66-3.2zM8.5 17a1 1 0 010 2h-4a1 1 0 010-2h4zm5-6a1 1 0 010 2h-9a1 1 0 010-2h9zM24 6.26c-1.35.31-2.25.54-2.68.69-.94.31-1.34.89-1.32 1.97v.48l2.81-.75A1.6 1.6 0 0024 7.1zM15 5a1 1 0 010 2H4.5a1 1 0 110-2H15z" id="playlist_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"playlist_outline_28"}}r.d(t,{getIcon28PlaylistOutline:()=>n})},9821:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="poll_square_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="poll_square_outline_28__poll_square_outline_28"><path id="poll_square_outline_28__poll_outline_28" d="M0 0h28v28H0z"/><path d="M10.7 5c-2.14 0-2.9.15-3.69.57-.63.33-1.1.81-1.44 1.44C5.15 7.8 5 8.56 5 10.7v6.62c0 2.13.15 2.9.57 3.68.33.63.81 1.1 1.44 1.44.78.42 1.55.57 3.68.57h6.62c2.13 0 2.9-.15 3.68-.57A3.45 3.45 0 0022.43 21c.42-.78.57-1.55.57-3.68v-6.62c0-2.13-.15-2.9-.57-3.68A3.45 3.45 0 0021 5.57C20.2 5.15 19.44 5 17.3 5h-6.62zm0-2h6.6c2.68 0 3.65.28 4.63.8a5.45 5.45 0 012.27 2.27c.52.98.8 1.95.8 4.62v6.62c0 2.67-.28 3.64-.8 4.62a5.45 5.45 0 01-2.27 2.27c-.98.52-1.95.8-4.62.8h-6.62c-2.67 0-3.64-.28-4.62-.8a5.45 5.45 0 01-2.27-2.27c-.52-.98-.8-1.95-.8-4.62v-6.62c0-2.67.28-3.64.8-4.62A5.45 5.45 0 016.07 3.8c.98-.52 1.95-.8 4.62-.8zm.3 16a1 1 0 01-2 0v-6a1 1 0 012 0v6zm4 0a1 1 0 01-2 0V9a1 1 0 012 0v10zm4 0a1 1 0 01-2 0v-4a1 1 0 012 0v4z" id="poll_square_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"poll_square_outline_28"}}r.d(t,{getIcon28PollSquareOutline:()=>n})},919020:(e,t,r)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="video_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="video_outline_28__video_outline_28" fill-rule="nonzero"><path d="M0 0h28v28H0z"/><path d="M14 2a12 12 0 110 24 12 12 0 010-24zm0 2a10 10 0 100 20 10 10 0 000-20zm-2.05 5.12c.35 0 .68.1.98.26l5.08 2.93a1.95 1.95 0 010 3.38l-5.08 2.93a1.95 1.95 0 01-2.93-1.7v-5.84c0-1.08.88-1.96 1.95-1.96zm.05 2.03v5.7L16.94 14 12 11.15z" id="video_outline_28__Icon-Color" fill="currentColor"/></g></g></svg>',name:"video_outline_28"}}r.d(t,{getIcon28VideoOutline:()=>n})},636600:(e,t,r)=>{"use strict";r.d(t,{statlogsValueEvent:()=>o,statlogsProbValueEvent:()=>a});var n=r(486353);function o(e,t,r,n,o){return window.statlogsValueEvent(e,t,r,n,o)}function a(e,t,r,a,i,s){(0,n.randEnabled)(e)&&o(t,r,a,i,s)}},941477:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n="attribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// convert the rectangle from pixels to 0.0 to 1.0\n\tvec2 zeroToOne = a_position / u_resolution;\n\n\t// convert from 0->1 to 0->2\n\tvec2 zeroToTwo = zeroToOne * 2.0;\n\n\t// convert from 0->2 to -1->+1 (clipspace)\n\tvec2 clipSpace = zeroToTwo - 1.0;\n\n\tgl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\n\t// pass the texCoord to the fragment shader\n\t// The GPU will interpolate this value between points.\n\tv_texCoord = a_texCoord;\n}\n"},816524:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n="precision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image0; // image\nuniform sampler2D u_image1; // contrast_negative.png\nuniform sampler2D u_image2; // contrast_positive.png\nuniform sampler2D u_image3; // exposure_negative.png\nuniform sampler2D u_image4; // exposure_positive.png\nuniform sampler2D u_image5; // warm_negative_lut.png\nuniform sampler2D u_image6; // warm_positive_lit.png\nuniform sampler2D u_image7; // color table\n\nuniform float u_exposure;\nuniform float u_contrast;\nuniform float u_saturation;\nuniform float u_warmth;\nuniform float u_amount;\n\nvec3 ContrastSaturationBrightness(vec3 color, float brt, float sat, float con) {\n\tconst float AvgLumR = 0.5;\n\tconst float AvgLumG = 0.5;\n\tconst float AvgLumB = 0.5;\n\n\tconst vec3 LumCoeff = vec3(0.2125, 0.7154, 0.0721);\n\n\tvec3 AvgLumin = vec3(AvgLumR, AvgLumG, AvgLumB);\n\tvec3 brtColor = color * brt;\n\tvec3 intensity = vec3(dot(brtColor, LumCoeff));\n\tvec3 satColor = mix(intensity, brtColor, sat);\n\tvec3 conColor = mix(AvgLumin, satColor, con);\n\n\treturn conColor;\n}\n\nfloat BF_SoftLight(float base, float blend) {\n\treturn 2.0 * base * blend + base * base * (1.0 - 2.0 * blend);\n}\n\nvec3 BF_SoftLight(vec3 base, vec3 blend) {\n\treturn vec3(BF_SoftLight(base.r, blend.r), BF_SoftLight(base.g, blend.g), BF_SoftLight(base.b, blend.b));\n}\n\nvec3 Exposure(vec3 view, float intensity) {\n\tvec3 exposure1;\n\texposure1.r = texture2D(u_image3, vec2(view.r, 0.5)).r;\n\texposure1.g = texture2D(u_image3, vec2(view.g, 0.5)).g;\n\texposure1.b = texture2D(u_image3, vec2(view.b, 0.5)).b;\n\n\tvec3 exposure2;\n\texposure2.r = texture2D(u_image4, vec2(view.r, 0.5)).r;\n\texposure2.g = texture2D(u_image4, vec2(view.g, 0.5)).g;\n\texposure2.b = texture2D(u_image4, vec2(view.b, 0.5)).b;\n\n\tvec3 result;\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, exposure2, intensity);\n\t} else {\n\t\tresult = mix(view, exposure1, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 Contrast(vec3 view, float intensity) {\n\tvec3 contrast1;\n\tcontrast1.r = texture2D(u_image1, vec2(view.r, 0.5)).r;\n\tcontrast1.g = texture2D(u_image1, vec2(view.g, 0.5)).g;\n\tcontrast1.b = texture2D(u_image1, vec2(view.b, 0.5)).b;\n\n\tvec3 contrast2;\n\tcontrast2.r = texture2D(u_image2, vec2(view.r, 0.5)).r;\n\tcontrast2.g = texture2D(u_image2, vec2(view.g, 0.5)).g;\n\tcontrast2.b = texture2D(u_image2, vec2(view.b, 0.5)).b;\n\n\tvec3 result;\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, contrast2, intensity);\n\t} else {\n\t\tresult = mix(view, contrast1, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 ColorTemp(vec3 view, float intensity) {\n\tfloat blueColor = view.b * 63.0;\n\n\tvec2 quad1;\n\tquad1.y = floor(floor(blueColor) / 8.0);\n\tquad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n\tvec2 quad2;\n\tquad2.y = floor(ceil(blueColor) / 8.0);\n\tquad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n\tvec2 texPos1;\n\ttexPos1.x = (quad1.x * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.r);\n\ttexPos1.y = (quad1.y * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.g);\n\n\tvec2 texPos2;\n\ttexPos2.x = (quad2.x * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.r);\n\ttexPos2.y = (quad2.y * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.g);\n\n\tvec3 coldColor1 = texture2D(u_image5, texPos1).rgb;\n\tvec3 coldColor2 = texture2D(u_image5, texPos2).rgb;\n\tvec3 coldColor = mix(coldColor1, coldColor2, fract(blueColor));\n\n\tvec3 warmColor1 = texture2D(u_image6, texPos1).rgb;\n\tvec3 warmColor2 = texture2D(u_image6, texPos2).rgb;\n\tvec3 warmColor = mix(warmColor1, warmColor2, fract(blueColor));\n\n\tvec3 result;\n\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, warmColor, intensity);\n\t} else {\n\t\tresult = mix(view, coldColor, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 Saturation(vec3 view, float intensity) {\n\treturn ContrastSaturationBrightness(view, 1.0, intensity, 1.0);\n}\n\nvec3 Lut(vec3 view, sampler2D tex, float intensity) {\n\tfloat blueColor = view.b * 63.0;\n\n\tvec2 quad1;\n\tquad1.y = floor(floor(blueColor) / 8.0);\n\tquad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n\tvec2 quad2;\n\tquad2.y = floor(ceil(blueColor) / 8.0);\n\tquad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n\tvec2 texPos1;\n\ttexPos1.x = (quad1.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.r);\n\ttexPos1.y = (quad1.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.g);\n\n\tvec2 texPos2;\n\ttexPos2.x = (quad2.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.r);\n\ttexPos2.y = (quad2.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.g);\n\n\tvec3 newColor1 = texture2D(tex, texPos1).rgb;\n\tvec3 newColor2 = texture2D(tex, texPos2).rgb;\n\n\tvec3 newColor = mix(newColor1, newColor2, fract(blueColor));\n\tvec3 color = mix(view, newColor, intensity);\n\n\treturn color;\n}\n\n// [-1.0; 1.0]\nvec3 pExposure(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn Exposure(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pContrast(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn Contrast(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pColorTemp(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn ColorTemp(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pSaturation(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 1.6);\n\tintensity = clamp(intensity, -1.0, 1.0);\n\tintensity = (intensity >= 0.0) ? 1.0 + (range.y - 1.0) * intensity : range.x + (1.0 - range.x) * (intensity + 1.0);\n\treturn Saturation(view, intensity);\n}\n\n// [0.0; 1.0]\nvec3 pLut(vec3 view,sampler2D tex, float intensity) {\n\tvec2 range = vec2(0.0, 1.0);\n\tintensity = clamp(intensity, 0.0, 1.0);\n\treturn Lut(view, tex, intensity);\n}\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 texture = texture2D(u_image0, texelCoord);\n\n\ttexture.rgb = pColorTemp(texture.rgb, u_warmth);\n\ttexture.rgb = pLut(texture.rgb, u_image7, u_amount);\n\ttexture.rgb = pExposure(texture.rgb, u_exposure);\n\ttexture.rgb = pContrast(texture.rgb, u_contrast);\n\ttexture.rgb = pSaturation(texture.rgb, u_saturation);\n\n\tgl_FragColor = texture;\n}\n"},574111:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n="precision mediump float;\n\nuniform sampler2D u_image0; // blurred image\nuniform sampler2D u_image1; // original image\nuniform vec2 u_position;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 color = texture2D(u_image0, texelCoord);\n\tfloat distanceFromCenter = distance(u_position, texelCoord);\n\n\tcolor = mix(texture2D(u_image1, texelCoord), color, clamp(smoothstep(0.3 - 0.2, 0.3, distanceFromCenter), 0.0, 1.0));\n\tgl_FragColor = color;\n}\n"},203603:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n="precision mediump float;\n\nuniform sampler2D u_image0; // blurred image\nuniform sampler2D u_image1; // original image\nuniform vec2 u_position;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 color = texture2D(u_image0, texelCoord);\n\tvec2 realPosition = u_position;\n\trealPosition.x = texelCoord.x;\n\n\tfloat distanceFromCenter = distance(realPosition, texelCoord);\n\tcolor = mix(texture2D(u_image1, texelCoord), color, clamp(smoothstep(0.2 - 0.1, 0.2, distanceFromCenter), 0.0, 1.0));\n\n\tgl_FragColor = color;\n}\n"},736458:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n="precision mediump float;\n\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = texture2D(u_texture, vec2(v_texCoord.x, 1.0 - v_texCoord.y));\n\tgl_FragColor = color;\n}\n"},270591:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n="precision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image0;\n\nuniform float u_vignette;\nuniform float u_sharpness;\nuniform float u_grain;\n\nuniform vec2 u_sourceSize;\n\nvec4 rnm(in vec2 tc) {\n\tfloat timer = 0.4;\n\tfloat noise = sin(dot(tc + vec2(timer, timer), vec2(12.9898, 78.233))) * 43758.5453;\n\n\tfloat noiseR = fract(noise) * 2.0 - 1.0;\n\tfloat noiseG = fract(noise * 1.2154) * 2.0 - 1.0;\n\tfloat noiseB = fract(noise * 1.3453) * 2.0 - 1.0;\n\tfloat noiseA = fract(noise * 1.3647) * 2.0 - 1.0;\n\n\treturn vec4(noiseR,noiseG,noiseB,noiseA);\n}\n\nfloat fade(in float t) {\n\treturn t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n\nfloat pnoise3D(in vec3 p) {\n\tvec3 pi = 0.00195313 * floor(p) + 0.00195313;\n\tvec3 pf = fract(p); // Fractional part for interpolation\n\n\t// Noise contributions from (x=0, y=0), z=0 and z=1\n\tfloat perm00 = rnm(pi.xy).a ;\n\tvec3  grad000 = rnm(vec2(perm00, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n000 = dot(grad000, pf);\n\tvec3  grad001 = rnm(vec2(perm00, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n001 = dot(grad001, pf - vec3(0.0, 0.0, 1.0));\n\n\t// Noise contributions from (x=0, y=1), z=0 and z=1\n\tfloat perm01 = rnm(pi.xy + vec2(0.0, 0.00195313)).a ;\n\tvec3  grad010 = rnm(vec2(perm01, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n010 = dot(grad010, pf - vec3(0.0, 1.0, 0.0));\n\tvec3  grad011 = rnm(vec2(perm01, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n011 = dot(grad011, pf - vec3(0.0, 1.0, 1.0));\n\n\t// Noise contributions from (x=1, y=0), z=0 and z=1\n\tfloat perm10 = rnm(pi.xy + vec2(0.00195313, 0.0)).a ;\n\tvec3  grad100 = rnm(vec2(perm10, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n100 = dot(grad100, pf - vec3(1.0, 0.0, 0.0));\n\tvec3  grad101 = rnm(vec2(perm10, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n101 = dot(grad101, pf - vec3(1.0, 0.0, 1.0));\n\n\t// Noise contributions from (x=1, y=1), z=0 and z=1\n\tfloat perm11 = rnm(pi.xy + vec2(0.00195313, 0.00195313)).a ;\n\tvec3  grad110 = rnm(vec2(perm11, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n110 = dot(grad110, pf - vec3(1.0, 1.0, 0.0));\n\tvec3  grad111 = rnm(vec2(perm11, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n111 = dot(grad111, pf - vec3(1.0, 1.0, 1.0));\n\n\t// Blend contributions along x\n\tvec4 n_x = mix(vec4(n000, n001, n010, n011), vec4(n100, n101, n110, n111), fade(pf.x));\n\n\t// Blend contributions along y\n\tvec2 n_xy = mix(n_x.xy, n_x.zw, fade(pf.y));\n\n\t// Blend contributions along z\n\tfloat n_xyz = mix(n_xy.x, n_xy.y, fade(pf.z));\n\n\t// We're done, return the final noise value.\n\treturn n_xyz;\n}\n\n//2d coordinate orientation thing\nvec2 coordRot(in vec2 tc, in float angle) {\n\tfloat aspect = u_sourceSize.x / u_sourceSize.y;\n\tvec2 uv = (tc * 2.0) - 1.0;\n\tfloat rotX = (uv.x * aspect * cos(angle)) - (uv.y * sin(angle));\n\tfloat rotY = (uv.y * cos(angle)) + (uv.x * aspect * sin(angle));\n\trotX = ((rotX / aspect) * 0.5 + 0.5);\n\trotY = rotY * 0.5 + 0.5;\n\treturn vec2(rotX, rotY);\n}\n\nvec3 BF_Multiply(vec3 base, vec3 blend) {\n\treturn base * blend;\n}\n\nfloat BF_Screen(float base, float blend) {\n\treturn 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 BF_Screen(vec3 base, vec3 blend) {\n\treturn 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 Sharpness(vec3 view, float intensity) {\n\tvec2 uv = v_texCoord;\n\tvec2 step = 1.0 / u_sourceSize;\n\n\tvec3 texA = texture2D(u_image0, uv + vec2(-step.x, -step.y) * 1.0).rgb;\n\tvec3 texB = texture2D(u_image0, uv + vec2( step.x, -step.y) * 1.0).rgb;\n\tvec3 texC = texture2D(u_image0, uv + vec2(-step.x,  step.y) * 1.0).rgb;\n\tvec3 texD = texture2D(u_image0, uv + vec2( step.x,  step.y) * 1.0).rgb;\n\n\tvec3 around = 0.25 * (texA + texB + texC + texD);\n\tvec3 center  = texture2D(u_image0, uv ).rgb;\n\tvec3 col = center + (center - around) * intensity;\n\n\treturn col;\n}\n\nvec3 Grain(vec3 view, float intensity) {\n\tvec2 texCoord = v_texCoord;\n\n\tfloat timer = 0.4;\n\tfloat coloramount = 0.4;\n\tfloat grainsize = 2.0;\n\tfloat lumamount = 0.3;\n\n\tbool colored = true;\n\n\tvec3 rotOffset = vec3(1.425, 3.892, 5.835); // rotation offset values\n\tvec2 rotCoordsR = coordRot(texCoord, timer + rotOffset.x);\n\tvec3 noise = vec3(pnoise3D(vec3(rotCoordsR * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 0.0)));\n\n\tif (colored) {\n\t\tvec2 rotCoordsG = coordRot(texCoord, timer + rotOffset.y);\n\t\tvec2 rotCoordsB = coordRot(texCoord, timer + rotOffset.z);\n\t\tnoise.g = mix(noise.r, pnoise3D(vec3(rotCoordsG * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 1.0)), coloramount);\n\t\tnoise.b = mix(noise.r, pnoise3D(vec3(rotCoordsB * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 2.0)), coloramount);\n\t}\n\n\tvec3 col = view.rgb;\n\tvec3 lumcoeff = vec3(0.299, 0.587, 0.114);\n\tfloat luminance = lumamount * dot(col, lumcoeff);\n\tfloat lum = smoothstep(0.2, 0.0, luminance);\n\n\tlum += luminance;\n\tnoise = mix(noise, vec3(0.0), pow(lum, 4.0));\n\tcol = col + noise * intensity;\n\n\treturn col;\n}\n\nvec3 Vignette(vec3 view, float intensity) {\n\tfloat inten = abs(intensity);\n\tfloat dist = distance(v_texCoord, vec2(0.5, 0.5));\n\tfloat size = 0.5 - inten * 0.4;\n\tfloat amount = inten * inten * 0.1 + 0.5 * inten;\n\tfloat vignette = smoothstep(0.8, size * 0.799, dist * (amount + size));\n\treturn (intensity >= 0.0) ? view * vignette : BF_Screen(view,vec3(1.0-vignette));\n}\n\n// [-1; 1]\nvec3 pSharpness(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 1.5);\n\tintensity = clamp(intensity, 0.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity+1.0) + range.x;\n\treturn Sharpness(view, intensity);\n}\n\n// [0; 1]\nvec3 pGrain(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 0.2);\n\n\tintensity = clamp(intensity, 0.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity + 1.0) + range.x;\n\treturn Grain(view, intensity);\n}\n\n// [-1; 1]\nvec3 pVignette(vec3 view, float intensity) {\n\tvec2 range = vec2(-1.0, 1.0);\n\tintensity = clamp(intensity, -1.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity + 1.0) + range.x;\n\treturn Vignette(view, intensity);\n}\n\nvoid main() {\n\tvec4 texture = texture2D(u_image0, v_texCoord);\n\n\ttexture.rgb = pSharpness(texture.rgb, u_sharpness);\n\ttexture.rgb = pVignette(texture.rgb, u_vignette);\n\ttexture.rgb = pGrain(texture.rgb, u_grain);\n\n\tgl_FragColor = texture;\n}\n"},668851:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n="precision mediump float;\n\nuniform sampler2D u_image0; // original image\nuniform vec2 u_delta;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\tfloat offset = fract(sin(dot(gl_FragCoord.xyz, vec3(12.9898, 78.233, 151.7182))) * 43758.5453);\n\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sampleColor = texture2D(u_image0, v_texCoord + u_delta * percent);\n\t\tsampleColor.rgb *= sampleColor.a;\n\n\t\tcolor += sampleColor * weight;\n\t\ttotal += weight;\n\t}\n\n\tcolor = color / total;\n\tcolor.rgb /= color.a + 0.00001;\n\tgl_FragColor = color;\n}\n"},929804:(e,t,r)=>{"use strict";var n=r(14890).compose;t.__esModule=!0,t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?n:n.apply(null,arguments)},t.devToolsEnhancer=function(){return function(e){return e}}},753894:(e,t,r)=>{"use strict";function n(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}r.d(t,{default:()=>a});var o=n();o.withExtraArgument=n;const a=o},942236:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionCreators=t.ActionTypes=void 0;var r={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};t.ActionTypes=r;var n={undo:function(){return{type:r.UNDO}},redo:function(){return{type:r.REDO}},jumpToFuture:function(e){return{type:r.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:r.JUMP_TO_PAST,index:e}},jump:function(e){return{type:r.JUMP,index:e}},clearHistory:function(){return{type:r.CLEAR_HISTORY}}};t.ActionCreators=n},18823:(e,t)=>{"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e){n=e},t.start=function(e,t){void(o={header:[],prev:[],action:[],next:[],msgs:[]}),n&&(console.group?(o.header=["%credux-undo","font-style: italic","action",e.type],o.action=l("action",i,e),o.prev=l("prev history",a,t)):(o.header=["redux-undo action",e.type],o.action=["action",e],o.prev=["prev history",t]))},t.end=function(e){n&&(console.group?o.next=l("next history",s,e):o.next=["next history",e],function(){var e=o,t=e.header,n=e.prev,a=e.next,i=e.action,s=e.msgs;if(console.group){var l,c,u,d,p;(l=console).groupCollapsed.apply(l,r(t)),(c=console).log.apply(c,r(n)),(u=console).log.apply(u,r(i)),(d=console).log.apply(d,r(a)),(p=console).log.apply(p,r(s)),console.groupEnd()}else{var h,_,f,g,m;(h=console).log.apply(h,r(t)),(_=console).log.apply(_,r(n)),(f=console).log.apply(f,r(i)),(g=console).log.apply(g,r(a)),(m=console).log.apply(m,r(s))}}())},t.log=function(){if(n){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o.msgs=o.msgs.concat([].concat(t,["\n"]))}};var a="#9E9E9E",i="#03A9F4",s="#4CAF50";function l(e,t,r){return["%c".concat(e),"color: ".concat(t,"; font-weight: bold"),r]}},891619:(e,t)=>{"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActions=r,t.isHistory=function(e){return void 0!==e.present&&void 0!==e.future&&void 0!==e.past&&Array.isArray(e.future)&&Array.isArray(e.past)},t.includeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0}},t.excludeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)<0}},t.combineFilters=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return function(r,n,o){return e(r,n,o)&&t(r,n,o)}}),(function(){return!0}))},t.groupByActionTypes=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0?e.type:null}},t.newHistory=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{past:e,present:t,future:r,group:n,_latestUnfiltered:t,index:e.length,limit:e.length+r.length+1}}},21090:(e,t,r)=>{"use strict";Object.defineProperty(t,"ActionCreators",{enumerable:!0,get:function(){return o.ActionCreators}}),Object.defineProperty(t,"includeAction",{enumerable:!0,get:function(){return a.includeAction}}),Object.defineProperty(t,"combineFilters",{enumerable:!0,get:function(){return a.combineFilters}}),Object.defineProperty(t,"newHistory",{enumerable:!0,get:function(){return a.newHistory}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var n,o=r(942236),a=r(891619),i=(n=r(582479))&&n.__esModule?n:{default:n}},582479:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.set(t.debug);var r,n=c({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:a.ActionTypes.UNDO,redoType:a.ActionTypes.REDO,jumpToPastType:a.ActionTypes.JUMP_TO_PAST,jumpToFutureType:a.ActionTypes.JUMP_TO_FUTURE,jumpType:a.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},t,{initTypes:(0,i.parseActions)(t.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,i.parseActions)(t.clearHistoryType,[a.ActionTypes.CLEAR_HISTORY])}),s=n.neverSkipReducer?function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];return c({},t,{present:e.apply(void 0,[t.present,r].concat(o))})}:function(e){return e};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.start(a,t);for(var l,c=t,u=arguments.length,d=new Array(u>2?u-2:0),v=2;v<u;v++)d[v-2]=arguments[v];if(!r){if(o.log("history is uninitialized"),void 0===t){var E={type:"@@redux-undo/CREATE_HISTORY"},T=e.apply(void 0,[t,E].concat(d));return c=p(T,n.ignoreInitialState),o.log("do not set initialState on probe actions"),o.end(c),c}(0,i.isHistory)(t)?(c=r=n.ignoreInitialState?t:(0,i.newHistory)(t.past,t.present,t.future),o.log("initialHistory initialized: initialState is a history",r)):(c=r=p(t,n.ignoreInitialState),o.log("initialHistory initialized: initialState is not a history",r))}switch(a.type){case void 0:return c;case n.undoType:return l=g(c,-1),o.log("perform undo"),o.end(l),s.apply(void 0,[l,a].concat(d));case n.redoType:return l=g(c,1),o.log("perform redo"),o.end(l),s.apply(void 0,[l,a].concat(d));case n.jumpToPastType:return l=f(c,a.index),o.log("perform jumpToPast to ".concat(a.index)),o.end(l),s.apply(void 0,[l,a].concat(d));case n.jumpToFutureType:return l=_(c,a.index),o.log("perform jumpToFuture to ".concat(a.index)),o.end(l),s.apply(void 0,[l,a].concat(d));case n.jumpType:return l=g(c,a.index),o.log("perform jump to ".concat(a.index)),o.end(l),s.apply(void 0,[l,a].concat(d));case m(a.type,n.clearHistoryType):return l=p(c.present,n.ignoreInitialState),o.log("perform clearHistory"),o.end(l),s.apply(void 0,[l,a].concat(d));default:if(l=e.apply(void 0,[c.present,a].concat(d)),n.initTypes.some((function(e){return e===a.type})))return o.log("reset history due to init action"),o.end(r),r;if(c._latestUnfiltered===l)return c;var y="function"==typeof n.filter&&!n.filter(a,l,c);if(y){var S=(0,i.newHistory)(c.past,l,c.future,c.group);return n.syncFilter||(S._latestUnfiltered=c._latestUnfiltered),o.log("filter ignored action, not storing it in past"),o.end(S),S}var w=n.groupBy(a,l,c);if(null!=w&&w===c.group){var C=(0,i.newHistory)(c.past,l,c.future,c.group);return o.log("groupBy grouped the action with the previous action"),o.end(C),C}return c=h(c,l,n.limit,w),o.log("inserted new state into history"),o.end(c),c}}};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(18823)),a=r(942236),i=r(891619);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){var r=(0,i.newHistory)([],e,[]);return t&&(r._latestUnfiltered=null),r}function h(e,t,r,n){var a=e.past.length+1;o.log("inserting",t),o.log("new free: ",r-a);var s=e.past,l=e._latestUnfiltered,c=r&&r<=a,u=s.slice(c?1:0),p=null!=l?[].concat(d(u),[l]):u;return(0,i.newHistory)(p,t,[],n)}function _(e,t){if(t<0||t>=e.future.length)return e;var r=e.past,n=e.future,o=e._latestUnfiltered,a=[].concat(d(r),[o],d(n.slice(0,t))),s=n[t],l=n.slice(t+1);return(0,i.newHistory)(a,s,l)}function f(e,t){if(t<0||t>=e.past.length)return e;var r=e.past,n=e.future,o=e._latestUnfiltered,a=r.slice(0,t),s=[].concat(d(r.slice(t+1)),[o],d(n)),l=r[t];return(0,i.newHistory)(a,l,s)}function g(e,t){return t>0?_(e,t-1):t<0?f(e,e.past.length+t):e}function m(e,t){return t.indexOf(e)>-1?e:!e}},306279:(e,t,r)=>{"use strict";r.d(t,{ERRORS:()=>n});var n={NOT_FOUND_WEBGL_CONTEXT:"WebGL context not found",TEXTURE_CREATE_FAILED:"Create texture failed",SHADER_COMPILE_FAILED:"Shader compile failed",PROGRAM_CREATE_FAILED:"Create program failed",PROGRAM_CREATE_FRAMEBUFFER_FAILED:"Create framebuffer failed",PROGRAM_FRAMEBUFFER_INCOMPLETE:"Incomplete framebuffer",FILTER_NOT_FOUND:"Filter not found",FILTER_LOADING_TEXTURES_FAILED:"Filter loading textures failed"}},698980:(e,t,r)=>{"use strict";r.d(t,{Renderer:()=>y});var n=r(570655),o=r(557069),a=r(330849),i=r(889406),s=r(306279),l=r(941477),c=r(816524),u=r(270591),d=r(736458),p=r(668851),h=r(574111),_=r(203603),f=r(24535),g=r(16634),m={preserveDrawingBuffer:!0,premultipliedAlpha:!1},v=document.createElement("canvas"),E=v.getContext("webgl",m)||v.getContext("experimental-webgl",m),T={},y=function(){function e(){this.baseColorCorrectionProgram=new a.ShaderProgram(E,l.default,c.default),this.postProcessProgram=new a.ShaderProgram(E,l.default,u.default),this.flippedProgram=new a.ShaderProgram(E,l.default,d.default),this.triangleBlurProgram=new a.ShaderProgram(E,l.default,p.default),this.roundBlurProgram=new a.ShaderProgram(E,l.default,h.default),this.squareBlurProgram=new a.ShaderProgram(E,l.default,_.default),this.colorCorrectionTexture=new i.Texture(E),this.postProcessTexture=new i.Texture(E),this.blurTexture1=new i.Texture(E),this.blurTexture2=new i.Texture(E),this.resultBlurTexture=new i.Texture(E)}return e.getOrCreateTexture=function(t,r,n){var o=n?r.src+"_auto":r.src;if(!T[o]){var a=void 0;a=n?e.getAuto(r):r;var s=new i.Texture(t);s.attachImage(t,a),T[o]=s}return T[o]},e.loadTextures=function(t,r){return new Promise((function(n){var o=[],a=r.map((function(e){return f.imageCacheGlobal.get(e)}));Promise.all(a).then((function(r){r.forEach((function(r){var n=e.getOrCreateTexture(t,r);o.push(n)})),n(o)})).catch((function(){}))}))},e.getAuto=function(e){var t=document.createElement("canvas"),r=t.getContext("2d");if(!r)return t;t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height);var n=e.width*e.height,o=255,a=r.getImageData(0,0,e.width,e.height),i=a.data;function s(e,t,r,n){t+r>=e&&(t=(e-1)/2,r=(e-1)/2);var a=function(e,t,r,n){for(var o,a=256,s=[],l=0;l<256;l++)s.push(0);for(o=0;o<e;o++)s[i[4*o+n]]+=1;for(o=1;o<a;o++)s[o]+=s[o-1];var c={};for(o=0;o<a&&s[o]<=t;)o++;for(c.min=o,o=255;o<a&&s[o]>e-r;)o--;return o<255&&o++,c.max=o,c}(e,t,r,n);!function(e,t,r,n){var a,s;if(r<=t)for(a=0;a<e;a++)i[(s=4*a)+n]=127.5;else{var l=new Array(256);for(a=0;a<t;a++)l[a]=0;for(a=t;a<r;a++)l[a]=(a-t)*o/(r-t)+.5;for(a=r;a<256;a++)l[a]=o;for(a=0;a<e;a++)i[(s=4*a)+n]=l[i[s+n]]}}(e,a.min,a.max,n)}!function(e,t,r){s(e,t,r,0),s(e,t,r,1),s(e,t,r,2)}(n,.01*n,.01*n),r.putImageData(a,0,0);var l=document.createElement("canvas");return l.width=e.width,l.height=e.height,null==(r=l.getContext("2d"))||r.drawImage(t,0,0,t.width,t.height),t},e.prototype.render=function(t,r,a,i,l,c,u){var d=this;return void 0===l&&(l={}),new Promise((function(p){requestAnimationFrame((function(){if(!E)throw new Error(s.ERRORS.NOT_FOUND_WEBGL_CONTEXT);var h=(0,g.getColorTable)(i);if(!h)throw new Error(s.ERRORS.FILTER_NOT_FOUND);var _=e.getOrCreateTexture(E,a,u);e.loadTextures(E,h).then((function(e){var a=d.postProcessTexture;if(d.baseColorCorrectionProgram.draw({width:t,height:r,uniforms:{u_exposure:l.exposure,u_contrast:l.contrast,u_warmth:l.warmth,u_saturation:l.saturation,u_amount:l.amount},textures:(0,n.__spreadArray)([_],(0,n.__read)(e))},d.colorCorrectionTexture),d.postProcessProgram.draw({width:t,height:r,uniforms:{u_vignette:l.vignette,u_sharpness:l.sharpness,u_sourceSize:l.sourceSize,u_grain:l.grain},textures:[d.colorCorrectionTexture]},d.postProcessTexture),c&&c.isEnabled){var i=c.form===o.default.BLUR_TYPES.ROUND?d.roundBlurProgram:d.squareBlurProgram;d.triangleBlurProgram.draw({width:t,height:r,uniforms:{u_delta:[c.size/t,0]},textures:[d.postProcessTexture]},d.blurTexture1),d.triangleBlurProgram.draw({width:t,height:r,uniforms:{u_delta:[0,c.size/r]},textures:[d.blurTexture1]},d.blurTexture2),i.draw({width:t,height:r,uniforms:{u_position:c.position},textures:[d.blurTexture2,d.postProcessTexture]},d.resultBlurTexture),a=d.resultBlurTexture}return d.flippedProgram.draw({width:t,height:r,uniforms:{},textures:[a]}),p(v)})).catch((function(e){console.error(new Error(e))}))}))}))},e}()},179072:(e,t,r)=>{"use strict";r.d(t,{Shader:()=>o});var n=r(306279),o=function(e,t,r){var o=e.createShader(r);if(!o)throw new Error(n.ERRORS.SHADER_COMPILE_FAILED);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Error(""+e.getShaderInfoLog(o));this.shader=o}},330849:(e,t,r)=>{"use strict";r.d(t,{ShaderProgram:()=>s});var n=r(179072),o=r(889406),a=r(306279),i=r(442699),s=function(){function e(e,t,r){if(!e)throw new Error(a.ERRORS.NOT_FOUND_WEBGL_CONTEXT);var o=new n.Shader(e,t,e.VERTEX_SHADER).shader,i=new n.Shader(e,r,e.FRAGMENT_SHADER).shader;this.gl=e,this.program=this.createProgram(o,i),this.framebuffer=e.createFramebuffer()}return e.prototype.createProgram=function(e,t){var r=this.gl.createProgram();if(!r)throw new Error(a.ERRORS.PROGRAM_CREATE_FAILED);if(this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r),!this.gl.getProgramParameter(r,this.gl.LINK_STATUS))throw new Error(""+this.gl.getProgramInfoLog(r));return r},e.prototype.destroy=function(){this.gl.deleteProgram(this.program)},e.prototype.attribute=function(e,t){var r=this.gl.getAttribLocation(this.program,e),n=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(r),this.gl.vertexAttribPointer(r,2,this.gl.FLOAT,!1,0,0)},e.prototype.uniforms=function(e){for(var t in this.gl.useProgram(this.program),e)if(e.hasOwnProperty(t)){var r=this.gl.getUniformLocation(this.program,t),n=e[t];if(Array.isArray(n))switch(n.length){case 1:this.gl.uniform1fv(r,new Float32Array(n));break;case 2:this.gl.uniform2fv(r,new Float32Array(n));break;case 3:this.gl.uniform3fv(r,new Float32Array(n));break;case 4:this.gl.uniform4fv(r,new Float32Array(n))}else(0,i.isNumber)(n)&&this.gl.uniform1f(r,n)}},e.prototype.textures=function(e,t){var r=this;this.gl.useProgram(this.program),e.forEach((function(e,n){t?(e.use(r.gl,n),r.gl.uniform1i(r.gl.getUniformLocation(r.program,"u_image"+n),n)):o.Texture.unuse(r.gl,n)}))},e.prototype.draw=function(e,t){this.gl.useProgram(this.program),t&&(t.updateSize(this.gl,e.width,e.height),this.bindTexture(t.texture)),this.gl.canvas.width=e.width,this.gl.canvas.height=e.height,this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight);var r=e.width,n=e.height;this.attribute("a_position",[0,0,r,0,0,n,0,n,r,0,r,n]),this.attribute("a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1]),this.uniforms(Object.assign(e.uniforms,{u_resolution:[e.width,e.height]})),e.textures&&this.textures(e.textures,!0),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,6),e.textures&&this.textures(e.textures,!1),t&&this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)},e.prototype.bindTexture=function(e,t){if(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e,0),t){var r=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);if(r!==this.gl.FRAMEBUFFER_COMPLETE){var n="";switch(r){case this.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:n="The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.";break;case this.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:n="There is no attachment.";break;case this.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:n="Height and width of the attachment are not the same.";break;case this.gl.FRAMEBUFFER_UNSUPPORTED:n="The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer."}throw new Error(a.ERRORS.PROGRAM_FRAMEBUFFER_INCOMPLETE+". "+n)}}},e}()},889406:(e,t,r)=>{"use strict";r.d(t,{Texture:()=>o});var n=r(306279),o=function(){function e(e,t,r){if(!e)throw new Error(n.ERRORS.NOT_FOUND_WEBGL_CONTEXT);var o=e.createTexture();if(!o)throw new Error(n.ERRORS.TEXTURE_CREATE_FAILED);this.texture=o,e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&r&&this.updateSize(e,t,r),e.bindTexture(e.TEXTURE_2D,null)}return e.prototype.attachImage=function(e,t){e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)},e.prototype.updateSize=function(e,t,r){e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null)},e.prototype.use=function(e,t){e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},e.unuse=function(e,t){e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)},e.prototype.destroy=function(e){e.deleteTexture(this.texture)},e}()},16634:(e,t,r)=>{"use strict";r.d(t,{getColorTable:()=>i});var n=r(570655),o={regular:"/images/filters/maps/regular.png",nox:"/images/filters/maps/nox.png",vesper:"/images/filters/maps/vesper.png",latona:"/images/filters/maps/latona.png",liber:"/images/filters/maps/liber.png",luna:"/images/filters/maps/luna.png",minerva:"/images/filters/maps/minerva.png",mitra:"/images/filters/maps/mitra.png",pro:"/images/filters/maps/pro.png",terra:"/images/filters/maps/terra.png",veles:"/images/filters/maps/veles.png",vesta:"/images/filters/maps/vesta.png",zaria:"/images/filters/maps/zaria.png",sepia:"/images/filters/maps/sepia.png",genius:"/images/filters/maps/genius.png",horus:"/images/filters/maps/horus.png",fortuna:"/images/filters/maps/fortuna.png"},a=["/images/filters/maps/contrast_negative.png","/images/filters/maps/contrast_positive.png","/images/filters/maps/exposure_negative.png","/images/filters/maps/exposure_positive.png","/images/filters/maps/warm_negative_lut.png","/images/filters/maps/warm_positive_lut.png"];function i(e){var t=o[e];if(t)return(0,n.__spreadArray)((0,n.__spreadArray)([],(0,n.__read)(a)),[t])}},24535:(e,t,r)=>{"use strict";r.d(t,{imageCacheGlobal:()=>o});var n=r(693261),o=new(function(){function e(){this.images={}}return e.prototype.get=function(e){var t=this;return new Promise((function(r,o){var a=t.images[e];a?r(a):(0,n.loadImage)(e).then((function(n){t.setImage(e,n),r(n)})).catch(o)}))},e.prototype.setImage=function(e,t){this.images[e]=t},e}())},919079:(e,t,r)=>{"use strict";r.d(t,{CommentSticker:()=>b});var n=r(570655),o=r(26922),a=r(611267),i=r(501538),s=r(190692),l=r(518525),c=r(959473),u=r(397366),d=r(357134),p=r(662950),h=r(423292),_=r(670570),f=r(507239),g=r(813329),m=r(919020),v=r(9821),E=r(752963),T=r(908667),y=r(899500),S=r(149791),w=r(23277),C=r(214377),x=r(998354),I=80,R="VK Sans Text, SF Pro Text, sans-serif",b=function(e){function t(t){var r=e.call(this)||this;return r.options=t,r.width=1400,r}return(0,n.__extends)(t,e),t.getReplyMediaIcon=function(e){var t="";switch(e){case"photo":t=(0,c.getIcon20CameraOutline)().icon;break;case"video":t=(0,u.getIcon20VideoCircleOutline)().icon;break;case"audio":t=(0,d.getIcon20MusicOutline)().icon;break;case"doc":t=(0,p.getIcon20DocumentOutline)().icon;break;case"article":t=(0,h.getIcon20ArticleOutline)().icon;break;case"narrative":t=(0,_.getIcon20NarrativeOutline)().icon;break;default:t=(0,f.getIcon20Attach)().icon}return t},t.getPostMediaIcon=function(e){var t="";switch(e){case"audio":t=(0,g.getIcon28MusicOutline)().icon;break;case"video":t=(0,m.getIcon28VideoOutline)().icon;break;case"poll":t=(0,v.getIcon28PollSquareOutline)().icon;break;case"narrative":t=(0,E.getIcon28NarrativeOutline)().icon;break;case"audio_playlist":t=(0,T.getIcon28PlaylistOutline)().icon;break;case"market":t=(0,y.getIcon28MarketOutline)().icon;break;case"geo":t=(0,S.getIcon28PlaceOutline)().icon;break;case"doc":t=(0,w.getIcon28DocumentOutline)().icon;break;case"article":t=(0,C.getIcon28ArticleOutline)().icon;break;default:t=(0,x.getIcon28AttachOutline)().icon}return t},t.prototype.prepareData=function(){var e=this;return new Promise((function(r,n){var o=e.options,a=o.replyOwnerPhoto,i=o.replyMediaType,s=o.replyMediaPreviewUrl,c=o.postOwnerPhoto,u=o.postMediaType,d=o.postMediaPreviewUrl,p={replyOwnerPhoto:a,postOwnerPhoto:c,replyIcon:e.getIconUrl((0,l.getIcon12Repost)().icon.replace("currentColor","#99A2AD"))};if(s)p.replySticker=s;else if(i){(h=t.getReplyMediaIcon(i))&&(p.replyMediaIcon=e.getIconUrl(h.replace("currentColor","#3F8AE0")))}if(d)p.postPreview=d;else if(u){var h;(h=t.getPostMediaIcon(u))&&(p.postMediaIcon=e.getIconUrl(h.replace("currentColor","#99A2AD")))}e.loadImages(p).then((function(){return r(1)})).catch((function(e){return n(e)}))}))},t.prototype.render=function(){var e=this;return new Promise((function(t,r){e.prepareData().then((function(){e.draw(),t(1)})).catch((function(e){r(e)}))}))},t.prototype.draw=function(){var e=this.renderReplyHeader(I,I),t=this.renderReplyMessage(I,e.bottom+46),r=t?t.bottom:e.bottom,n=this.renderPost(I,r+52).bottom;this.height=n+I,this.drawScene("#fff",72)},t.prototype.renderReplyHeader=function(e,t){var r=new i.ImageItem({x:e,y:t,image:this.getImage("replyOwnerPhoto"),size:160,radius:80,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"}),n=r.getBoundingClientRect(),o=n.right+52,a=new s.TextItem({x:o,y:n.top+20,text:this.options.replyOwnerName,fontSize:60,lineHeight:80,fontFamily:R,fontWeight:"500",maxWidth:this.getInnerWidth()-n.width-52,maxLines:1,color:"#000"}),l=new i.ImageItem({x:o,y:a.getBoundingClientRect().bottom,image:this.getImage("replyIcon"),size:44,radius:0}),c=new s.TextItem({x:l.getBoundingClientRect().right+20,y:l.getBoundingClientRect().top,text:this.options.replySubtitle,fontSize:48,lineHeight:56,fontFamily:R,fontWeight:"400",maxWidth:880,maxLines:1,color:"#818C99"});return this.add(r),this.add(a),this.add(l),this.add(c),n},t.prototype.renderReplyMessage=function(e,t){var r={bottom:t};if(this.options.replyMediaPreviewUrl){var n=new i.ImageItem({x:e,y:t,image:this.getImage("replySticker"),size:288});r=n.getBoundingClientRect(),this.add(n)}else if(this.options.replyText){var o=new s.TextItem({x:e,y:t,text:this.options.replyText,fontSize:68,lineHeight:88,fontFamily:"SF Pro Text, sans-serif",fontWeight:"400",color:"#2C2D2E",maxWidth:1152,maxLines:3});r=o.getBoundingClientRect(),this.add(o)}if(this.options.replyMediaType&&"sticker"!==this.options.replyMediaType){var a=r?r.bottom+4:t;r=this.renderReplyAttach(e,a)}return r},t.prototype.renderReplyAttach=function(e,t){var r=new i.ImageItem({x:e,y:t,image:this.getImage("replyMediaIcon"),size:76});return this.add(r),this.add(new s.TextItem({x:r.getBoundingClientRect().right+32,y:r.getBoundingClientRect().top+12,text:this.options.replyMediaName,fontSize:56,lineHeight:72,fontFamily:"SF Pro Text, sans-serif",color:"#3F8AE0"})),r.getBoundingClientRect()},t.prototype.renderPost=function(e,t){var r,n,o=this.options.postMediaType,l=48,c=192,u=this.getInnerWidth()-96,d=u-c-32,p=new i.ImageItem({x:e+l,y:t+l,image:this.getImage("postOwnerPhoto"),size:96,radius:48,borderSize:2,borderColor:"rgba(0, 0, 0, 0.08)"}),h=u-p.getBoundingClientRect().width-32,_=h-c-32,f=new s.TextItem({x:p.getBoundingClientRect().right+32,y:p.getBoundingClientRect().top+20,text:this.options.postOwnerName,fontSize:56,lineHeight:72,fontFamily:R,fontWeight:"400",maxWidth:o?_:h,maxLines:1,color:"#000"});this.options.postText&&(r=new s.TextItem({x:e+l,y:p.getBoundingClientRect().bottom+34,text:this.options.postText,fontSize:52,lineHeight:64,fontFamily:R,fontWeight:"400",color:"#000",maxWidth:o?d:u,maxLines:2})),n=r?r.getBoundingClientRect().bottom+20:p.getBoundingClientRect().bottom+48;var g=new s.TextItem({x:e+l,y:n,text:this.options.postDate,fontSize:48,lineHeight:56,fontFamily:R,fontWeight:"400",color:"#818C99"}),m=new a.RectItem({x:I,y:t,width:this.getInnerWidth(),height:g.getBoundingClientRect().bottom-t+36,radius:64,background:"#fff",borderSize:4,borderColor:"#E1E3E6"});if(this.add(m),this.add(p),this.add(f),this.add(g),r&&this.add(r),o){var v=e+l+d+32;if("photo"===o&&this.options.postMediaPreviewUrl)this.add(new i.ImageItem({x:v,y:t+l,image:this.getImage("postPreview"),size:c,radius:32,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"}));else{var E=new a.RectItem({x:v,y:t+l,width:c,height:c,radius:32,background:"#F5F5F5",borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"});this.add(E);var T=E.getBoundingClientRect();this.add(new i.ImageItem({x:T.left+(E.width()/2-48),y:T.top+(E.height()/2-48),image:this.getImage("postMediaIcon"),size:96,radius:0}))}}return m.getBoundingClientRect()},t.prototype.getInnerWidth=function(){return this.width-160},t}(o.Sticker)},501538:(e,t,r)=>{"use strict";r.d(t,{ImageItem:()=>o});var n=r(570655),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.draw=function(e){var t=this.params,r=t.x,n=t.y,o=t.image,a=t.size,i=t.radius,s=void 0===i?0:i,l=t.borderSize,c=void 0===l?0:l,u=t.borderColor,d=void 0===u?"transparent":u,p=Math.min(o.width,o.height),h=(o.width-p)/2,_=(o.height-p)/2;e.lineWidth=c,e.strokeStyle=d,e.beginPath(),e.arc(r+s,n+s,s,Math.PI,Math.PI+Math.PI/2),e.lineTo(r+a-s,n),e.arc(r+a-s,n+s,s,Math.PI+Math.PI/2,2*Math.PI),e.lineTo(r+a,n+a-s),e.arc(r+a-s,n+a-s,s,2*Math.PI,Math.PI/2),e.lineTo(r+s,n+a),e.arc(r+s,n+a-s,s,Math.PI/2,Math.PI),e.closePath(),e.save(),e.clip(),e.drawImage(o,h,_,p,p,r,n,a,a),e.stroke(),e.restore()},t.prototype.width=function(){return this.params.size},t.prototype.height=function(){return this.params.size},t}(r(421778).Shape)},611267:(e,t,r)=>{"use strict";r.d(t,{RectItem:()=>o});var n=r(570655),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.draw=function(e){var t=this.params,r=t.x,n=t.y,o=t.width,a=t.height,i=t.background,s=void 0===i?"transparent":i,l=t.borderSize,c=void 0===l?0:l,u=t.borderColor,d=void 0===u?"transparent":u,p=this.params.radius,h=void 0===p?0:p;o<2*h&&(h=o/2),a<2*h&&(h=a/2),e.save(),e.beginPath(),e.fillStyle=s,e.lineWidth=c,e.strokeStyle=d,e.moveTo(r+h,n),e.arcTo(r+o,n,r+o,n+a,h),e.arcTo(r+o,n+a,r,n+a,h),e.arcTo(r,n+a,r,n,h),e.arcTo(r,n,r+o,n,h),e.closePath(),e.stroke(),e.fill(),e.restore()},t.prototype.width=function(){return this.params.width},t.prototype.height=function(){return this.params.height},t}(r(421778).Shape)},421778:(e,t,r)=>{"use strict";r.d(t,{Shape:()=>n});var n=function(){function e(e){this.params=e}return e.prototype.getBoundingClientRect=function(){return{width:this.width(),height:this.height(),top:this.params.y,left:this.params.x,right:this.params.x+this.width(),bottom:this.params.y+this.height()}},e}()},190692:(e,t,r)=>{"use strict";r.d(t,{TextItem:()=>i});var n=r(570655),o=r(421778),a=r(897557),i=function(e){function t(t){var r=e.call(this,t)||this;return r.context=t.ctx||document.createElement("canvas").getContext("2d"),r.splitText=r.splitTextIntoLines(),r}return(0,n.__extends)(t,e),t.prototype.draw=function(e){var t=this.params,r=t.x,n=t.y,o=t.color,a=void 0===o?"#000":o,i=t.lineHeight;e.save(),this.setFont(e),e.fillStyle=a,e.textBaseline="top",e.textAlign="left",this.splitText.forEach((function(t,o){e.fillText(t,r,n+i*o)})),e.restore()},t.prototype.setFont=function(e){var t=this.params,r=t.fontSize,n=t.lineHeight,o=t.fontFamily,a=void 0===o?"sans-serif":o,i=t.fontWeight,s=void 0===i?"normal":i;e.font=s+" "+r+"px/"+n+"px "+a},t.prototype.splitLongWords=function(e){var t=this.context,r=this.params.maxWidth,o=void 0===r?0:r,a=[];return t&&o?(this.setFont(t),e.forEach((function(e){if(t.measureText(e).width<=o)a.push(e);else{var r=Array.from(e).reduce((function(e,r){return t.measureText(e.current+r).width>o?{current:r,items:(0,n.__spreadArray)((0,n.__spreadArray)([],(0,n.__read)(e.items)),[e.current])}:{current:e.current+r,items:(0,n.__spreadArray)([],(0,n.__read)(e.items))}}),{current:"",items:[]});a.push.apply(a,(0,n.__spreadArray)((0,n.__spreadArray)([],(0,n.__read)(r.items)),[r.current]))}})),a):e},t.prototype.splitTextIntoLines=function(){var e=this.context,t=this.params,r=t.text,n=t.maxWidth,o=void 0===n?0:n,i=t.maxLines,s=void 0===i?0:i,l=String((0,a.decodeHTMLEntities)(r)).replace(/(?:<br\s*\/?>)+/gim,"\n");if(!e)return l.split(/\n/);if(o<=0)return l.split(/\n/);var c=this.splitLongWords(l.split(/\n|\s/));this.setFont(e);for(var u=0,d=[],p=function(){if(s&&d.length>=s-1){var t=c.splice(0).join(" ");if(e.measureText(t).width<=o)d.push(t);else{var r=e.measureText("...").width,n=!1,a=Array.from(t).reduce((function(t,a){var i=e.measureText(t+a).width;return!n&&i+r<=o?t+a:(n=!0,t)}),"");d.push(a.trim()+"...")}}else{var i=u+1,l=""===c[u],p=c.slice(0,i).join(" ");if(e.measureText(p).width>=o||i>c.length||l){var h=c.splice(0,l?i:i-1);d.push(h.join(" ")),u=0}else u++}};c.length;)p();return d},t.prototype.width=function(){var e=this.context;return e?(this.setFont(e),this.splitText.reduce((function(t,r){var n=e.measureText(r).width;return Math.round(n>t?n:t)}),0)):0},t.prototype.height=function(){return this.splitText.length*this.params.lineHeight},t}(o.Shape)},26922:(e,t,r)=>{"use strict";r.d(t,{Sticker:()=>i});var n=r(570655),o=r(611267),a=r(693261),i=function(){function e(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.width=0,this.height=0,this.images=[],this.layers=[]}return e.prototype.loadImages=function(e){var t=this;return new Promise((function(r,o){var i,s,l=[];try{for(var c=(0,n.__values)(Object.entries(e)),u=c.next();!u.done;u=c.next()){var d=(0,n.__read)(u.value,2),p=d[0],h=d[1];p&&h&&l.push((0,a.loadImage)(h,p))}}catch(e){i={error:e}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(i)throw i.error}}Promise.all(l).then((function(e){t.images=e,r(1)})).catch((function(e){o(e)}))}))},e.prototype.getIconUrl=function(e){return URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}))},e.prototype.getImage=function(e){return this.images.find((function(t){return t.dataset.name===e}))},e.prototype.drawScene=function(e,t){void 0===t&&(t=0);var r=this.ctx;r&&(this.canvas.width=this.width,this.canvas.height=this.height,r.clearRect(0,0,this.canvas.width,this.canvas.height),new o.RectItem({x:0,y:0,width:this.width,height:this.height,radius:t,background:e}).draw(r),this.layers.forEach((function(e){e.draw(r)})))},e.prototype.add=function(e){this.layers.push(e)},e.prototype.getCanvas=function(){return this.canvas},e.prototype.toBlob=function(){var e=this;return new Promise((function(t,r){e.canvas.toBlob((function(e){e||r(),t(e)}),"image/png",1)}))},e}()},468488:(e,t,r)=>{"use strict";r.d(t,{rendererScene:()=>a});var n=r(693261),o=r(557069),a=new(function(){function e(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}return e.prototype.draw=function(e,t,r,o,a,i){var s=this;return new Promise((function(l,c){var u=r[0];s.canvas.width=e,s.canvas.height=t,(0,n.drawBlurFromImage)(s.canvas,u.canvas,u.avgColor);var d=u.width*u.scale,p=u.height*u.scale,h=u.x-d/2,_=u.y-p/2;s.drawImage(u.canvas,d*a,p*a,h*a,_*a,u.rotate),s.drawBrush(o,a),s.drawLayers(r,a,e,t,i).then((function(){s.canvas.toBlob((function(e){l({blob:e,width:s.canvas.width,height:s.canvas.height})}),"image/jpeg",1)})).catch((function(e){c(e)}))}))},e.prototype.drawImage=function(e,t,r,n,o,a){this.context&&(this.context.save(),this.context.translate(n,o),this.context.translate(t/2,r/2),this.context.rotate(a*Math.PI/180),this.context.translate(-t/2,-r/2),this.context.drawImage(e,0,0,t,r),this.context.restore())},e.prototype.drawBrush=function(e,t){var r=this.context;r&&(r.save(),r.lineCap="round",r.lineJoin="round",e.forEach((function(e){r.lineWidth=e.width*o.default.BRUSH_WIDTH_COEFFICIENT*t,r.strokeStyle=(0,n.hexToRgba)(e.color,e.opacity),r.beginPath(),r.moveTo(e.path[0][0]*t,e.path[0][1]*t),e.path.forEach((function(e){r.lineTo(e[0]*t,e[1]*t)})),r.stroke()})),r.restore())},e.prototype.drawLayers=function(e,t,r,n,a){var i=this;return new Promise((function(r,n){var s=[];e.forEach((function(e,t){var r=null;if(e.type!==o.default.LAYER_TYPES.BACKGROUND){if(e.type===o.default.LAYER_TYPES.STICKER){var n=a((e=e).id,o.default.STICKER_LARGE);r=i.fetchImage(n,e.width*e.scale,e.height*e.scale,e.x,e.y,e.rotate)}else if(e.type===o.default.LAYER_TYPES.IMAGE)e=e,r=i.fetchImage(e.url,e.width*e.scale,e.height*e.scale,e.x,e.y,e.rotate);else if(e.type===o.default.LAYER_TYPES.TEXT){var l=document.querySelector('[data-index="'+t+'"] .EditorLayer__inner');l&&(r=i.drawTextLayer(e,l))}r&&s.push(r)}})),Promise.all(s).then((function(e){e.forEach((function(e){var r=e.width,n=e.height,o=e.x-r/2,a=e.y-n/2;i.drawImage(e.image,r*t,n*t,o*t,a*t,e.rotate)})),r()})).catch((function(e){n(e)}))}))},e.prototype.drawTextLayer=function(e,t){return new Promise((function(r,a){var i=document.createElement("canvas"),s=i.getContext("2d");if(!s)return a();var l=100;i.width=t.offsetWidth*o.default.CANVAS_SCALE+l,i.height=t.offsetHeight*o.default.CANVAS_SCALE+l;var c="";switch(e.fontStyle){case"classic":c="RobotoPE";break;case"cursive":c="PacificoPE";break;case"marker":c="AmaticPE";break;case"italics":c="TTCommonsPE";break;case"typewriter":c="GoraPE";break;case"poster":c="DinPE";break;case"retro":c="Rodchenko";break;case"impact":c="Impact";break;case"lobster":c="Lobster"}var u=e.fontSize*e.scale*o.default.FONT_SIZE_COEFFICIENT*o.default.CANVAS_SCALE;s.font=u+"px "+c+", serif",s.fillStyle=e.color,s.textAlign="center",s.textBaseline="top",(0,n.printAtWordWrap)(s,e.text,i.width/2,50,u,i.width-l),r({image:i,width:i.width/o.default.CANVAS_SCALE,height:i.height/o.default.CANVAS_SCALE,x:e.x,y:e.y,rotate:e.rotate})}))},e.prototype.fetchImage=function(e,t,r,o,a,i){return new Promise((function(s){(0,n.loadImage)(e).then((function(e){s({image:e,width:t,height:r,x:o,y:a,rotate:i})})).catch((function(e){console.error(e)}))}))},e}())},398822:(e,t,r)=>{"use strict";r.d(t,{SET_DATA_LOADED:()=>n,SET_SHOW_DROP_BOX:()=>o,SET_SAVE_LOADING:()=>a,SET_CURRENT_TAB:()=>i,SET_CURRENT_STICKER_PACK_INDEX:()=>s,SET_HEADER_SCROLL_POSITION:()=>l,SET_SETTING_COLOR:()=>c,SET_SETTING_BRUSH_WIDTH:()=>u,SET_SETTING_BRUSH_OPACITY:()=>d,SET_SETTING_FONT_SIZE:()=>p,SET_SETTING_FONT_FAMILY:()=>h,SET_SETTING_COLOR_CORRECTION:()=>_,SET_SETTING_FILTER:()=>f,SET_SETTING_FILTER_AMOUNT:()=>g,SET_SETTING_BLUR_ENABLE:()=>m,SET_SETTING_BLUR_FORM:()=>v,SET_SETTING_BLUR_SIZE:()=>E,SET_SETTING_BLUR_POSITION:()=>T,SET_SETTING_AUTO_CORRECTION:()=>y,SET_SETTING_CROP_ASPECT:()=>S,SET_SETTING_CROPPED:()=>w,SET_SETTING_FLIP_X:()=>C,SET_SETTING_FLIP_Y:()=>x,SET_SETTING_ROTATE:()=>I,SET_CURRENT_LAYER:()=>R,ADD_LAYER_STICKER:()=>b,ADD_LAYER_TEXT:()=>A,ADD_LAYER_IMAGE:()=>L,SET_LAYER_POSITION:()=>N,SET_LAYER_SCALE:()=>P,START_LAYER_SCALE:()=>O,SET_LAYER_COLOR:()=>D,SET_LAYER_FONT_SIZE:()=>B,SET_LAYER_FONT_STYLE:()=>k,SET_LAYER_TEXT:()=>M,TOGGLE_TEXT_EDIT:()=>F,UPDATE_BACKGROUND_LAYER:()=>U,DELETE_LAYER:()=>z,UPDATE_LAYERS_AFTER_CROP:()=>H,ADD_DRAWING:()=>G,UPDATE_DRAWING:()=>Y,SET_CURRENT_BACKGROUND_TYPE:()=>W,SET_CURRENT_PHOTO_URL:()=>X,SET_CURRENT_BACKGROUND_ID:()=>V,SET_DATA:()=>K});var n="SET_DATA_LOADED",o="SET_SHOW_DROP_BOX",a="SET_SAVE_LOADING",i="SET_CURRENT_TAB",s="SET_CURRENT_STICKER_PACK_INDEX",l="SET_HEADER_SCROLL_POSITION",c="SET_SETTING_COLOR",u="SET_SETTING_BRUSH_WIDTH",d="SET_SETTING_BRUSH_OPACITY",p="SET_SETTING_FONT_SIZE",h="SET_SETTING_FONT_FAMILY",_="SET_SETTING_COLOR_CORRECTION",f="SET_SETTING_FILTER",g="SET_SETTING_FILTER_AMOUNT",m="SET_SETTING_BLUR_ENABLE",v="SET_SETTING_BLUR_FORM",E="SET_SETTING_BLUR_SIZE",T="SET_SETTING_BLUR_POSITION",y="SET_SETTING_AUTO_CORRECTION",S="SET_SETTING_CROP_ASPECT",w="SET_SETTING_CROPPED",C="SET_SETTING_FLIP_X",x="SET_SETTING_FLIP_Y",I="SET_SETTING_ROTATE",R="SET_CURRENT_LAYER",b="ADD_LAYER_STICKER",A="ADD_LAYER_TEXT",L="ADD_LAYER_IMAGE",N="SET_LAYER_POSITION",P="SET_LAYER_SCALE",O="START_LAYER_SCALE",D="SET_LAYER_COLOR",B="SET_LAYER_FONT_SIZE",k="SET_LAYER_FONT_STYLE",M="SET_LAYER_TEXT",F="TOGGLE_TEXT_EDITOR",U="UPDATE_BACKGROUND_LAYER",z="DELETE_LAYER",H="UPDATE_LAYERS_AFTER_CROP",G="ADD_VECTOR",Y="UPDATE_DRAWING",W="SET_CURRENT_BACKGROUND_TYPE",X="SET_CURRENT_PHOTO_URL",V="SET_CURRENT_BACKGROUND_ID",K="SET_DATA"},762518:(e,t,r)=>{"use strict";r.d(t,{setBackgroundType:()=>a,setCurrentPhotoUrl:()=>i,setCurrentBackgroundId:()=>s});var n=r(398822),o=r(368893),a=function(e){return{type:n.SET_CURRENT_BACKGROUND_TYPE,value:e}},i=function(e){return{type:n.SET_CURRENT_PHOTO_URL,value:e}},s=function(e){return(0,o.sendStat)(o.EVENTS.SELECT_BACKGROUND),{type:n.SET_CURRENT_BACKGROUND_ID,value:e}}},734553:(e,t,r)=>{"use strict";r.d(t,{setCrop:()=>a});var n=r(50533),o=r(561670),a=function(e){return function(t){(0,n.batch)((function(){e.hasOwnProperty("url")&&t((0,o.setCurrentPhotoUrl)(e.url)),e.hasOwnProperty("data")&&t((0,o.setData)(e.data)),e.hasOwnProperty("isCropped")&&t((0,o.setCropped)(e.isCropped)),e.hasOwnProperty("flipX")&&t((0,o.setFlipX)(e.flipX)),e.hasOwnProperty("flipY")&&t((0,o.setFlipY)(e.flipY)),e.hasOwnProperty("rotate")&&t((0,o.setRotate)(e.rotate)),e.hasOwnProperty("layers")&&t((0,o.updateLayersAfterCrop)(e.layers)),e.hasOwnProperty("drawings")&&t((0,o.updateDrawings)(e.drawings))}))}}},263202:(e,t,r)=>{"use strict";r.d(t,{setData:()=>o});var n=r(398822),o=function(e){return{type:n.SET_DATA,payload:e}}},797809:(e,t,r)=>{"use strict";r.d(t,{addDrawing:()=>a,updateDrawings:()=>i});var n=r(398822),o=r(368893),a=function(e){return(0,o.sendStat)(o.EVENTS.ADD_GRAFFITI),{type:n.ADD_DRAWING,payload:e}},i=function(e){return{type:n.UPDATE_DRAWING,payload:e}}},561670:(e,t,r)=>{"use strict";r.d(t,{setCurrentStickerPackIndex:()=>n.setCurrentStickerPackIndex,setDataLoaded:()=>n.setDataLoaded,setHeaderScrollPosition:()=>n.setHeaderScrollPosition,setMode:()=>n.setMode,setSaveLoading:()=>n.setSaveLoading,setShowDropBox:()=>n.setShowDropBox,setAspect:()=>o.setAspect,setAutoCorrection:()=>o.setAutoCorrection,setBlurEnable:()=>o.setBlurEnable,setBlurForm:()=>o.setBlurForm,setBlurPosition:()=>o.setBlurPosition,setBlurSize:()=>o.setBlurSize,setBrushOpacity:()=>o.setBrushOpacity,setBrushWidth:()=>o.setBrushWidth,setColor:()=>o.setColor,setColorCorrection:()=>o.setColorCorrection,setCropped:()=>o.setCropped,setFilter:()=>o.setFilter,setFilterAmount:()=>o.setFilterAmount,setFlipX:()=>o.setFlipX,setFlipY:()=>o.setFlipY,setFontSize:()=>o.setFontSize,setFontStyle:()=>o.setFontStyle,setRotate:()=>o.setRotate,addLayerImage:()=>a.addLayerImage,addLayerSticker:()=>a.addLayerSticker,addLayerText:()=>a.addLayerText,closeTextEditor:()=>a.closeTextEditor,deleteLayer:()=>a.deleteLayer,setCurrentLayer:()=>a.setCurrentLayer,setLayerPosition:()=>a.setLayerPosition,setLayerScale:()=>a.setLayerScale,setLayerText:()=>a.setLayerText,startLayerScale:()=>a.startLayerScale,toggleTextEditor:()=>a.toggleTextEditor,updateBackgroundLayer:()=>a.updateBackgroundLayer,updateLayersAfterCrop:()=>a.updateLayersAfterCrop,addDrawing:()=>i.addDrawing,updateDrawings:()=>i.updateDrawings,setBackgroundType:()=>s.setBackgroundType,setCurrentBackgroundId:()=>s.setCurrentBackgroundId,setCurrentPhotoUrl:()=>s.setCurrentPhotoUrl,setData:()=>l.setData,setCrop:()=>c.setCrop});var n=r(465014),o=r(227722),a=r(378272),i=r(797809),s=r(762518),l=r(263202),c=r(734553)},378272:(e,t,r)=>{"use strict";r.d(t,{setCurrentLayer:()=>u,addLayerSticker:()=>p,addLayerImage:()=>h,addLayerText:()=>_,setLayerPosition:()=>f,setLayerScale:()=>g,startLayerScale:()=>m,setLayerColor:()=>v,setLayerFontSize:()=>E,setLayerFontStyle:()=>T,setLayerText:()=>y,toggleTextEditor:()=>S,updateBackgroundLayer:()=>w,deleteLayer:()=>C,closeTextEditor:()=>x,updateLayersAfterCrop:()=>I});var n=r(332324),o=r(465014),a=r(557069),i=r(368893),s=r(398822),l=r(897557),c=r(917999),u=function(e){return{type:s.SET_CURRENT_LAYER,index:e}},d=function(e,t,r){return void 0===r&&(r=!0),function(n,o){var a=o().present.layers.items;n({type:e,payload:t}),r&&n(u(a.length))}},p=function(e){return(0,i.sendStat)(i.EVENTS.ADD_STICKER),d(s.ADD_LAYER_STICKER,{type:a.default.LAYER_TYPES.STICKER,id:e.id,x:e.x,y:e.y,width:e.width,height:e.height,rotate:e.rotate,canDelete:e.canDelete,scale:e.scale})},h=function(e){return d(s.ADD_LAYER_IMAGE,{type:a.default.LAYER_TYPES.IMAGE,url:e.url,x:e.x,y:e.y,width:e.width,height:e.height,rotate:e.rotate,clickableZones:e.clickableZones,canDelete:e.canDelete,scale:e.scale})},_=function(e,t){return function(r,u){var p,h=u().present,_=h.data,f=h.settings,g=(0,n.getMarginTop)(u()),m=_.artboardWidth/2,v=_.artboardHeight/2-g,E=(0,l.decodeHTMLEntities)(_.placeholders[(0,c.irand)(0,_.placeholders.length-1)]),T=0,y=!1,S=f.fontStyle,w=f.color,C=f.fontSize,x=1;t&&(m=void 0!==t.x?t.x:m,v=void 0!==t.y?t.y:v,E=void 0!==t.text?t.text:E,T=void 0!==t.rotate?t.rotate:T,y=void 0!==t.isEdit?t.isEdit:y,S=void 0!==t.style?t.style:S,w=void 0!==t.color?t.color:w,C=void 0!==t.fontSize?t.fontSize:C,p=t.initialFontSize,x=void 0!==t.scale?t.scale:x),(0,i.sendStat)(i.EVENTS.ADD_TEXT),e&&r((0,o.setMode)(a.default.TABS.TEXT)),r(d(s.ADD_LAYER_TEXT,{type:a.default.LAYER_TYPES.TEXT,text:E,x:m,y:v,rotate:T,isEdit:y,fontSize:C,initialFontSize:p,fontStyle:S,color:w,scale:x,canDelete:!0},e))}},f=function(e,t){return function(r,n){var o=n().present.layers,a=o.currentIndex,i=o.items;null!==a&&i[a]&&r({type:s.SET_LAYER_POSITION,payload:{x:e,y:t}})}},g=function(e,t){return function(r,n){var o=n().present.layers,a=o.currentIndex,i=o.items;null!==a&&i[a]&&r({type:s.SET_LAYER_SCALE,payload:{scale:e,rotate:t}})}},m=function(){return{type:s.START_LAYER_SCALE}},v=function(e){return function(t,r){var n=r().present.layers,o=n.currentIndex,a=n.items;null!==o&&a[o]&&t({type:s.SET_LAYER_COLOR,payload:{color:e}})}},E=function(e){return function(t,r){var n=r().present.layers,o=n.currentIndex,a=n.items;null!==o&&a[o]&&t({type:s.SET_LAYER_FONT_SIZE,payload:{fontSize:e}})}},T=function(e){return function(t,r){var n=r().present.layers,o=n.currentIndex,a=n.items;null!==o&&a[o]&&t({type:s.SET_LAYER_FONT_STYLE,payload:{fontStyle:e}})}},y=function(e){return function(t,r){var n=r().present.layers,o=n.currentIndex,a=n.items;null!==o&&a[o]&&t({type:s.SET_LAYER_TEXT,payload:{text:e}})}},S=function(e){return function(t,r){var n=r().present.layers,o=n.currentIndex,a=n.items;null!==o&&a[o]&&t({type:s.TOGGLE_TEXT_EDIT,payload:{isEdit:e}})}},w=function(e){return{type:s.UPDATE_BACKGROUND_LAYER,payload:e}},C=function(){return function(e,t){var r=t().present.layers,n=r.currentIndex,l=r.items;if(null!==n){var c=l[n];c&&(c.type===a.default.LAYER_TYPES.STICKER?(0,i.sendStat)(i.EVENTS.DELETE_STICKER):c.type===a.default.LAYER_TYPES.TEXT&&(0,i.sendStat)(i.EVENTS.DELETE_TEXT),e((0,o.setShowDropBox)(!1)),e({type:s.DELETE_LAYER,index:n}))}}},x=function(){return function(e,t){var r=t().present.layers,n=r.currentIndex,o=r.items;if(null!==n){var i=o[n];i&&i.type===a.default.LAYER_TYPES.TEXT&&(o[n].text.trim()?e(S(!1)):e(C()))}}},I=function(e){return{type:s.UPDATE_LAYERS_AFTER_CROP,items:e}}},227722:(e,t,r)=>{"use strict";r.d(t,{setColor:()=>i,setBrushWidth:()=>s,setBrushOpacity:()=>l,setFontSize:()=>c,setFontStyle:()=>u,setColorCorrection:()=>d,setFilter:()=>p,setFilterAmount:()=>h,setBlurEnable:()=>_,setBlurForm:()=>f,setBlurSize:()=>g,setBlurPosition:()=>m,setAutoCorrection:()=>v,setAspect:()=>E,setCropped:()=>T,setFlipX:()=>y,setFlipY:()=>S,setRotate:()=>w});var n=r(378272),o=r(368893),a=r(398822),i=function(e){return function(t,r){var o=r().present.layers,i=o.currentIndex,s=o.items;i&&!s[i]||t((0,n.setLayerColor)(e)),t({type:a.SET_SETTING_COLOR,color:e})}},s=function(e){return{type:a.SET_SETTING_BRUSH_WIDTH,brushWidth:Math.max(.1,e)}},l=function(e){return{type:a.SET_SETTING_BRUSH_OPACITY,brushOpacity:e}},c=function(e){return function(t,r){var o=r().present.layers,i=o.currentIndex,s=o.items;i&&!s[i]||t((0,n.setLayerFontSize)(e)),t({type:a.SET_SETTING_FONT_SIZE,fontSize:e})}},u=function(e){return function(t,r){var o=r().present.layers,i=o.currentIndex,s=o.items;i&&!s[i]||t((0,n.setLayerFontStyle)(e)),t({type:a.SET_SETTING_FONT_FAMILY,fontStyle:e})}},d=function(e,t){return{type:a.SET_SETTING_COLOR_CORRECTION,filter:e,value:t}},p=function(e){return"regular"===e?(0,o.sendStat)(o.EVENTS.REMOVE_FILTER):(0,o.sendStat)(o.EVENTS.ADD_FILTER),{type:a.SET_SETTING_FILTER,name:e}},h=function(e){return{type:a.SET_SETTING_FILTER_AMOUNT,value:e}},_=function(e){return e?(0,o.sendStat)(o.EVENTS.ENABLE_BLUR):(0,o.sendStat)(o.EVENTS.DISABLE_BLUR),{type:a.SET_SETTING_BLUR_ENABLE,isEnabled:e}},f=function(e){return{type:a.SET_SETTING_BLUR_FORM,form:e}},g=function(e){return{type:a.SET_SETTING_BLUR_SIZE,size:e}},m=function(e){return{type:a.SET_SETTING_BLUR_POSITION,position:e}},v=function(e){return e?(0,o.sendStat)(o.EVENTS.ENABLE_AUTOCORRECTION):(0,o.sendStat)(o.EVENTS.DISABLE_AUTOCORRECTION),{type:a.SET_SETTING_AUTO_CORRECTION,isAutoCorrection:e}},E=function(e){return{type:a.SET_SETTING_CROP_ASPECT,aspect:e}},T=function(e){return{type:a.SET_SETTING_CROPPED,isCropped:e}},y=function(e){return(0,o.sendStat)(o.EVENTS.FLIP_X),{type:a.SET_SETTING_FLIP_X,value:e}},S=function(e){return(0,o.sendStat)(o.EVENTS.FLIP_Y),{type:a.SET_SETTING_FLIP_Y,value:e}},w=function(e){return{type:a.SET_SETTING_ROTATE,value:e}}},465014:(e,t,r)=>{"use strict";r.d(t,{setDataLoaded:()=>i,setShowDropBox:()=>s,setSaveLoading:()=>l,setMode:()=>c,setCurrentStickerPackIndex:()=>u,setHeaderScrollPosition:()=>d});var n=r(378272),o=r(557069),a=r(398822),i=function(){return{type:a.SET_DATA_LOADED}},s=function(e){return{type:a.SET_SHOW_DROP_BOX,value:e}},l=function(e){return{type:a.SET_SAVE_LOADING,value:e}},c=function(e){return function(t,r){var i=r().present.layers,s=i.items,l=i.currentIndex;null!==l&&(s[l].type===o.default.LAYER_TYPES.TEXT&&t((0,n.closeTextEditor)()),[o.default.TABS.PAINT,o.default.TABS.FILTERS,o.default.TABS.COLOR,o.default.TABS.CROP].includes(e)&&t((0,n.setCurrentLayer)(null))),t({type:a.SET_CURRENT_TAB,value:e})}},u=function(e){return{type:a.SET_CURRENT_STICKER_PACK_INDEX,value:e}},d=function(e){return{type:a.SET_HEADER_SCROLL_POSITION,value:e}}},986337:(e,t,r)=>{"use strict";r.d(t,{BackgroundCanvas:()=>i});var n=r(570655),o=r(667294),a=r(557069),i=function(e){function t(t){var r=e.call(this,t)||this;return r.canvasBg=o.createRef(),r}return(0,n.__extends)(t,e),t.prototype.componentDidUpdate=function(){this.drawImage()},t.prototype.render=function(){var e=this.props.layer,t=e.width*e.scale,r=e.height*e.scale;return o.createElement("canvas",{ref:this.canvasBg,width:t*a.default.CANVAS_SCALE,height:r*a.default.CANVAS_SCALE,style:{width:t,height:r}})},t.prototype.drawImage=function(){var e=this.props.layer,t=this.canvasBg.current,r=null==t?void 0:t.getContext("2d");if(r){var n=e.width*e.scale,o=e.height*e.scale;r.drawImage(e.canvas,0,0,n*a.default.CANVAS_SCALE,o*a.default.CANVAS_SCALE)}},t}(o.PureComponent)},688369:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(570655),o=r(667294),a=r(651988);const i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){return a.default.get("story_show_clickable_zones")?this.props.clickableZones.map((function(e,t){var r=e.clickable_area,n=100*Math.abs(r[1].x-r[0].x),a=100*Math.abs(r[2].y-r[1].y);return o.createElement("div",{key:t,className:"EditorClickableZone",style:{top:100*r[0].y+"%",left:100*r[0].x+"%",width:n+"%",height:a+"%"}})})):null},t}(o.Component)},916341:(e,t,r)=>{"use strict";r.d(t,{ColorPicker:()=>c});var n=r(570655),o=r(667294),a=r(693261),i=r(557069),s=r(659397),l=r(495707),c=function(e){function t(t){var r=e.call(this,t)||this;return r.colors=r.getColors(t.avgColor),r}return(0,n.__extends)(t,e),t.prototype.shouldComponentUpdate=function(e){return JSON.stringify(e.avgColor)!==JSON.stringify(this.props.avgColor)&&(this.colors=this.getColors(e.avgColor)),!0},t.prototype.render=function(){var e=this;return o.createElement("div",{className:"ColorPicker"},this.colors.map((function(t,r){var n=t===e.props.color,a=(0,s.classNames)("ColorPicker__color",{"ColorPicker__color--white":"#FFFFFF"===t,"ColorPicker__color--selected":n});return o.createElement("div",{key:r,className:a,style:{backgroundColor:t},onClick:function(){return e.props.setColor(t)}},n&&o.createElement(l.default,null))})))},t.prototype.getColors=function(e){var t=(0,a.rgb2hsv)(e.r,e.g,e.b),r=[];return i.default.AVERAGE_COLORS_MAP.forEach((function(e){var n=Math.round(Math.min(Math.max(t.s+e.s,0),100)),o=Math.round(Math.min(Math.max(t.v+e.v,0),100));r.push((0,a.hsl2hex)(t.h,n,o).toUpperCase())})),(0,a.uniqueArray)((0,n.__spreadArray)((0,n.__spreadArray)([],(0,n.__read)(i.default.COLORS)),(0,n.__read)(r))).slice(0,30)},t}(o.Component)},670196:(e,t,r)=>{"use strict";r.d(t,{DropBox:()=>i});var n=r(570655),o=r(667294),a=r(121265),i=function(e){function t(t){var r=e.call(this,t)||this;return r.state={onHover:!1},r}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this,r=(0,a.classNames)("DropBox",{"DropBox--hover":this.state.onHover});return o.createElement("div",{className:r,onMouseOver:function(){return e.setState({onHover:!0})},onMouseOut:function(){return e.setState({onHover:!1})},onMouseUp:this.props.onDelete},t.renderIcon())},t.renderIcon=function(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"none"},o.createElement("path",{fill:"#fff",d:"M17.5 18.38a1 1 0 00-2 .24l1.8 15.23a3 3 0 002.98 2.65h9.44a3 3 0 002.98-2.65l1.8-15.23a1 1 0 10-2-.24l-1.78 15.24a1 1 0 01-1 .88h-9.44a1 1 0 01-1-.88L17.5 18.38z"}),o.createElement("path",{fill:"#fff",d:"M22 21.45a1 1 0 00-2 .1l.5 10a1 1 0 102-.1l-.5-10zm8 .1a1 1 0 00-2-.1l-.5 10a1 1 0 102 .1l.5-10zm-4-.05a1 1 0 10-2 0v10a1 1 0 002 0v-10z"}),o.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M20.62 16.5c.08-.35.2-.77.42-1.2.32-.64.8-1.19 1.38-1.59A4.55 4.55 0 0125 13c1.05 0 1.9.27 2.58.71.59.4 1.06.95 1.38 1.6.21.42.34.84.42 1.19H36a1 1 0 010 2H14a1 1 0 010-2h6.63zm6.68 0a2.9 2.9 0 00-.13-.3c-.16-.33-.4-.61-.7-.82-.31-.2-.77-.38-1.47-.38s-1.16.17-1.47.38c-.32.2-.54.5-.7.82-.05.1-.1.2-.13.3h4.6z",className:"DropBox__cap",clipRule:"evenodd"}))},t}(o.PureComponent)},183070:(e,t,r)=>{"use strict";r.d(t,{EditorTabs:()=>g});var n=r(570655),o=r(667294),a=r(788713),i=r(326542),s=r(659397),l=r(41437),c=r(557069),u=r(147650),d=r(526326),p=r(621748),h=r(274824),_=r(949151),f=r(591420),g=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.getHeaderItem=function(e){if(e){var n=e.props["data-disabled"],u=(0,s.classNames)("EditorTabs__item",{"EditorTabs__item--current":r.props.current===e.props["data-mode"],"EditorTabs__item--disabled":n}),d=o.createElement("div",{className:u,key:e.props["data-mode"],onClick:function(){return r.onTabClick(e.props["data-mode"],n)}},t.getIcon(e.props["data-mode"]));if(n){var p=o.createElement("div",{className:"EditorTabsTooltip"},o.createElement("span",{className:"EditorTabsTooltip__text"},(0,l.getLang)("photos_pe_filters_disabled_text")),o.createElement(i.default,{onClick:function(){return r.props.setMode(c.default.BACKGROUND_MODES.PHOTO)},className:"EditorTabsTooltip__link"},(0,l.getLang)("photos_pe_filters_disabled_button")));return o.createElement(a.default,{className:"EditorTabs__tooltip",text:p,appearance:"light",position:"b",maxWidth:203},d)}return d}},r.getTabContentItem=function(e){if(e){var t=(0,s.classNames)(e.props.className,"EditorTabs__tab",{"EditorTabs__tab--current":r.props.current===e.props["data-mode"]});return o.cloneElement(e,{className:t})}},r.onTabClick=function(e,t){t||r.props.change(e)},r}return(0,n.__extends)(t,e),t.prototype.render=function(){return o.createElement("div",{className:"EditorTabs"},o.createElement("div",{className:"EditorTabs__header"},o.Children.map(this.props.children,this.getHeaderItem)),o.createElement("div",{className:"EditorTabs__content"},o.Children.map(this.props.children,this.getTabContentItem)))},t.getIcon=function(e){var t;switch(e){case c.default.TABS.STICKERS:t=o.createElement(u.default,null);break;case c.default.TABS.TEXT:t=o.createElement(d.default,null);break;case c.default.TABS.PAINT:t=o.createElement(p.default,null);break;case c.default.TABS.CROP:t=o.createElement(h.default,null);break;case c.default.TABS.COLOR:t=o.createElement(_.default,null);break;case c.default.TABS.FILTERS:t=o.createElement(f.default,null)}return t},t}(o.Component)},920200:(e,t,r)=>{"use strict";r.d(t,{EditorText:()=>l});var n=r(570655),o=r(667294),a=r(557069),i=r(368893),s=r(897557),l=function(e){function t(t){var r=e.call(this,t)||this;return r.componentDidMount=function(){var e=r.textareaEl.current;e&&(r.onChange(),e.select())},r.render=function(){var e=r.props.layer,t=Math.max(10,e.fontSize*a.default.FONT_SIZE_COEFFICIENT);return e.initialFontSize&&(t=e.initialFontSize*a.default.FONT_SIZE_COEFFICIENT),o.createElement("div",{className:"EditorText"},o.createElement("div",{className:"EditorText__inner"},o.createElement("textarea",{ref:r.textareaEl,className:"EditorText__textarea PhotoEditorFontStyle--"+e.fontStyle,defaultValue:(0,s.decodeHTMLEntities)(e.text).replace(/(\v)/gm,""),autoFocus:!0,onKeyDown:r.onKeyDown,onChange:r.onChange,onInput:r.onChange,onPaste:r.onChange,style:{color:e.color,fontSize:t,height:r.state.height}})))},r.onKeyDown=function(e){if("Enter"===e.key)if(e.preventDefault(),e.stopPropagation(),e.ctrlKey||e.metaKey||e.shiftKey){var t=r.textareaEl.current;if(t){var n=e.target.selectionStart,o=e.target.selectionEnd;t.value=t.value.substring(0,n)+"\n"+t.value.substring(o),t.selectionStart=t.selectionEnd=n+1,r.onChange()}}else r.props.closeTextEditor()},r.onChange=function(){var e=r.textareaEl.current;e&&(r.setState({height:0},(function(){r.setState({height:e.scrollHeight})})),r.props.onChange(r.applyLineBreaks(e)))},r.applyLineBreaks=function(e){var t=e.value,r=e.cloneNode(!0);document.querySelector(".EditorText__inner").appendChild(r),r.setAttribute("wrap","off"),r.value="";for(var n=r.scrollWidth,o=0,a=-1;o<t.length;o++){var i=t.charAt(o);if(" "!=i&&"-"!=i&&"+"!=i||(a=o),r.value+=i,r.scrollWidth>n){var s="";if(a>=0){for(var l=a+1;l<o;l++)s+=t.charAt(l);a=-1}s+=i,r.value=r.value.substr(0,r.value.length-s.length),r.value+="\n\v"+s}}return r.remove(),r.value.replace(/(\n\v)/gm,"\v")},r.state={height:0},r.textareaEl=o.createRef(),(0,i.sendStat)(i.EVENTS.EDIT_TEXT),r}return(0,n.__extends)(t,e),t.prototype.componentDidUpdate=function(e){e.layer.fontSize===this.props.layer.fontSize&&e.layer.fontStyle===this.props.layer.fontStyle||this.onChange()},t}(o.Component)},306337:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var n=r(570655),o=r(667294),a=r(973935),i=r(986337),s=r(87769),l=r(688369),c=r(557069),u=r(121265),d=r(897557);const p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDoubleClick=function(){t.props.toggleTextEditor(!0)},t}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.layer,r=e.currentIndex,n=e.index,o=null,i=(0,u.classNames)("EditorLayer","EditorLayer--"+t.type,{"EditorLayer--active":r===n,"EditorLayer--locked":t.locked});switch(t.type){case c.default.LAYER_TYPES.STICKER:o=this.renderLayerSticker(t,n,i);break;case c.default.LAYER_TYPES.TEXT:o=this.renderLayerText(t,n,i);break;case c.default.LAYER_TYPES.IMAGE:o=this.renderLayerImage(t,n,i);break;case c.default.LAYER_TYPES.BACKGROUND:o=this.renderLayerBackground(t,n,i)}if(t.isBackground){var s=document.querySelector(".EditorCanvas__layers--bg");return s?a.createPortal(o,s):null}return o},t.prototype.renderLayerBackground=function(e,t,r){return o.createElement("div",{key:t,className:r,"data-index":t,style:{width:1,height:1,transform:"translate("+e.x+"px, "+e.y+"px) rotateZ("+e.rotate+"deg)"}},o.createElement("div",{className:"EditorLayer__inner"},o.createElement(i.BackgroundCanvas,{layer:e}),this.props.currentIndex===t&&o.createElement(s.default,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale})))},t.prototype.renderLayerSticker=function(e,t,r){var n=this.props.getStickerUrlById(e.id,c.default.STICKER_LARGE);return o.createElement("div",{key:t,className:r,"data-index":t,style:{width:1,height:1,transform:"translate("+e.x+"px, "+e.y+"px) rotateZ("+e.rotate+"deg)"}},o.createElement("div",{className:"EditorLayer__inner",style:{width:e.width*e.scale,height:e.height*e.scale,backgroundImage:"url('"+n+"')"}},this.props.currentIndex===t&&o.createElement(s.default,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale})))},t.prototype.renderLayerImage=function(e,t,r){return o.createElement("div",{key:t,className:r,"data-index":t,style:{width:1,height:1,transform:"translate("+e.x+"px, "+e.y+"px) rotateZ("+e.rotate+"deg)"}},o.createElement("div",{className:"EditorLayer__inner",style:{width:e.width*e.scale,height:e.height*e.scale,backgroundImage:"url('"+e.url+"')"}},this.props.currentIndex===t&&o.createElement(s.default,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale}),e.clickableZones&&o.createElement(l.default,{clickableZones:e.clickableZones})))},t.prototype.renderLayerText=function(e,t,r){var n=Math.max(10,e.fontSize*c.default.FONT_SIZE_COEFFICIENT);r+=" PhotoEditorFontStyle--"+e.fontStyle;var a={fontSize:n*e.scale,color:e.color};return this.props.currentIndex===t&&e.isEdit?null:o.createElement("div",{key:t,className:r,"data-index":t,style:{width:1,height:1,transform:"translate("+e.x+"px, "+e.y+"px) rotateZ("+e.rotate+"deg)"}},o.createElement("div",{className:"EditorLayer__inner",style:a,onDoubleClick:this.handleDoubleClick},o.createElement("div",null,(0,d.decodeHTMLEntities)(e.text.replace(/(\v)/gm,"\n"))),this.props.currentIndex===t&&o.createElement(s.default,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale})))},t}(o.Component)},87769:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(570655),o=r(667294),a=r(557069),i=r(693261);const s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controlMouseDown=function(e,r){if(e.preventDefault(),e.stopPropagation(),t.props.startLayerScale(),t.layer=t.props.layer,t.layer.type===a.default.LAYER_TYPES.TEXT){var n=e.target.closest(".EditorLayer__inner");if(!n)return;t.width=n.offsetWidth/t.layer.scale,t.height=n.offsetHeight/t.layer.scale}else t.width=t.layer.width,t.height=t.layer.height;if(void 0!==t.width&&void 0!==t.height){switch(window.addEventListener("mousemove",t.controlMouseMove),window.addEventListener("mouseup",t.controlMouseUp),r){case"se":t.offsetFromCenter={x:t.width/2,y:t.height/2};break;case"sw":t.offsetFromCenter={x:-t.width/2,y:t.height/2};break;case"ne":t.offsetFromCenter={x:t.width/2,y:-t.height/2};break;case"nw":t.offsetFromCenter={x:-t.width/2,y:-t.height/2}}void 0!==t.offsetFromCenter&&(t.distanceToZero=Math.sqrt(t.offsetFromCenter.x*t.offsetFromCenter.x+t.offsetFromCenter.y*t.offsetFromCenter.y))}},t.controlMouseMove=function(e){var r=(0,i.getRelativeXY)(e,document.querySelector(".EditorCanvas__canvas--draw")),n=r.x,o=r.y;if(void 0!==t.offsetFromCenter&&void 0!==t.distanceToZero&&void 0!==t.width&&void 0!==t.height){var s={x:n-t.layer.x,y:o-t.layer.y},l=180*(Math.atan2(s.y,s.x)-Math.atan2(t.offsetFromCenter.y,t.offsetFromCenter.x))/Math.PI,c=Math.max(a.default.LAYER_MIN_SIZE,Math.sqrt(s.x*s.x+s.y*s.y))/t.distanceToZero;t.props.setLayerScale(c,l)}},t.controlMouseUp=function(){window.removeEventListener("mousemove",t.controlMouseMove),window.removeEventListener("mouseup",t.controlMouseUp),delete t.width,delete t.height,delete t.centerCoordinates,delete t.offsetFromCenter,delete t.distanceToZero},t}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this;return o.createElement("div",{className:"EditorLayerSelection"},o.createElement("div",{className:"EditorLayerSelection__handler EditorLayerSelection__handler--nw",onMouseDown:function(t){return e.controlMouseDown(t,"nw")}}),o.createElement("div",{className:"EditorLayerSelection__handler EditorLayerSelection__handler--ne",onMouseDown:function(t){return e.controlMouseDown(t,"ne")}}),o.createElement("div",{className:"EditorLayerSelection__handler EditorLayerSelection__handler--sw",onMouseDown:function(t){return e.controlMouseDown(t,"sw")}}),o.createElement("div",{className:"EditorLayerSelection__handler EditorLayerSelection__handler--se",onMouseDown:function(t){return e.controlMouseDown(t,"se")}}))},t}(o.Component)},963799:(e,t,r)=>{"use strict";r.d(t,{Layers:()=>l});var n=r(570655),o=r(667294),a=r(306337),i=r(557069),s=r(121265),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.layers,r=t.items,n=t.currentIndex,l=(0,s.classNames)("EditorCanvas__layers",{"EditorCanvas__layers--disabled":[i.default.TABS.PAINT,i.default.TABS.FILTERS,i.default.TABS.COLOR,i.default.TABS.CROP].includes(this.props.currentMode)});return o.createElement(o.Fragment,null,o.createElement("div",{className:l+" EditorCanvas__layers--items"},r.map((function(t,r){return o.createElement(a.default,{key:r,index:r,currentIndex:n,layer:t,setLayerScale:e.props.setLayerScale,startLayerScale:e.props.startLayerScale,toggleTextEditor:e.props.toggleTextEditor,getStickerUrlById:e.props.getStickerUrlById})}))),o.createElement("div",{className:l+" EditorCanvas__layers--bg"}))},t}(o.Component)},564782:(e,t,r)=>{"use strict";r.d(t,{SwitchMode:()=>c});var n=r(570655),o=r(667294),a=r(557069),i=r(121265),s=r(368893),l=r(784977),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setMode=function(e){e===a.default.BACKGROUND_MODES.PHOTO?(0,s.sendStat)(s.EVENTS.CLICK_TO_CAMERA_ICON):e===a.default.BACKGROUND_MODES.BACKGROUND&&(0,s.sendStat)(s.EVENTS.CLICK_TO_GRADIENT_ICON),t.props.setMode(e)},t}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this;return o.createElement("div",{className:"SwitchMode"},Object.values(a.default.BACKGROUND_MODES).map((function(t){var r=(0,i.classNames)("SwitchMode__mode","SwitchMode__mode--"+t,{"SwitchMode__mode--active":t===e.props.current}),n=t===a.default.BACKGROUND_MODES.PHOTO?o.createElement(l.default,null):null;return o.createElement("span",{key:t,className:r,onClick:function(){return e.setMode(t)}},n)})))},t}(o.PureComponent)},557069:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(442699),o=[{title:"photos_pe_crop_aspect_free",value:0},{title:"photos_pe_crop_aspect_original",value:-1},{title:"photos_pe_crop_aspect_16_9",value:16/9},{title:"photos_pe_crop_aspect_4_3",value:4/3},{title:"photos_pe_crop_aspect_1_1",value:1},{title:"photos_pe_crop_aspect_3_4",value:3/4},{title:"photos_pe_crop_aspect_9_16",value:9/16}];const a={TABS:{STICKERS:"stickers",TEXT:"text",PAINT:"paint",CROP:"crop",FILTERS:"filters",COLOR:"color"},BACKGROUND_MODES:{PHOTO:"photo",BACKGROUND:"background"},STORY_BASE_WIDTH:1080,STORY_BASE_HEIGHT:1920,BOTTOM_PANEL_HEIGHT:50,CANVAS_SCALE:(0,n.isRetina)()?2:1,STICKER_THUMB:"thumb",STICKER_SMALL:64,STICKER_MEDIUM:(0,n.isRetina)()?256:128,STICKER_LARGE:512,COLORS:["#FFFFFF","#000000","#FF3301","#FF8C49","#F9D827","#2EBA48","#4189E8","#9F4BED","#69E4B3","#FF84A0","#F7A978","#F8786C","#8B3232","#93B658","#556E35","#5B4490","#1B1B1B","#333333","#4D4D4D","#666666","#808080","#999999","#B3B3B3","#CCCCCC"],FONTS:["classic","cursive","marker","italics","typewriter","poster","retro","impact","lobster"],BRUSH_WIDTH_COEFFICIENT:40,FONT_SIZE_COEFFICIENT:100,PHOTO_FILTERS:["regular","nox","vesper","latona","liber","luna","minerva","mitra","pro","terra","veles","vesta","zaria","sepia","genius","horus","fortuna"],COLOR_CORRECTION:["exposure","contrast","saturation","warmth","vignette","sharpness","grain"],BLUR_TYPES:{ROUND:"round",RECTANGULAR:"rectangular"},AVERAGE_COLORS_MAP:[{s:12,v:-40},{s:9,v:-30},{s:6,v:-20},{s:3,v:-10},{s:0,v:0},{s:-3,v:10},{s:-6,v:20},{s:-9,v:30},{s:-12,v:40}],LAYER_TYPES:{STICKER:"sticker",TEXT:"text",IMAGE:"image",BACKGROUND:"background"},LAYER_MIN_SIZE:30,LAYER_DEFAULT_SIZE:128,CONTEXT_TYPES:{PHOTO:"photo",STORY:"story"},FILTER_PREVIEW_WIDTH:127,FILTER_PREVIEW_HEIGHT:95,DRAWING_PREVIEW_WIDTH:270,DRAWING_PREVIEW_HEIGHT:110,CROP_MIN_SIZE:100,CROP_SIDES:{CENTER:"center",NW:"nw",NE:"ne",SW:"sw",SE:"se",N:"n",S:"s",W:"w",E:"e"},CROP_ASPECTS:o,CROP_ASPECT_FREE:0,CROP_ASPECT_ORIGINAL:-1}},189513:(e,t,r)=>{"use strict";r.d(t,{default:()=>P});var n=r(570655),o=r(667294),a=r(50533),i=r(21090),s=r(561670),l=r(557069),c=r(125023),u=r(183070),d=r(687622),p=r(349763),h=r(284547),_=r(37736),f=r(355443),g=r(751373),m=r(497645),v=r(368893),E=r(468488),T=r(919079),y=r(64385),S=r(486353),w=r(693261),C=r(41437),x=r(414914),I=r(881150),R=r(423558),b=r(148434),A=r(611386),L=function(e){function t(t){var r=e.call(this,t)||this;return r.componentDidMount=function(){window.addEventListener("keydown",r.handleKeyDown,{capture:!0}),window.addEventListener("mousedown",r.canvasMouseDown),r.getEditorData().then((function(e){var t,n,o=e.stickers,a=e.backgrounds,i=e.storyUploadUrlHash,s=e.storySaveHash,c={};o.forEach((function(e){e.items.forEach((function(e){c[e.id]=e}))})),r.props.setData({stickers:o,stickersMap:c,backgrounds:a,placeholders:(0,C.getLang)("photos_pe_texts_placeholders").split("<br>"),fontsPlaceholders:(0,C.getLang)("photos_pe_fonts").split("<br>"),storyUploadUrlHash:i,storySaveHash:s}),r.props.setDataLoaded(),(null===(n=null===(t=r.props.data)||void 0===t?void 0:t.serviceInfo)||void 0===n?void 0:n.open_text_editor)?r.props.addLayerText(!0,{isEdit:!0,text:""}):r.props.stickers||r.props.background.currentBackgroundType!==l.default.BACKGROUND_MODES.BACKGROUND||(r.props.addLayerText(!0,{isEdit:!0}),r.props.closeTextEditor(),r.props.setCurrentLayer(null)),r.props.stickers&&r.prepareStickers(r.props.stickers)})).catch((function(){window.showFastBox({title:(0,C.getLang)("global_error")},(0,C.getLang)("global_error"),(0,C.getLang)("global_close"),(function(){window.curBox().hide(),r.props.data.close(!1,!0)}))}))},r.componentWillUnmount=function(){window.removeEventListener("keydown",r.handleKeyDown,{capture:!0}),window.removeEventListener("mousedown",r.canvasMouseDown),delete window.cur.storyPublishContext},r.getEditorData=function(){return new Promise((function(e,t){y.ajax.post("al_photos.php",{act:"get_editor_data"},{onDone:function(t){e(t)},onFail:function(){return t(),!0}})}))},r.render=function(){var e,t=r.props,n=t.ui,a=t.data,i=t.drawings,s=t.layers,u=t.settings;if(a.artboardContainer||(e={width:a.artboardWidth,height:parseInt(a.artboardHeight)+l.default.BOTTOM_PANEL_HEIGHT}),r.isSaveDisabled=!0,a.context===l.default.CONTEXT_TYPES.STORY)r.isSaveDisabled=!1;else{var d=u.colorCorrection,p=u.filter,h=u.blur,_=u.isAutoCorrection,f=u.isCropped,g=u.flipX,m=u.flipY,v=u.rotation;r.isSaveDisabled=!(!(s.items.length<=1)||i.length||d.exposure||d.contrast||d.saturation||d.warmth||d.vignette||d.sharpness||d.grain||"regular"!==p.name||h.isEnabled||_||f||g||m||v)}return o.createElement("div",{className:"PhotoEditor",style:{height:parseInt(a.artboardHeight)+l.default.BOTTOM_PANEL_HEIGHT}},o.createElement("div",{className:"PhotoEditor__canvas",style:e},o.createElement(c.default,{getStickerUrlById:r.getStickerUrlById,uploadPhoto:r.uploadPhoto,setMode:r.setMode})),o.createElement("div",{className:"PhotoEditor__tabs"},n.isDataLoaded?r.renderTabs():o.createElement(b.default,null)),o.createElement("input",{type:"file",accept:"image/*",className:"PhotoEditor__inputFile",onChange:r.handleChooseFile,ref:r.inputFile}),!n.isDataLoaded&&r.renderFontsPreloading())},r.renderTabs=function(){var e,t=r.props,n=t.data,a=t.background,i=n.context===l.default.CONTEXT_TYPES.STORY&&a.currentBackgroundType===l.default.BACKGROUND_MODES.BACKGROUND,s=(0,S.partConfigEnabled)("web_new_photo_editor"),c=(0,S.partConfigEnabled)("web_new_photo_editor_crop"),v=(0,C.getLang)("photos_pe_save_action");return r.props.data.context===l.default.CONTEXT_TYPES.STORY&&(v=(0,C.getLang)("photos_pe_publish_action")),o.createElement("div",{className:"PhotoEditor__inner"},o.createElement(u.EditorTabs,{current:r.props.ui.currentMode,change:r.props.setMode,setMode:r.setMode},o.createElement("div",{"data-mode":l.default.TABS.STICKERS},o.createElement(d.default,{stickerMouseDown:r.addSticker})),o.createElement("div",{"data-mode":l.default.TABS.TEXT},o.createElement(_.default,null)),o.createElement("div",{"data-mode":l.default.TABS.PAINT},o.createElement(p.default,null)),c&&!(null===(e=n.addons)||void 0===e?void 0:e.disableCrop)&&n.context===l.default.CONTEXT_TYPES.PHOTO&&o.createElement("div",{"data-mode":l.default.TABS.CROP},o.createElement(h.CropPanel,null)),s&&o.createElement("div",{"data-mode":l.default.TABS.FILTERS,"data-disabled":i},o.createElement(g.default,null)),s&&o.createElement("div",{"data-mode":l.default.TABS.COLOR,"data-disabled":i},o.createElement(f.default,null))),o.createElement("div",{className:"PhotoEditor__actions"},o.createElement(m.default,null),o.createElement("div",null,o.createElement(I.default,{appearance:"secondary",onClick:r.props.data.close},(0,C.getLang)("photos_pe_cancel_action")),o.createElement(R.default,{appearance:"primary",loading:r.props.ui.isSaveLoading,disabled:r.isSaveDisabled,onClick:r.save},v))))},r.renderFontsPreloading=function(){return o.createElement("div",{className:"PhotoEditor__fontPreload"},l.default.FONTS.map((function(e){return o.createElement("span",{key:e,className:"PhotoEditorFontStyle--"+e})})))},r.save=function(){r.props.closeTextEditor(),r.props.setCurrentLayer(null),r.props.setSaveLoading(!0),setTimeout((function(){r.renderImageFromState().then((function(e){var t=e.blob,n=e.width,o=e.height,a=r.props,i=a.layers,s=a.drawings,l=a.background,c=a.settings,u=(0,v.prepareStat)(i.items,s,l.currentBackgroundType,l.currentBackgroundId),d=(0,v.prepareMediaEditorStat)(i.items,c),p=[];r.props.layers.items.forEach((function(e){e.clickableZones&&e.clickableZones.forEach((function(t){p.push(r.getPreparedClickableZone(e,t))}))}));var h={original_width:n,original_height:o,clickable_stickers:p};r.props.data.save(t,(function(){r.props.setSaveLoading(!1)}),{attachment:r.props.data.attachment,storyUploadUrlHash:r.props.data.storyUploadUrlHash,storySaveHash:r.props.data.storySaveHash,analytics:JSON.stringify(u),mediaEditorAnalytics:JSON.stringify(d),clickableStickers:JSON.stringify(h)})})).catch((function(e){r.props.setSaveLoading(!1),console.error(e)}))}),0)},r.renderImageFromState=function(){var e=r.props,t=e.layers,n=e.drawings,o=e.data,a=o.artboardWidth,i=o.originalWidth,s=o.originalHeight,l=i/a;return new Promise((function(e,o){E.rendererScene.draw(i,s,t.items,n,l,r.getStickerUrlById).then((function(t){var r=t.blob,n=t.width,o=t.height;e({blob:r,width:n,height:o})})).catch((function(e){o(e)}))}))},r.getPreparedClickableZone=function(e,t){var n,o=r.props.data.originalWidth/r.props.data.artboardWidth,a=e.rotate*(Math.PI/180),i=e.x-e.width/2,s=e.y-e.height/2,l=parseFloat(e.x)+(i-e.x)*Math.cos(a)-(s-e.y)*Math.sin(a),c=parseFloat(e.y)+(s-e.y)*Math.cos(a)+(i-e.x)*Math.sin(a),u=null===(n=t.clickable_area)||void 0===n?void 0:n.map((function(t){var r=t.x*e.width,n=t.y*e.height,i=r*Math.cos(a)-n*Math.sin(a),s=r*Math.sin(a)+n*Math.cos(a);return{x:(l+i)*o,y:(c+s)*o}})),d={type:t.action_type,clickable_area:u};return"link"===t.action_type?(d.link=t.action.link,t.action.tooltip_text_key&&(d.tooltip_text_key=t.action.tooltip_text_key)):"app"===t.action_type&&(d.app_id=t.action.app_id,t.action.app_context&&(d.app_id=t.action.app_id)),d},r.handleKeyDown=function(e){if("Escape"==e.key&&r.props.layers.currentIndex&&r.props.layers.items[r.props.layers.currentIndex].isEdit&&(e.preventDefault(),e.stopPropagation(),r.props.closeTextEditor()),(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.shiftKey?r.props.redo():r.props.undo()),null!==r.props.layers.currentIndex&&"TEXTAREA"!==e.target.nodeName)if(["Backspace","Delete"].includes(e.key))e.preventDefault(),r.props.layers.items[r.props.layers.currentIndex].canDelete&&r.props.deleteLayer();else if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){var t=r.getCurrentLayer();if(!t)return;var n={x:t.x,y:t.y},o=e.shiftKey?10:1;switch(e.key){case"ArrowUp":n.y-=o;break;case"ArrowDown":n.y+=o;break;case"ArrowLeft":n.x-=o;break;case"ArrowRight":n.x+=o}r.props.setLayerPosition(n.x,n.y)}},r.canvasMouseDown=function(e){var t=r.getCurrentLayer(),n=e.target;if("TEXTAREA"!==n.tagName)return!!n.closest(".EditorCanvas")&&(!n.closest(".SwitchMode")&&void([l.default.TABS.PAINT,l.default.TABS.FILTERS].includes(r.props.ui.currentMode)||(t&&t.type===l.default.LAYER_TYPES.TEXT&&t.isEdit?r.props.closeTextEditor():(r.props.ui.currentMode===l.default.TABS.COLOR&&r.props.settings.blur.isEnabled&&r.moveBlurStart(e),n.closest(".EditorLayer")?r.layerDragStart(e):t&&r.props.setCurrentLayer(null)))))},r.moveBlurStart=function(e){window.addEventListener("mousemove",r.moveBlurProcess),window.addEventListener("mouseup",r.moveBlurFinish),r.moveBlurProcess(e)},r.moveBlurProcess=function(e){var t=(0,w.getRelativeXY)(e,document.querySelector(".EditorCanvas__canvas--bg")),n=t.x,o=t.y,a=t.width,i=t.height,s=[Math.max(0,Math.min(n/a,1)),1-Math.max(0,Math.min(o/i,1))];r.props.setBlurPosition(s)},r.moveBlurFinish=function(){window.removeEventListener("mousemove",r.moveBlurProcess),window.removeEventListener("mouseup",r.moveBlurFinish)},r.getCurrentLayer=function(){var e=r.props.layers,t=e.items,n=e.currentIndex;return null===n?n:t[n]},r.layerDragStart=function(e){window.addEventListener("mousemove",r.layerDragProcess),window.addEventListener("mouseup",r.layerDragFinish);var t,n=e.target.closest("[data-index]");t=n?+(0,x.domData)(n,"index"):r.props.layers.currentIndex,r.props.layers.currentIndex!==t&&r.props.setCurrentLayer(t);var o=(0,w.getRelativeXY)(e,document.querySelector(".EditorCanvas__canvas--draw")),a=o.x,i=o.y;if(r.currentLayer=r.getCurrentLayer(),r.currentLayer){var s=r.currentLayer;s.isBackground&&s.locked?r.props.setCurrentLayer(null):(r.clientX=e.clientX,r.clientY=e.clientY,r.shiftX=a-r.currentLayer.x,r.shiftY=i-r.currentLayer.y)}},r.layerDragProcess=function(e){if(r.currentLayer){var t=document.querySelector(".EditorCanvas__canvas--draw");if(t){var n=(0,w.getRelativeXY)(e,t),o=n.x,a=n.y;if(void 0!==r.shiftX&&void 0!==r.shiftY){var i=o-r.shiftX,s=a-r.shiftY;r.props.setLayerPosition(i,s),r.props.ui.isShowDropBox||r.props.setShowDropBox(!0)}}}},r.layerDragFinish=function(e){if(window.removeEventListener("mousemove",r.layerDragProcess),window.removeEventListener("mouseup",r.layerDragFinish),r.getCurrentLayer()&&r.currentLayer&&void 0!==r.shiftX&&void 0!==r.shiftY){var t=document.querySelector(".EditorCanvas__canvas--draw");if(t){var n=(0,w.getRelativeXY)(e,t),o=n.x,a=n.y,i=o-r.shiftX,s=a-r.shiftY;r.props.setLayerPosition(Math.round(i),Math.round(s)),r.props.setShowDropBox(!1),delete r.currentLayer,delete r.shiftX,delete r.shiftY,delete r.clientX,delete r.clientY}}},r.getStickerUrlById=function(e,t){var n=r.props.data.stickersMap[e];return n?n.sizes[t]:""},r.addSticker=function(e,t){e.persist();var n=document.querySelector(".EditorCanvas__canvas--draw");if(n){var o=(0,w.getRelativeXY)(e.nativeEvent,n),a=o.width,i=o.height;r.props.addLayerSticker({id:t,x:a/2,y:i/2,width:l.default.LAYER_DEFAULT_SIZE,height:l.default.LAYER_DEFAULT_SIZE,rotate:0,canDelete:!0,scale:1})}},r.prepareStickers=function(e){var t=r.props.data,n=t.artboardWidth,o=t.artboardHeight;e.forEach((function(e){var t=e.sticker.transform||{},a=t.gravity,i=void 0===a?"center":a,s=t.rotation,c=void 0===s?0:s,u=t.translation_x,d=void 0===u?0:u,p=t.translation_y,h=void 0===p?0:p,_=t.relation_width;if(d=Math.min(Math.max(d,-1),1),h=Math.min(Math.max(h,-1),1),_&&(_=Math.min(Math.max(_,.1),1)),"renderable"===e.sticker_type)r.prepareRenderableSticker(e.sticker,i,d,h,_).then((function(t){var n=t.url,o=t.x,a=t.y,i=t.stickerWidth,s=t.stickerHeight,l=t.clickableZones;r.props.addLayerImage({url:n,x:o,y:a,width:Math.round(i),height:Math.round(s),rotate:-c,clickableZones:l,canDelete:Boolean(e.sticker.can_delete),scale:1})})).catch((function(e){console.error(e)}));else if("native"===e.sticker_type)switch(e.sticker.action_type){case"sticker":var f=_?n*_:l.default.LAYER_DEFAULT_SIZE,g=_?n*_:l.default.LAYER_DEFAULT_SIZE,m=e.sticker.action.pack_id+"_"+e.sticker.action.sticker_id;if(r.props.data.stickersMap[m]){var v=(0,w.getPositionWithGravity)(i,n,o,f/2,g/2,d*n,h*o),E=v.x,y=v.y;r.props.addLayerSticker({id:m,x:E,y,width:f,height:g,rotate:-c,canDelete:!0,scale:1})}break;case"text":var S=.5;_&&(S=r.getFontSize(e.sticker.action.text,n*_,e.sticker.action.style));var C=r.getTextRect(e.sticker.action.text,S*l.default.FONT_SIZE_COEFFICIENT,e.sticker.action.style),x=(f=C.width,g=C.height,(0,w.getPositionWithGravity)(i,n,o,f/2,g/2,d*n,h*o));E=x.x,y=x.y;r.props.addLayerText(!0,{isEdit:!0,text:e.sticker.action.text,style:e.sticker.action.style,color:e.sticker.action.selection_color,fontSize:S,initialFontSize:S,rotate:-c,scale:1,x:E,y}),r.props.closeTextEditor(),r.props.setCurrentLayer(null);break;case"comment":var I=e.sticker.action,R=I.postRawId,b=I.replyId,L=new T.CommentSticker(e.sticker.action);L.render().then((function(){L.toBlob().then((function(t){var a=(0,w.getPositionWithGravity)(i,n,o,L.width/2,L.height/2,0,0),s=a.x,l=a.y,c=L.width/n,u=L.width/c,d=L.height/c;r.props.addLayerImage({url:URL.createObjectURL(t),x:s,y:l,width:u,height:d,rotate:0,clickableZones:[{action_type:"link",action:{link:"https://vk.com/wall"+R+"?reply="+b,tooltip_text_key:"tooltip_open_post"},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]}],canDelete:Boolean(e.sticker.can_delete),scale:.8})})).catch((function(e){(0,A.logError)(e,{environment:"photoEditor"})}))})).catch((function(e){(0,A.logError)(e,{environment:"photoEditor"})}))}}))},r.prepareRenderableSticker=function(e,t,o,a,i){var s=r.props.data,l=s.artboardWidth,c=s.artboardHeight,u=s.originalWidth/l;return new Promise((function(r,s){"string"!=typeof e.url&&"string"!=typeof e.blob&&s();var d=e.url||e.blob||"";(0,w.loadImage)(d).then((function(s){var p=s.height/s.width,h=0,_=0;i?_=(h=l*i)*p:(h=s.width/u,_=s.height/u,h>l&&(_=(h=l)*p));var f,g=(0,w.getPositionWithGravity)(t,l,c,h/2,_/2,o*l,a*c),m=g.x,v=g.y;e.clickable_zones&&(f=e.clickable_zones.map((function(e){var t;return t=e.clickable_area?e.clickable_area.map((function(e){return{x:e.x/s.width,y:e.y/s.height}})):[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}],(0,n.__assign)((0,n.__assign)({},e),{clickable_area:t})}))),r({url:d,x:m,y:v,stickerWidth:h,stickerHeight:_,clickableZones:f})})).catch((function(){s()}))}))},r.getTextRect=function(e,t,r){var n=document.createElement("span");n.innerHTML=e,n.style.display="inline-block",n.style.fontSize=t+"px",n.style.lineHeight="1em",n.style.whiteSpace="pre",r&&n.classList.add("PhotoEditorFontStyle--"+r),document.body.append(n);var o=n.getBoundingClientRect();return n.remove(),o},r.getFontSize=function(e,t,r){var n=2*t,o=document.createElement("span");for(o.innerHTML=e,o.style.display="inline-block",o.style.width=t+"px",o.style.fontSize=n+"px",o.style.lineHeight="1em",o.style.whiteSpace="pre",r&&o.classList.add("PhotoEditorFontStyle--"+r),document.body.append(o);n&&o.scrollWidth>Math.round(t);)n--,o.style.fontSize=n+"px";return o.remove(),n/100},r.uploadPhoto=function(){var e;null===(e=r.inputFile.current)||void 0===e||e.click()},r.setMode=function(e){var t=r.props.ui,n=r.props.background,o=n.currentBackgroundType,a=n.currentPhotoUrl;r.props.setCurrentLayer(null),e===l.default.BACKGROUND_MODES.PHOTO&&!a||o===l.default.BACKGROUND_MODES.PHOTO&&o===e?r.uploadPhoto():(r.props.setBackgroundType(e),e===l.default.BACKGROUND_MODES.BACKGROUND&&[l.default.TABS.COLOR,l.default.TABS.FILTERS].includes(t.currentMode)&&r.props.setMode(l.default.TABS.STICKERS))},r.handleChooseFile=function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t.item(0);if(n){var o=URL.createObjectURL(n);(0,w.loadImage)(o).then((function(){(0,w.getOrientation)(n).then((function(e){-1===e||-2===e||1===e?(r.props.setCurrentPhotoUrl(o),r.props.setBackgroundType(l.default.BACKGROUND_MODES.PHOTO)):(0,w.resetOrientation)(o,e).then((function(e){r.props.setCurrentPhotoUrl(e),r.props.setBackgroundType(l.default.BACKGROUND_MODES.PHOTO)})).catch((function(){}))})).catch((function(){}))})).catch((function(){window.showFastBox({title:(0,C.getLang)("global_error")},(0,C.getLang)("stories_create_image_incorrect"))}))}else console.error("File not found")},r.inputFile=o.createRef(),r}return(0,n.__extends)(t,e),t}(o.Component),N=Object.assign(i.ActionCreators,{setMode:s.setMode,addLayerSticker:s.addLayerSticker,addLayerText:s.addLayerText,addLayerImage:s.addLayerImage,setLayerPosition:s.setLayerPosition,deleteLayer:s.deleteLayer,setCurrentLayer:s.setCurrentLayer,setDataLoaded:s.setDataLoaded,setShowDropBox:s.setShowDropBox,setSaveLoading:s.setSaveLoading,closeTextEditor:s.closeTextEditor,setData:s.setData,setBlurPosition:s.setBlurPosition,setCurrentPhotoUrl:s.setCurrentPhotoUrl,setBackgroundType:s.setBackgroundType});const P=(0,a.connect)((function(e){return{ui:e.present.ui,settings:e.present.settings,layers:e.present.layers,drawings:e.present.drawings,background:e.present.background,data:e.present.data}}),N,null,{forwardRef:!0})(L)},355443:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var n=r(570655),o=r(667294),a=r(50533),i=r(561670),s=r(41437),l=r(557069),c=r(317322),u=r(539503),d=r(326542),p=r(30081),h=r(418586),_=r(270640),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.settings,r=e.setColorCorrection;return o.createElement("div",{className:"ColorPanel"},o.createElement("div",{className:"ColorPanel__items"},o.createElement("div",{className:"ColorPanel__item"},o.createElement("span",{className:"ColorPanel__name"},(0,s.getLang)("photos_pe_correction_exposure")),o.createElement(c.default,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:t.colorCorrection.exposure,onChange:function(e){return r("exposure",e)},formatHint:function(e){return Math.round(100*e)}})),o.createElement("div",{className:"ColorPanel__item"},o.createElement("span",{className:"ColorPanel__name"},(0,s.getLang)("photos_pe_correction_contrast")),o.createElement(c.default,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:t.colorCorrection.contrast,onChange:function(e){return r("contrast",e)},formatHint:function(e){return Math.round(100*e)}})),o.createElement("div",{className:"ColorPanel__item"},o.createElement("span",{className:"ColorPanel__name"},(0,s.getLang)("photos_pe_correction_saturation")),o.createElement(c.default,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:t.colorCorrection.saturation,onChange:function(e){return r("saturation",e)},formatHint:function(e){return Math.round(100*e)}})),o.createElement("div",{className:"ColorPanel__item"},o.createElement("span",{className:"ColorPanel__name"},(0,s.getLang)("photos_pe_correction_warmth")),o.createElement(c.default,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:t.colorCorrection.warmth,onChange:function(e){return r("warmth",e)},formatHint:function(e){return Math.round(100*e)}})),o.createElement("div",{className:"ColorPanel__item"},o.createElement("span",{className:"ColorPanel__name"},(0,s.getLang)("photos_pe_correction_vignette")),o.createElement(c.default,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:t.colorCorrection.vignette,onChange:function(e){return r("vignette",e)},formatHint:function(e){return Math.round(100*e)}})),o.createElement("div",{className:"ColorPanel__item"},o.createElement("span",{className:"ColorPanel__name"},(0,s.getLang)("photos_pe_correction_sharpness")),o.createElement(c.default,{min:0,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:t.colorCorrection.sharpness,onChange:function(e){return r("sharpness",e)},formatHint:function(e){return Math.round(100*e)}})),o.createElement("div",{className:"ColorPanel__item"},o.createElement("span",{className:"ColorPanel__name"},(0,s.getLang)("photos_pe_correction_grain")),o.createElement(c.default,{min:0,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:t.colorCorrection.grain,onChange:function(e){return r("grain",e)},formatHint:function(e){return Math.round(100*e)}}))),o.createElement("div",{className:"ColorPanel__linkBox"},this.renderAutoCorrectionPanel()),o.createElement("div",{className:"ColorPanel__linkBox"},this.renderBlurPanel()))},t.prototype.renderAutoCorrectionPanel=function(){var e=this.props,t=e.settings,r=e.setAutoCorrection;return t.isAutoCorrection?o.createElement("div",{className:"ColorPanelEnabledBox"},o.createElement("div",{className:"ColorPanelEnabledBox__header"},o.createElement(p.default,{className:""},(0,s.getLang)("photos_pe_correction_auto_enabled")),o.createElement("span",{className:"dvd"}),o.createElement(d.default,{className:"ColorPanelEnabledBox__link",onClick:function(){return r(!1)}},(0,s.getLang)("photos_pe_cancel")))):o.createElement(d.default,{className:"ColorPanel__link",onClick:function(){return r(!0)}},o.createElement(h.default,{className:"ColorPanel__icon"}),(0,s.getLang)("photos_pe_correction_auto"))},t.prototype.renderBlurPanel=function(){var e=this.props,t=e.settings,r=e.setBlurEnable,n=e.setBlurForm,a=e.setBlurSize,i=t.blur,h=[{label:(0,s.getLang)("photos_pe_correction_blur_type_round"),value:l.default.BLUR_TYPES.ROUND},{label:(0,s.getLang)("photos_pe_correction_blur_type_rec"),value:l.default.BLUR_TYPES.RECTANGULAR}];return i.isEnabled?o.createElement("div",{className:"ColorPanelEnabledBox"},o.createElement("div",{className:"ColorPanelEnabledBox__header"},o.createElement(p.default,{className:""},(0,s.getLang)("photos_pe_correction_blur_enabled")),o.createElement("span",{className:"dvd"}),o.createElement(d.default,{className:"ColorPanelEnabledBox__link",onClick:function(){return r(!1)}},(0,s.getLang)("photos_pe_cancel"))),o.createElement("div",{className:"ColorPanelEnabledBox__select"},o.createElement("span",{className:"ColorPanelEnabledBox__type"},(0,s.getLang)("photos_pe_correction_blur_type")),o.createElement(u.default,{appearance:"fancy",value:i.form,options:h,onChange:function(e){return n(String(e.selected.value))}})),o.createElement(c.default,{min:0,max:100,gravity:2,isShowHandle:!0,isShowZero:!0,value:t.blur.size,onChange:function(e){return a(e)},formatHint:function(e){return Math.round(e)}})):o.createElement(d.default,{className:"ColorPanel__link",onClick:function(){return r(!0)}},o.createElement(_.default,{className:"ColorPanel__icon"}),(0,s.getLang)("photos_pe_correction_blur"))},t}(o.Component),g={setColorCorrection:i.setColorCorrection,setBlurEnable:i.setBlurEnable,setBlurForm:i.setBlurForm,setBlurSize:i.setBlurSize,setAutoCorrection:i.setAutoCorrection};const m=(0,a.connect)((function(e){return{settings:e.present.settings}}),g)(f)},157424:(e,t,r)=>{"use strict";r.d(t,{CropControls:()=>m});var n=r(570655),o=r(667294),a=r(881150),i=r(557069),s=r(561670),l=r(50533),c=r(332324),u=r(693261),d=r(41437),p=r(121265),h=r(24535),_=function(e,t,r){[i.default.CROP_ASPECT_ORIGINAL,i.default.CROP_ASPECT_FREE].includes(e)&&(e=t/r);var n=t,o=n/e;return o>r&&(n=(o=r)*e),{x:t/2-n/2,y:r/2-o/2,width:n,height:o}},f=function(e){function t(t){var r=e.call(this,t)||this;r.controlMouseDown=function(e,t){e.stopPropagation();var n=r.areaEl.current;if(n){window.addEventListener("mousemove",r.controlMouseMove),window.addEventListener("mouseup",r.controlMouseUp);var o=(0,u.getRelativeXY)(e.nativeEvent,n),a=o.x,i=o.y;r.shiftX=a,r.shiftY=i,r.initCrop=r.state,r.side=t}},r.controlMouseMove=function(e){var t=r.containerEl.current;if(t&&void 0!==r.shiftX&&void 0!==r.shiftY&&void 0!==r.initCrop&&void 0!==r.side){var n=r.state,o=r.props,a=o.artboardWidth,s=o.artboardHeight,l=o.cropAspect,c=l===i.default.CROP_ASPECT_ORIGINAL?a/s:l,d=(0,u.getRelativeXY)(e,t),p=d.x,h=d.y,_=d.width,f=d.height,g=n.x,m=n.y,v=n.width,E=n.height,T=i.default.CROP_MIN_SIZE,y=i.default.CROP_MIN_SIZE;if(c&&(c>1?T=i.default.CROP_MIN_SIZE*c:c<1&&(y=i.default.CROP_MIN_SIZE/c)),r.side===i.default.CROP_SIDES.CENTER)g=Math.min(Math.max(0,p-r.shiftX),_-v),m=Math.min(Math.max(0,h-r.shiftY),f-E);else{var S=Math.max(0,p-r.shiftX),w=Math.max(0,h-r.shiftY);switch(r.side){case i.default.CROP_SIDES.S:E=h-m-(r.shiftY-r.initCrop.height);break;case i.default.CROP_SIDES.N:E-=(m=w)-n.y;break;case i.default.CROP_SIDES.W:v-=(g=S)-n.x;break;case i.default.CROP_SIDES.E:v=p-g-(r.shiftX-r.initCrop.width);break;case i.default.CROP_SIDES.NW:m=w,v-=(g=S)-n.x,E-=m-n.y;break;case i.default.CROP_SIDES.NE:m=w,v=p-g-(r.shiftX-r.initCrop.width),E-=m-n.y;break;case i.default.CROP_SIDES.SW:v-=(g=S)-n.x,E=h-m-(r.shiftY-r.initCrop.height);break;case i.default.CROP_SIDES.SE:v=p-g-(r.shiftX-r.initCrop.width),E=h-m-(r.shiftY-r.initCrop.height)}if(c){var C=Math.min(v,_-g)/c;if([i.default.CROP_SIDES.NW,i.default.CROP_SIDES.NE].includes(r.side)&&(m=Math.max(0,m+E-C)),f-(m+C)<0)return;E=C}v=Math.min(Math.max(T,v),_-g),E=Math.min(Math.max(y,E),f-m),v-T<=0&&(g=n.x,v=n.width),E-y<=0&&(m=n.y,E=n.height)}r.setState({x:g,y:m,width:v,height:E})}},r.controlMouseUp=function(){window.removeEventListener("mousemove",r.controlMouseMove),window.removeEventListener("mouseup",r.controlMouseUp),delete r.shiftX,delete r.shiftY,delete r.initCrop,delete r.side},r.cropImage=function(){var e=r.state,t=e.width,o=e.height,a=e.x,i=e.y,s=r.props,l=s.currentBackgroundUrl,c=s.artboardWidth,u=s.artboardHeight;r.setState({isButtonDisable:!0});var d=document.createElement("canvas"),p=d.getContext("2d");p&&h.imageCacheGlobal.get(l).then((function(e){var s=e.width/c,l=e.height/u;d.width=t*s,d.height=o*l,p.drawImage(e,a*s,i*l,t*s,o*l,0,0,d.width,d.height),d.toBlob((function(e){r.props.setCrop({url:URL.createObjectURL(e),isCropped:!0,data:{artboardWidth:t,originalWidth:d.width,originalHeight:d.height,addons:(0,n.__assign)((0,n.__assign)({},r.props.addons),{photoHeight:o})},layers:r.props.layers.items.map((function(e){return(0,n.__assign)((0,n.__assign)({},e),{x:e.x-a,y:e.y-i})})),drawings:r.props.drawings.map((function(e){return(0,n.__assign)((0,n.__assign)({},e),{path:e.path.map((function(e){return[e[0]-a,e[1]-i]}))})}))}),r.reset(t,o)}),"image/jpeg",1)})).catch((function(e){console.error(e)}))},r.reset=function(e,t){r.props.setAspect(i.default.CROP_ASPECT_FREE),r.setState({x:0,y:0,width:e,height:t,isButtonDisable:!1})},r.containerEl=o.createRef(),r.areaEl=o.createRef();var a=t.cropAspect,s=t.artboardWidth,l=t.artboardHeight;return r.state=(0,n.__assign)({isButtonDisable:!1},_(a,s,l)),r}return(0,n.__extends)(t,e),t.prototype.shouldComponentUpdate=function(e){return e.cropAspect===this.props.cropAspect&&e.artboardWidth===this.props.artboardWidth&&e.artboardHeight===this.props.artboardHeight||this.setState(_(e.cropAspect,e.artboardWidth,e.artboardHeight)),!0},t.prototype.render=function(){var e=this,t=i.default.CROP_SIDES,r=this.props,n=r.artboardWidth,s=r.artboardHeight,l=this.state,c=l.x,u=l.y,h=l.width,_=l.height,f=l.isButtonDisable,g=h<210,m=g?100:60,v=(0,p.classNames)("CropControls__buttons",{"CropControls__buttons--top":u+_+m>=s,"CropControls__buttons--small":g}),E=0!==c||0!==u||h!==n||_!==s;return o.createElement("div",{className:"CropControls",ref:this.containerEl},o.createElement("div",{className:"CropControls__inner",ref:this.areaEl,style:{top:u,left:c,width:h,height:_}},E&&o.createElement("div",{className:v},o.createElement(a.default,{size:"s",className:"CropControls__button CropControls__button--cancel",onClick:function(){return e.reset(e.props.artboardWidth,e.props.artboardHeight)}},(0,d.getLang)("photos_pe_crop_cancel")),o.createElement(a.default,{size:"s",className:"CropControls__button",onClick:this.cropImage,disabled:f},(0,d.getLang)("photos_pe_crop_apply"))),o.createElement("div",{className:"CropControls__grid",onMouseDown:function(r){return e.controlMouseDown(r,t.CENTER)}},o.createElement("div",{className:"CropControls__line CropControls__line--v",style:{left:"33.3333%"}}),o.createElement("div",{className:"CropControls__line CropControls__line--v",style:{left:"66.6666%"}}),o.createElement("div",{className:"CropControls__line CropControls__line--h",style:{top:"33.3333%"}}),o.createElement("div",{className:"CropControls__line CropControls__line--h",style:{top:"66.6666%"}}),o.createElement("div",{className:"CropControls__handleCorner CropControls__handleCorner--nw",onMouseDown:function(r){return e.controlMouseDown(r,t.NW)}}),o.createElement("div",{className:"CropControls__handleCorner CropControls__handleCorner--ne",onMouseDown:function(r){return e.controlMouseDown(r,t.NE)}}),o.createElement("div",{className:"CropControls__handleCorner CropControls__handleCorner--sw",onMouseDown:function(r){return e.controlMouseDown(r,t.SW)}}),o.createElement("div",{className:"CropControls__handleCorner CropControls__handleCorner--se",onMouseDown:function(r){return e.controlMouseDown(r,t.SE)}}),this.props.cropAspect===i.default.CROP_ASPECT_FREE&&o.createElement(o.Fragment,null,o.createElement("div",{className:"CropControls__handle CropControls__handle--n",onMouseDown:function(r){return e.controlMouseDown(r,t.N)}}),o.createElement("div",{className:"CropControls__handle CropControls__handle--s",onMouseDown:function(r){return e.controlMouseDown(r,t.S)}}),o.createElement("div",{className:"CropControls__handle CropControls__handle--w",onMouseDown:function(r){return e.controlMouseDown(r,t.W)}}),o.createElement("div",{className:"CropControls__handle CropControls__handle--e",onMouseDown:function(r){return e.controlMouseDown(r,t.E)}})))))},t}(o.Component),g={setAspect:s.setAspect,setCrop:s.setCrop},m=(0,l.connect)((function(e){return{currentBackgroundUrl:(0,c.getCurrentImageUrl)(e),cropAspect:e.present.settings.cropAspect,addons:e.present.data.addons,layers:e.present.layers,drawings:e.present.drawings}}),g)(f)},284547:(e,t,r)=>{"use strict";r.d(t,{CropPanel:()=>T});var n=r(570655),o=r(667294),a=r(50533),i=r(332324),s=r(561670),l=r(557069),c=r(326542),u=r(121265),d=r(41437),p=r(24535),h=r(368893),_=r(322298),f=r(777163),g=r(318422),m=r(402255),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flip=function(e,r){var n=document.createElement("canvas"),o=null==n?void 0:n.getContext("2d"),a=t.props.currentBackgroundUrl;o&&p.imageCacheGlobal.get(a).then((function(a){n.width=a.width,n.height=a.height,e?(o.translate(n.width,0),o.scale(-1,1)):r&&(o.translate(0,n.height),o.scale(1,-1)),o.drawImage(a,0,0),n.toBlob((function(n){var o={url:URL.createObjectURL(n)};e&&(o.flipX=!t.props.flipX),r&&(o.flipY=!t.props.flipY),t.props.setCrop(o)}),"image/jpeg",1)})).catch((function(e){console.error(e)}))},t.rotate=function(e){var r=document.createElement("canvas"),o=null==r?void 0:r.getContext("2d"),a=t.props,i=a.currentBackgroundUrl,s=a.originalWidth,c=a.originalHeight;o&&p.imageCacheGlobal.get(i).then((function(a){r.width=a.height,r.height=a.width;var i=e?-90:90;o.translate(r.width/2,r.height/2),o.rotate(i*Math.PI/180),o.drawImage(a,-a.width/2,-a.height/2),r.toBlob((function(e){var o=r.height/r.width,a=t.props.rotate+i;t.props.rotate>a?(0,h.sendStat)(h.EVENTS.TURN_LEFT):(0,h.sendStat)(h.EVENTS.TURN_RIGHT);var u,d,p=document.getElementById("pv_photo").getBoundingClientRect(),_=p.width,f=p.height;f-=l.default.BOTTOM_PANEL_HEIGHT,o>=.67?(u=f/o,d=f):(u=_,d=_*o),t.props.setCrop({url:URL.createObjectURL(e),data:{artboardWidth:u,originalWidth:c,originalHeight:s,addons:(0,n.__assign)((0,n.__assign)({},t.props.addons),{photoHeight:d})},rotate:a>270?0:a})}),"image/jpeg",1)})).catch((function(e){console.error(e)}))},t}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this;return o.createElement("div",{className:"CropPanel"},o.createElement("span",{className:"CropPanel__title"},(0,d.getLang)("photos_pe_crop_aspect_title")),o.createElement("ul",{className:"CropPanelRatioTabs"},l.default.CROP_ASPECTS.map((function(t){var r=(0,u.classNames)("CropPanelRatioTabs__button",{"CropPanelRatioTabs__button--active":e.props.cropAspect===t.value});return o.createElement("li",{className:"CropPanelRatioTabs__item",key:t.title},o.createElement("button",{className:r,onClick:function(){return e.props.setAspect(t.value)}},(0,d.getLang)(t.title)))}))),o.createElement("ul",{className:"CropPanelSettings"},o.createElement("li",{className:"CropPanelSettings__item"},o.createElement(c.default,{className:"CropPanelSettings__link",onClick:function(){return e.rotate(!1)}},o.createElement(_.default,{className:"CropPanelSettings__icon"}),(0,d.getLang)("photos_pe_rotate_right"))),o.createElement("li",{className:"CropPanelSettings__item"},o.createElement(c.default,{className:"CropPanelSettings__link",onClick:function(){return e.rotate(!0)}},o.createElement(f.default,{className:"CropPanelSettings__icon"}),(0,d.getLang)("photos_pe_rotate_left"))),o.createElement("li",{className:"CropPanelSettings__item"},o.createElement(c.default,{className:"CropPanelSettings__link",onClick:function(){return e.flip(!0,!1)}},o.createElement(g.default,{className:"CropPanelSettings__icon"}),(0,d.getLang)("photos_pe_flip_horizontal"))),o.createElement("li",{className:"CropPanelSettings__item"},o.createElement(c.default,{className:"CropPanelSettings__link",onClick:function(){return e.flip(!1,!0)}},o.createElement(m.default,{className:"CropPanelSettings__icon"}),(0,d.getLang)("photos_pe_flip_vertical")))))},t}(o.Component),E={setCrop:s.setCrop,setAspect:s.setAspect},T=(0,a.connect)((function(e){return{flipX:e.present.settings.flipX,flipY:e.present.settings.flipY,rotate:e.present.settings.rotation,cropAspect:e.present.settings.cropAspect,currentBackgroundUrl:(0,i.getCurrentImageUrl)(e),addons:e.present.data.addons,artboardWidth:e.present.data.artboardWidth,artboardHeight:e.present.data.artboardHeight,originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight}}),E)(v)},349763:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n=r(570655),o=r(667294),a=r(50533),i=r(561670),s=r(916341),l=r(557069),c=r(693261),u=r(41437),d=r(317322),p=function(e){function t(t){var r=e.call(this,t)||this;return r.componentDidMount=function(){r.updateDrawingPreview()},r.render=function(){var e=r.props,t=e.settings,n=e.setColor,a=e.setBrushWidth,i=e.setBrushOpacity,c=e.avgColor;return r.updateDrawingPreview(),o.createElement("div",{className:"DrawPanel"},o.createElement("canvas",{ref:r.previewCanvas,className:"DrawPanel__preview",width:l.default.DRAWING_PREVIEW_WIDTH*l.default.CANVAS_SCALE,height:l.default.DRAWING_PREVIEW_HEIGHT*l.default.CANVAS_SCALE,style:{width:l.default.DRAWING_PREVIEW_WIDTH,height:l.default.DRAWING_PREVIEW_HEIGHT}}),o.createElement("div",{className:"DrawPanel__sliders"},o.createElement("div",{className:"DrawPanel__slider"},o.createElement("div",{className:"DrawPanel__title"},(0,u.getLang)("photos_pe_intensity")),o.createElement(d.default,{min:0,max:1,isShowHandle:!0,defaultValue:t.brushOpacity,formatHint:function(e){return Math.round(100*e)+"%"},onChange:function(e){return i(e)}})),o.createElement("div",{className:"DrawPanel__slider"},o.createElement("div",{className:"DrawPanel__title"},(0,u.getLang)("photos_pe_line_width")),o.createElement(d.default,{min:0,max:1,isShowHandle:!0,defaultValue:t.brushWidth,formatHint:function(e){return Math.round(100*e)+"%"},onChange:function(e){return a(e)}}))),o.createElement("div",{className:"DrawPanel__colors"},o.createElement("div",{className:"DrawPanel__title DrawPanel__title--largeOffset"},(0,u.getLang)("photos_pe_color")),o.createElement(s.ColorPicker,{color:t.color,avgColor:c,setColor:n})))},r.updateDrawingPreview=function(){var e=r.previewCanvas.current,t=r.props.settings;if(e){var n=e.getContext("2d");if(n){var o=n.canvas,a=o.width,i=o.height;n.clearRect(0,0,a,i);var s=l.default.CANVAS_SCALE,u=new Path2D("M"+69*s+" "+65*s+"L"+93*s+" "+41*s+"L"+121*s+" "+69*s+"L"+149*s+" "+41*s+"L"+177*s+" "+69*s+"L"+201*s+" "+45*s),d="#FFFFFF"===t.color?"#F1F1F1":t.color;n.lineWidth=t.brushWidth*l.default.BRUSH_WIDTH_COEFFICIENT*s,n.strokeStyle=(0,c.hexToRgba)(d,t.brushOpacity),n.lineJoin=n.lineCap="round",n.stroke(u)}}},r.previewCanvas=o.createRef(),r}return(0,n.__extends)(t,e),t}(o.Component),h={setColor:i.setColor,setBrushWidth:i.setBrushWidth,setBrushOpacity:i.setBrushOpacity};const _=(0,a.connect)((function(e){return{settings:e.present.settings,drawings:e.present.drawings,avgColor:e.present.layers.items[0].avgColor}}),h)(p)},83643:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var n=r(570655),o=r(667294),a=r(50533),i=r(561670),s=r(557069),l=r(693261),c=r(121265),u=function(e){function t(t){var r=e.call(this,t)||this;return r.renderDrawings=function(){var e=r.props.drawings,t=r.canvas.current;if(t){var n=t.getContext("2d");if(n){var o=r.props.data.originalHeight/r.props.height;n.clearRect(0,0,t.width,t.height),n.lineCap="round",n.lineJoin="round",e.forEach((function(e){n.lineWidth=e.width*s.default.BRUSH_WIDTH_COEFFICIENT*o,n.strokeStyle=(0,l.hexToRgba)(e.color,e.opacity),n.beginPath(),n.moveTo(e.path[0][0]*o,e.path[0][1]*o),e.path.forEach((function(e){n.lineTo(e[0]*o,e[1]*o)})),n.stroke()}))}}},r.drawStart=function(e){if(r.props.ui.currentMode===s.default.TABS.PAINT){window.addEventListener("mousemove",r.drawProcess),window.addEventListener("mouseup",r.drawFinish);var t=(0,l.getRelativeXY)(e.nativeEvent,r.canvas.current),n=t.x,o=t.y;r.currentDrawing=[[n,o]];var a=r.props.settings;r.props.addDrawing({color:a.color,width:a.brushWidth,opacity:a.brushOpacity,path:r.currentDrawing}),r.renderDrawings()}},r.drawProcess=function(e){var t=(0,l.getRelativeXY)(e,r.canvas.current),n=t.x,o=t.y;r.currentDrawing.push([n,o]),r.renderDrawings()},r.drawFinish=function(){window.removeEventListener("mousemove",r.drawProcess),window.removeEventListener("mouseup",r.drawFinish),r.currentDrawing=[]},r.canvas=o.createRef(),r.currentDrawing=[],r}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.data,r=e.width,n=e.height,a=e.ui,i=(0,c.classNames)("EditorCanvas__canvas","EditorCanvas__canvas--draw",{"EditorCanvas__canvas--disabled":a.currentMode!==s.default.TABS.PAINT});return o.createElement("canvas",{ref:this.canvas,className:i,onMouseDown:this.drawStart,width:t.originalWidth,height:t.originalHeight,style:{width:r,height:n}})},t.prototype.componentDidMount=function(){this.renderDrawings()},t.prototype.componentDidUpdate=function(){this.renderDrawings()},t}(o.PureComponent),d={addDrawing:i.addDrawing,addLayerText:i.addLayerText};const p=(0,a.connect)((function(e){return{ui:e.present.ui,settings:e.present.settings,drawings:e.present.drawings,data:e.present.data}}),d)(u)},125023:(e,t,r)=>{"use strict";r.d(t,{default:()=>R});var n=r(570655),o=r(667294),a=r(973935),i=r(50533),s=r(332324),l=r(557069),c=r(561670),u=r(83643),d=r(281195),p=r(272576),h=r(157424),_=r(963799),f=r(920200),g=r(564782),m=r(670196),v=r(41437),E=r(838482),T=r(121265),y=r(368893),S=r(943302),w=r(815204),C=r(601352),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(){var e=t.props.data.artboardContainer;return e?a.createPortal(t.renderCanvas(),e):t.renderCanvas()},t.renderCanvas=function(){var e=t.props,r=e.layers,n=e.background,a=e.data,i=e.ui,s=e.settings,c=a.addons,y=a.artboardWidth,x=a.artboardHeight,I=a.attachment,R=t.props.layers,b=R.currentIndex,A=R.items,L=null!==b&&A[b],N=!r.items[0].locked,P=L&&L.type===l.default.LAYER_TYPES.TEXT&&L.isEdit,O=t.props.ui.isDataLoaded&&t.props.data.context===l.default.CONTEXT_TYPES.STORY,D=t.props.marginTop,B=x;c&&c.photoHeight&&(B=c.photoHeight);var k=(0,T.classNames)("EditorCanvas",{"EditorCanvas--blurCursor":l.default.TABS.COLOR===i.currentMode&&s.blur.isEnabled});return o.createElement(o.Fragment,null,o.createElement("div",{style:{width:y,height:B,marginTop:D},className:k},t.props.ui.isDataLoaded&&i.currentMode===l.default.TABS.CROP&&o.createElement(h.CropControls,{artboardWidth:y,artboardHeight:B}),o.createElement(_.Layers,{setLayerScale:t.props.setLayerScale,startLayerScale:t.props.startLayerScale,toggleTextEditor:t.props.toggleTextEditor,currentMode:t.props.ui.currentMode,getStickerUrlById:t.props.getStickerUrlById,layers:r}),P&&L?o.createElement(f.EditorText,{layer:L,onChange:t.onChangeText,closeTextEditor:t.props.closeTextEditor}):O&&o.createElement(o.Fragment,null,!!I&&!i.isShowDropBox&&o.createElement(E.default,{text:(0,v.getLang)("photos_pe_attached_post"),position:"b",marginTop:5,align:"left"},o.createElement("span",{className:"EditorCanvas__postIcon"},o.createElement(S.default,null))),!i.isShowDropBox&&t.props.background.currentBackgroundType===l.default.BACKGROUND_MODES.PHOTO&&[l.default.TABS.STICKERS,l.default.TABS.TEXT].includes(t.props.ui.currentMode)&&o.createElement("button",{className:"EditorCanvas__scaleButton",onClick:t.onClickScaleButton},N?o.createElement(w.default,null):o.createElement(C.default,null)),!i.isShowDropBox&&o.createElement(g.SwitchMode,{current:n.currentBackgroundType,setMode:t.props.setMode})),i.isShowDropBox&&L&&L.canDelete&&o.createElement(m.DropBox,{onDelete:t.props.deleteLayer}),t.props.ui.isDataLoaded&&o.createElement(u.default,{width:y,height:B}),t.props.ui.isDataLoaded&&o.createElement(d.default,{width:y,height:B})),t.props.ui.isDataLoaded&&o.createElement(p.default,{currentBackgroundId:n.currentBackgroundId,setCurrentBackgroundId:t.props.setCurrentBackgroundId,currentBackgroundType:n.currentBackgroundType,uploadPhoto:t.props.uploadPhoto,backgrounds:t.props.data.backgrounds}))},t.onClickScaleButton=function(){var e,r,n=t.props.layers.items[0],o={},a=t.props.data,i=a.artboardWidth,s=a.artboardHeight,l=n.height/n.width;l>1.77?e=(r=s)/l:(e=i,r=i*l);var c=i/2,u=s/2;n.locked?((0,y.sendStat)(y.EVENTS.ZOOM),Object.assign(o,{locked:!1,scale:.7})):((0,y.sendStat)(y.EVENTS.UNZOOM),Object.assign(o,{locked:!0,rotate:0,x:c,y:u,width:e,height:r,scale:1})),t.props.updateBackgroundLayer(o),t.props.setCurrentLayer(n.locked?0:null)},t.onChangeText=function(e){t.props.setLayerText(e)},t}return(0,n.__extends)(t,e),t}(o.Component),I={setCurrentBackgroundId:c.setCurrentBackgroundId,setLayerScale:c.setLayerScale,startLayerScale:c.startLayerScale,setLayerText:c.setLayerText,toggleTextEditor:c.toggleTextEditor,deleteLayer:c.deleteLayer,updateBackgroundLayer:c.updateBackgroundLayer,setCurrentLayer:c.setCurrentLayer,setBackgroundType:c.setBackgroundType,closeTextEditor:c.closeTextEditor};const R=(0,i.connect)((function(e){return{ui:e.present.ui,settings:e.present.settings,layers:e.present.layers,drawings:e.present.drawings,background:e.present.background,data:e.present.data,marginTop:(0,s.getMarginTop)(e)}}),I)(x)},205665:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var n=r(570655),o=r(667294),a=r(332324),i=r(50533),s=r(698980),l=r(24535),c=r(557069),u=r(561670),d=r(693261),p=r(121265),h=r(41437),_=r(416259),f=function(e){function t(t){var r=e.call(this,t)||this;return r.shouldComponentUpdate=function(e){var t=r.props,n=t.currentBackgroundUrl,o=t.currentFilterName,a=n!==e.currentBackgroundUrl;return o!==e.currentFilterName||(a&&r.update(e.currentBackgroundUrl),!1)},r.handleClick=function(){r.props.setFilter(r.props.filter)},r.canvas=o.createRef(),r.renderer=new s.Renderer,r}return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){this.update(this.props.currentBackgroundUrl)},t.prototype.render=function(){var e=this.props.currentFilterName===this.props.filter,t=(0,p.classNames)("FiltersItem",{"FiltersItem--active":e}),r=e?o.createElement("div",{className:"FiltersItem__checked"},o.createElement(_.default,null)):null;return o.createElement("div",{className:t,onClick:this.handleClick},o.createElement("div",{className:"FiltersItem__inner",style:{width:c.default.FILTER_PREVIEW_WIDTH}},o.createElement("canvas",{className:"FiltersItem__image",ref:this.canvas,width:c.default.FILTER_PREVIEW_WIDTH*c.default.CANVAS_SCALE,height:c.default.FILTER_PREVIEW_HEIGHT*c.default.CANVAS_SCALE,style:{width:c.default.FILTER_PREVIEW_WIDTH,height:c.default.FILTER_PREVIEW_HEIGHT}}),o.createElement("span",{className:"FiltersItem__name"},(0,h.getLang)("photos_pe_filter_"+this.props.filter)),r))},t.prototype.update=function(e){var t=this;e&&l.imageCacheGlobal.get(e).then((function(e){t.renderImage(e)})).catch((function(e){console.error(e)}))},t.prototype.renderImage=function(e){var t=this;this.renderer.render(c.default.FILTER_PREVIEW_WIDTH*c.default.CANVAS_SCALE,c.default.FILTER_PREVIEW_HEIGHT*c.default.CANVAS_SCALE,e,this.props.filter,{amount:.75,sourceSize:[e.width,e.height]}).then((function(r){if(r){var n=t.canvas.current;if(n){var o=n.getContext("2d");if(o){var a,i,s=+(e.height/e.width).toFixed(2);s>1.77?(a=n.height/s,i=n.height):(a=n.width,i=n.width*s);var l=n.width/2-a/2,c=n.height/2-i/2;(0,d.drawBlurFromImage)(n,r,t.props.avgColor),o.drawImage(r,l,c,a,i)}}}})).catch((function(e){console.error(new Error(e))}))},t}(o.Component),g={setFilter:u.setFilter};const m=(0,i.connect)((function(e){return{currentFilterName:e.present.settings.filter.name,currentBackgroundUrl:(0,a.getCurrentImageUrl)(e)}}),g)(f)},751373:(e,t,r)=>{"use strict";r.d(t,{default:()=>h});var n=r(570655),o=r(667294),a=r(205665),i=r(317322),s=r(557069),l=r(561670),c=r(50533),u=r(41437),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this;return o.createElement("div",{className:"FiltersPanel"},o.createElement("div",{className:"FiltersPanel__header"},this.renderHeader()),o.createElement("div",{className:"FiltersPanel__inner"},s.default.PHOTO_FILTERS.map((function(t){return o.createElement(a.default,{key:t,avgColor:e.props.avgColor,filter:t})}))))},t.prototype.renderHeader=function(){var e=this.props.settings;return"regular"===e.filter.name?o.createElement("span",null,(0,u.getLang)("photos_pe_filter_disabled")):o.createElement("div",{className:"FiltersPanel__slider"},o.createElement("span",{className:"FiltersPanel__title"},(0,u.getLang)("photos_pe_filter_enabled")),o.createElement(i.default,{min:0,max:1,value:e.filter.value,isShowHandle:!0,onChange:this.props.setFilterAmount,formatHint:function(e){return Math.round(100*e)+"%"}}))},t}(o.Component),p={setFilterAmount:l.setFilterAmount};const h=(0,c.connect)((function(e){return{settings:e.present.settings,avgColor:e.present.layers.items[0].avgColor}}),p)(d)},281195:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var n=r(570655),o=r(667294),a=r(50533),i=r(332324),s=r(561670),l=r(557069),c=r(693261),u=r(24535),d=r(698980),p={},h=function(e){function t(t){var r=e.call(this,t)||this;return r.canvas=o.createRef(),r.renderer=new d.Renderer,r.needUpdateSize=!0,r}return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){this.update()},t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.originalWidth,n=t.originalHeight,o=t.background,a=r!==e.originalWidth||n!==e.originalHeight;this.needUpdateSize=a||JSON.stringify(o)!==JSON.stringify(e.background),this.update()},t.prototype.render=function(){var e=this.props,t=e.originalWidth,r=e.originalHeight;return o.createElement("canvas",{ref:this.canvas,className:"EditorCanvas__canvas EditorCanvas__canvas--bg",width:t,height:r,style:{width:this.props.width,height:this.props.height}})},t.prototype.update=function(){var e=this,t=this.props.currentBackgroundUrl;t&&u.imageCacheGlobal.get(t).then((function(t){e.renderImage(t)})).catch((function(e){console.error(e)}))},t.prototype.renderImage=function(e){var t=this,r=this.canvas.current;if(r&&r.getContext("2d")){var n=this.props.background,o=this.props,a=o.colorCorrection,i=o.filter,s=o.blur,u=o.isAutoCorrection;n.currentBackgroundType===l.default.BACKGROUND_MODES.BACKGROUND&&(i={name:l.default.PHOTO_FILTERS[0],value:0},a={exposure:0,contrast:0,saturation:0,warmth:0,vignette:0,sharpness:0,grain:0},s={isEnabled:!1,form:s.form,size:s.size,position:s.position},u=!1);var d={exposure:a.exposure,contrast:a.contrast,saturation:a.saturation,warmth:a.warmth,amount:i.value,vignette:a.vignette,sharpness:a.sharpness,grain:a.grain,sourceSize:[e.width,e.height]};this.renderer.render(e.width,e.height,e,i.name,d,s,u).then((function(n){if(n){var o,a,i=e.height/e.width;i>1.77?(o=t.props.height/i,a=t.props.height):(o=t.props.width,a=t.props.width*i);var s=Math.floor(t.props.width/2),l=Math.floor(t.props.height/2),u=(0,c.copyCanvas)(n),d=p[e.src];d||(p[e.src]=(0,c.getAverageRGB)(u),d=p[e.src]),(0,c.drawBlurFromImage)(r,u,d);var h={canvas:u,width:o,height:a,avgColor:d};t.needUpdateSize&&Object.assign(h,{x:s,y:l,locked:!0,rotate:0,scale:1}),t.props.updateBackgroundLayer(h)}})).catch((function(e){console.error(new Error(e))}))}},t}(o.PureComponent),_={updateBackgroundLayer:s.updateBackgroundLayer};const f=(0,a.connect)((function(e){return{currentBackgroundUrl:(0,i.getCurrentImageUrl)(e),originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,background:e.present.background,isAutoCorrection:e.present.settings.isAutoCorrection,colorCorrection:e.present.settings.colorCorrection,filter:e.present.settings.filter,blur:e.present.settings.blur}}),_)(h)},272576:(e,t,r)=>{"use strict";r.d(t,{default:()=>h});var n=r(570655),o=r(667294),a=r(50533),i=r(561670),s=r(557069),l=r(121265),c=r(116886),u=r(783199),d=function(e){function t(t){var r=e.call(this,t)||this;return r.componentDidUpdate=function(){r.scrollWithAnimation=!1},r.render=function(){var e,t=r.props.layers,n=t.currentIndex,a=t.items,i=null!==n&&a[n],l=i&&i.type===s.default.LAYER_TYPES.TEXT&&i.isEdit,u="";return i&&(i.type===s.default.LAYER_TYPES.STICKER?u=(0,c.getLang)("photos_pe_delete_sticker"):i.type===s.default.LAYER_TYPES.TEXT&&(u=(0,c.getLang)("photos_pe_delete_text"))),r.props.currentBackgroundType!==s.default.BACKGROUND_MODES.BACKGROUND||i||(e=!0),o.createElement("div",{className:"StatusPanel"},e?r.renderBackgrounds():o.createElement("div",{className:"StatusPanel__inner"},r.renderLeftBlock(),o.createElement("div",null,i&&!l&&o.createElement("a",{className:"StatusPanel__link",onClick:r.props.deleteLayer},u),i&&l&&o.createElement("a",{className:"StatusPanel__link",onClick:r.props.closeTextEditor},(0,c.getLang)("photos_pe_save_text")))))},r.renderLeftBlock=function(){var e=r.props.addons;return"photo"===r.props.context?o.createElement("div",null,e&&e.edited&&e.canEdit&&o.createElement("a",{className:"StatusPanel__link",onClick:e.restore},(0,c.getLang)("photos_filtered_restore")),e&&!e.canEdit&&o.createElement("span",{className:"StatusPanel__info"},(0,c.getLang)("photos_will_be_saved_to_pe_album"))):o.createElement("div",null,r.props.currentBackgroundType===s.default.BACKGROUND_MODES.PHOTO&&o.createElement("a",{className:"StatusPanel__link",onClick:function(){return r.props.uploadPhoto()}},(0,c.getLang)("photos_pe_change_photo")))},r.renderBackgrounds=function(){var e=r.state.scrollBlockPosition,t=r.props.backgrounds,a=t.gradients,i=t.emojies,s=r.scrollElement.current,c=s?e+s.offsetWidth:0,d=!!e,p=!s||!!(s.scrollWidth-c);return o.createElement("div",{className:"StatusPanel__backgrounds",onWheel:r.panelMouseWheel},o.createElement("div",{className:"StatusPanel__scroll",style:{transform:"translateX(-"+e+"px)",transition:r.scrollWithAnimation?"transform .3s ease-out":""},ref:r.scrollElement},(0,n.__spreadArray)((0,n.__spreadArray)([],(0,n.__read)(a)),(0,n.__read)(i)).map((function(e){var t=e.id,n=e.preview;return o.createElement("a",{className:(0,l.classNames)("StatusPanel__background",{"StatusPanel__background--active":t===r.props.currentBackgroundId}),key:t,style:{backgroundImage:"url("+n+")"},onClick:function(){return r.props.setCurrentBackgroundId(t)}})}))),d&&o.createElement("div",{className:"StatusPanel__arrow StatusPanel__arrow--left",onClick:function(){return r.handleArrowClick(!0)}},o.createElement(u.default,{className:"StatusPanel__arrowIcon"})),p&&o.createElement("div",{className:"StatusPanel__arrow StatusPanel__arrow--right",onClick:function(){return r.handleArrowClick(!1)}},o.createElement(u.default,{className:"StatusPanel__arrowIcon"})))},r.panelMouseWheel=function(e){r.setPosition(Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX)},r.setPosition=function(e,t){var n=r.scrollElement.current;if(n){var o=r.state.scrollBlockPosition,a=n.offsetWidth,i=Math.max(0,Math.min(o+e,n.scrollWidth-a));t&&(r.scrollWithAnimation=!0),r.setState({scrollBlockPosition:i})}},r.handleArrowClick=function(e){var t=r.scrollElement.current;if(t){var n=t.offsetWidth/2;e&&(n=-n),r.setPosition(n,!0)}},r.state={scrollBlockPosition:0},r.scrollElement=o.createRef(),r.scrollWithAnimation=!1,r}return(0,n.__extends)(t,e),t}(o.Component),p={deleteLayer:i.deleteLayer,closeTextEditor:i.closeTextEditor};const h=(0,a.connect)((function(e){return{context:e.present.data.context,layers:e.present.layers,addons:e.present.data.addons}}),p)(d)},687622:(e,t,r)=>{"use strict";r.d(t,{default:()=>v});var n=r(570655),o=r(667294),a=r(50533),i=r(561670),s=r(557069),l=r(442699),c=r(121265),u=r(658861),d=r(791563),p=r(569456),h=r(94566),_=r(147650),f=r(783199),g=function(e){function t(t){var r=e.call(this,t)||this;return r.componentDidMount=function(){r.fetchStickers()},r.componentDidUpdate=function(){r.scrollWithAnimation=!1},r.render=function(){var e="vkcom_dark"===document.body.getAttribute("scheme"),t=r.props,n=t.stickers,a=t.stickerMouseDown,i=r.props.ui,d=i.stickerHeaderScrollPosition,g=i.currentStickerPackIndex,m=r.scrollElement.current,v=!!d,E=!1,T=0;m&&(T=d+m.offsetWidth,E=!!(m.scrollWidth-T));var y=n[g]?n[g].items:[];r.needReset&&(r.needReset=!1,y=[],r.setState({}));for(var S=[],w=0,C=y.length;w<C;w+=3)S.push(y.slice(w,w+3));return o.createElement("div",{className:"StickersPanel"},o.createElement("div",{className:"StickersPanel__header"},o.createElement("div",{className:"StickersPanel__scroll",style:{transform:"translateX(-"+d+"px)",transition:r.scrollWithAnimation?"transform .3s ease-out":""},ref:r.scrollElement,onWheel:r.tabsMouseWheel},o.createElement("div",{className:"StickersPanel__tab",onClick:function(){return r.showStickerShop()}},o.createElement(p.default,null)),n.map((function(e,t){var n=e.id,a=r.getTabPreviewUrl(t);if(!a)return null;var i=!(0,l.inArray)(n,["recent","editor"]),s=(0,c.classNames)("StickersPanel__tab",{"StickersPanel__tab--selected":t===g}),u=i?null:"recent"===n?o.createElement(h.default,null):o.createElement(_.default,null);return o.createElement("div",{key:n,className:s,style:i?{backgroundImage:"url('"+a+"')"}:void 0,onClick:function(){return r.selectStickerPack(t)}},u)}))),v&&o.createElement("div",{className:"StickersPanel__arrow StickersPanel__arrow--left",onClick:function(){return r.handleTabArrowClick(!0)}},o.createElement(f.default,{className:"StickersPanel__arrowIcon"})),E&&o.createElement("div",{className:"StickersPanel__arrow StickersPanel__arrow--right",onClick:function(){return r.handleTabArrowClick(!1)}},o.createElement(f.default,{className:"StickersPanel__arrowIcon"}))),o.createElement(u.default,{virtualized:!0,loadMore:function(){},hasMore:!1,className:"StickersPanel__content",itemHeight:98},S.map((function(t,r){return o.createElement("div",{key:r,className:"StickersPanel__row"},t.map((function(t){var r=t.id,n=t.sizes,i=e&&!r.startsWith("editor_"),l=n[s.default.STICKER_MEDIUM]+(i?"b":"");return o.createElement("div",{key:r,className:"StickersPanel__preview",onMouseDown:function(e){return a(e,r)}},o.createElement("img",{src:l,className:"StickersPanel__previewImage"}))})))}))))},r.getTabPreviewUrl=function(e){var t=r.props.stickers[e].items,o=(0,n.__read)(t||[],1)[0],a=void 0===o?null:o;return!(!t||!a)&&a.sizes[s.default.STICKER_THUMB]},r.selectStickerPack=function(e){r.needReset=!0,r.props.setCurrentStickerPackIndex(e)},r.tabsMouseWheel=function(e){r.setPosition(Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX)},r.handleTabArrowClick=function(e){var t=r.scrollElement.current;if(t){var n=t.offsetWidth;e&&(n=-n),r.setPosition(n,!0)}},r.setPosition=function(e,t){var n=r.scrollElement.current,o=r.props.ui.stickerHeaderScrollPosition;if(n){var a=n.offsetWidth,i=Math.max(0,Math.min(o+e,n.scrollWidth-a));t&&(r.scrollWithAnimation=!0),r.props.setHeaderScrollPosition(i)}},r.loadingLimit=25,r.scrollElement=o.createRef(),r.scrollWithAnimation=!1,r.needReset=!1,r}return(0,n.__extends)(t,e),t.prototype.fetchStickers=function(){var e=this;window.ajax.post("al_photos.php",{act:"get_editor_data"},{onDone:function(t){var r={};t.stickers.forEach((function(e){e.items.forEach((function(e){r[e.id]=e}))})),e.props.setData({stickers:t.stickers,stickersMap:r})},onFail:function(e){return console.error(e),!0}})},t.prototype.showStickerShop=function(){var e=this;(0,d.showBox)("al_im.php",{act:"stickers_store",box:1},{dark:1,stat:["im.css","imn.js","page_help.css",window.jsc("web/sorter.js")],params:{onDestroy:function(){e.fetchStickers()}}})},t}(o.Component),m={setCurrentStickerPackIndex:i.setCurrentStickerPackIndex,setHeaderScrollPosition:i.setHeaderScrollPosition,setData:i.setData};const v=(0,a.connect)((function(e){return{ui:e.present.ui,stickers:e.present.data.stickers}}),m)(g)},37736:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var n=r(570655),o=r(667294),a=r(50533),i=r(561670),s=r(557069),l=r(916341),c=r(116886),u=r(881150),d=r(62738),p=r(317322),h=r(358862),_=r(713652),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(){var e=t.props,r=e.settings,n=e.setColor,a=e.setFontSize,i=e.layer,f=e.fontsPlaceholders,g=e.avgColor,m=i&&i.isEdit,v=i&&i.fontStyle,E=i&&i.fontSize,T=i&&i.color;return o.createElement("div",{className:"TextPanel"},m?o.createElement(u.default,{className:"TextPanelButton",onClick:t.props.closeTextEditor},(0,h.decodeHTMLEntities)((0,c.getLang)("photos_pe_save_text"))):o.createElement(u.default,{className:"TextPanelButton",onClick:function(){return t.props.addLayerText(!0,{isEdit:!0})}},o.createElement(_.default,{className:"TextPanelButton__icon"}),(0,h.decodeHTMLEntities)((0,c.getLang)("photos_pe_add_text"))),o.createElement("div",{className:"TextPanelButton__fonts"},o.createElement("div",{className:"TextPanelButton__title"},(0,h.decodeHTMLEntities)((0,c.getLang)("photos_pe_font"))),s.default.FONTS.map((function(e,n){return o.createElement(d.default,{key:e,value:e,name:"photo_editor_fonts",className:"TextPanelButton__radio",onChange:function(){return t.props.setFontStyle(e)},checked:v?v===e:r.fontStyle===e},o.createElement("span",{className:"TextPanelButton__font TextPanelButton__font--"+e+" PhotoEditorFontStyle--"+e},f[n]))}))),o.createElement("div",{className:"TextPanelButton__fontSize"},o.createElement("div",{className:"TextPanelButton__title"},(0,h.decodeHTMLEntities)((0,c.getLang)("photos_pe_font_size"))),o.createElement(p.default,{min:0,max:1,isShowHandle:!0,value:E||r.fontSize,formatHint:function(e){return""+Math.round(100*e)},onChange:function(e){return a(e)}})),o.createElement("div",{className:"TextPanelButton__colors"},o.createElement("div",{className:"TextPanelButton__title"},(0,h.decodeHTMLEntities)((0,c.getLang)("photos_pe_color"))),o.createElement(l.ColorPicker,{color:T||r.color,avgColor:g,setColor:n})))},t}return(0,n.__extends)(t,e),t}(o.Component),g={addLayerText:i.addLayerText,setColor:i.setColor,setFontSize:i.setFontSize,setFontStyle:i.setFontStyle,closeTextEditor:i.closeTextEditor};const m=(0,a.connect)((function(e){var t=e.present.layers,r=t.items,n=t.currentIndex,o=null;return null!==n&&(o=r[n]),{settings:e.present.settings,layer:o,fontsPlaceholders:e.present.data.fontsPlaceholders,avgColor:e.present.layers.items[0].avgColor}}),g)(f)},497645:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var n=r(667294),o=r(21090),a=r(50533),i=r(368893),s=r(456775),l=r(699111),c=o.ActionCreators;const u=(0,a.connect)((function(e){return{canUndo:e.past.length>0,canRedo:e.future.length>0}}),c)((function(e){var t=e.canUndo,r=e.canRedo,o=e.undo,a=e.redo;return n.createElement("div",{className:"UndoRedo"},n.createElement("button",{className:"UndoRedo__button",onClick:function(){(0,i.sendStat)(i.EVENTS.UNDO),o()},disabled:!t},n.createElement(s.default,null)),n.createElement("button",{className:"UndoRedo__button",onClick:function(){(0,i.sendStat)(i.EVENTS.REDO),a()},disabled:!r},n.createElement(l.default,null)))}))},368284:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var n=r(570655),o=r(667294),a=r(50533),i=r(332324),s=r(557069),l=r(189513);const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getBackgroundType=function(){var e=s.default.CONTEXT_TYPES,r=s.default.BACKGROUND_MODES;return t.props.context===e.STORY?t.props.photoUrl?r.PHOTO:r.BACKGROUND:r.PHOTO},t}return(0,n.__extends)(t,e),t.prototype.render=function(){return window.cur.photoEditorStore=(0,i.createPhotoEditorStore)({data:this.props,background:{currentBackgroundType:this.getBackgroundType(),currentPhotoUrl:this.props.photoUrl,currentBackgroundId:1}}),o.createElement(a.Provider,{store:window.cur.photoEditorStore},o.createElement(l.default,{stickers:this.props.stickers,ref:function(e){e&&(window.cur.renderImageFromState=e.renderImageFromState)}}))},t.defaultProps={originalWidth:s.default.STORY_BASE_WIDTH,originalHeight:s.default.STORY_BASE_HEIGHT},t}(o.Component)},693261:(e,t,r)=>{"use strict";function n(e,t){return new Promise((function(r,n){var o=new Image;o.crossOrigin="Anonymous",t&&(o.dataset.name=t),o.onerror=function(){n(new Error("Failed to load image's URL: "+e))},o.onload=function(){r(o)},o.src=e}))}function o(e,t){if(!t)return{x:0,y:0,xOrigin:0,yOrigin:0,width:0,height:0};var r=t.getBoundingClientRect(),n=r.left,o=r.top,a=r.width,i=r.height;return{x:e.clientX-n,y:e.clientY-o,xOrigin:n,yOrigin:o,width:a,height:i}}function a(e,t){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?"rgba("+parseInt(r[1],16)+", "+parseInt(r[2],16)+", "+parseInt(r[3],16)+", "+t+")":"rgba(0, 0, 0, 1)"}function i(e){var t,r=e.getContext("2d"),n={r:0,g:0,b:0};if(!r)return n;try{t=r.getImageData(0,0,r.canvas.width,r.canvas.height)}catch(e){return n}for(var o=-4,a=0;(o+=20)<t.data.length;)++a,n.r+=t.data[o],n.g+=t.data[o+1],n.b+=t.data[o+2];return n.r=~~(n.r/a),n.g=~~(n.g/a),n.b=~~(n.b/a),n}function s(e){return new Promise((function(t){var r=new FileReader;r.onload=function(e){if(e.target){var r=e.target,n=new DataView(r.result);if(65496!=n.getUint16(0,!1))return t(-2);for(var o=n.byteLength,a=2;a<o;){if(n.getUint16(a+2,!1)<=8)return t(-1);var i=n.getUint16(a,!1);if(a+=2,65505==i){if(1165519206!=n.getUint32(a+=2,!1))return t(-1);var s=18761==n.getUint16(a+=6,!1);a+=n.getUint32(a+4,s);var l=n.getUint16(a,s);a+=2;for(var c=0;c<l;c++)if(274==n.getUint16(a+12*c,s))return t(n.getUint16(a+12*c+8,s))}else{if(65280!=(65280&i))break;a+=n.getUint16(a,!1)}}return t(-1)}},r.readAsArrayBuffer(e)}))}function l(e,t){return new Promise((function(r,n){var o=new Image;o.onload=function(){var e=o.width,a=o.height,i=document.createElement("canvas"),s=i.getContext("2d");if(!s)return n();switch(4<t&&t<9?(i.width=a,i.height=e):(i.width=e,i.height=a),t){case 2:s.transform(-1,0,0,1,e,0);break;case 3:s.transform(-1,0,0,-1,e,a);break;case 4:s.transform(1,0,0,-1,0,a);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,a,0);break;case 7:s.transform(0,-1,-1,0,a,e);break;case 8:s.transform(0,-1,1,0,0,e)}s.drawImage(o,0,0),r(i.toDataURL())},o.src=e}))}function c(e,t,r,n,o,a,i){var s=0,l=0;switch(e){case"left_top":s=n+a,l=o+i;break;case"left_center":s=n+a,l=r/2+i;break;case"left_bottom":s=n+a,l=r-o+i;break;case"center_top":s=t/2+a,l=o+i;break;case"center":s=t/2+a,l=r/2+i;break;case"center_bottom":s=t/2+a,l=r-o+i;break;case"right_top":s=t-n+a,l=o+i;break;case"right_center":s=t-n+a,l=r/2+i;break;case"right_bottom":s=t-n+a,l=r-o+i}return{x:s,y:l}}function u(e,t,r){var n=e.getContext("2d");n&&(n.clearRect(0,0,e.width,e.height),n.fillStyle="rgb(30, 30, 30)",n.fillRect(0,0,e.width,e.height),n.save(),n.filter="blur(135px)",n.drawImage(t,0,0,e.width,e.height),n.restore(),"none"!==n.filter&&(n.fillStyle="rgb("+r.r+", "+r.g+", "+r.b+")",n.fillRect(0,0,e.width,e.height)))}function d(e,t,r){var n=0,o=0,a=e/255,i=t/255,s=r/255,l=Math.max(a,i,s),c=l-Math.min(a,i,s),u=function(e){return(l-e)/6/c+.5},d=function(e){return Math.round(100*e)/100};if(0!==c){o=c/l;var p=u(a),h=u(i),_=u(s);a===l?n=_-h:i===l?n=1/3+p-_:s===l&&(n=2/3+h-p),n<0?n+=1:n>1&&(n-=1)}return{h:Math.round(360*n),s:d(100*o),v:d(100*l)}}function p(e,t,r){t/=100,r/=100;var n=(1-Math.abs(2*r-1))*t,o=n*(1-Math.abs(e/60%2-1)),a=r-n/2,i=0,s=0,l=0;return 0<=e&&e<60?(i=n,s=o,l=0):60<=e&&e<120?(i=o,s=n,l=0):120<=e&&e<180?(i=0,s=n,l=o):180<=e&&e<240?(i=0,s=o,l=n):240<=e&&e<300?(i=o,s=0,l=n):300<=e&&e<360&&(i=n,s=0,l=o),i=Math.round(255*(i+a)).toString(16),s=Math.round(255*(s+a)).toString(16),l=Math.round(255*(l+a)).toString(16),1==i.length&&(i="0"+i),1==s.length&&(s="0"+s),1==l.length&&(l="0"+l),"#"+i+s+l}function h(e){return e.filter((function(e,t,r){return r.indexOf(e)==t}))}function _(e){var t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.width,t.height=e.height,null==r||r.drawImage(e,0,0,e.width,e.height),t}function f(e,t,r,n,o,a){if((a=a||0)<=0)e.fillText(t,r,n);else{for(var i=t.replace(/(\v)/gm,"\n").split("\n"),s=0,l=1;i.length>0&&l<=i.length;){var c=i.slice(0,l).join(" ");e.measureText(c).width>a?(1===l&&(l=2),e.fillText(i.slice(0,l-1).join(" "),r,n+o*s),s++,i=i.splice(l-1),l=1):l++}l>0&&e.fillText(i.join(" "),r,n+o*s)}}r.d(t,{loadImage:()=>n,getRelativeXY:()=>o,hexToRgba:()=>a,getAverageRGB:()=>i,getOrientation:()=>s,resetOrientation:()=>l,getPositionWithGravity:()=>c,drawBlurFromImage:()=>u,rgb2hsv:()=>d,hsl2hex:()=>p,uniqueArray:()=>h,copyCanvas:()=>_,printAtWordWrap:()=>f})},747465:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(570655),o=r(557069),a=r(398822),i={currentBackgroundType:o.default.BACKGROUND_MODES.BACKGROUND,currentPhotoUrl:null,currentBackgroundId:1};const s=function(e,t){switch(void 0===e&&(e=i),t.type){case a.SET_CURRENT_BACKGROUND_TYPE:return(0,n.__assign)((0,n.__assign)({},e),{currentBackgroundType:t.value});case a.SET_CURRENT_PHOTO_URL:return(0,n.__assign)((0,n.__assign)({},e),{currentPhotoUrl:t.value});case a.SET_CURRENT_BACKGROUND_ID:return(0,n.__assign)((0,n.__assign)({},e),{currentBackgroundId:t.value});default:return e}}},204976:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(570655),o=r(398822);const a=function(e,t){switch(void 0===e&&(e={}),t.type){case o.SET_DATA:return(0,n.__assign)((0,n.__assign)({},e),t.payload);default:return e}}},364739:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(570655),o=r(398822);const a=function(e,t){switch(void 0===e&&(e=[]),t.type){case o.ADD_DRAWING:return(0,n.__spreadArray)((0,n.__spreadArray)([],(0,n.__read)(e)),[t.payload]);case o.UPDATE_DRAWING:return t.payload;default:return e}}},764341:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var n,o=r(14890),a=r(21090),i=r(637847),s=r(548699),l=r(736686),c=r(364739),u=r(747465),d=r(204976),p=r(398822),h=!1;const _=(0,a.default)((0,o.combineReducers)({ui:i.default,settings:s.default,layers:l.default,drawings:c.default,background:u.default,data:d.default}),{limit:100,syncFilter:!0,filter:(0,a.combineFilters)((0,a.includeAction)([p.SET_SETTING_COLOR_CORRECTION,p.SET_SETTING_BLUR_SIZE,p.SET_SETTING_BLUR_POSITION,p.SET_SETTING_BLUR_ENABLE,p.SET_SETTING_BLUR_FORM,p.SET_SETTING_AUTO_CORRECTION,p.SET_SETTING_FILTER,p.SET_SETTING_FILTER_AMOUNT,p.ADD_LAYER_STICKER,p.ADD_LAYER_TEXT,p.DELETE_LAYER,p.ADD_DRAWING,p.SET_CURRENT_BACKGROUND_TYPE,p.SET_CURRENT_PHOTO_URL,p.SET_CURRENT_BACKGROUND_ID,p.SET_LAYER_COLOR,p.SET_LAYER_FONT_SIZE,p.SET_LAYER_FONT_STYLE,p.TOGGLE_TEXT_EDIT,p.SET_SHOW_DROP_BOX,p.START_LAYER_SCALE]),(function(e){return e.type===p.TOGGLE_TEXT_EDIT?e.payload.isEdit:e.type===p.SET_SHOW_DROP_BOX?e.value:![p.SET_SETTING_COLOR_CORRECTION,p.SET_SETTING_FILTER_AMOUNT,p.SET_SETTING_BLUR_SIZE,p.SET_SETTING_BLUR_POSITION,p.SET_LAYER_FONT_SIZE].includes(e.type)||(e.type!==n?(h=!1,n=e.type,!0):!h&&(h=!0,setTimeout((function(){h=!1}),500),!0))}))})},736686:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(570655),o=r(398822),a=r(557069),i={currentIndex:null,items:[{canvas:document.createElement("canvas"),type:a.default.LAYER_TYPES.BACKGROUND,width:1,height:1,isBackground:!0,locked:!0,x:0,y:0,rotate:0,canDelete:!1,scale:1,avgColor:{r:128,g:128,b:128}}]};const s=function(e,t){switch(void 0===e&&(e=i),t.type){case o.SET_CURRENT_LAYER:return(0,n.__assign)((0,n.__assign)({},e),{currentIndex:t.index});case o.ADD_LAYER_STICKER:case o.ADD_LAYER_TEXT:case o.ADD_LAYER_IMAGE:return(0,n.__assign)((0,n.__assign)({},e),{items:(0,n.__spreadArray)((0,n.__spreadArray)([],(0,n.__read)(e.items)),[t.payload])});case o.SET_LAYER_POSITION:case o.SET_LAYER_SCALE:case o.SET_LAYER_COLOR:case o.SET_LAYER_FONT_SIZE:case o.SET_LAYER_FONT_STYLE:case o.SET_LAYER_TEXT:case o.TOGGLE_TEXT_EDIT:return(0,n.__assign)((0,n.__assign)({},e),{items:e.items.map((function(r,o){return e.currentIndex===o?(0,n.__assign)((0,n.__assign)({},r),t.payload):r}))});case o.START_LAYER_SCALE:return(0,n.__assign)({},e);case o.UPDATE_BACKGROUND_LAYER:return(0,n.__assign)((0,n.__assign)({},e),{items:e.items.map((function(e,r){return 0===r?(0,n.__assign)((0,n.__assign)({},e),t.payload):e}))});case o.DELETE_LAYER:return(0,n.__assign)((0,n.__assign)({},e),{currentIndex:null,items:e.items.filter((function(e,r){return r!==t.index}))});case o.UPDATE_LAYERS_AFTER_CROP:return(0,n.__assign)((0,n.__assign)({},e),{items:t.items});default:return e}}},548699:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(570655),o=r(557069),a=r(398822),i={color:o.default.COLORS[0],brushWidth:.5,brushOpacity:1,fontSize:.5,fontStyle:o.default.FONTS[0],filter:{name:o.default.PHOTO_FILTERS[0],value:.5},colorCorrection:{exposure:0,contrast:0,saturation:0,warmth:0,vignette:0,sharpness:0,grain:0},blur:{isEnabled:!1,form:o.default.BLUR_TYPES.ROUND,size:50,position:[.5,.5]},isAutoCorrection:!1,cropAspect:o.default.CROP_ASPECT_FREE,isCropped:!1,flipX:!1,flipY:!1,rotation:0};const s=function(e,t){var r;switch(void 0===e&&(e=i),t.type){case a.SET_SETTING_COLOR:return(0,n.__assign)((0,n.__assign)({},e),{color:t.color});case a.SET_SETTING_BRUSH_WIDTH:return(0,n.__assign)((0,n.__assign)({},e),{brushWidth:t.brushWidth});case a.SET_SETTING_BRUSH_OPACITY:return(0,n.__assign)((0,n.__assign)({},e),{brushOpacity:t.brushOpacity});case a.SET_SETTING_FONT_SIZE:return(0,n.__assign)((0,n.__assign)({},e),{fontSize:t.fontSize});case a.SET_SETTING_FONT_FAMILY:return(0,n.__assign)((0,n.__assign)({},e),{fontStyle:t.fontStyle});case a.SET_SETTING_COLOR_CORRECTION:return(0,n.__assign)((0,n.__assign)({},e),{colorCorrection:(0,n.__assign)((0,n.__assign)({},e.colorCorrection),(r={},r[t.filter]=t.value,r))});case a.SET_SETTING_FILTER:return(0,n.__assign)((0,n.__assign)({},e),{filter:(0,n.__assign)((0,n.__assign)({},e.filter),{name:t.name})});case a.SET_SETTING_FILTER_AMOUNT:return(0,n.__assign)((0,n.__assign)({},e),{filter:(0,n.__assign)((0,n.__assign)({},e.filter),{value:t.value})});case a.SET_SETTING_BLUR_ENABLE:return(0,n.__assign)((0,n.__assign)({},e),{blur:(0,n.__assign)((0,n.__assign)({},e.blur),{isEnabled:t.isEnabled})});case a.SET_SETTING_BLUR_FORM:return(0,n.__assign)((0,n.__assign)({},e),{blur:(0,n.__assign)((0,n.__assign)({},e.blur),{form:t.form})});case a.SET_SETTING_BLUR_SIZE:return(0,n.__assign)((0,n.__assign)({},e),{blur:(0,n.__assign)((0,n.__assign)({},e.blur),{size:t.size})});case a.SET_SETTING_BLUR_POSITION:return(0,n.__assign)((0,n.__assign)({},e),{blur:(0,n.__assign)((0,n.__assign)({},e.blur),{position:t.position})});case a.SET_SETTING_AUTO_CORRECTION:return(0,n.__assign)((0,n.__assign)({},e),{isAutoCorrection:t.isAutoCorrection});case a.SET_SETTING_CROP_ASPECT:return(0,n.__assign)((0,n.__assign)({},e),{cropAspect:t.aspect});case a.SET_SETTING_CROPPED:return(0,n.__assign)((0,n.__assign)({},e),{isCropped:t.isCropped});case a.SET_SETTING_FLIP_X:return(0,n.__assign)((0,n.__assign)({},e),{flipX:t.value});case a.SET_SETTING_FLIP_Y:return(0,n.__assign)((0,n.__assign)({},e),{flipY:t.value});case a.SET_SETTING_ROTATE:return(0,n.__assign)((0,n.__assign)({},e),{rotation:t.value});default:return e}}},637847:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(570655),o=r(557069),a=r(398822),i={isDataLoaded:!1,isShowDropBox:!1,isSaveLoading:!1,currentMode:o.default.TABS.STICKERS,currentStickerPackIndex:0,stickerHeaderScrollPosition:0};const s=function(e,t){switch(void 0===e&&(e=i),t.type){case a.SET_DATA_LOADED:return(0,n.__assign)((0,n.__assign)({},e),{isDataLoaded:!0});case a.SET_SHOW_DROP_BOX:return(0,n.__assign)((0,n.__assign)({},e),{isShowDropBox:t.value});case a.SET_SAVE_LOADING:return(0,n.__assign)((0,n.__assign)({},e),{isSaveLoading:t.value});case a.SET_CURRENT_TAB:return(0,n.__assign)((0,n.__assign)({},e),{currentMode:t.value});case a.SET_CURRENT_STICKER_PACK_INDEX:return(0,n.__assign)((0,n.__assign)({},e),{currentStickerPackIndex:t.value});case a.SET_HEADER_SCROLL_POSITION:return(0,n.__assign)((0,n.__assign)({},e),{stickerHeaderScrollPosition:t.value});default:return e}}},368893:(e,t,r)=>{"use strict";r.d(t,{EVENTS:()=>l,sendStat:()=>u,prepareStat:()=>d,prepareMediaEditorStat:()=>p});var n=r(570655),o=r(636600),a=r(519921),i=r(557069),s=r(486353),l={FLIP_X:"flipX",FLIP_Y:"flipY",ADD_FILTER:"add_filter",REMOVE_FILTER:"remove_filter",UNDO:"undo",REDO:"redo",ENABLE_AUTOCORRECTION:"enable_autocorrection",DISABLE_AUTOCORRECTION:"disable_autocorrection",ENABLE_BLUR:"enable_blur",DISABLE_BLUR:"disable_blur",ZOOM:"zoom",UNZOOM:"unzoom",TURN_LEFT:"turn_left",TURN_RIGHT:"turn_right",ADD_STORY:"add_story",ADD_STORY_FROM_SHARING:"add_story_from_sharing",CLICK_TO_CAMERA_ICON:"click_to_camera_icon",CLICK_TO_GRADIENT_ICON:"click_to_gradient_icon",ADD_TEXT:"add_text",EDIT_TEXT:"edit_text",DELETE_TEXT:"delete_text",ADD_STICKER:"add_sticker",DELETE_STICKER:"delete_sticker",ADD_GRAFFITI:"add_graffiti",SELECT_BACKGROUND:"select_background"},c=[l.ADD_STORY,l.ADD_STORY_FROM_SHARING,l.CLICK_TO_CAMERA_ICON,l.CLICK_TO_GRADIENT_ICON,l.ADD_TEXT,l.EDIT_TEXT,l.DELETE_TEXT,l.ADD_STICKER,l.DELETE_STICKER,l.ADD_GRAFFITI,l.SELECT_BACKGROUND];function u(e){var t=0,r=0;if(window.cur.pvCurPhoto){var i=(0,n.__read)(window.cur.pvCurPhoto.id.split("_"),2),l=i[0],u=i[1];t=parseInt(l),r=parseInt(u)}var d={event_type:e,media_type:window.cur.storyPublishContext?"story":"photo",media_owner_id:t,media_id:r};(0,s.partConfigEnabled)("story_publish_analytics_log")&&(0,a.debugLog)(d),(0,o.statlogsValueEvent)("media_editor_product_analytics",d),c.includes(e)&&(0,o.statlogsValueEvent)("story_create_product_analytics",{event_type:e,story_type:"photo"})}function d(e,t,r,o){var a=0,s="photo";r===i.default.BACKGROUND_MODES.BACKGROUND&&(s=(a=o)>100?"emojies":"gradients");var l={has_text:0,has_sticker:0,has_graffiti:0,background_type:s,background_id:a},c=[],u=[],d=[];return e.forEach((function(e){if(e.type===i.default.LAYER_TYPES.STICKER){var t=e,r=(0,n.__read)(t.id.split("_"),2),o=r[0],a=r[1],s=parseInt(o);c.push({id:parseInt(a),pack_id:s||0,type:s?"from_pack":"individual"})}else if(e.type===i.default.LAYER_TYPES.TEXT){t=e;u.push({text:t.text,font:t.fontStyle,size:Math.round(t.fontSize*i.default.FONT_SIZE_COEFFICIENT),color:t.color.slice(1),background:"none",align:"center"})}})),u.length&&(l.has_text=1,l.texts=u),c.length&&(l.has_sticker=1,l.stickers=c),t.forEach((function(e){d.push({brush:e.opacity,size:e.width,color:e.color.slice(1)})})),d.length&&(l.has_graffiti=1,l.graffities=d),l}function p(e,t){var r=0,o=0;if(window.cur.pvCurPhoto){var a=(0,n.__read)(window.cur.pvCurPhoto.id.split("_"),2),s=a[0],l=a[1];r=parseInt(s),o=parseInt(l)}var c={media_type:window.cur.storyPublishContext?"story":"photo",media_owner_id:r,media_id:o,is_cropped:t.isCropped,is_autocorrected:t.isAutoCorrection,rotation:t.rotation,filter:t.filter.name,filter_value:100*t.filter.value,ratio:t.cropAspect,photo_correction:[{type:"exposure",value:100*t.colorCorrection.exposure},{type:"contrast",value:100*t.colorCorrection.contrast},{type:"saturation",value:100*t.colorCorrection.saturation},{type:"warmth",value:100*t.colorCorrection.warmth},{type:"vignette",value:100*t.colorCorrection.vignette},{type:"sharpness",value:100*t.colorCorrection.sharpness},{type:"grain",value:100*t.colorCorrection.grain}]};t.blur.isEnabled&&(c.blur_type=t.blur.form,c.blur_value=t.blur.size);var u=[];return e.forEach((function(e){if(e.type===i.default.LAYER_TYPES.TEXT){var t=e;u.push({text:t.text,font:t.fontStyle,size:Math.round(t.fontSize*i.default.FONT_SIZE_COEFFICIENT),color:t.color.slice(1),background:"none",align:"center"})}})),u.length&&(c.has_text=1,c.texts=u),c}},332324:(e,t,r)=>{"use strict";r.d(t,{getCurrentImageUrl:()=>s.getCurrentImageUrl,getMarginTop:()=>s.getMarginTop,createPhotoEditorStore:()=>c});var n=r(14890),o=r(21090),a=r(929804),i=r(753894),s=r(908097),l=r(764341),c=function(e){var t=(0,o.newHistory)([],e,[]),r=a.composeWithDevTools((0,n.applyMiddleware)(i.default));return(0,n.createStore)(l.default,t,r)}},908097:(e,t,r)=>{"use strict";r.d(t,{getCurrentImageUrl:()=>a,getMarginTop:()=>i});var n=r(570655),o=r(557069);function a(e){var t=e.present.background,r=t.currentBackgroundType,a=t.currentPhotoUrl,i=t.currentBackgroundId,s="";if(r===o.default.BACKGROUND_MODES.PHOTO)s=a||"";else{var l=e.present.data.backgrounds,c=l.gradients,u=l.emojies;s=(0,n.__spreadArray)((0,n.__spreadArray)([],(0,n.__read)(c)),(0,n.__read)(u)).filter((function(e){return e.id===i}))[0].url}return s}function i(e){var t=e.present.data,r=t.addons,n=t.artboardHeight,o=n;return r&&r.photoHeight&&(o=r.photoHeight),n/2-o/2}}}]);try{stManager.done("dist/59ff457db40a7d740912b118be6f4e10.9a16e9f826af2e64929c.js")}catch(e){}