(()=>{"use strict";var e,t,i,a={182561:(e,t,i)=>{function a(){return{icon:'<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 10.75a.75.75 0 01.75.75v2a.75.75 0 01-1.5 0v-2a.75.75 0 01.75-.75z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 7.03V5a4 4 0 118 0v2.03c.59.03 1 .11 1.36.3a3 3 0 011.31 1.3c.33.65.33 1.49.33 3.17v1.4c0 1.68 0 2.52-.33 3.16a3 3 0 01-1.3 1.31c-.65.33-1.49.33-3.17.33H7.8c-1.68 0-2.52 0-3.16-.33a3 3 0 01-1.31-1.3C3 15.71 3 14.87 3 13.2v-1.4c0-1.68 0-2.52.33-3.16a3 3 0 011.3-1.31c.36-.19.78-.27 1.37-.3zm4-4.53A2.5 2.5 0 0112.5 5v2h-5V5A2.5 2.5 0 0110 2.5zm-2.2 6c-.86 0-1.42 0-1.85.04-.4.03-.56.09-.63.12a1.5 1.5 0 00-.66.66c-.03.07-.1.22-.12.63-.04.43-.04.99-.04 1.85v1.4c0 .87 0 1.42.04 1.85.03.4.09.56.12.63a1.5 1.5 0 00.66.66c.07.03.22.1.63.12.43.04.98.04 1.85.04h4.4c.86 0 1.42 0 1.85-.04.4-.03.56-.09.63-.12a1.5 1.5 0 00.66-.66c.03-.07.1-.22.12-.63.04-.43.04-.98.04-1.85v-1.4c0-.86 0-1.42-.04-1.85a1.7 1.7 0 00-.12-.63 1.5 1.5 0 00-.66-.66c-.07-.03-.22-.1-.63-.12-.43-.04-.98-.04-1.85-.04H7.8z" fill="currentColor"/></svg>',name:"lock_outline_20"}}i.d(t,{getIcon20LockOutline:()=>a})},243344:(e,t,i)=>{function a(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M10.75 11.5a.75.75 0 00-1.5 0v2a.75.75 0 001.5 0z"/><path clip-rule="evenodd" d="M6 4.95C6 2.75 7.8 1 10 1c1.9 0 3.5 1.3 3.9 3.08a.75.75 0 01-1.47.33A2.47 2.47 0 0010 2.5c-1.4 0-2.5 1.1-2.5 2.45V7h5.26c.6 0 1.08 0 1.48.03.4.04.8.1 1.15.3.55.27 1 .73 1.29 1.28.18.36.25.74.29 1.15.03.4.03.89.03 1.48v2.52c0 .6 0 1.08-.03 1.48-.04.4-.1.8-.3 1.15-.27.55-.73 1-1.28 1.29-.36.18-.74.25-1.15.29-.4.03-.89.03-1.48.03H7.24c-.6 0-1.08 0-1.48-.03-.4-.04-.8-.1-1.15-.3-.55-.27-1-.73-1.29-1.28a3.02 3.02 0 01-.29-1.15C3 14.84 3 14.35 3 13.76v-2.52c0-.6 0-1.08.03-1.48.04-.4.1-.8.3-1.15.27-.55.73-1 1.28-1.29A3.02 3.02 0 016 7.02zm-.11 3.58c-.32.02-.49.07-.6.13-.27.14-.5.36-.63.63-.06.11-.1.28-.13.6-.03.33-.03.75-.03 1.38v2.46c0 .63 0 1.05.03 1.38.02.32.07.49.13.6.14.27.36.5.63.63.11.06.28.1.6.13.33.03.75.03 1.38.03h5.46c.63 0 1.05 0 1.38-.03.32-.02.49-.07.6-.13.27-.14.5-.36.63-.63.06-.11.1-.28.13-.6.03-.33.03-.75.03-1.38v-2.46c0-.63 0-1.05-.03-1.38a1.57 1.57 0 00-.13-.6c-.14-.27-.36-.5-.63-.63-.11-.06-.28-.1-.6-.13-.33-.03-.75-.03-1.38-.03H7.27c-.63 0-1.05 0-1.38.03z" fill-rule="evenodd"/></g></svg>',name:"unlock_outline_20"}}i.d(t,{getIcon20UnlockOutline:()=>a})},12232:(e,t,i)=>{i.d(t,{Likes:()=>g});i(991181),i(296253),i(796409),i(59357),i(175115),i(21466);var a=i(414914),r=i(917685),n=i(719016),s=i(442699),o=i(190148),d=i(469433),l=i(917999),c=i(791563),u=i(116886),_=i(283767),h=i(578155),p=i(431700),v=i(878012),m=i(683393),b=i(523845),k=i(338354);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}var g={toggle(e,t,i,n){if((0,r.cancelEvent)(t),(0,l.isObject)(window.cur)&&(0,l.isFunction)(cur.viewAsBox))return cur.viewAsBox();if(vk.widget&&!vk.id)return window.Widgets.oauth();var s=(0,a.hasClass)(e,"active");(0,a.addClass)(e,"animate"),this.clientUpdate(i,h.LikeButtonTypes.like,s?-1:1,!s);var o=()=>{(0,a.toggleClass)(e,"active",s),this.clientUpdate(i,h.LikeButtonTypes.like,s?1:-1,s)};window.ajax.post("like.php",{act:s?"a_do_unlike":"a_do_like",object:i,hash:n,list:cur.pvListId,wall:2,from:this._getReference(i),from_widget:vk.widget?1:0},{onDone:t=>{if(t.unauth_action_box)return o(),void b.UnauthActionBox.show(t.unauth_action_box);this.update(i,t);var a=i.match(/^(wall|market)(.*)/);a&&cur.onLike&&cur.onLike(e,a[1],a[2],s)},onFail:()=>(o(),!1)}),(0,l.intval)((0,a.domData)(e,"count"))>0?g.showLikes(e,i,{fast:!0}):e.tt&&e.tt.destroy&&e.tt.destroy()},_getReference:e=>cur.pvShown?"photo_viewer":e===cur.wallLayer?"wkview":window.mvcur&&window.mvcur.mvShown?"videoview":cur.wallType?"feed"===cur.wallType?"news"===cur.section?`feed_${cur.subsection?cur.subsection:cur.section}`:"recommended"===cur.section?"feed_recommended"+("recent"!==cur.subsection?"_"+cur.subsection:""):(0,s.inArray)(cur.section,["friends","groups","videos","photos"])?"feed_"+(cur.subsection?"_"+cur.subsection:""):`feed_${cur.section}`:"top"===cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,share(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(vk.widget&&!vk.id)return window.Widgets.oauth();if((0,l.isObject)(window.cur)&&(0,l.isFunction)(cur.viewAsBox))return cur.viewAsBox();var i=(0,_.parseLikeObjectId)(e),a=i.objectType,r=i.objectId;(vk.widget?window.showBox:c.showBox)("like.php",w({act:"publish_box",object:e,from_widget:vk.widget?1:0},t),{onDone:(e,t)=>{t.unauth_action_box&&(e.hide(),b.UnauthActionBox.show(t.unauth_action_box))},stat:["page.js","page.css","wide_dd.js","wide_dd.css",window.jsc("web/sharebox.js")]}),"wall"===a&&window.Wall&&window.Wall.triggerAdPostStat(r,"share_post"),cur.RpcMethods&&(cur.RpcMethods.likeFullUpdate=t=>g.update(e,window.cleanObj(t)))},clientUpdate(e,t,i,r){var n=this._getButtonsByType(e,t);if(n.length){var s=(0,l.intval)((0,a.domData)(n[0],"count"))+i;this._updateDom(e,t,s,r),this.updateExternalIndex(e,{type:t,count:s,isActive:r})}},update(e,t){if(!isNaN(parseInt(t.like_num))){var i=(0,l.isUndefined)(t.like_my)?void 0:!!(0,l.intval)(t.like_my);this._updateDom(e,h.LikeButtonTypes.like,t.like_num,i,t.like_title),this.updateExternalIndex(e,{type:h.LikeButtonTypes.like,count:t.like_num,isActive:i})}if(!isNaN(parseInt(t.share_num))){var a=(0,l.isUndefined)(t.share_my)?void 0:!!(0,l.intval)(t.share_my);this._updateDom(e,h.LikeButtonTypes.share,t.share_num,a,t.share_title),this.updateExternalIndex(e,{type:h.LikeButtonTypes.share,count:t.share_num})}if((0,s.isNumeric)(t.views_num)&&this._updateDom(e,h.LikeButtonTypes.views,t.views_num,void 0,t.views_title),(0,s.isNumeric)(t.comment_num)&&this._updateDom(e,h.LikeButtonTypes.comment,t.comment_num),t[p.REACTIONS_COUNTS_RESPONSE_FIELD]){var r=!!t.isQueueUpdate;(0,m.triggerReactionsUpdate)(e,t[p.REACTIONS_COUNTS_RESPONSE_FIELD],void 0,{isQueueUpdate:r,isUserAction:!1,previewVisibility:v.previewVisibilityUseCurrent})}},updateComments(e,t){this.update(e,{comment_num:t})},_updateDom(e,t,i,r,n){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=(null==d?void 0:d.els)?null==d?void 0:d.els:this._getButtonsByType(e,t),p=t===h.LikeButtonTypes.views;if(null==c?void 0:c.length){var v="";p?v=i:i>0&&(v=vk.widget?(0,s.formatCount)(i):(0,u.langNumeric)(i,"%s",!0)),p||(i=(0,l.intval)(i));for(var m=0;m<c.length;m++){var b=c[m];if(!(0,a.hasClass)(b,"no_counter")){var w=p?c[m]:(0,_.getElementLikeButtonCount)(c[m]);(0,o.animateCount)(w,v,{str:"auto",noWrapWidth:!p,noSpaceIfEmpty:!0}),(0,a.toggleClass)(b,"empty",i<=0),"boolean"==typeof r&&(0,a.toggleClass)(b,"active",r),(0,a.attr)(c[m],"data-count",i),(0,k.updateAriaLabelCounter)(b,i,t),p&&(0,a.attr)(c[m],"title",n||"");var g=c[m].tt;if(g){var f=(0,a.domByClass)(g.container,"_content"),y=(0,a.domByClass)(g.container,"_value"),O=(0,a.domByClass)(g.container,"_title"),L=(0,l.intval)((0,a.val)(y));(0,a.val)(y,i),n&&(0,a.val)(O,n),(0,l.isObject)(g)&&(g.likeInvalidated=!0),(L!==i&&L<7||!1===n)&&(t===h.LikeButtonTypes.like?b.needReinitLikesTT=!0:t===h.LikeButtonTypes.share&&(b.needReinitShareTT=!0)),t===h.LikeButtonTypes.like&&(0,a.toggleClass)(f,"me_hidden",!r),!1===n&&g.destroy&&g.destroy()}}}}},_getButtonsByType:(e,t)=>(0,a.domQuery)(`._like_${e} ._${t}, ._like_${e} [data-like-button-type="${t}"]`),showLikes(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&e instanceof HTMLElement&&!e.postDontShowLikes&&(!vk.widget||!vk.show_external_auth_box)){var r=i.views?{views:1}:i.share?{published:1}:{};i.listId&&(r.list=i.listId),i.like_stats_params&&Object.assign(r,i.like_stats_params);var o=!!(0,a.geByClass1)("share",(0,a.gpeByClass)("like_wrap",e)),d=document.body,c=!1,u=getComputedStyle(e),h=(0,l.intval)(u.getPropertyValue("padding-left").replace("px","")),p=(0,l.intval)(u.getPropertyValue("padding-top").replace("px","")),v=(0,_.getElementLikeButtonIcon)(e),m=40;"wpost"===i.from&&(m=24);var b,k,w=[m-(0,a.getSize)(v)[0]/2-h,10-p],f=i.cl||"";if(i.share)f+="likes_tt_share";else if(f+="likes_tt_like","widget_community"===i.from)w[0]=6;else if("wcomments"===i.from||"widget_comments"===cur.wallType){w[0]=(0,a.getSize)(e)[0]+16-(0,a.getSize)(v)[0]/2-10}else"photo_carousel"===i.from&&(w[1]=10);if(!!(null==i?void 0:i.isFromReactionsPreview)){var y=e.querySelector("._ReactionsPreview__itemsContainer");if(y){var O=y.querySelector(".ReactionsPreviewItem"),L=getXYRect(O,!1),B=(L.width||0)/2,C=B;d=y,L.left+L.width/2>window.innerWidth/2&&(c=!0,C=y.offsetWidth-B),w[0]=-C+m}}i.share?(b="needReinitLikesTT",k="resetLikesTTTimer"):(b="needReinitShareTT",k="resetShareTTTimer"),clearTimeout(e[k]),(0,n.showTooltip)(e,{url:"/like.php",params:(0,s.extend)({act:"a_get_stats",object:t,has_share:o?1:""},r),appendEl:d,slide:15,shift:w,ajaxdt:i.fast?0:100,showdt:i.fast?0:400,hidedt:200,dir:"auto",checkLeft:!0,needLeft:c,reverseOffset:80,noZIndex:!0,hasover:!0,tip:{over:()=>{g.showLikes(e,t,i)}},typeClass:"like_tt",className:f,onHide:()=>{clearTimeout(e[k]),e[b]&&(e[k]=setTimeout((()=>{delete e[b],e.tt&&e.tt.destroy&&e.tt.destroy()}),200))}})}},showShare:function(e,t,i){g.showLikes(e,t,(0,s.extend)(i,{share:1}))},updateViews:(e,t,i)=>{if(!vk.widget||!vk.show_external_auth_box){var r=t.currentTarget;window.ajax.post("like.php",{act:"a_get_stats",object:e,views:1},{cache:1,onDone(t,n){var s=(0,a.ce)("div",{innerHTML:n}),o=(null==i?void 0:i.updateTargetElOnly)?{els:[r]}:void 0;g._updateDom(e,h.LikeButtonTypes.views,t,void 0,s.innerText||s.textContent,o)}})}},makeTemplate(e,t){if(!e)return"";(t=(0,s.extend)({buttons_prepend:"",object_raw:"",likes_count:"",liked:!1,share_count:"",shared:"",views_count:"",share_opts:{},like_opts:{},class_name:"",like_cont_class:"",like_class_name:"",[p.REACTIONS_COUNTS_RESPONSE_FIELD]:"",reactions_class_name:""},t)).like_active=t.liked?"active":"",t.share_active=t.shared?"active":"",t.comment_active="",t.likes_formatted_count=t.likes_count>0?(0,u.langNumeric)(t.likes_count,"%s",!0):"",t.share_formatted_count=t.share_count>0?(0,u.langNumeric)(t.share_count,"%s",!0):"",t.share_opts=this._convertOptsToString(t.share_opts),t.like_opts=this._convertOptsToString(t.like_opts),t.like_class_name+=t.likes_count>0?"":" empty",t.share_class_name=t.share_count>0?"":"empty";var i=t[p.REACTIONS_COUNTS_RESPONSE_FIELD],r=!!i&&Object.values(i).some((e=>!!e));return t.reactions_class_name+=r?"":" PostBottomAction--empty",(0,a.rs)(e,t)},_convertOptsToString:e=>JSON.stringify(e).replace(/\"/g,"'"),updateExternalIndex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,_.parseLikeObjectId)(e),a=i.objectType,r=i.objectId;switch(a){case"photo":if(!cur.pvShown||!cur.pvCurPhoto||cur.pvCurPhoto.id!==r)return;var n=cur.pvListId,s=cur.pvIndex,o=cur.pvData[n][s];t.type===h.LikeButtonTypes.like?(o.likes=t.count,o.liked=t.isActive,cur.pvCommsLikes[o.id][1]=t.count):t.type===h.LikeButtonTypes.share&&(o.shares=t.count);break;case"video":if(window.mvcur&&window.mvcur.mvShown&&window.mvcur.videoRaw===r&&t.type===h.LikeButtonTypes.like){var d=window.Videoview.getMvData();d.likes=t.count,void 0!==t.isActive&&(d.liked=t.isActive,window.Videoview.playerOnLiked(t.isActive),window.Videoview.recache())}}},showLikesList(e,t){cur.viewAsBox||(0,a.hasClass)((0,a.gpeByClass)("like_btn",e),"no_counter")||(0,d.showWiki)({w:"likes/"+(0,s.clean)(t)},!1,!1,{queue:1})},showSharesList(e,t){cur.viewAsBox||(0,a.hasClass)((0,a.gpeByClass)("like_btn",e),"no_counter")||(0,d.showWiki)({w:"shares/"+(0,s.clean)(t)},!1,!1,{queue:1})}}},103539:(e,t,i)=>{i.d(t,{ShareBox:()=>_});i(530522),i(66108),i(296253),i(991181),i(579665),i(95767),i(175115),i(21466),i(59357);var a=i(12232),r=i(414914),n=i(917999),s=i(705456),o=i(986900),d=i(243344),l=i(182561);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var _={radioBtnOptions:{WALL:0,COMMUNITY:1,STORY:2,IM:3},mrg:e=>vk.rtl?{marginRight:e}:{marginLeft:e},mediaChange(){var e=cur.sbField&&(0,r.data)(cur.sbField,"composer");if(e&&e.addMedia){var t=(radioBtns.like_share||{}).val||0;toggle(geByClass1("add_media_type_"+e.addMedia.lnkId+"_postpone",e.addMedia.menu.menuNode,"a"),1==t||0==t&&cur.sbShareOwn)}},show(e,t){var i=cur.postTo;cur.postTo=!1,cur.shareBoxWidth=450;var a={hideButtons:!0,grey:!0,noRefreshCoords:!0,bodyStyle:"padding: 0;"};window.mvcur&&window.mvcur.options&&window.mvcur.options.shortVideo||(a.width=cur.shareBoxWidth),e.setOptions(a),e.removeButtons(),radioBtns.like_share={els:[ge("like_share_my"),ge("like_share_club"),ge("like_share_story"),ge("like_share_mail")],val:t.rbVal},each(radioBtns.like_share.els,(function(e,t){var i=domNS(t);hasClass(t,"disabled")&&i&&(addClass(i,"like_share_disabled"),(geByTag1("input",i)||{}).readOnly=!0)})),cur.shareAction="",cur.lang=extend(cur.lang||{},t.lang),cur.sbField=ge("like_share_text"),cur.sbField.getValue=Emoji.val.pbind(cur.sbField),extend(cur,{sbSettingsBtnEl:ge("like_share_settings_btn"),sbFriendsOnlyEl:ge("like_share_friends_only"),sbPostCheckboxEl:ge("like_share_post_checkbox"),sbAva:ge("like_share_ava"),sbTo:[0],sbShareHash:t.shHash,sbMailHash:t.imHash,sbObj:t.shObj,sbList:t.shList||"",sbShareOwn:t.shOwn,sbShParam:t.shParam,shNewUi:t.shNewUi,shButtonLabelBackup:null,sbSend:function(){if(!(0,s.buttonLocked)("like_share_send")){hide("like_share_error");var e=radioBtns.like_share.val,i=_.radioBtnOptions.WALL,a=cur.sbField&&(0,r.data)(cur.sbField,"composer"),n=a?Composer.getSendParams(a):{message:trim(val(cur.sbField))};switch(cur.sbShParam&&(n.share_param=cur.sbShParam),e){case _.radioBtnOptions.COMMUNITY:var d=cur.wdd&&cur.wdd.like_club_dd;if(!d||!d.selCount)return elfocus("like_club_inp");for(var l in d.selected)d.selected.hasOwnProperty(l)&&(i=intval(l.replace(/_$/,"")));case _.radioBtnOptions.WALL:if(vk.widget&&4!==vk.widget)window.allowCallback=function(){ajax.post("like.php",Wall.fixPostParams(extend(n,{act:"a_do_publish",from:"box",to:i,hash:cur.sbShareHash,object:cur.sbObj,list:cur.sbList,ref:cur.section,ret_data:1})),_.options()),cur.shareAction="publish"},Widgets.popupBoxOpen("like.php",{act:"a_allow_publish_box",to:i,object:cur.sbObj,list:cur.sbList},"vk_allow",{height:171});else{var u=0,h=0;isVisible(cur.sbSettingsBtnEl)&&(u=isVisible("like_share_mark_as_ads")&&(0,s.isChecked)("like_share_mark_as_ads")?1:0,h=(0,s.isChecked)("like_share_mute_notifications")||u),ajax.post("like.php",Wall.fixPostParams(extend(n,{act:"a_do_publish",from:"box",to:i,hash:cur.sbShareHash,object:cur.sbObj,list:cur.sbList,ref:t.shRef||cur.section,ret_data:1,friends_only:isVisible(cur.sbFriendsOnlyEl)&&(0,s.isChecked)(cur.sbFriendsOnlyEl)?1:0,close_comments:isVisible(cur.sbSettingsBtnEl)&&(0,s.isChecked)(ge("like_share_close_comments"))?1:0,mark_as_ads:u,mute_notifications:h})),_.options()),cur.shareAction="publish"}break;case _.radioBtnOptions.STORY:var p=cur.sbObj.match(/^(wall|wall_reply)(-?\d+)_(\d+)$/);if(!p)return;var v=c(p,2)[1],m={};if("wall"===v)m=Object.assign(m,{entrypoint:"story_repost",attachment:{type:"url",text:"attach_wall",url:new URL(cur.sbObj,document.baseURI).href}});else if("wall_reply"===v){var b=JSON.parse(t.shParam);m=Object.assign(m,{entrypoint:"comment_repost",stickers:[{sticker_type:"native",sticker:{can_delete:!1,action_type:"comment",action:b}}]})}window.StoryPublisher&&window.StoryPublisher.init(m),curBox().hide();break;case _.radioBtnOptions.IM:var k=cur.wdd&&cur.wdd.like_mail_dd,w=extend(n,{act:"a_send_box",from:"box",to_ids:[],entrypoint:"share",chas:cur.sbMailHash,ajax:1,title:isVisible("like_share_title_wrap")&&val("like_share_title")||"",media:cur.sbObj+(cur.sbList?"/"+cur.sbList:""),ret_data:1});if(!k||!k.selCount)return elfocus("like_im_inp");for(var g in k.selected)k.selected.hasOwnProperty(g)&&w.to_ids.push(g.replace(/_$/,""));w.to_ids=w.to_ids.join(","),ajax.post("al_im.php",Wall.fixPostParams(w),_.options()),cur.shareAction="im_send"}var f=cur.sbObj.match(/^wall_reply(-?\d+)_(\d+)$/);if(f){var y="";switch(e){case _.radioBtnOptions.WALL:y="share_to_wall";break;case _.radioBtnOptions.COMMUNITY:y="share_to_community";break;case _.radioBtnOptions.STORY:y="share_to_story";break;case _.radioBtnOptions.IM:y="share_to_message"}y&&(0,o.statlogsValueEvent)("reply_sharing_analytics",{event_type:y,owner_id:f[1],reply_id:f[2]})}}},sbCheckLen:function(e){checkTextLength(4096,e,"like_share_warn");var t=cur.wdd&&cur.wdd.like_mail_dd,i=t&&t.full&&1==t.selCount;toggle("like_share_title_wrap",t&&radioBtns.like_share.val==_.radioBtnOptions.IM&&(e.lastLen>200&&!i||val("like_share_title")))},sbReInitMediaSelector:function(e){var a=(window.data(cur.sbField,"composer")||{}).addMedia,r=a&&a.getMedias(!0),n=((t.shMediaOpts||{}).limits||[])[e]||0;cur.sbField&&Wall.deinitComposer(cur.sbField),Emoji.init(cur.sbField,{ttDiff:-48,rPointer:!0,ref:"share",noEnterSend:!0,noStickers:!0,controlsCont:cur.sbField.parentNode,checkEditable:function(){cur.sbCheckLen(cur.sbField)}}),Wall.initComposer(cur.sbField,{lang:{introText:getLang("profile_mention_start_typing"),noResult:getLang("profile_mention_not_found")},media:isVisible("like_share_add_media")?{lnk:ge("like_share_add_media"),preview:ge("like_share_media_preview"),gearEl:ge("like_share_settings_btn"),actionsEl:!1,types:t.shTypes,options:{limit:n,disabledTypes:["album","share","link","page","article","poll"],toggleLnk:!0,nocl:1,toId:i,onAddMediaChange:_.mediaChange,onMediaChange:_.mediaChange}}:void 0}),isArray(r)&&r.length&&(a=(window.data(cur.sbField,"composer")||{}).addMedia,r.slice(0,n).forEach((function(e){a.chooseMedia(e[0],e[1],e[5],null,!0)}))),_.mediaChange()}}),cur.sbHidden=!0,setTimeout(elfocus.pbind(cur.sbField),0),e.setOptions({onClean:function(){Wall.deinitComposer(cur.sbField),delete cur.sbOnShare,delete cur.sbField,cur.postTo=i,window.WideDropdown&&(WideDropdown.deinit("like_club_dd"),WideDropdown.deinit("like_mail_dd"))}}),window._mbFriends||ajax.post("hints.php",{act:"a_json_friends",from:"imwrite",str:""},{onDone:function(e){window._sbFriends=e,cur.wdd&&cur.wdd.like_mail_dd&&(e=h(e),WideDropdown.items("like_mail_dd",e))}}),hasClass(ge("like_share_club"),"disabled")||WideDropdown.init("like_club_dd",{defaultItems:t.clubs,noResult:getLang("like_club_not_found"),img:cur.sbAva,noAnim:!0,introText:getLang("like_club_choose"),onChange:function(e){curBox().changed=!0,_.rbChanged(ge("like_share_club"),_.radioBtnOptions.COMMUNITY,!0);var t=cur.wdd.like_club_dd.selCount,i=!0;return 1==e&&setTimeout(elfocus.pbind(cur.sbField),0),t<1&&!cur.sbHidden?(_.toggleAva(!1),i=1):t>0&&cur.sbHidden&&(_.toggleAva(!0),i=1),cur.sbCheckLen(cur.sbField),i}}),hasClass(ge("like_share_mail"),"disabled")||WideDropdown.init("like_mail_dd",{defaultItems:window._mbFriends,url:"hints.php",noAnim:!0,params:{act:"a_json_friends",from:"imwrite"},onDataLoaded:h,noResult:getLang("mail_not_found"),img:cur.sbAva,introText:getLang("mail_choose_recipient"),onChange:function(e){curBox().changed=!0,_.rbChanged(ge("like_share_mail"),_.radioBtnOptions.IM,!0);var t=cur.wdd.like_mail_dd,i=t.selCount,a=!0;return 1==e&&setTimeout(elfocus.pbind(cur.sbField),0),i<1&&!cur.sbHidden?(_.toggleAva(!1),a=0):i>0&&cur.sbHidden&&(_.toggleAva(!0),a=1),cur.sbCheckLen(cur.sbField),_.updateButtonLabel(_.radioBtnOptions.IM,t.selCount),a},allowMultiselectAll:!!cur.shNewUi}),each(geByClass("_like_share_about_select",curBox().bodyNode),(function(){hide(this)}));var n=radioBtns.like_share.els,d=radioBtns.like_share.val;cur.storyLayer&&hide("like_share_add_media"),_.rbChanged(n[d],d)},toggleFriendsVisibilityAccess(e){var t=(0,s.isChecked)(e),i=e.querySelector(".PostOption__iconWrapper");i.innerHTML=t?(0,d.getIcon20UnlockOutline)().icon:(0,l.getIcon20LockOutline)().icon,(0,s.checkbox)(e,!t)},toggleAva(e){var t=Fx.Transitions.easeOutCubic,i=150,a="ease-out";return e?(show(cur.sbAva),cssAnim(cur.sbAva,extend({opacity:1},_.mrg(0)),{duration:i,transition:t,func:a}),cssAnim(ge("dark_box_topic"),_.mrg(26),{duration:i,transition:t,func:a}),cur.sbHidden=!1,1):(cssAnim(cur.sbAva,extend({opacity:0},_.mrg(-26)),{duration:i,transition:t,func:a},hide.pbind(cur.sbAva)),cssAnim(ge("dark_box_topic"),_.mrg(0),{duration:i,transition:t,func:a}),cur.sbHidden=!0,0)},rbChanged(e,t,i){if(i||cur.sbReInitMediaSelector(t),cur.sbPostCheckboxEl){cur.sbFriendsOnlyEl&&(t===_.radioBtnOptions.WALL?cur.sbFriendsOnlyEl.classList.remove("like_share_friends_only_hidden"):cur.sbFriendsOnlyEl.classList.add("like_share_friends_only_hidden"));var a=ge("like_share_mark_as_ads"),n=ge("like_share_mute_notifications");if(t===_.radioBtnOptions.WALL){if(hide(a),(0,s.isChecked)(a)){var o=+domData(n,"prev-state");disable(n,0),toggleClass(n,"on",o)}}else show(a),(0,s.isChecked)(a)&&(disable(n,1),toggleClass(n,"on",1));t===_.radioBtnOptions.IM?cur.sbPostCheckboxEl.classList.add("like_share_post_checkbox_hidden"):cur.sbPostCheckboxEl.classList.remove("like_share_post_checkbox_hidden"),t===_.radioBtnOptions.STORY?hide("like_share_title_header","like_share_emoji_wrap","like_share_add_media","like_share_post_checkbox"):show("like_share_title_header","like_share_emoji_wrap","like_share_add_media","like_share_post_checkbox")}radiobtn(e,t,"like_share"),getLang("title_for_all")&&val("dark_box_topic",getLang(t===_.radioBtnOptions.IM?"title_for_mail":"title_for_all")),val("like_share_title_header",getLang(t===_.radioBtnOptions.IM?"likes_select_message":"like_select_comment")),each(geByClass("_like_share_about_select",curBox().bodyNode),(function(){hide(this)})),show(domNS(e));var d=cur.sbField&&(0,r.data)(cur.sbField,"composer");if(d&&d.addMedia){var l,c=d.addMedia,u=c.menu;if(t===_.radioBtnOptions.COMMUNITY||t===_.radioBtnOptions.WALL&&cur.sbShareOwn){if(c.limit>(c.getMedias(!0)||[]).length){var h=[];l=t===_.radioBtnOptions.COMMUNITY,each(u.types,(function(e,t){"mark_as_ads"===t[0]&&(l&&d.addMedia.markAsAds||!l)||h.push(t)})),u.setItems(h)}show(geByClass1("add_media_type_"+d.addMedia.lnkId+"_postpone",d.addMedia.menu.menuNode,"a")),cur.sbPostponeDate&&"postpone"==d.addMedia.chosenMedia[0]&&d.addMedia.chosenMediaData&&(d.addMedia.chosenMediaData.date=cur.sbPostponeDate,d.addMedia.chooseMedia("postpone",d.addMedia.chosenMedia[1],d.addMedia.chosenMediaData),hide(domFC(ge("like_share_add_media"))),cur.sbPostponeDate=!1),d.addMedia.postponePreview&&show(domPN(d.addMedia.postponePreview)),d.addMedia.markAsAds&&(l?show(domPN(geByClass1("page_preview_mark_as_ads_wrap",ge("like_share_media_preview")))):hide(domPN(geByClass1("page_preview_mark_as_ads_wrap",ge("like_share_media_preview")))))}else{if(c.limit>(c.getMedias(!0)||[]).length){var p=[];each(u.types,(function(e,t){"postpone"!==t[0]&&"mark_as_ads"!==t[0]&&p.push(t)})),u.setItems(p)}hide(geByClass1("add_media_type_"+d.addMedia.lnkId+"_postpone",d.addMedia.menu.menuNode,"a")),d.addMedia.chosenMedia&&"postpone"==d.addMedia.chosenMedia[0]&&(cur.sbPostponeDate=val("postpone_date"+d.addMedia.lnkId),val("like_share_media_preview",""),show(domFC(ge("like_share_add_media")))),d.addMedia.postponePreview&&hide(domPN(d.addMedia.postponePreview)),d.addMedia.markAsAds&&hide(domPN(geByClass1("page_preview_mark_as_ads_wrap",ge("like_share_media_preview"))))}}if(!0!==i){switch(t){case _.radioBtnOptions.WALL:if(!cur.sbHidden){var v=Fx.Transitions.easeOutCubic,m="ease-out";cssAnim(cur.sbAva,extend({opacity:0},_.mrg(-26)),{duration:150,transition:v,func:m},hide.pbind(cur.sbAva)),cssAnim(ge("dark_box_topic"),_.mrg(0),{duration:150,transition:v,func:m}),cur.sbHidden=!0}elfocus(cur.sbField);break;case _.radioBtnOptions.COMMUNITY:case _.radioBtnOptions.IM:var b=t==_.radioBtnOptions.COMMUNITY?"like_club_dd":"like_mail_dd";cur.wdd[b].selCount?elfocus(cur.sbField):WideDropdown.focus(b),WideDropdown.updimgs(b)}var k=cur.wdd.like_mail_dd?cur.wdd.like_mail_dd.selCount:0;_.updateButtonLabel(t,k)}},options:()=>({showProgress:s.lockButton.pbind("like_share_send"),hideProgress:s.unlockButton.pbind("like_share_send"),onDone:function(e,t){cur.likeData=t,(0,n.isFunction)(cur.sbOnShare)&&cur.sbOnShare(),curBox().hide(),showDoneBox(e),!cur.sbObj.indexOf(":")&&isObject(t)&&a.Likes.update(cur.sbObj,t),cur.storyLayer&&"im_send"===cur.shareAction&&cur.storyLayer.sendNavigationStatEvents("share_to_message"),window.Videoview&&/^video\-?\d+_\d+$/.test(cur.sbObj)&&Videoview.onVideoShared(cur.shareAction,cur.sbObj,cur.sbList),cur.app&&window.isFunction(cur.app.vkMiniAppShareSuccess)&&cur.app.vkMiniAppShareSuccess(t),/^(market)(.*)/.test(cur.sbObj)&&cur.onShare&&cur.onShare(cur.sbObj,t),delete cur.shareAction},onFail:function(e){return ge("like_share_error").innerHTML='<div class="msg_text">'+e+"</div>",show("like_share_error"),!0}}),updateButtonLabel(e,t){cur.shNewUi&&(cur.shButtonLabelBackup||(cur.shButtonLabelBackup=ge("like_share_send").innerHTML),e===_.radioBtnOptions.IM?ge("like_share_send").innerHTML=t>1?getLang("mail_send_separate"):getLang("mail_send2"):e===_.radioBtnOptions.STORY?ge("like_share_send").innerHTML=getLang("like_go_to_story_editor"):ge("like_share_send").innerHTML=cur.shButtonLabelBackup)}};function h(e){return e.forEach((function(e){e[9]&&e[9].is_casper&&(e[1]='<span class="chat_title_casper"><span class="chat_title_casper_text">'+e[1]+"</span></span>")})),e}},69757:(e,t,i)=>{var a=i(103539);window.ShareBox=a.ShareBox;try{window.stManager.done(window.jsc("web/sharebox.js"))}catch(e){}},283767:(e,t,i)=>{i.d(t,{parseLikeObjectId:()=>r,likePostObjectId:()=>n,likeReplyObjectId:()=>s,getElementLikeButtonCount:()=>o,getElementLikeButtonIcon:()=>d,getElementLikeButtonLabel:()=>l});var a=i(570655);function r(e){var t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;var i=(0,a.__read)(t,3);return{objectType:i[1],objectId:i[2]}}var n=function(e){return"wall"+e},s=function(e){return"wall_reply"+e},o=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_count, ._like_button_count"))&&void 0!==t?t:void 0},d=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_icon, ._like_button_icon"))&&void 0!==t?t:void 0},l=function(e){var t;return null!==(t=e.querySelector(".like_button_label, ._like_button_label"))&&void 0!==t?t:void 0}},578155:(e,t,i)=>{i.d(t,{LikeButtonTypes:()=>a});var a={like:"like",share:"share",views:"views",comment:"comment"}},431700:(e,t,i)=>{i.d(t,{SUPPORTED_OBJECT_TYPES:()=>a,SIZE_MENU:()=>r,SIZE_PREVIEW:()=>n,REACTIONS_COUNTS_RESPONSE_FIELD:()=>s});var a={wall:"wall",wall_reply:"wall_reply"},r={width:96,height:96},n={width:40,height:40},s="reactions_counts"},878012:(e,t,i)=>{i.d(t,{isVariantInActionBar:()=>r,isVariantInActionStatusBar:()=>n,isVariantHidden:()=>s,previewVisibilityUseCurrent:()=>o,isIntentPreviewInActionBar:()=>d,isIntentPreviewInActionStatusBar:()=>l,isIntentPreviewHidden:()=>c,isIntentPreviewUseCurrent:()=>u,previewVisibilityIntentForVariant:()=>_,parsePreviewVariant:()=>h});var a=i(927792),r=function(e){return e===a.PreviewVariantActionBar},n=function(e){return e===a.PreviewVariantActionStatusBar},s=function(e){return e===a.PreviewVariantHidden},o={kind:"useCurrent"},d=function(e){return e.kind===a.PreviewVariantActionBar},l=function(e){return e.kind===a.PreviewVariantActionStatusBar},c=function(e){return e.kind===a.PreviewVariantHidden},u=function(e){return"useCurrent"===e.kind},_=function(e){return e?{kind:e}:o},h=function(e){return a.PreviewVariants.includes(e)?e:void 0}},927792:(e,t,i)=>{i.d(t,{PreviewVariantActionBar:()=>a,PreviewVariantActionStatusBar:()=>r,PreviewVariantHidden:()=>n,PreviewVariants:()=>s});var a="action_bar",r="action_status_bar",n="hidden",s=[a,r,n]},993093:(e,t,i)=>{i.d(t,{reactionsCountsUpdatePayload:()=>n,isReactionsFullUpdatePayload:()=>s,reactionsCountsOnlyUpdatePayload:()=>o});var a=i(570655),r=i(677796),n=function(e,t){return(0,a.__assign)((0,a.__assign)({kind:r.PayloadKindFull},e),{reactionIdState:{reactionId:t.id}})},s=function(e){return e.kind===r.PayloadKindFull},o=function(e){return(0,a.__assign)({kind:r.PayloadKindCountsOnly},e)}},677796:(e,t,i)=>{i.d(t,{PayloadKindCountsOnly:()=>a,PayloadKindFull:()=>r});var a="counts_only",r="counts_with_current_reaction"},683393:(e,t,i)=>{i.d(t,{triggerReactionsUpdate:()=>o});var a=i(283767),r=i(431700),n=i(406108),s=i(993093),o=function(e,t,i,o){var d=(0,a.parseLikeObjectId)(e);d&&d.objectType===r.SUPPORTED_OBJECT_TYPES.wall&&d.objectId?(0,n.emitEvent)(n.WallDataEvents.post_reactions_counts_update,function(e,t,i,a){var r={counts:e,isFromWkLayer:null==t?void 0:t.isFromWkLayer,isPrimaryLikeButtonClick:null==t?void 0:t.isPrimaryLikeButtonClick,isQueueUpdate:null==t?void 0:t.isQueueUpdate,isUserAction:t.isUserAction,postFullId:i.objectId,previewVisibility:t.previewVisibility,reactionIdState:a?{reactionId:a.id}:void 0};return a?(0,s.reactionsCountsUpdatePayload)(r,a):(0,s.reactionsCountsOnlyUpdatePayload)(r)}(t,o,d,i)):d&&d.objectType===r.SUPPORTED_OBJECT_TYPES.wall_reply&&d.objectId?(0,n.emitEvent)(n.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:d.objectId,reactionIdState:i?{reactionId:i.id}:void 0}):console.warn("Unsupported reactions object update",e)}},406108:(e,t,i)=>{i.d(t,{WallDataEvents:()=>s,registerUniqueListener:()=>l,emitEvent:()=>c});var a=i(570655),r=i(970793),n=i(257451),s={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update"},o=(0,n.makeSharedState)("wall-data",(function(){return{emitter:new r.default,keyedListeners:Object.create(null)}})),d=function(e,t,i){var r,n,s=o(),d=null===(n=null===(r=s.keyedListeners)||void 0===r?void 0:r[e])||void 0===n?void 0:n[t];return d&&s.emitter.removeListener(e,d),function(e,t,i){var r,n=o();return n.emitter.addListener(e,i),n.keyedListeners[e]=(0,a.__assign)((0,a.__assign)({},n.keyedListeners[e]),((r={})[t]=i,r)),function(){var a,r;n.emitter.removeListener(e,i),(null===(a=n.keyedListeners[e])||void 0===a?void 0:a[t])===i&&(null===(r=n.keyedListeners[e])||void 0===r||delete r[t])}}(e,t,i)},l=function(e,t,i){return d(t,e,i)},c=function(e,t){o().emitter.emit(e,t)}},338354:(e,t,i)=>{i.d(t,{updateAriaLabelCounter:()=>n});var a=i(116886),r=i(578155),n=function(e,t,i){if("number"==typeof t&&e instanceof HTMLElement&&e.classList.contains("PostBottomAction")){var n=function(e){var t=void 0;switch(e){case r.LikeButtonTypes.comment:t=(0,a.getLang)("likes_comments_N_aria_short","raw");break;case r.LikeButtonTypes.like:t=(0,a.getLang)("likes_likes_N_aria_short","raw");break;case r.LikeButtonTypes.share:t=(0,a.getLang)("likes_shares_N_aria_short","raw")}return t}(i);if(n){var s=(0,a.langNumeric)(t,n,!1);e.setAttribute("aria-label",s)}}}}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return a[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=a,e=[],n.O=(t,i,a,r)=>{if(!i){var s=1/0;for(c=0;c<e.length;c++){for(var[i,a,r]=e[c],o=!0,d=0;d<i.length;d++)(!1&r||s>=r)&&Object.keys(n.O).every((e=>n.O[e](i[d])))?i.splice(d--,1):(o=!1,r<s&&(s=r));if(o){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,a,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var r=Object.create(null);n.r(r);var s={};t=t||[null,i({}),i([]),i(i)];for(var o=2&a&&e;"object"==typeof o&&!~t.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,n.d(r,s),r},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.e=()=>Promise.resolve(),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={6713:0};n.O.j=t=>0===e[t];var t=(t,i)=>{var a,r,[s,o,d]=i,l=0;for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(d)var c=d(n);for(t&&t(i);l<s.length;l++)r=s[l],n.o(e,r)&&e[r]&&e[r][0](),e[s[l]]=0;return n.O(c)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var s=n.O(void 0,[8592],(()=>n(69757)));s=n.O(s)})();